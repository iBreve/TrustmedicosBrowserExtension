(self.webpackChunktrustmedicos_dashboard=self.webpackChunktrustmedicos_dashboard||[]).push([[179],{255:t=>{function e(t){return Promise.resolve().then(()=>{var e=new Error("Cannot find module '"+t+"'");throw e.code="MODULE_NOT_FOUND",e})}e.keys=()=>[],e.resolve=e,e.id=255,t.exports=e},66:(t,e,n)=>{"use strict";function r(t){return"function"==typeof t}let i=!1;const s={Promise:void 0,set useDeprecatedSynchronousErrorHandling(t){if(t){const t=new Error;console.warn("DEPRECATED! RxJS was set to use deprecated synchronous error handling behavior by code at: \n"+t.stack)}else i&&console.log("RxJS: Back to a better error behavior. Thank you. <3");i=t},get useDeprecatedSynchronousErrorHandling(){return i}};function o(t){setTimeout(()=>{throw t},0)}const a={closed:!0,next(t){},error(t){if(s.useDeprecatedSynchronousErrorHandling)throw t;o(t)},complete(){}},u=(()=>Array.isArray||(t=>t&&"number"==typeof t.length))();function c(t){return null!==t&&"object"==typeof t}const l=(()=>{function t(t){return Error.call(this),this.message=t?`${t.length} errors occurred during unsubscription:\n${t.map((t,e)=>`${e+1}) ${t.toString()}`).join("\n  ")}`:"",this.name="UnsubscriptionError",this.errors=t,this}return t.prototype=Object.create(Error.prototype),t})();let h=(()=>{class t{constructor(t){this.closed=!1,this._parentOrParents=null,this._subscriptions=null,t&&(this._ctorUnsubscribe=!0,this._unsubscribe=t)}unsubscribe(){let e;if(this.closed)return;let{_parentOrParents:n,_ctorUnsubscribe:i,_unsubscribe:s,_subscriptions:o}=this;if(this.closed=!0,this._parentOrParents=null,this._subscriptions=null,n instanceof t)n.remove(this);else if(null!==n)for(let t=0;t<n.length;++t)n[t].remove(this);if(r(s)){i&&(this._unsubscribe=void 0);try{s.call(this)}catch(a){e=a instanceof l?d(a.errors):[a]}}if(u(o)){let t=-1,n=o.length;for(;++t<n;){const n=o[t];if(c(n))try{n.unsubscribe()}catch(a){e=e||[],a instanceof l?e=e.concat(d(a.errors)):e.push(a)}}}if(e)throw new l(e)}add(e){let n=e;if(!e)return t.EMPTY;switch(typeof e){case"function":n=new t(e);case"object":if(n===this||n.closed||"function"!=typeof n.unsubscribe)return n;if(this.closed)return n.unsubscribe(),n;if(!(n instanceof t)){const e=n;n=new t,n._subscriptions=[e]}break;default:throw new Error("unrecognized teardown "+e+" added to Subscription.")}let{_parentOrParents:r}=n;if(null===r)n._parentOrParents=this;else if(r instanceof t){if(r===this)return n;n._parentOrParents=[r,this]}else{if(-1!==r.indexOf(this))return n;r.push(this)}const i=this._subscriptions;return null===i?this._subscriptions=[n]:i.push(n),n}remove(t){const e=this._subscriptions;if(e){const n=e.indexOf(t);-1!==n&&e.splice(n,1)}}}return t.EMPTY=function(t){return t.closed=!0,t}(new t),t})();function d(t){return t.reduce((t,e)=>t.concat(e instanceof l?e.errors:e),[])}const f=(()=>"function"==typeof Symbol?Symbol("rxSubscriber"):"@@rxSubscriber_"+Math.random())();class p extends h{constructor(t,e,n){switch(super(),this.syncErrorValue=null,this.syncErrorThrown=!1,this.syncErrorThrowable=!1,this.isStopped=!1,arguments.length){case 0:this.destination=a;break;case 1:if(!t){this.destination=a;break}if("object"==typeof t){t instanceof p?(this.syncErrorThrowable=t.syncErrorThrowable,this.destination=t,t.add(this)):(this.syncErrorThrowable=!0,this.destination=new g(this,t));break}default:this.syncErrorThrowable=!0,this.destination=new g(this,t,e,n)}}[f](){return this}static create(t,e,n){const r=new p(t,e,n);return r.syncErrorThrowable=!1,r}next(t){this.isStopped||this._next(t)}error(t){this.isStopped||(this.isStopped=!0,this._error(t))}complete(){this.isStopped||(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe())}_next(t){this.destination.next(t)}_error(t){this.destination.error(t),this.unsubscribe()}_complete(){this.destination.complete(),this.unsubscribe()}_unsubscribeAndRecycle(){const{_parentOrParents:t}=this;return this._parentOrParents=null,this.unsubscribe(),this.closed=!1,this.isStopped=!1,this._parentOrParents=t,this}}class g extends p{constructor(t,e,n,i){let s;super(),this._parentSubscriber=t;let o=this;r(e)?s=e:e&&(s=e.next,n=e.error,i=e.complete,e!==a&&(o=Object.create(e),r(o.unsubscribe)&&this.add(o.unsubscribe.bind(o)),o.unsubscribe=this.unsubscribe.bind(this))),this._context=o,this._next=s,this._error=n,this._complete=i}next(t){if(!this.isStopped&&this._next){const{_parentSubscriber:e}=this;s.useDeprecatedSynchronousErrorHandling&&e.syncErrorThrowable?this.__tryOrSetError(e,this._next,t)&&this.unsubscribe():this.__tryOrUnsub(this._next,t)}}error(t){if(!this.isStopped){const{_parentSubscriber:e}=this,{useDeprecatedSynchronousErrorHandling:n}=s;if(this._error)n&&e.syncErrorThrowable?(this.__tryOrSetError(e,this._error,t),this.unsubscribe()):(this.__tryOrUnsub(this._error,t),this.unsubscribe());else if(e.syncErrorThrowable)n?(e.syncErrorValue=t,e.syncErrorThrown=!0):o(t),this.unsubscribe();else{if(this.unsubscribe(),n)throw t;o(t)}}}complete(){if(!this.isStopped){const{_parentSubscriber:t}=this;if(this._complete){const e=()=>this._complete.call(this._context);s.useDeprecatedSynchronousErrorHandling&&t.syncErrorThrowable?(this.__tryOrSetError(t,e),this.unsubscribe()):(this.__tryOrUnsub(e),this.unsubscribe())}else this.unsubscribe()}}__tryOrUnsub(t,e){try{t.call(this._context,e)}catch(n){if(this.unsubscribe(),s.useDeprecatedSynchronousErrorHandling)throw n;o(n)}}__tryOrSetError(t,e,n){if(!s.useDeprecatedSynchronousErrorHandling)throw new Error("bad call");try{e.call(this._context,n)}catch(r){return s.useDeprecatedSynchronousErrorHandling?(t.syncErrorValue=r,t.syncErrorThrown=!0,!0):(o(r),!0)}return!1}_unsubscribe(){const{_parentSubscriber:t}=this;this._context=null,this._parentSubscriber=null,t.unsubscribe()}}const m=(()=>"function"==typeof Symbol&&Symbol.observable||"@@observable")();function y(t){return t}function v(...t){return w(t)}function w(t){return 0===t.length?y:1===t.length?t[0]:function(e){return t.reduce((t,e)=>e(t),e)}}let b=(()=>{class t{constructor(t){this._isScalar=!1,t&&(this._subscribe=t)}lift(e){const n=new t;return n.source=this,n.operator=e,n}subscribe(t,e,n){const{operator:r}=this,i=function(t,e,n){if(t){if(t instanceof p)return t;if(t[f])return t[f]()}return t||e||n?new p(t,e,n):new p(a)}(t,e,n);if(i.add(r?r.call(i,this.source):this.source||s.useDeprecatedSynchronousErrorHandling&&!i.syncErrorThrowable?this._subscribe(i):this._trySubscribe(i)),s.useDeprecatedSynchronousErrorHandling&&i.syncErrorThrowable&&(i.syncErrorThrowable=!1,i.syncErrorThrown))throw i.syncErrorValue;return i}_trySubscribe(t){try{return this._subscribe(t)}catch(e){s.useDeprecatedSynchronousErrorHandling&&(t.syncErrorThrown=!0,t.syncErrorValue=e),function(t){for(;t;){const{closed:e,destination:n,isStopped:r}=t;if(e||r)return!1;t=n&&n instanceof p?n:null}return!0}(t)?t.error(e):console.warn(e)}}forEach(t,e){return new(e=_(e))((e,n)=>{let r;r=this.subscribe(e=>{try{t(e)}catch(i){n(i),r&&r.unsubscribe()}},n,e)})}_subscribe(t){const{source:e}=this;return e&&e.subscribe(t)}[m](){return this}pipe(...t){return 0===t.length?this:w(t)(this)}toPromise(t){return new(t=_(t))((t,e)=>{let n;this.subscribe(t=>n=t,t=>e(t),()=>t(n))})}}return t.create=e=>new t(e),t})();function _(t){if(t||(t=s.Promise||Promise),!t)throw new Error("no Promise impl found");return t}const I=(()=>{function t(){return Error.call(this),this.message="object unsubscribed",this.name="ObjectUnsubscribedError",this}return t.prototype=Object.create(Error.prototype),t})();class S extends h{constructor(t,e){super(),this.subject=t,this.subscriber=e,this.closed=!1}unsubscribe(){if(this.closed)return;this.closed=!0;const t=this.subject,e=t.observers;if(this.subject=null,!e||0===e.length||t.isStopped||t.closed)return;const n=e.indexOf(this.subscriber);-1!==n&&e.splice(n,1)}}class E extends p{constructor(t){super(t),this.destination=t}}let T=(()=>{class t extends b{constructor(){super(),this.observers=[],this.closed=!1,this.isStopped=!1,this.hasError=!1,this.thrownError=null}[f](){return new E(this)}lift(t){const e=new C(this,this);return e.operator=t,e}next(t){if(this.closed)throw new I;if(!this.isStopped){const{observers:e}=this,n=e.length,r=e.slice();for(let i=0;i<n;i++)r[i].next(t)}}error(t){if(this.closed)throw new I;this.hasError=!0,this.thrownError=t,this.isStopped=!0;const{observers:e}=this,n=e.length,r=e.slice();for(let i=0;i<n;i++)r[i].error(t);this.observers.length=0}complete(){if(this.closed)throw new I;this.isStopped=!0;const{observers:t}=this,e=t.length,n=t.slice();for(let r=0;r<e;r++)n[r].complete();this.observers.length=0}unsubscribe(){this.isStopped=!0,this.closed=!0,this.observers=null}_trySubscribe(t){if(this.closed)throw new I;return super._trySubscribe(t)}_subscribe(t){if(this.closed)throw new I;return this.hasError?(t.error(this.thrownError),h.EMPTY):this.isStopped?(t.complete(),h.EMPTY):(this.observers.push(t),new S(this,t))}asObservable(){const t=new b;return t.source=this,t}}return t.create=(t,e)=>new C(t,e),t})();class C extends T{constructor(t,e){super(),this.destination=t,this.source=e}next(t){const{destination:e}=this;e&&e.next&&e.next(t)}error(t){const{destination:e}=this;e&&e.error&&this.destination.error(t)}complete(){const{destination:t}=this;t&&t.complete&&this.destination.complete()}_subscribe(t){const{source:e}=this;return e?this.source.subscribe(t):h.EMPTY}}function k(t){return t&&"function"==typeof t.schedule}function A(t,e){return function(n){if("function"!=typeof t)throw new TypeError("argument is not a function. Are you looking for `mapTo()`?");return n.lift(new x(t,e))}}class x{constructor(t,e){this.project=t,this.thisArg=e}call(t,e){return e.subscribe(new O(t,this.project,this.thisArg))}}class O extends p{constructor(t,e,n){super(t),this.project=e,this.count=0,this.thisArg=n||this}_next(t){let e;try{e=this.project.call(this.thisArg,t,this.count++)}catch(n){return void this.destination.error(n)}this.destination.next(e)}}const D=t=>e=>{for(let n=0,r=t.length;n<r&&!e.closed;n++)e.next(t[n]);e.complete()};function N(){return"function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator"}const R=N(),P=t=>t&&"number"==typeof t.length&&"function"!=typeof t;function M(t){return!!t&&"function"!=typeof t.subscribe&&"function"==typeof t.then}const L=t=>{if(t&&"function"==typeof t[m])return n=t,t=>{const e=n[m]();if("function"!=typeof e.subscribe)throw new TypeError("Provided object does not correctly implement Symbol.observable");return e.subscribe(t)};if(P(t))return D(t);if(M(t))return(t=>e=>(t.then(t=>{e.closed||(e.next(t),e.complete())},t=>e.error(t)).then(null,o),e))(t);if(t&&"function"==typeof t[R])return e=t,t=>{const n=e[R]();for(;;){let e;try{e=n.next()}catch(r){return t.error(r),t}if(e.done){t.complete();break}if(t.next(e.value),t.closed)break}return"function"==typeof n.return&&t.add(()=>{n.return&&n.return()}),t};{const e=c(t)?"an invalid object":`'${t}'`;throw new TypeError(`You provided ${e} where a stream was expected. You can provide an Observable, Promise, Array, or Iterable.`)}var e,n};function V(t,e){return new b(n=>{const r=new h;let i=0;return r.add(e.schedule(function(){i!==t.length?(n.next(t[i++]),n.closed||r.add(this.schedule())):n.complete()})),r})}function F(t,e){return e?function(t,e){if(null!=t){if(function(t){return t&&"function"==typeof t[m]}(t))return function(t,e){return new b(n=>{const r=new h;return r.add(e.schedule(()=>{const i=t[m]();r.add(i.subscribe({next(t){r.add(e.schedule(()=>n.next(t)))},error(t){r.add(e.schedule(()=>n.error(t)))},complete(){r.add(e.schedule(()=>n.complete()))}}))})),r})}(t,e);if(M(t))return function(t,e){return new b(n=>{const r=new h;return r.add(e.schedule(()=>t.then(t=>{r.add(e.schedule(()=>{n.next(t),r.add(e.schedule(()=>n.complete()))}))},t=>{r.add(e.schedule(()=>n.error(t)))}))),r})}(t,e);if(P(t))return V(t,e);if(function(t){return t&&"function"==typeof t[R]}(t)||"string"==typeof t)return function(t,e){if(!t)throw new Error("Iterable cannot be null");return new b(n=>{const r=new h;let i;return r.add(()=>{i&&"function"==typeof i.return&&i.return()}),r.add(e.schedule(()=>{i=t[R](),r.add(e.schedule(function(){if(n.closed)return;let t,e;try{const n=i.next();t=n.value,e=n.done}catch(r){return void n.error(r)}e?n.complete():(n.next(t),this.schedule())}))})),r})}(t,e)}throw new TypeError((null!==t&&typeof t||t)+" is not observable")}(t,e):t instanceof b?t:new b(L(t))}class U extends p{constructor(t){super(),this.parent=t}_next(t){this.parent.notifyNext(t)}_error(t){this.parent.notifyError(t),this.unsubscribe()}_complete(){this.parent.notifyComplete(),this.unsubscribe()}}class j extends p{notifyNext(t){this.destination.next(t)}notifyError(t){this.destination.error(t)}notifyComplete(){this.destination.complete()}}function B(t,e){if(e.closed)return;if(t instanceof b)return t.subscribe(e);let n;try{n=L(t)(e)}catch(r){e.error(r)}return n}function $(t,e,n=Number.POSITIVE_INFINITY){return"function"==typeof e?r=>r.pipe($((n,r)=>F(t(n,r)).pipe(A((t,i)=>e(n,t,r,i))),n)):("number"==typeof e&&(n=e),e=>e.lift(new q(t,n)))}class q{constructor(t,e=Number.POSITIVE_INFINITY){this.project=t,this.concurrent=e}call(t,e){return e.subscribe(new H(t,this.project,this.concurrent))}}class H extends j{constructor(t,e,n=Number.POSITIVE_INFINITY){super(t),this.project=e,this.concurrent=n,this.hasCompleted=!1,this.buffer=[],this.active=0,this.index=0}_next(t){this.active<this.concurrent?this._tryNext(t):this.buffer.push(t)}_tryNext(t){let e;const n=this.index++;try{e=this.project(t,n)}catch(r){return void this.destination.error(r)}this.active++,this._innerSub(e)}_innerSub(t){const e=new U(this),n=this.destination;n.add(e);const r=B(t,e);r!==e&&n.add(r)}_complete(){this.hasCompleted=!0,0===this.active&&0===this.buffer.length&&this.destination.complete(),this.unsubscribe()}notifyNext(t){this.destination.next(t)}notifyComplete(){const t=this.buffer;this.active--,t.length>0?this._next(t.shift()):0===this.active&&this.hasCompleted&&this.destination.complete()}}function z(t=Number.POSITIVE_INFINITY){return $(y,t)}function K(t,e){return e?V(t,e):new b(D(t))}function G(){return function(t){return t.lift(new W(t))}}class W{constructor(t){this.connectable=t}call(t,e){const{connectable:n}=this;n._refCount++;const r=new Q(t,n),i=e.subscribe(r);return r.closed||(r.connection=n.connect()),i}}class Q extends p{constructor(t,e){super(t),this.connectable=e}_unsubscribe(){const{connectable:t}=this;if(!t)return void(this.connection=null);this.connectable=null;const e=t._refCount;if(e<=0)return void(this.connection=null);if(t._refCount=e-1,e>1)return void(this.connection=null);const{connection:n}=this,r=t._connection;this.connection=null,!r||n&&r!==n||r.unsubscribe()}}class Y extends b{constructor(t,e){super(),this.source=t,this.subjectFactory=e,this._refCount=0,this._isComplete=!1}_subscribe(t){return this.getSubject().subscribe(t)}getSubject(){const t=this._subject;return t&&!t.isStopped||(this._subject=this.subjectFactory()),this._subject}connect(){let t=this._connection;return t||(this._isComplete=!1,t=this._connection=new h,t.add(this.source.subscribe(new X(this.getSubject(),this))),t.closed&&(this._connection=null,t=h.EMPTY)),t}refCount(){return G()(this)}}const J=(()=>{const t=Y.prototype;return{operator:{value:null},_refCount:{value:0,writable:!0},_subject:{value:null,writable:!0},_connection:{value:null,writable:!0},_subscribe:{value:t._subscribe},_isComplete:{value:t._isComplete,writable:!0},getSubject:{value:t.getSubject},connect:{value:t.connect},refCount:{value:t.refCount}}})();class X extends E{constructor(t,e){super(t),this.connectable=e}_error(t){this._unsubscribe(),super._error(t)}_complete(){this.connectable._isComplete=!0,this._unsubscribe(),super._complete()}_unsubscribe(){const t=this.connectable;if(t){this.connectable=null;const e=t._connection;t._refCount=0,t._subject=null,t._connection=null,e&&e.unsubscribe()}}}function Z(){return new T}function tt(t){for(let e in t)if(t[e]===tt)return e;throw Error("Could not find renamed property on target object.")}function et(t,e){for(const n in e)e.hasOwnProperty(n)&&!t.hasOwnProperty(n)&&(t[n]=e[n])}function nt(t){if("string"==typeof t)return t;if(Array.isArray(t))return"["+t.map(nt).join(", ")+"]";if(null==t)return""+t;if(t.overriddenName)return`${t.overriddenName}`;if(t.name)return`${t.name}`;const e=t.toString();if(null==e)return""+e;const n=e.indexOf("\n");return-1===n?e:e.substring(0,n)}function rt(t,e){return null==t||""===t?null===e?"":e:null==e||""===e?t:t+" "+e}const it=tt({__forward_ref__:tt});function st(t){return t.__forward_ref__=st,t.toString=function(){return nt(this())},t}function ot(t){return at(t)?t():t}function at(t){return"function"==typeof t&&t.hasOwnProperty(it)&&t.__forward_ref__===st}class ut extends Error{constructor(t,e){super(function(t,e){return`${t?`NG0${t}: `:""}${e}`}(t,e)),this.code=t}}function ct(t){return"string"==typeof t?t:null==t?"":String(t)}function lt(t){return"function"==typeof t?t.name||t.toString():"object"==typeof t&&null!=t&&"function"==typeof t.type?t.type.name||t.type.toString():ct(t)}function ht(t,e){const n=e?` in ${e}`:"";throw new ut("201",`No provider for ${lt(t)} found${n}`)}function dt(t){return{token:t.token,providedIn:t.providedIn||null,factory:t.factory,value:void 0}}function ft(t){return{providers:t.providers||[],imports:t.imports||[]}}function pt(t){return gt(t,yt)||gt(t,wt)}function gt(t,e){return t.hasOwnProperty(e)?t[e]:null}function mt(t){return t&&(t.hasOwnProperty(vt)||t.hasOwnProperty(bt))?t[vt]:null}const yt=tt({"\u0275prov":tt}),vt=tt({"\u0275inj":tt}),wt=tt({ngInjectableDef:tt}),bt=tt({ngInjectorDef:tt});var _t=function(t){return t[t.Default=0]="Default",t[t.Host=1]="Host",t[t.Self=2]="Self",t[t.SkipSelf=4]="SkipSelf",t[t.Optional=8]="Optional",t}({});let It;function St(t){const e=It;return It=t,e}function Et(t,e,n){const r=pt(t);return r&&"root"==r.providedIn?void 0===r.value?r.value=r.factory():r.value:n&_t.Optional?null:void 0!==e?e:void ht(nt(t),"Injector")}function Tt(t){return{toString:t}.toString()}var Ct=function(t){return t[t.OnPush=0]="OnPush",t[t.Default=1]="Default",t}({}),kt=function(t){return t[t.Emulated=0]="Emulated",t[t.None=2]="None",t[t.ShadowDom=3]="ShadowDom",t}({});const At="undefined"!=typeof globalThis&&globalThis,xt="undefined"!=typeof window&&window,Ot="undefined"!=typeof self&&"undefined"!=typeof WorkerGlobalScope&&self instanceof WorkerGlobalScope&&self,Dt="undefined"!=typeof global&&global,Nt=At||Dt||xt||Ot,Rt={},Pt=[],Mt=tt({"\u0275cmp":tt}),Lt=tt({"\u0275dir":tt}),Vt=tt({"\u0275pipe":tt}),Ft=tt({"\u0275mod":tt}),Ut=tt({"\u0275loc":tt}),jt=tt({"\u0275fac":tt}),Bt=tt({__NG_ELEMENT_ID__:tt});let $t=0;function qt(t){return Tt(()=>{const e={},n={type:t.type,providersResolver:null,decls:t.decls,vars:t.vars,factory:null,template:t.template||null,consts:t.consts||null,ngContentSelectors:t.ngContentSelectors,hostBindings:t.hostBindings||null,hostVars:t.hostVars||0,hostAttrs:t.hostAttrs||null,contentQueries:t.contentQueries||null,declaredInputs:e,inputs:null,outputs:null,exportAs:t.exportAs||null,onPush:t.changeDetection===Ct.OnPush,directiveDefs:null,pipeDefs:null,selectors:t.selectors||Pt,viewQuery:t.viewQuery||null,features:t.features||null,data:t.data||{},encapsulation:t.encapsulation||kt.Emulated,id:"c",styles:t.styles||Pt,_:null,setInput:null,schemas:t.schemas||null,tView:null},r=t.directives,i=t.features,s=t.pipes;return n.id+=$t++,n.inputs=Wt(t.inputs,e),n.outputs=Wt(t.outputs),i&&i.forEach(t=>t(n)),n.directiveDefs=r?()=>("function"==typeof r?r():r).map(Ht):null,n.pipeDefs=s?()=>("function"==typeof s?s():s).map(zt):null,n})}function Ht(t){return Yt(t)||function(t){return t[Lt]||null}(t)}function zt(t){return function(t){return t[Vt]||null}(t)}const Kt={};function Gt(t){return Tt(()=>{const e={type:t.type,bootstrap:t.bootstrap||Pt,declarations:t.declarations||Pt,imports:t.imports||Pt,exports:t.exports||Pt,transitiveCompileScopes:null,schemas:t.schemas||null,id:t.id||null};return null!=t.id&&(Kt[t.id]=t.type),e})}function Wt(t,e){if(null==t)return Rt;const n={};for(const r in t)if(t.hasOwnProperty(r)){let i=t[r],s=i;Array.isArray(i)&&(s=i[1],i=i[0]),n[i]=r,e&&(e[i]=s)}return n}const Qt=qt;function Yt(t){return t[Mt]||null}function Jt(t,e){const n=t[Ft]||null;if(!n&&!0===e)throw new Error(`Type ${nt(t)} does not have '\u0275mod' property.`);return n}const Xt=20,Zt=10;function te(t){return Array.isArray(t)&&"object"==typeof t[1]}function ee(t){return Array.isArray(t)&&!0===t[1]}function ne(t){return 0!=(8&t.flags)}function re(t){return 2==(2&t.flags)}function ie(t){return 1==(1&t.flags)}function se(t){return null!==t.template}function oe(t,e){return t.hasOwnProperty(jt)?t[jt]:null}class ae{constructor(t,e,n){this.previousValue=t,this.currentValue=e,this.firstChange=n}isFirstChange(){return this.firstChange}}function ue(){return ce}function ce(t){return t.type.prototype.ngOnChanges&&(t.setInput=he),le}function le(){const t=de(this),e=null==t?void 0:t.current;if(e){const n=t.previous;if(n===Rt)t.previous=e;else for(let t in e)n[t]=e[t];t.current=null,this.ngOnChanges(e)}}function he(t,e,n,r){const i=de(t)||function(t,e){return t.__ngSimpleChanges__=e}(t,{previous:Rt,current:null}),s=i.current||(i.current={}),o=i.previous,a=this.declaredInputs[n],u=o[a];s[a]=new ae(u&&u.currentValue,e,o===Rt),t[r]=e}function de(t){return t.__ngSimpleChanges__||null}let fe;function pe(t){return!!t.listen}ue.ngInherit=!0;const ge={createRenderer:(t,e)=>void 0!==fe?fe:"undefined"!=typeof document?document:void 0};function me(t){for(;Array.isArray(t);)t=t[0];return t}function ye(t,e){return me(e[t])}function ve(t,e){return me(e[t.index])}function we(t,e){return t.data[e]}function be(t,e){const n=e[t];return te(n)?n:n[0]}function _e(t){return 128==(128&t[2])}function Ie(t,e){return null==e?null:t[e]}function Se(t){t[18]=0}function Ee(t,e){t[5]+=e;let n=t,r=t[3];for(;null!==r&&(1===e&&1===n[5]||-1===e&&0===n[5]);)r[5]+=e,n=r,r=r[3]}const Te={lFrame:qe(null),bindingsEnabled:!0,isInCheckNoChangesMode:!1};function Ce(){return Te.bindingsEnabled}function ke(){return Te.lFrame.lView}function Ae(){return Te.lFrame.tView}function xe(){let t=Oe();for(;null!==t&&64===t.type;)t=t.parent;return t}function Oe(){return Te.lFrame.currentTNode}function De(t,e){const n=Te.lFrame;n.currentTNode=t,n.isParent=e}function Ne(){return Te.lFrame.isParent}function Re(){return Te.isInCheckNoChangesMode}function Pe(t){Te.isInCheckNoChangesMode=t}function Me(){return Te.lFrame.bindingIndex++}function Le(t,e){const n=Te.lFrame;n.bindingIndex=n.bindingRootIndex=t,Ve(e)}function Ve(t){Te.lFrame.currentDirectiveIndex=t}function Fe(t){Te.lFrame.currentQueryIndex=t}function Ue(t){const e=t[1];return 2===e.type?e.declTNode:1===e.type?t[6]:null}function je(t,e,n){if(n&_t.SkipSelf){let r=e,i=t;for(;r=r.parent,!(null!==r||n&_t.Host||(r=Ue(i),null===r)||(i=i[15],10&r.type)););if(null===r)return!1;e=r,t=i}const r=Te.lFrame=$e();return r.currentTNode=e,r.lView=t,!0}function Be(t){const e=$e(),n=t[1];Te.lFrame=e,e.currentTNode=n.firstChild,e.lView=t,e.tView=n,e.contextLView=t,e.bindingIndex=n.bindingStartIndex,e.inI18n=!1}function $e(){const t=Te.lFrame,e=null===t?null:t.child;return null===e?qe(t):e}function qe(t){const e={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:t,child:null,inI18n:!1};return null!==t&&(t.child=e),e}function He(){const t=Te.lFrame;return Te.lFrame=t.parent,t.currentTNode=null,t.lView=null,t}const ze=He;function Ke(){const t=He();t.isParent=!0,t.tView=null,t.selectedIndex=-1,t.contextLView=null,t.elementDepthCount=0,t.currentDirectiveIndex=-1,t.currentNamespace=null,t.bindingRootIndex=-1,t.bindingIndex=-1,t.currentQueryIndex=0}function Ge(){return Te.lFrame.selectedIndex}function We(t){Te.lFrame.selectedIndex=t}function Qe(){const t=Te.lFrame;return we(t.tView,t.selectedIndex)}function Ye(t,e){for(let n=e.directiveStart,r=e.directiveEnd;n<r;n++){const e=t.data[n].type.prototype,{ngAfterContentInit:r,ngAfterContentChecked:i,ngAfterViewInit:s,ngAfterViewChecked:o,ngOnDestroy:a}=e;r&&(t.contentHooks||(t.contentHooks=[])).push(-n,r),i&&((t.contentHooks||(t.contentHooks=[])).push(n,i),(t.contentCheckHooks||(t.contentCheckHooks=[])).push(n,i)),s&&(t.viewHooks||(t.viewHooks=[])).push(-n,s),o&&((t.viewHooks||(t.viewHooks=[])).push(n,o),(t.viewCheckHooks||(t.viewCheckHooks=[])).push(n,o)),null!=a&&(t.destroyHooks||(t.destroyHooks=[])).push(n,a)}}function Je(t,e,n){tn(t,e,3,n)}function Xe(t,e,n,r){(3&t[2])===n&&tn(t,e,n,r)}function Ze(t,e){let n=t[2];(3&n)===e&&(n&=2047,n+=1,t[2]=n)}function tn(t,e,n,r){const i=null!=r?r:-1,s=e.length-1;let o=0;for(let a=void 0!==r?65535&t[18]:0;a<s;a++)if("number"==typeof e[a+1]){if(o=e[a],null!=r&&o>=r)break}else e[a]<0&&(t[18]+=65536),(o<i||-1==i)&&(en(t,n,e,a),t[18]=(4294901760&t[18])+a+2),a++}function en(t,e,n,r){const i=n[r]<0,s=n[r+1],o=t[i?-n[r]:n[r]];if(i){if(t[2]>>11<t[18]>>16&&(3&t[2])===e){t[2]+=2048;try{s.call(o)}finally{}}}else try{s.call(o)}finally{}}const nn=-1;class rn{constructor(t,e,n){this.factory=t,this.resolving=!1,this.canSeeViewProviders=e,this.injectImpl=n}}function sn(t,e,n){const r=pe(t);let i=0;for(;i<n.length;){const s=n[i];if("number"==typeof s){if(0!==s)break;i++;const o=n[i++],a=n[i++],u=n[i++];r?t.setAttribute(e,a,u,o):e.setAttributeNS(o,a,u)}else{const o=s,a=n[++i];an(o)?r&&t.setProperty(e,o,a):r?t.setAttribute(e,o,a):e.setAttribute(o,a),i++}}return i}function on(t){return 3===t||4===t||6===t}function an(t){return 64===t.charCodeAt(0)}function un(t,e){if(null===e||0===e.length);else if(null===t||0===t.length)t=e.slice();else{let n=-1;for(let r=0;r<e.length;r++){const i=e[r];"number"==typeof i?n=i:0===n||cn(t,n,i,null,-1===n||2===n?e[++r]:null)}}return t}function cn(t,e,n,r,i){let s=0,o=t.length;if(-1===e)o=-1;else for(;s<t.length;){const n=t[s++];if("number"==typeof n){if(n===e){o=-1;break}if(n>e){o=s-1;break}}}for(;s<t.length;){const e=t[s];if("number"==typeof e)break;if(e===n){if(null===r)return void(null!==i&&(t[s+1]=i));if(r===t[s+1])return void(t[s+2]=i)}s++,null!==r&&s++,null!==i&&s++}-1!==o&&(t.splice(o,0,e),s=o+1),t.splice(s++,0,n),null!==r&&t.splice(s++,0,r),null!==i&&t.splice(s++,0,i)}function ln(t){return t!==nn}function hn(t){return 32767&t}function dn(t,e){let n=t>>16,r=e;for(;n>0;)r=r[15],n--;return r}let fn=!0;function pn(t){const e=fn;return fn=t,e}let gn=0;function mn(t,e){const n=vn(t,e);if(-1!==n)return n;const r=e[1];r.firstCreatePass&&(t.injectorIndex=e.length,yn(r.data,t),yn(e,null),yn(r.blueprint,null));const i=wn(t,e),s=t.injectorIndex;if(ln(i)){const t=hn(i),n=dn(i,e),r=n[1].data;for(let i=0;i<8;i++)e[s+i]=n[t+i]|r[t+i]}return e[s+8]=i,s}function yn(t,e){t.push(0,0,0,0,0,0,0,0,e)}function vn(t,e){return-1===t.injectorIndex||t.parent&&t.parent.injectorIndex===t.injectorIndex||null===e[t.injectorIndex+8]?-1:t.injectorIndex}function wn(t,e){if(t.parent&&-1!==t.parent.injectorIndex)return t.parent.injectorIndex;let n=0,r=null,i=e;for(;null!==i;){const t=i[1],e=t.type;if(r=2===e?t.declTNode:1===e?i[6]:null,null===r)return nn;if(n++,i=i[15],-1!==r.injectorIndex)return r.injectorIndex|n<<16}return nn}function bn(t,e,n){!function(t,e,n){let r;"string"==typeof n?r=n.charCodeAt(0)||0:n.hasOwnProperty(Bt)&&(r=n[Bt]),null==r&&(r=n[Bt]=gn++);const i=255&r;e.data[t+(i>>5)]|=1<<i}(t,e,n)}function _n(t,e,n){if(n&_t.Optional)return t;ht(e,"NodeInjector")}function In(t,e,n,r){if(n&_t.Optional&&void 0===r&&(r=null),0==(n&(_t.Self|_t.Host))){const i=t[9],s=St(void 0);try{return i?i.get(e,r,n&_t.Optional):Et(e,r,n&_t.Optional)}finally{St(s)}}return _n(r,e,n)}function Sn(t,e,n,r=_t.Default,i){if(null!==t){const s=function(t){if("string"==typeof t)return t.charCodeAt(0)||0;const e=t.hasOwnProperty(Bt)?t[Bt]:void 0;return"number"==typeof e?e>=0?255&e:Tn:e}(n);if("function"==typeof s){if(!je(e,t,r))return r&_t.Host?_n(i,n,r):In(e,n,r,i);try{const t=s(r);if(null!=t||r&_t.Optional)return t;ht(n)}finally{ze()}}else if("number"==typeof s){let i=null,o=vn(t,e),a=nn,u=r&_t.Host?e[16][6]:null;for((-1===o||r&_t.SkipSelf)&&(a=-1===o?wn(t,e):e[o+8],a!==nn&&xn(r,!1)?(i=e[1],o=hn(a),e=dn(a,e)):o=-1);-1!==o;){const t=e[1];if(An(s,o,t.data)){const t=Cn(o,e,n,i,r,u);if(t!==En)return t}a=e[o+8],a!==nn&&xn(r,e[1].data[o+8]===u)&&An(s,o,e)?(i=t,o=hn(a),e=dn(a,e)):o=-1}}}return In(e,n,r,i)}const En={};function Tn(){return new On(xe(),ke())}function Cn(t,e,n,r,i,s){const o=e[1],a=o.data[t+8],u=function(t,e,n,r,i){const s=t.providerIndexes,o=e.data,a=1048575&s,u=t.directiveStart,c=s>>20,l=i?a+c:t.directiveEnd;for(let h=r?a:a+c;h<l;h++){const t=o[h];if(h<u&&n===t||h>=u&&t.type===n)return h}if(i){const t=o[u];if(t&&se(t)&&t.type===n)return u}return null}(a,o,n,null==r?re(a)&&fn:r!=o&&0!=(3&a.type),i&_t.Host&&s===a);return null!==u?kn(e,o,u,a):En}function kn(t,e,n,r){let i=t[n];const s=e.data;if(i instanceof rn){const o=i;o.resolving&&function(t,e){throw new ut("200",`Circular dependency in DI detected for ${t}`)}(lt(s[n]));const a=pn(o.canSeeViewProviders);o.resolving=!0;const u=o.injectImpl?St(o.injectImpl):null;je(t,r,_t.Default);try{i=t[n]=o.factory(void 0,s,t,r),e.firstCreatePass&&n>=r.directiveStart&&function(t,e,n){const{ngOnChanges:r,ngOnInit:i,ngDoCheck:s}=e.type.prototype;if(r){const r=ce(e);(n.preOrderHooks||(n.preOrderHooks=[])).push(t,r),(n.preOrderCheckHooks||(n.preOrderCheckHooks=[])).push(t,r)}i&&(n.preOrderHooks||(n.preOrderHooks=[])).push(0-t,i),s&&((n.preOrderHooks||(n.preOrderHooks=[])).push(t,s),(n.preOrderCheckHooks||(n.preOrderCheckHooks=[])).push(t,s))}(n,s[n],e)}finally{null!==u&&St(u),pn(a),o.resolving=!1,ze()}}return i}function An(t,e,n){return!!(n[e+(t>>5)]&1<<t)}function xn(t,e){return!(t&_t.Self||t&_t.Host&&e)}class On{constructor(t,e){this._tNode=t,this._lView=e}get(t,e){return Sn(this._tNode,this._lView,t,void 0,e)}}function Dn(t){return Tt(()=>{const e=t.prototype.constructor,n=e[jt]||Nn(e),r=Object.prototype;let i=Object.getPrototypeOf(t.prototype).constructor;for(;i&&i!==r;){const t=i[jt]||Nn(i);if(t&&t!==n)return t;i=Object.getPrototypeOf(i)}return t=>new t})}function Nn(t){return at(t)?()=>{const e=Nn(ot(t));return e&&e()}:oe(t)}const Rn="__parameters__";function Pn(t,e,n){return Tt(()=>{const r=function(t){return function(...e){if(t){const n=t(...e);for(const t in n)this[t]=n[t]}}}(e);function i(...t){if(this instanceof i)return r.apply(this,t),this;const e=new i(...t);return n.annotation=e,n;function n(t,n,r){const i=t.hasOwnProperty(Rn)?t[Rn]:Object.defineProperty(t,Rn,{value:[]})[Rn];for(;i.length<=r;)i.push(null);return(i[r]=i[r]||[]).push(e),t}}return n&&(i.prototype=Object.create(n.prototype)),i.prototype.ngMetadataName=t,i.annotationCls=i,i})}class Mn{constructor(t,e){this._desc=t,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,"number"==typeof e?this.__NG_ELEMENT_ID__=e:void 0!==e&&(this.\u0275prov=dt({token:this,providedIn:e.providedIn||"root",factory:e.factory}))}toString(){return`InjectionToken ${this._desc}`}}const Ln=new Mn("AnalyzeForEntryComponents"),Vn=Function;function Fn(t,e){t.forEach(t=>Array.isArray(t)?Fn(t,e):e(t))}function Un(t,e,n){e>=t.length?t.push(n):t.splice(e,0,n)}function jn(t,e){return e>=t.length-1?t.pop():t.splice(e,1)[0]}function Bn(t,e,n){let r=qn(t,e);return r>=0?t[1|r]=n:(r=~r,function(t,e,n,r){let i=t.length;if(i==e)t.push(n,r);else if(1===i)t.push(r,t[0]),t[0]=n;else{for(i--,t.push(t[i-1],t[i]);i>e;)t[i]=t[i-2],i--;t[e]=n,t[e+1]=r}}(t,r,e,n)),r}function $n(t,e){const n=qn(t,e);if(n>=0)return t[1|n]}function qn(t,e){return function(t,e,n){let r=0,i=t.length>>1;for(;i!==r;){const n=r+(i-r>>1),s=t[n<<1];if(e===s)return n<<1;s>e?i=n:r=n+1}return~(i<<1)}(t,e)}const Hn={},zn=/\n/gm,Kn="__source",Gn=tt({provide:String,useValue:tt});let Wn;function Qn(t){const e=Wn;return Wn=t,e}function Yn(t,e=_t.Default){if(void 0===Wn)throw new Error("inject() must be called from an injection context");return null===Wn?Et(t,void 0,e):Wn.get(t,e&_t.Optional?null:void 0,e)}function Jn(t,e=_t.Default){return(It||Yn)(ot(t),e)}function Xn(t){const e=[];for(let n=0;n<t.length;n++){const r=ot(t[n]);if(Array.isArray(r)){if(0===r.length)throw new Error("Arguments array must have arguments.");let t,n=_t.Default;for(let e=0;e<r.length;e++){const i=r[e],s=i.__NG_DI_FLAG__;"number"==typeof s?-1===s?t=i.token:n|=s:t=i}e.push(Jn(t,n))}else e.push(Jn(r))}return e}function Zn(t,e){return t.__NG_DI_FLAG__=e,t.prototype.__NG_DI_FLAG__=e,t}const tr=Zn(Pn("Inject",t=>({token:t})),-1),er=Zn(Pn("Optional"),8),nr=Zn(Pn("SkipSelf"),4);class rr{constructor(t){this.changingThisBreaksApplicationSecurity=t}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see https://g.co/ng/security#xss)`}}function ir(t){return t instanceof rr?t.changingThisBreaksApplicationSecurity:t}const sr=/^(?:(?:https?|mailto|ftp|tel|file|sms):|[^&:/?#]*(?:[/?#]|$))/gi,or=/^data:(?:image\/(?:bmp|gif|jpeg|jpg|png|tiff|webp)|video\/(?:mpeg|mp4|ogg|webm)|audio\/(?:mp3|oga|ogg|opus));base64,[a-z0-9+\/]+=*$/i;var ar=function(t){return t[t.NONE=0]="NONE",t[t.HTML=1]="HTML",t[t.STYLE=2]="STYLE",t[t.SCRIPT=3]="SCRIPT",t[t.URL=4]="URL",t[t.RESOURCE_URL=5]="RESOURCE_URL",t}({});function ur(t){const e=function(){const t=ke();return t&&t[12]}();return e?e.sanitize(ar.URL,t)||"":function(t,e){const n=function(t){return t instanceof rr&&t.getTypeName()||null}(t);if(null!=n&&n!==e){if("ResourceURL"===n&&"URL"===e)return!0;throw new Error(`Required a safe ${e}, got a ${n} (see https://g.co/ng/security#xss)`)}return n===e}(t,"URL")?ir(t):(n=ct(t),(n=String(n)).match(sr)||n.match(or)?n:"unsafe:"+n);var n}function cr(t,e){t.__ngContext__=e}function lr(t){const e=function(t){return t.__ngContext__||null}(t);return e?Array.isArray(e)?e:e.lView:null}function hr(t){return t.ngDebugContext}function dr(t){return t.ngOriginalError}function fr(t,...e){t.error(...e)}class pr{constructor(){this._console=console}handleError(t){const e=this._findOriginalError(t),n=this._findContext(t),r=function(t){return t.ngErrorLogger||fr}(t);r(this._console,"ERROR",t),e&&r(this._console,"ORIGINAL ERROR",e),n&&r(this._console,"ERROR CONTEXT",n)}_findContext(t){return t?hr(t)?hr(t):this._findContext(dr(t)):null}_findOriginalError(t){let e=dr(t);for(;e&&dr(e);)e=dr(e);return e}}const gr=(()=>("undefined"!=typeof requestAnimationFrame&&requestAnimationFrame||setTimeout).bind(Nt))();function mr(t){return t instanceof Function?t():t}var yr=function(t){return t[t.Important=1]="Important",t[t.DashCase=2]="DashCase",t}({});function vr(t,e){return(void 0)(t,e)}function wr(t){const e=t[3];return ee(e)?e[3]:e}function br(t){return Ir(t[13])}function _r(t){return Ir(t[4])}function Ir(t){for(;null!==t&&!ee(t);)t=t[4];return t}function Sr(t,e,n,r,i){if(null!=r){let s,o=!1;ee(r)?s=r:te(r)&&(o=!0,r=r[0]);const a=me(r);0===t&&null!==n?null==i?Or(e,n,a):xr(e,n,a,i||null,!0):1===t&&null!==n?xr(e,n,a,i||null,!0):2===t?function(t,e,n){const r=Nr(t,e);r&&function(t,e,n,r){pe(t)?t.removeChild(e,n,r):e.removeChild(n)}(t,r,e,n)}(e,a,o):3===t&&e.destroyNode(a),null!=s&&function(t,e,n,r,i){const s=n[7];s!==me(n)&&Sr(e,t,r,s,i);for(let o=Zt;o<n.length;o++){const i=n[o];Fr(i[1],i,t,e,r,s)}}(e,t,s,n,i)}}function Er(t,e,n){return pe(t)?t.createElement(e,n):null===n?t.createElement(e):t.createElementNS(n,e)}function Tr(t,e){const n=t[9],r=n.indexOf(e),i=e[3];1024&e[2]&&(e[2]&=-1025,Ee(i,-1)),n.splice(r,1)}function Cr(t,e){if(t.length<=Zt)return;const n=Zt+e,r=t[n];if(r){const s=r[17];null!==s&&s!==t&&Tr(s,r),e>0&&(t[n-1][4]=r[4]);const o=jn(t,Zt+e);Fr(r[1],i=r,i[11],2,null,null),i[0]=null,i[6]=null;const a=o[19];null!==a&&a.detachView(o[1]),r[3]=null,r[4]=null,r[2]&=-129}var i;return r}function kr(t,e){if(!(256&e[2])){const n=e[11];pe(n)&&n.destroyNode&&Fr(t,e,n,3,null,null),function(t){let e=t[13];if(!e)return Ar(t[1],t);for(;e;){let n=null;if(te(e))n=e[13];else{const t=e[10];t&&(n=t)}if(!n){for(;e&&!e[4]&&e!==t;)te(e)&&Ar(e[1],e),e=e[3];null===e&&(e=t),te(e)&&Ar(e[1],e),n=e&&e[4]}e=n}}(e)}}function Ar(t,e){if(!(256&e[2])){e[2]&=-129,e[2]|=256,function(t,e){let n;if(null!=t&&null!=(n=t.destroyHooks))for(let r=0;r<n.length;r+=2){const t=e[n[r]];if(!(t instanceof rn)){const e=n[r+1];if(Array.isArray(e))for(let n=0;n<e.length;n+=2){const r=t[e[n]],i=e[n+1];try{i.call(r)}finally{}}else try{e.call(t)}finally{}}}}(t,e),function(t,e){const n=t.cleanup,r=e[7];let i=-1;if(null!==n)for(let s=0;s<n.length-1;s+=2)if("string"==typeof n[s]){const t=n[s+1],o="function"==typeof t?t(e):me(e[t]),a=r[i=n[s+2]],u=n[s+3];"boolean"==typeof u?o.removeEventListener(n[s],a,u):u>=0?r[i=u]():r[i=-u].unsubscribe(),s+=2}else{const t=r[i=n[s+1]];n[s].call(t)}if(null!==r){for(let t=i+1;t<r.length;t++)(0,r[t])();e[7]=null}}(t,e),1===e[1].type&&pe(e[11])&&e[11].destroy();const n=e[17];if(null!==n&&ee(e[3])){n!==e[3]&&Tr(n,e);const r=e[19];null!==r&&r.detachView(t)}}}function xr(t,e,n,r,i){pe(t)?t.insertBefore(e,n,r,i):e.insertBefore(n,r,i)}function Or(t,e,n){pe(t)?t.appendChild(e,n):e.appendChild(n)}function Dr(t,e,n,r,i){null!==r?xr(t,e,n,r,i):Or(t,e,n)}function Nr(t,e){return pe(t)?t.parentNode(e):e.parentNode}function Rr(t,e,n,r){const i=function(t,e,n){return function(t,e,n){let r=e;for(;null!==r&&40&r.type;)r=(e=r).parent;if(null===r)return n[0];if(2&r.flags){const e=t.data[r.directiveStart].encapsulation;if(e===kt.None||e===kt.Emulated)return null}return ve(r,n)}(t,e.parent,n)}(t,r,e),s=e[11],o=function(t,e,n){return function(t,e,n){return 40&t.type?ve(t,n):null}(t,0,n)}(r.parent||e[6],0,e);if(null!=i)if(Array.isArray(n))for(let a=0;a<n.length;a++)Dr(s,i,n[a],o,!1);else Dr(s,i,n,o,!1)}function Pr(t,e){if(null!==e){const n=e.type;if(3&n)return ve(e,t);if(4&n)return Lr(-1,t[e.index]);if(8&n){const n=e.child;if(null!==n)return Pr(t,n);{const n=t[e.index];return ee(n)?Lr(-1,n):me(n)}}if(32&n)return vr(e,t)()||me(t[e.index]);{const n=Mr(t,e);return null!==n?Array.isArray(n)?n[0]:Pr(wr(t[16]),n):Pr(t,e.next)}}return null}function Mr(t,e){return null!==e?t[16][6].projection[e.projection]:null}function Lr(t,e){const n=Zt+t+1;if(n<e.length){const t=e[n],r=t[1].firstChild;if(null!==r)return Pr(t,r)}return e[7]}function Vr(t,e,n,r,i,s,o){for(;null!=n;){const a=r[n.index],u=n.type;if(o&&0===e&&(a&&cr(me(a),r),n.flags|=4),64!=(64&n.flags))if(8&u)Vr(t,e,n.child,r,i,s,!1),Sr(e,t,i,a,s);else if(32&u){const o=vr(n,r);let u;for(;u=o();)Sr(e,t,i,u,s);Sr(e,t,i,a,s)}else 16&u?Ur(t,e,r,n,i,s):Sr(e,t,i,a,s);n=o?n.projectionNext:n.next}}function Fr(t,e,n,r,i,s){Vr(n,r,t.firstChild,e,i,s,!1)}function Ur(t,e,n,r,i,s){const o=n[16],a=o[6].projection[r.projection];if(Array.isArray(a))for(let u=0;u<a.length;u++)Sr(e,t,i,a[u],s);else Vr(t,e,a,o[3],i,s,!0)}function jr(t,e,n){pe(t)?t.setAttribute(e,"style",n):e.style.cssText=n}function Br(t,e,n){pe(t)?""===n?t.removeAttribute(e,"class"):t.setAttribute(e,"class",n):e.className=n}function $r(t,e,n){let r=t.length;for(;;){const i=t.indexOf(e,n);if(-1===i)return i;if(0===i||t.charCodeAt(i-1)<=32){const n=e.length;if(i+n===r||t.charCodeAt(i+n)<=32)return i}n=i+1}}const qr="ng-template";function Hr(t,e,n){let r=0;for(;r<t.length;){let i=t[r++];if(n&&"class"===i){if(i=t[r],-1!==$r(i.toLowerCase(),e,0))return!0}else if(1===i){for(;r<t.length&&"string"==typeof(i=t[r++]);)if(i.toLowerCase()===e)return!0;return!1}}return!1}function zr(t){return 4===t.type&&t.value!==qr}function Kr(t,e,n){return e===(4!==t.type||n?t.value:qr)}function Gr(t,e,n){let r=4;const i=t.attrs||[],s=function(t){for(let e=0;e<t.length;e++)if(on(t[e]))return e;return t.length}(i);let o=!1;for(let a=0;a<e.length;a++){const u=e[a];if("number"!=typeof u){if(!o)if(4&r){if(r=2|1&r,""!==u&&!Kr(t,u,n)||""===u&&1===e.length){if(Wr(r))return!1;o=!0}}else{const c=8&r?u:e[++a];if(8&r&&null!==t.attrs){if(!Hr(t.attrs,c,n)){if(Wr(r))return!1;o=!0}continue}const l=Qr(8&r?"class":u,i,zr(t),n);if(-1===l){if(Wr(r))return!1;o=!0;continue}if(""!==c){let t;t=l>s?"":i[l+1].toLowerCase();const e=8&r?t:null;if(e&&-1!==$r(e,c,0)||2&r&&c!==t){if(Wr(r))return!1;o=!0}}}}else{if(!o&&!Wr(r)&&!Wr(u))return!1;if(o&&Wr(u))continue;o=!1,r=u|1&r}}return Wr(r)||o}function Wr(t){return 0==(1&t)}function Qr(t,e,n,r){if(null===e)return-1;let i=0;if(r||!n){let n=!1;for(;i<e.length;){const r=e[i];if(r===t)return i;if(3===r||6===r)n=!0;else{if(1===r||2===r){let t=e[++i];for(;"string"==typeof t;)t=e[++i];continue}if(4===r)break;if(0===r){i+=4;continue}}i+=n?1:2}return-1}return function(t,e){let n=t.indexOf(4);if(n>-1)for(n++;n<t.length;){const r=t[n];if("number"==typeof r)return-1;if(r===e)return n;n++}return-1}(e,t)}function Yr(t,e,n=!1){for(let r=0;r<e.length;r++)if(Gr(t,e[r],n))return!0;return!1}function Jr(t,e){return t?":not("+e.trim()+")":e}function Xr(t){let e=t[0],n=1,r=2,i="",s=!1;for(;n<t.length;){let o=t[n];if("string"==typeof o)if(2&r){const e=t[++n];i+="["+o+(e.length>0?'="'+e+'"':"")+"]"}else 8&r?i+="."+o:4&r&&(i+=" "+o);else""===i||Wr(o)||(e+=Jr(s,i),i=""),r=o,s=s||!Wr(r);n++}return""!==i&&(e+=Jr(s,i)),e}const Zr={};function ti(t){ei(Ae(),ke(),Ge()+t,Re())}function ei(t,e,n,r){if(!r)if(3==(3&e[2])){const r=t.preOrderCheckHooks;null!==r&&Je(e,r,n)}else{const r=t.preOrderHooks;null!==r&&Xe(e,r,0,n)}We(n)}function ni(t,e){return t<<17|e<<2}function ri(t){return t>>17&32767}function ii(t){return 2|t}function si(t){return(131068&t)>>2}function oi(t,e){return-131069&t|e<<2}function ai(t){return 1|t}function ui(t,e){const n=t.contentQueries;if(null!==n)for(let r=0;r<n.length;r+=2){const i=n[r],s=n[r+1];if(-1!==s){const n=t.data[s];Fe(i),n.contentQueries(2,e[s],s)}}}function ci(t,e,n,r,i,s,o,a,u,c){const l=e.blueprint.slice();return l[0]=i,l[2]=140|r,Se(l),l[3]=l[15]=t,l[8]=n,l[10]=o||t&&t[10],l[11]=a||t&&t[11],l[12]=u||t&&t[12]||null,l[9]=c||t&&t[9]||null,l[6]=s,l[16]=2==e.type?t[16]:l,l}function li(t,e,n,r,i){let s=t.data[e];if(null===s)s=function(t,e,n,r,i){const s=Oe(),o=Ne(),a=t.data[e]=function(t,e,n,r,i,s){return{type:n,index:r,insertBeforeIndex:null,injectorIndex:e?e.injectorIndex:-1,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,propertyBindings:null,flags:0,providerIndexes:0,value:i,attrs:s,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tViews:null,next:null,projectionNext:null,child:null,parent:e,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}(0,o?s:s&&s.parent,n,e,r,i);return null===t.firstChild&&(t.firstChild=a),null!==s&&(o?null==s.child&&null!==a.parent&&(s.child=a):null===s.next&&(s.next=a)),a}(t,e,n,r,i),Te.lFrame.inI18n&&(s.flags|=64);else if(64&s.type){s.type=n,s.value=r,s.attrs=i;const t=function(){const t=Te.lFrame,e=t.currentTNode;return t.isParent?e:e.parent}();s.injectorIndex=null===t?-1:t.injectorIndex}return De(s,!0),s}function hi(t,e,n,r){if(0===n)return-1;const i=e.length;for(let s=0;s<n;s++)e.push(r),t.blueprint.push(r),t.data.push(null);return i}function di(t,e,n){Be(e);try{const r=t.viewQuery;null!==r&&ji(1,r,n);const i=t.template;null!==i&&gi(t,e,i,1,n),t.firstCreatePass&&(t.firstCreatePass=!1),t.staticContentQueries&&ui(t,e),t.staticViewQueries&&ji(2,t.viewQuery,n);const s=t.components;null!==s&&function(t,e){for(let n=0;n<e.length;n++)Mi(t,e[n])}(e,s)}catch(r){throw t.firstCreatePass&&(t.incompleteFirstPass=!0),r}finally{e[2]&=-5,Ke()}}function fi(t,e,n,r){const i=e[2];if(256==(256&i))return;Be(e);const s=Re();try{Se(e),Te.lFrame.bindingIndex=t.bindingStartIndex,null!==n&&gi(t,e,n,2,r);const o=3==(3&i);if(!s)if(o){const n=t.preOrderCheckHooks;null!==n&&Je(e,n,null)}else{const n=t.preOrderHooks;null!==n&&Xe(e,n,0,null),Ze(e,0)}if(function(t){for(let e=br(t);null!==e;e=_r(e)){if(!e[2])continue;const t=e[9];for(let e=0;e<t.length;e++){const n=t[e],r=n[3];0==(1024&n[2])&&Ee(r,1),n[2]|=1024}}}(e),function(t){for(let e=br(t);null!==e;e=_r(e))for(let t=Zt;t<e.length;t++){const n=e[t],r=n[1];_e(n)&&fi(r,n,r.template,n[8])}}(e),null!==t.contentQueries&&ui(t,e),!s)if(o){const n=t.contentCheckHooks;null!==n&&Je(e,n)}else{const n=t.contentHooks;null!==n&&Xe(e,n,1),Ze(e,1)}!function(t,e){const n=t.hostBindingOpCodes;if(null!==n)try{for(let t=0;t<n.length;t++){const r=n[t];if(r<0)We(~r);else{const i=r,s=n[++t],o=n[++t];Le(s,i),o(2,e[i])}}}finally{We(-1)}}(t,e);const a=t.components;null!==a&&function(t,e){for(let n=0;n<e.length;n++)Ri(t,e[n])}(e,a);const u=t.viewQuery;if(null!==u&&ji(2,u,r),!s)if(o){const n=t.viewCheckHooks;null!==n&&Je(e,n)}else{const n=t.viewHooks;null!==n&&Xe(e,n,2),Ze(e,2)}!0===t.firstUpdatePass&&(t.firstUpdatePass=!1),s||(e[2]&=-73),1024&e[2]&&(e[2]&=-1025,Ee(e[3],-1))}finally{Ke()}}function pi(t,e,n,r){const i=e[10],s=!Re(),o=4==(4&e[2]);try{s&&!o&&i.begin&&i.begin(),o&&di(t,e,r),fi(t,e,n,r)}finally{s&&!o&&i.end&&i.end()}}function gi(t,e,n,r,i){const s=Ge(),o=2&r;try{We(-1),o&&e.length>Xt&&ei(t,e,Xt,Re()),n(r,i)}finally{We(s)}}function mi(t,e,n){Ce()&&(function(t,e,n,r){const i=n.directiveStart,s=n.directiveEnd;t.firstCreatePass||mn(n,e),cr(r,e);const o=n.initialInputs;for(let a=i;a<s;a++){const r=t.data[a],s=se(r);s&&xi(e,n,r);const u=kn(e,t,a,n);cr(u,e),null!==o&&Oi(0,a-i,u,r,0,o),s&&(be(n.index,e)[8]=u)}}(t,e,n,ve(n,e)),128==(128&n.flags)&&function(t,e,n){const r=n.directiveStart,i=n.directiveEnd,s=n.index,o=Te.lFrame.currentDirectiveIndex;try{We(s);for(let n=r;n<i;n++){const r=t.data[n],i=e[n];Ve(n),null===r.hostBindings&&0===r.hostVars&&null===r.hostAttrs||Ei(r,i)}}finally{We(-1),Ve(o)}}(t,e,n))}function yi(t,e,n=ve){const r=e.localNames;if(null!==r){let i=e.index+1;for(let s=0;s<r.length;s+=2){const o=r[s+1],a=-1===o?n(e,t):t[o];t[i++]=a}}}function vi(t){const e=t.tView;return null===e||e.incompleteFirstPass?t.tView=wi(1,null,t.template,t.decls,t.vars,t.directiveDefs,t.pipeDefs,t.viewQuery,t.schemas,t.consts):e}function wi(t,e,n,r,i,s,o,a,u,c){const l=Xt+r,h=l+i,d=function(t,e){const n=[];for(let r=0;r<e;r++)n.push(r<t?null:Zr);return n}(l,h),f="function"==typeof c?c():c;return d[1]={type:t,blueprint:d,template:n,queries:null,viewQuery:a,declTNode:e,data:d.slice().fill(null,l),bindingStartIndex:l,expandoStartIndex:h,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:"function"==typeof s?s():s,pipeRegistry:"function"==typeof o?o():o,firstChild:null,schemas:u,consts:f,incompleteFirstPass:!1}}function bi(t,e,n){for(let r in t)if(t.hasOwnProperty(r)){const i=t[r];(n=null===n?{}:n).hasOwnProperty(r)?n[r].push(e,i):n[r]=[e,i]}return n}function _i(t,e,n,r,i,s,o,a){const u=ve(e,n);let c,l=e.inputs;var h;!a&&null!=l&&(c=l[r])?(zi(t,n,c,r,i),re(e)&&function(t,e){const n=be(e,t);16&n[2]||(n[2]|=64)}(n,e.index)):3&e.type&&(r="class"===(h=r)?"className":"for"===h?"htmlFor":"formaction"===h?"formAction":"innerHtml"===h?"innerHTML":"readonly"===h?"readOnly":"tabindex"===h?"tabIndex":h,i=null!=o?o(i,e.value||"",r):i,pe(s)?s.setProperty(u,r,i):an(r)||(u.setProperty?u.setProperty(r,i):u[r]=i))}function Ii(t,e,n,r){let i=!1;if(Ce()){const s=function(t,e,n){const r=t.directiveRegistry;let i=null;if(r)for(let s=0;s<r.length;s++){const o=r[s];Yr(n,o.selectors,!1)&&(i||(i=[]),bn(mn(n,e),t,o.type),se(o)?(Ti(t,n),i.unshift(o)):i.push(o))}return i}(t,e,n),o=null===r?null:{"":-1};if(null!==s){i=!0,ki(n,t.data.length,s.length);for(let t=0;t<s.length;t++){const e=s[t];e.providersResolver&&e.providersResolver(e)}let r=!1,a=!1,u=hi(t,e,s.length,null);for(let i=0;i<s.length;i++){const c=s[i];n.mergedAttrs=un(n.mergedAttrs,c.hostAttrs),Ai(t,n,e,u,c),Ci(u,c,o),null!==c.contentQueries&&(n.flags|=8),null===c.hostBindings&&null===c.hostAttrs&&0===c.hostVars||(n.flags|=128);const l=c.type.prototype;!r&&(l.ngOnChanges||l.ngOnInit||l.ngDoCheck)&&((t.preOrderHooks||(t.preOrderHooks=[])).push(n.index),r=!0),a||!l.ngOnChanges&&!l.ngDoCheck||((t.preOrderCheckHooks||(t.preOrderCheckHooks=[])).push(n.index),a=!0),u++}!function(t,e){const n=e.directiveEnd,r=t.data,i=e.attrs,s=[];let o=null,a=null;for(let u=e.directiveStart;u<n;u++){const t=r[u],n=t.inputs,c=null===i||zr(e)?null:Di(n,i);s.push(c),o=bi(n,u,o),a=bi(t.outputs,u,a)}null!==o&&(o.hasOwnProperty("class")&&(e.flags|=16),o.hasOwnProperty("style")&&(e.flags|=32)),e.initialInputs=s,e.inputs=o,e.outputs=a}(t,n)}o&&function(t,e,n){if(e){const r=t.localNames=[];for(let t=0;t<e.length;t+=2){const i=n[e[t+1]];if(null==i)throw new ut("301",`Export of name '${e[t+1]}' not found!`);r.push(e[t],i)}}}(n,r,o)}return n.mergedAttrs=un(n.mergedAttrs,n.attrs),i}function Si(t,e,n,r,i,s){const o=s.hostBindings;if(o){let n=t.hostBindingOpCodes;null===n&&(n=t.hostBindingOpCodes=[]);const s=~e.index;(function(t){let e=t.length;for(;e>0;){const n=t[--e];if("number"==typeof n&&n<0)return n}return 0})(n)!=s&&n.push(s),n.push(r,i,o)}}function Ei(t,e){null!==t.hostBindings&&t.hostBindings(1,e)}function Ti(t,e){e.flags|=2,(t.components||(t.components=[])).push(e.index)}function Ci(t,e,n){if(n){if(e.exportAs)for(let r=0;r<e.exportAs.length;r++)n[e.exportAs[r]]=t;se(e)&&(n[""]=t)}}function ki(t,e,n){t.flags|=1,t.directiveStart=e,t.directiveEnd=e+n,t.providerIndexes=e}function Ai(t,e,n,r,i){t.data[r]=i;const s=i.factory||(i.factory=oe(i.type)),o=new rn(s,se(i),null);t.blueprint[r]=o,n[r]=o,Si(t,e,0,r,hi(t,n,i.hostVars,Zr),i)}function xi(t,e,n){const r=ve(e,t),i=vi(n),s=t[10],o=Li(t,ci(t,i,null,n.onPush?64:16,r,e,s,s.createRenderer(r,n),null,null));t[e.index]=o}function Oi(t,e,n,r,i,s){const o=s[e];if(null!==o){const t=r.setInput;for(let e=0;e<o.length;){const i=o[e++],s=o[e++],a=o[e++];null!==t?r.setInput(n,a,i,s):n[s]=a}}}function Di(t,e){let n=null,r=0;for(;r<e.length;){const i=e[r];if(0!==i)if(5!==i){if("number"==typeof i)break;t.hasOwnProperty(i)&&(null===n&&(n=[]),n.push(i,t[i],e[r+1])),r+=2}else r+=2;else r+=4}return n}function Ni(t,e,n,r){return new Array(t,!0,!1,e,null,0,r,n,null,null)}function Ri(t,e){const n=be(e,t);if(_e(n)){const t=n[1];80&n[2]?fi(t,n,t.template,n[8]):n[5]>0&&Pi(n)}}function Pi(t){for(let n=br(t);null!==n;n=_r(n))for(let t=Zt;t<n.length;t++){const e=n[t];if(1024&e[2]){const t=e[1];fi(t,e,t.template,e[8])}else e[5]>0&&Pi(e)}const e=t[1].components;if(null!==e)for(let n=0;n<e.length;n++){const r=be(e[n],t);_e(r)&&r[5]>0&&Pi(r)}}function Mi(t,e){const n=be(e,t),r=n[1];!function(t,e){for(let n=e.length;n<t.blueprint.length;n++)e.push(t.blueprint[n])}(r,n),di(r,n,n[8])}function Li(t,e){return t[13]?t[14][4]=e:t[13]=e,t[14]=e,e}function Vi(t){for(;t;){t[2]|=64;const e=wr(t);if(0!=(512&t[2])&&!e)return t;t=e}return null}function Fi(t,e,n){const r=e[10];r.begin&&r.begin();try{fi(t,e,t.template,n)}catch(i){throw Hi(e,i),i}finally{r.end&&r.end()}}function Ui(t){!function(t){for(let e=0;e<t.components.length;e++){const n=t.components[e],r=lr(n),i=r[1];pi(i,r,i.template,n)}}(t[8])}function ji(t,e,n){Fe(0),e(t,n)}const Bi=(()=>Promise.resolve(null))();function $i(t){return t[7]||(t[7]=[])}function qi(t){return t.cleanup||(t.cleanup=[])}function Hi(t,e){const n=t[9],r=n?n.get(pr,null):null;r&&r.handleError(e)}function zi(t,e,n,r,i){for(let s=0;s<n.length;){const o=n[s++],a=n[s++],u=e[o],c=t.data[o];null!==c.setInput?c.setInput(u,i,r,a):u[a]=i}}function Ki(t,e,n){let r=n?t.styles:null,i=n?t.classes:null,s=0;if(null!==e)for(let o=0;o<e.length;o++){const t=e[o];"number"==typeof t?s=t:1==s?i=rt(i,t):2==s&&(r=rt(r,t+": "+e[++o]+";"))}n?t.styles=r:t.stylesWithoutHost=r,n?t.classes=i:t.classesWithoutHost=i}const Gi=new Mn("INJECTOR",-1);class Wi{get(t,e=Hn){if(e===Hn){const e=new Error(`NullInjectorError: No provider for ${nt(t)}!`);throw e.name="NullInjectorError",e}return e}}const Qi=new Mn("Set Injector scope."),Yi={},Ji={};let Xi;function Zi(){return void 0===Xi&&(Xi=new Wi),Xi}function ts(t,e=null,n=null,r){return new es(t,n,e||Zi(),r)}class es{constructor(t,e,n,r=null){this.parent=n,this.records=new Map,this.injectorDefTypes=new Set,this.onDestroy=new Set,this._destroyed=!1;const i=[];e&&Fn(e,n=>this.processProvider(n,t,e)),Fn([t],t=>this.processInjectorType(t,[],i)),this.records.set(Gi,is(void 0,this));const s=this.records.get(Qi);this.scope=null!=s?s.value:null,this.source=r||("object"==typeof t?null:nt(t))}get destroyed(){return this._destroyed}destroy(){this.assertNotDestroyed(),this._destroyed=!0;try{this.onDestroy.forEach(t=>t.ngOnDestroy())}finally{this.records.clear(),this.onDestroy.clear(),this.injectorDefTypes.clear()}}get(t,e=Hn,n=_t.Default){this.assertNotDestroyed();const r=Qn(this);try{if(!(n&_t.SkipSelf)){let e=this.records.get(t);if(void 0===e){const n=("function"==typeof(i=t)||"object"==typeof i&&i instanceof Mn)&&pt(t);e=n&&this.injectableDefInScope(n)?is(ns(t),Yi):null,this.records.set(t,e)}if(null!=e)return this.hydrate(t,e)}return(n&_t.Self?Zi():this.parent).get(t,e=n&_t.Optional&&e===Hn?null:e)}catch(s){if("NullInjectorError"===s.name){if((s.ngTempTokenPath=s.ngTempTokenPath||[]).unshift(nt(t)),r)throw s;return function(t,e,n,r){const i=t.ngTempTokenPath;throw e[Kn]&&i.unshift(e[Kn]),t.message=function(t,e,n,r=null){t=t&&"\n"===t.charAt(0)&&"\u0275"==t.charAt(1)?t.substr(2):t;let i=nt(e);if(Array.isArray(e))i=e.map(nt).join(" -> ");else if("object"==typeof e){let t=[];for(let n in e)if(e.hasOwnProperty(n)){let r=e[n];t.push(n+":"+("string"==typeof r?JSON.stringify(r):nt(r)))}i=`{${t.join(", ")}}`}return`${n}${r?"("+r+")":""}[${i}]: ${t.replace(zn,"\n  ")}`}("\n"+t.message,i,n,r),t.ngTokenPath=i,t.ngTempTokenPath=null,t}(s,t,"R3InjectorError",this.source)}throw s}finally{Qn(r)}var i}_resolveInjectorDefTypes(){this.injectorDefTypes.forEach(t=>this.get(t))}toString(){const t=[];return this.records.forEach((e,n)=>t.push(nt(n))),`R3Injector[${t.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new Error("Injector has already been destroyed.")}processInjectorType(t,e,n){if(!(t=ot(t)))return!1;let r=mt(t);const i=null==r&&t.ngModule||void 0,s=void 0===i?t:i,o=-1!==n.indexOf(s);if(void 0!==i&&(r=mt(i)),null==r)return!1;if(null!=r.imports&&!o){let t;n.push(s);try{Fn(r.imports,r=>{this.processInjectorType(r,e,n)&&(void 0===t&&(t=[]),t.push(r))})}finally{}if(void 0!==t)for(let e=0;e<t.length;e++){const{ngModule:n,providers:r}=t[e];Fn(r,t=>this.processProvider(t,n,r||Pt))}}this.injectorDefTypes.add(s);const a=oe(s)||(()=>new s);this.records.set(s,is(a,Yi));const u=r.providers;if(null!=u&&!o){const e=t;Fn(u,t=>this.processProvider(t,e,u))}return void 0!==i&&void 0!==t.providers}processProvider(t,e,n){let r=os(t=ot(t))?t:ot(t&&t.provide);const i=function(t,e,n){return ss(t)?is(void 0,t.useValue):is(rs(t),Yi)}(t);if(os(t)||!0!==t.multi)this.records.get(r);else{let e=this.records.get(r);e||(e=is(void 0,Yi,!0),e.factory=()=>Xn(e.multi),this.records.set(r,e)),r=t,e.multi.push(t)}this.records.set(r,i)}hydrate(t,e){var n;return e.value===Yi&&(e.value=Ji,e.value=e.factory()),"object"==typeof e.value&&e.value&&null!==(n=e.value)&&"object"==typeof n&&"function"==typeof n.ngOnDestroy&&this.onDestroy.add(e.value),e.value}injectableDefInScope(t){if(!t.providedIn)return!1;const e=ot(t.providedIn);return"string"==typeof e?"any"===e||e===this.scope:this.injectorDefTypes.has(e)}}function ns(t){const e=pt(t),n=null!==e?e.factory:oe(t);if(null!==n)return n;if(t instanceof Mn)throw new Error(`Token ${nt(t)} is missing a \u0275prov definition.`);if(t instanceof Function)return function(t){const e=t.length;if(e>0){const n=function(t,e){const n=[];for(let r=0;r<t;r++)n.push("?");return n}(e);throw new Error(`Can't resolve all parameters for ${nt(t)}: (${n.join(", ")}).`)}const n=function(t){const e=t&&(t[yt]||t[wt]);if(e){const n=function(t){if(t.hasOwnProperty("name"))return t.name;const e=(""+t).match(/^function\s*([^\s(]+)/);return null===e?"":e[1]}(t);return console.warn(`DEPRECATED: DI is instantiating a token "${n}" that inherits its @Injectable decorator but does not provide one itself.\nThis will become an error in a future version of Angular. Please add @Injectable() to the "${n}" class.`),e}return null}(t);return null!==n?()=>n.factory(t):()=>new t}(t);throw new Error("unreachable")}function rs(t,e,n){let r;if(os(t)){const e=ot(t);return oe(e)||ns(e)}if(ss(t))r=()=>ot(t.useValue);else if((i=t)&&i.useFactory)r=()=>t.useFactory(...Xn(t.deps||[]));else if(function(t){return!(!t||!t.useExisting)}(t))r=()=>Jn(ot(t.useExisting));else{const e=ot(t&&(t.useClass||t.provide));if(!function(t){return!!t.deps}(t))return oe(e)||ns(e);r=()=>new e(...Xn(t.deps))}var i;return r}function is(t,e,n=!1){return{factory:t,value:e,multi:n?[]:void 0}}function ss(t){return null!==t&&"object"==typeof t&&Gn in t}function os(t){return"function"==typeof t}const as=function(t,e,n){return function(t,e=null,n=null,r){const i=ts(t,e,n,r);return i._resolveInjectorDefTypes(),i}({name:n},e,t,n)};let us=(()=>{class t{static create(t,e){return Array.isArray(t)?as(t,e,""):as(t.providers,t.parent,t.name||"")}}return t.THROW_IF_NOT_FOUND=Hn,t.NULL=new Wi,t.\u0275prov=dt({token:t,providedIn:"any",factory:()=>Jn(Gi)}),t.__NG_ELEMENT_ID__=-1,t})();function cs(t,e){Ye(lr(t)[1],xe())}function ls(t){let e=Object.getPrototypeOf(t.type.prototype).constructor,n=!0;const r=[t];for(;e;){let i;if(se(t))i=e.\u0275cmp||e.\u0275dir;else{if(e.\u0275cmp)throw new Error("Directives cannot inherit Components");i=e.\u0275dir}if(i){if(n){r.push(i);const e=t;e.inputs=hs(t.inputs),e.declaredInputs=hs(t.declaredInputs),e.outputs=hs(t.outputs);const n=i.hostBindings;n&&ps(t,n);const s=i.viewQuery,o=i.contentQueries;if(s&&ds(t,s),o&&fs(t,o),et(t.inputs,i.inputs),et(t.declaredInputs,i.declaredInputs),et(t.outputs,i.outputs),se(i)&&i.data.animation){const e=t.data;e.animation=(e.animation||[]).concat(i.data.animation)}}const e=i.features;if(e)for(let r=0;r<e.length;r++){const i=e[r];i&&i.ngInherit&&i(t),i===ls&&(n=!1)}}e=Object.getPrototypeOf(e)}!function(t){let e=0,n=null;for(let r=t.length-1;r>=0;r--){const i=t[r];i.hostVars=e+=i.hostVars,i.hostAttrs=un(i.hostAttrs,n=un(n,i.hostAttrs))}}(r)}function hs(t){return t===Rt?{}:t===Pt?[]:t}function ds(t,e){const n=t.viewQuery;t.viewQuery=n?(t,r)=>{e(t,r),n(t,r)}:e}function fs(t,e){const n=t.contentQueries;t.contentQueries=n?(t,r,i)=>{e(t,r,i),n(t,r,i)}:e}function ps(t,e){const n=t.hostBindings;t.hostBindings=n?(t,r)=>{e(t,r),n(t,r)}:e}let gs=null;function ms(){if(!gs){const t=Nt.Symbol;if(t&&t.iterator)gs=t.iterator;else{const t=Object.getOwnPropertyNames(Map.prototype);for(let e=0;e<t.length;++e){const n=t[e];"entries"!==n&&"size"!==n&&Map.prototype[n]===Map.prototype.entries&&(gs=n)}}}return gs}function ys(t){return!!vs(t)&&(Array.isArray(t)||!(t instanceof Map)&&ms()in t)}function vs(t){return null!==t&&("function"==typeof t||"object"==typeof t)}function ws(t,e,n){return!Object.is(t[e],n)&&(t[e]=n,!0)}function bs(t,e,n,r){const i=ke();return ws(i,Me(),e)&&(Ae(),function(t,e,n,r,i,s){const o=ve(t,e);!function(t,e,n,r,i,s,o){if(null==s)pe(t)?t.removeAttribute(e,i,n):e.removeAttribute(i);else{const a=null==o?ct(s):o(s,r||"",i);pe(t)?t.setAttribute(e,i,a,n):n?e.setAttributeNS(n,i,a):e.setAttribute(i,a)}}(e[11],o,s,t.value,n,r,i)}(Qe(),i,t,e,n,r)),bs}function _s(t,e=_t.Default){const n=ke();return null===n?Jn(t,e):Sn(xe(),n,ot(t),e)}function Is(t,e,n){const r=ke();return ws(r,Me(),e)&&_i(Ae(),Qe(),r,t,e,r[11],n,!1),Is}function Ss(t,e,n,r,i){const s=i?"class":"style";zi(t,n,e.inputs[s],s,r)}function Es(t,e,n,r){const i=ke(),s=Ae(),o=Xt+t,a=i[11],u=i[o]=Er(a,e,Te.lFrame.currentNamespace),c=s.firstCreatePass?function(t,e,n,r,i,s,o){const a=e.consts,u=li(e,t,2,i,Ie(a,s));return Ii(e,n,u,Ie(a,o)),null!==u.attrs&&Ki(u,u.attrs,!1),null!==u.mergedAttrs&&Ki(u,u.mergedAttrs,!0),null!==e.queries&&e.queries.elementStart(e,u),u}(o,s,i,0,e,n,r):s.data[o];De(c,!0);const l=c.mergedAttrs;null!==l&&sn(a,u,l);const h=c.classes;null!==h&&Br(a,u,h);const d=c.styles;null!==d&&jr(a,u,d),64!=(64&c.flags)&&Rr(s,i,u,c),0===Te.lFrame.elementDepthCount&&cr(u,i),Te.lFrame.elementDepthCount++,ie(c)&&(mi(s,i,c),function(t,e,n){if(ne(e)){const r=e.directiveEnd;for(let i=e.directiveStart;i<r;i++){const e=t.data[i];e.contentQueries&&e.contentQueries(1,n[i],i)}}}(s,c,i)),null!==r&&yi(i,c)}function Ts(){let t=xe();Ne()?Te.lFrame.isParent=!1:(t=t.parent,De(t,!1));const e=t;Te.lFrame.elementDepthCount--;const n=Ae();n.firstCreatePass&&(Ye(n,t),ne(t)&&n.queries.elementEnd(t)),null!=e.classesWithoutHost&&function(t){return 0!=(16&t.flags)}(e)&&Ss(n,e,ke(),e.classesWithoutHost,!0),null!=e.stylesWithoutHost&&function(t){return 0!=(32&t.flags)}(e)&&Ss(n,e,ke(),e.stylesWithoutHost,!1)}function Cs(t,e,n,r){Es(t,e,n,r),Ts()}function ks(t){return!!t&&"function"==typeof t.then}const As=function(t){return!!t&&"function"==typeof t.subscribe};function xs(t,e,n,r){const i=ke(),s=Ae(),o=xe();return function(t,e,n,r,i,s,o,a){const u=ie(r),c=t.firstCreatePass&&qi(t),l=$i(e);let h=!0;if(3&r.type||a){const d=ve(r,e),f=a?a(d):d,p=l.length,g=a?t=>a(me(t[r.index])):r.index;if(pe(n)){let o=null;if(!a&&u&&(o=function(t,e,n,r){const i=t.cleanup;if(null!=i)for(let s=0;s<i.length-1;s+=2){const t=i[s];if(t===n&&i[s+1]===r){const t=e[7],n=i[s+2];return t.length>n?t[n]:null}"string"==typeof t&&(s+=2)}return null}(t,e,i,r.index)),null!==o)(o.__ngLastListenerFn__||o).__ngNextListenerFn__=s,o.__ngLastListenerFn__=s,h=!1;else{s=Ds(r,e,0,s,!1);const t=n.listen(f,i,s);l.push(s,t),c&&c.push(i,g,p,p+1)}}else s=Ds(r,e,0,s,!0),f.addEventListener(i,s,o),l.push(s),c&&c.push(i,g,p,o)}else s=Ds(r,e,0,s,!1);const d=r.outputs;let f;if(h&&null!==d&&(f=d[i])){const t=f.length;if(t)for(let n=0;n<t;n+=2){const t=e[f[n]][f[n+1]].subscribe(s),o=l.length;l.push(s,t),c&&c.push(i,r.index,o,-(o+1))}}}(s,i,i[11],o,t,e,!!n,r),xs}function Os(t,e,n,r){try{return!1!==n(r)}catch(i){return Hi(t,i),!1}}function Ds(t,e,n,r,i){return function n(s){if(s===Function)return r;const o=2&t.flags?be(t.index,e):e;0==(32&e[2])&&Vi(o);let a=Os(e,0,r,s),u=n.__ngNextListenerFn__;for(;u;)a=Os(e,0,u,s)&&a,u=u.__ngNextListenerFn__;return i&&!1===a&&(s.preventDefault(),s.returnValue=!1),a}}function Ns(t,e,n,r,i){const s=t[n+1],o=null===e;let a=r?ri(s):si(s),u=!1;for(;0!==a&&(!1===u||o);){const n=t[a+1];Rs(t[a],e)&&(u=!0,t[a+1]=r?ai(n):ii(n)),a=r?ri(n):si(n)}u&&(t[n+1]=r?ii(s):ai(s))}function Rs(t,e){return null===t||null==e||(Array.isArray(t)?t[1]:t)===e||!(!Array.isArray(t)||"string"!=typeof e)&&qn(t,e)>=0}function Ps(t,e){return function(t,e,n,r){const i=ke(),s=Ae(),o=function(t){const e=Te.lFrame,n=e.bindingIndex;return e.bindingIndex=e.bindingIndex+2,n}();s.firstUpdatePass&&function(t,e,n,r){const i=t.data;if(null===i[n+1]){const s=i[Ge()],o=function(t,e){return e>=t.expandoStartIndex}(t,n);(function(t,e){return 0!=(16&t.flags)})(s)&&null===e&&!o&&(e=!1),e=function(t,e,n,r){const i=function(t){const e=Te.lFrame.currentDirectiveIndex;return-1===e?null:t[e]}(t);let s=e.residualClasses;if(null===i)0===e.classBindings&&(n=Ls(n=Ms(null,t,e,n,r),e.attrs,r),s=null);else{const o=e.directiveStylingLast;if(-1===o||t[o]!==i)if(n=Ms(i,t,e,n,r),null===s){let n=function(t,e,n){const r=e.classBindings;if(0!==si(r))return t[ri(r)]}(t,e);void 0!==n&&Array.isArray(n)&&(n=Ms(null,t,e,n[1],r),n=Ls(n,e.attrs,r),function(t,e,n,r){t[ri(e.classBindings)]=r}(t,e,0,n))}else s=function(t,e,n){let r;const i=e.directiveEnd;for(let s=1+e.directiveStylingLast;s<i;s++)r=Ls(r,t[s].hostAttrs,true);return Ls(r,e.attrs,true)}(t,e)}return void 0!==s&&(e.residualClasses=s),n}(i,s,e,r),function(t,e,n,r,i,s){let o=e.classBindings,a=ri(o),u=si(o);t[r]=n;let c,l=!1;if(Array.isArray(n)){const t=n;c=t[1],(null===c||qn(t,c)>0)&&(l=!0)}else c=n;if(i)if(0!==u){const e=ri(t[a+1]);t[r+1]=ni(e,a),0!==e&&(t[e+1]=oi(t[e+1],r)),t[a+1]=131071&t[a+1]|r<<17}else t[r+1]=ni(a,0),0!==a&&(t[a+1]=oi(t[a+1],r)),a=r;else t[r+1]=ni(u,0),0===a?a=r:t[u+1]=oi(t[u+1],r),u=r;l&&(t[r+1]=ii(t[r+1])),Ns(t,c,r,!0),Ns(t,c,r,!1),function(t,e,n,r,i){const s=t.residualClasses;null!=s&&"string"==typeof e&&qn(s,e)>=0&&(n[r+1]=ai(n[r+1]))}(e,c,t,r),o=ni(a,u),e.classBindings=o}(i,s,e,n,o)}}(s,t,o,true),e!==Zr&&ws(i,o,e)&&function(t,e,n,r,i,s,o,a){if(!(3&e.type))return;const u=t.data,c=u[a+1];Fs(1==(1&c)?Vs(u,e,n,i,si(c),o):void 0)||(Fs(s)||function(t){return 2==(2&t)}(c)&&(s=Vs(u,null,n,i,a,o)),function(t,e,n,r,i){const s=pe(t);i?s?t.addClass(n,r):n.classList.add(r):s?t.removeClass(n,r):n.classList.remove(r)}(r,0,ye(Ge(),n),i,s))}(s,s.data[Ge()],i,i[11],t,i[o+1]=function(t,e){return null==t||"object"==typeof t&&(t=nt(ir(t))),t}(e),true,o)}(t,e),Ps}function Ms(t,e,n,r,i){let s=null;const o=n.directiveEnd;let a=n.directiveStylingLast;for(-1===a?a=n.directiveStart:a++;a<o&&(s=e[a],r=Ls(r,s.hostAttrs,i),s!==t);)a++;return null!==t&&(n.directiveStylingLast=a),r}function Ls(t,e,n){const r=n?1:2;let i=-1;if(null!==e)for(let s=0;s<e.length;s++){const o=e[s];"number"==typeof o?i=o:i===r&&(Array.isArray(t)||(t=void 0===t?[]:["",t]),Bn(t,o,!!n||e[++s]))}return void 0===t?null:t}function Vs(t,e,n,r,i,s){const o=null===e;let a;for(;i>0;){const e=t[i],s=Array.isArray(e),u=s?e[1]:e,c=null===u;let l=n[i+1];l===Zr&&(l=c?Pt:void 0);let h=c?$n(l,r):u===r?l:void 0;if(s&&!Fs(h)&&(h=$n(e,r)),Fs(h)&&(a=h,o))return a;const d=t[i+1];i=o?ri(d):si(d)}if(null!==e){let t=s?e.residualClasses:e.residualStyles;null!=t&&(a=$n(t,r))}return a}function Fs(t){return void 0!==t}function Us(t,e=""){const n=ke(),r=Ae(),i=t+Xt,s=r.firstCreatePass?li(r,i,1,e,null):r.data[i],o=n[i]=function(t,e){return pe(t)?t.createText(e):t.createTextNode(e)}(n[11],e);Rr(r,n,o,s),De(s,!1)}function js(t){return Bs("",t,""),js}function Bs(t,e,n){const r=ke(),i=function(t,e,n,r){return ws(t,Me(),n)?e+ct(n)+r:Zr}(r,t,e,n);return i!==Zr&&function(t,e,n){const r=ye(e,t);!function(t,e,n){pe(t)?t.setValue(e,n):e.textContent=n}(t[11],r,n)}(r,Ge(),i),Bs}function $s(t,e,n){const r=ke();return ws(r,Me(),e)&&_i(Ae(),Qe(),r,t,e,r[11],n,!0),$s}const qs=void 0;var Hs=["en",[["a","p"],["AM","PM"],qs],[["AM","PM"],qs,qs],[["S","M","T","W","T","F","S"],["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],["Su","Mo","Tu","We","Th","Fr","Sa"]],qs,[["J","F","M","A","M","J","J","A","S","O","N","D"],["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],["January","February","March","April","May","June","July","August","September","October","November","December"]],qs,[["B","A"],["BC","AD"],["Before Christ","Anno Domini"]],0,[6,0],["M/d/yy","MMM d, y","MMMM d, y","EEEE, MMMM d, y"],["h:mm a","h:mm:ss a","h:mm:ss a z","h:mm:ss a zzzz"],["{1}, {0}",qs,"{1} 'at' {0}",qs],[".",",",";","%","+","-","E","\xd7","\u2030","\u221e","NaN",":"],["#,##0.###","#,##0%","\xa4#,##0.00","#E0"],"USD","$","US Dollar",{},"ltr",function(t){let e=Math.floor(Math.abs(t)),n=t.toString().replace(/^[^.]*\.?/,"").length;return 1===e&&0===n?1:5}];let zs={};function Ks(t){return t in zs||(zs[t]=Nt.ng&&Nt.ng.common&&Nt.ng.common.locales&&Nt.ng.common.locales[t]),zs[t]}var Gs=function(t){return t[t.LocaleId=0]="LocaleId",t[t.DayPeriodsFormat=1]="DayPeriodsFormat",t[t.DayPeriodsStandalone=2]="DayPeriodsStandalone",t[t.DaysFormat=3]="DaysFormat",t[t.DaysStandalone=4]="DaysStandalone",t[t.MonthsFormat=5]="MonthsFormat",t[t.MonthsStandalone=6]="MonthsStandalone",t[t.Eras=7]="Eras",t[t.FirstDayOfWeek=8]="FirstDayOfWeek",t[t.WeekendRange=9]="WeekendRange",t[t.DateFormat=10]="DateFormat",t[t.TimeFormat=11]="TimeFormat",t[t.DateTimeFormat=12]="DateTimeFormat",t[t.NumberSymbols=13]="NumberSymbols",t[t.NumberFormats=14]="NumberFormats",t[t.CurrencyCode=15]="CurrencyCode",t[t.CurrencySymbol=16]="CurrencySymbol",t[t.CurrencyName=17]="CurrencyName",t[t.Currencies=18]="Currencies",t[t.Directionality=19]="Directionality",t[t.PluralCase=20]="PluralCase",t[t.ExtraData=21]="ExtraData",t}({});const Ws="en-US";let Qs=Ws;function Ys(t){var e,n;n="Expected localeId to be defined",null==(e=t)&&function(t,e,n,r){throw new Error(`ASSERTION ERROR: ${t} [Expected=> null != ${e} <=Actual]`)}(n,e),"string"==typeof t&&(Qs=t.toLowerCase().replace(/_/g,"-"))}function Js(t,e,n,r,i){if(t=ot(t),Array.isArray(t))for(let s=0;s<t.length;s++)Js(t[s],e,n,r,i);else{const s=Ae(),o=ke();let a=os(t)?t:ot(t.provide),u=rs(t);const c=xe(),l=1048575&c.providerIndexes,h=c.directiveStart,d=c.providerIndexes>>20;if(os(t)||!t.multi){const r=new rn(u,i,_s),f=to(a,e,i?l:l+d,h);-1===f?(bn(mn(c,o),s,a),Xs(s,t,e.length),e.push(a),c.directiveStart++,c.directiveEnd++,i&&(c.providerIndexes+=1048576),n.push(r),o.push(r)):(n[f]=r,o[f]=r)}else{const f=to(a,e,l+d,h),p=to(a,e,l,l+d),g=f>=0&&n[f],m=p>=0&&n[p];if(i&&!m||!i&&!g){bn(mn(c,o),s,a);const l=function(t,e,n,r,i){const s=new rn(t,n,_s);return s.multi=[],s.index=e,s.componentProviders=0,Zs(s,i,r&&!n),s}(i?no:eo,n.length,i,r,u);!i&&m&&(n[p].providerFactory=l),Xs(s,t,e.length,0),e.push(a),c.directiveStart++,c.directiveEnd++,i&&(c.providerIndexes+=1048576),n.push(l),o.push(l)}else Xs(s,t,f>-1?f:p,Zs(n[i?p:f],u,!i&&r));!i&&r&&m&&n[p].componentProviders++}}}function Xs(t,e,n,r){const i=os(e);if(i||e.useClass){const s=(e.useClass||e).prototype.ngOnDestroy;if(s){const o=t.destroyHooks||(t.destroyHooks=[]);if(!i&&e.multi){const t=o.indexOf(n);-1===t?o.push(n,[r,s]):o[t+1].push(r,s)}else o.push(n,s)}}}function Zs(t,e,n){return n&&t.componentProviders++,t.multi.push(e)-1}function to(t,e,n,r){for(let i=n;i<r;i++)if(e[i]===t)return i;return-1}function eo(t,e,n,r){return ro(this.multi,[])}function no(t,e,n,r){const i=this.multi;let s;if(this.providerFactory){const t=this.providerFactory.componentProviders,e=kn(n,n[1],this.providerFactory.index,r);s=e.slice(0,t),ro(i,s);for(let n=t;n<e.length;n++)s.push(e[n])}else s=[],ro(i,s);return s}function ro(t,e){for(let n=0;n<t.length;n++)e.push((0,t[n])());return e}function io(t,e=[]){return n=>{n.providersResolver=(n,r)=>function(t,e,n){const r=Ae();if(r.firstCreatePass){const i=se(t);Js(n,r.data,r.blueprint,i,!0),Js(e,r.data,r.blueprint,i,!1)}}(n,r?r(t):t,e)}}class so{}class oo{resolveComponentFactory(t){throw function(t){const e=Error(`No component factory found for ${nt(t)}. Did you add it to @NgModule.entryComponents?`);return e.ngComponent=t,e}(t)}}let ao=(()=>{class t{}return t.NULL=new oo,t})();function uo(...t){}function co(t,e){return new ho(ve(t,e))}const lo=function(){return co(xe(),ke())};let ho=(()=>{class t{constructor(t){this.nativeElement=t}}return t.__NG_ELEMENT_ID__=lo,t})();class fo{}let po=(()=>{class t{}return t.__NG_ELEMENT_ID__=()=>go(),t})();const go=function(){const t=ke(),e=be(xe().index,t);return function(t){return t[11]}(te(e)?e:t)};let mo=(()=>{class t{}return t.\u0275prov=dt({token:t,providedIn:"root",factory:()=>null}),t})();class yo{constructor(t){this.full=t,this.major=t.split(".")[0],this.minor=t.split(".")[1],this.patch=t.split(".").slice(2).join(".")}}const vo=new yo("12.0.5");class wo{constructor(){}supports(t){return ys(t)}create(t){return new _o(t)}}const bo=(t,e)=>e;class _o{constructor(t){this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=t||bo}forEachItem(t){let e;for(e=this._itHead;null!==e;e=e._next)t(e)}forEachOperation(t){let e=this._itHead,n=this._removalsHead,r=0,i=null;for(;e||n;){const s=!n||e&&e.currentIndex<To(n,r,i)?e:n,o=To(s,r,i),a=s.currentIndex;if(s===n)r--,n=n._nextRemoved;else if(e=e._next,null==s.previousIndex)r++;else{i||(i=[]);const t=o-r,e=a-r;if(t!=e){for(let n=0;n<t;n++){const r=n<i.length?i[n]:i[n]=0,s=r+n;e<=s&&s<t&&(i[n]=r+1)}i[s.previousIndex]=e-t}}o!==a&&t(s,o,a)}}forEachPreviousItem(t){let e;for(e=this._previousItHead;null!==e;e=e._nextPrevious)t(e)}forEachAddedItem(t){let e;for(e=this._additionsHead;null!==e;e=e._nextAdded)t(e)}forEachMovedItem(t){let e;for(e=this._movesHead;null!==e;e=e._nextMoved)t(e)}forEachRemovedItem(t){let e;for(e=this._removalsHead;null!==e;e=e._nextRemoved)t(e)}forEachIdentityChange(t){let e;for(e=this._identityChangesHead;null!==e;e=e._nextIdentityChange)t(e)}diff(t){if(null==t&&(t=[]),!ys(t))throw new Error(`Error trying to diff '${nt(t)}'. Only arrays and iterables are allowed`);return this.check(t)?this:null}onDestroy(){}check(t){this._reset();let e,n,r,i=this._itHead,s=!1;if(Array.isArray(t)){this.length=t.length;for(let e=0;e<this.length;e++)n=t[e],r=this._trackByFn(e,n),null!==i&&Object.is(i.trackById,r)?(s&&(i=this._verifyReinsertion(i,n,r,e)),Object.is(i.item,n)||this._addIdentityChange(i,n)):(i=this._mismatch(i,n,r,e),s=!0),i=i._next}else e=0,function(t,e){if(Array.isArray(t))for(let n=0;n<t.length;n++)e(t[n]);else{const n=t[ms()]();let r;for(;!(r=n.next()).done;)e(r.value)}}(t,t=>{r=this._trackByFn(e,t),null!==i&&Object.is(i.trackById,r)?(s&&(i=this._verifyReinsertion(i,t,r,e)),Object.is(i.item,t)||this._addIdentityChange(i,t)):(i=this._mismatch(i,t,r,e),s=!0),i=i._next,e++}),this.length=e;return this._truncate(i),this.collection=t,this.isDirty}get isDirty(){return null!==this._additionsHead||null!==this._movesHead||null!==this._removalsHead||null!==this._identityChangesHead}_reset(){if(this.isDirty){let t;for(t=this._previousItHead=this._itHead;null!==t;t=t._next)t._nextPrevious=t._next;for(t=this._additionsHead;null!==t;t=t._nextAdded)t.previousIndex=t.currentIndex;for(this._additionsHead=this._additionsTail=null,t=this._movesHead;null!==t;t=t._nextMoved)t.previousIndex=t.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(t,e,n,r){let i;return null===t?i=this._itTail:(i=t._prev,this._remove(t)),null!==(t=null===this._unlinkedRecords?null:this._unlinkedRecords.get(n,null))?(Object.is(t.item,e)||this._addIdentityChange(t,e),this._reinsertAfter(t,i,r)):null!==(t=null===this._linkedRecords?null:this._linkedRecords.get(n,r))?(Object.is(t.item,e)||this._addIdentityChange(t,e),this._moveAfter(t,i,r)):t=this._addAfter(new Io(e,n),i,r),t}_verifyReinsertion(t,e,n,r){let i=null===this._unlinkedRecords?null:this._unlinkedRecords.get(n,null);return null!==i?t=this._reinsertAfter(i,t._prev,r):t.currentIndex!=r&&(t.currentIndex=r,this._addToMoves(t,r)),t}_truncate(t){for(;null!==t;){const e=t._next;this._addToRemovals(this._unlink(t)),t=e}null!==this._unlinkedRecords&&this._unlinkedRecords.clear(),null!==this._additionsTail&&(this._additionsTail._nextAdded=null),null!==this._movesTail&&(this._movesTail._nextMoved=null),null!==this._itTail&&(this._itTail._next=null),null!==this._removalsTail&&(this._removalsTail._nextRemoved=null),null!==this._identityChangesTail&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(t,e,n){null!==this._unlinkedRecords&&this._unlinkedRecords.remove(t);const r=t._prevRemoved,i=t._nextRemoved;return null===r?this._removalsHead=i:r._nextRemoved=i,null===i?this._removalsTail=r:i._prevRemoved=r,this._insertAfter(t,e,n),this._addToMoves(t,n),t}_moveAfter(t,e,n){return this._unlink(t),this._insertAfter(t,e,n),this._addToMoves(t,n),t}_addAfter(t,e,n){return this._insertAfter(t,e,n),this._additionsTail=null===this._additionsTail?this._additionsHead=t:this._additionsTail._nextAdded=t,t}_insertAfter(t,e,n){const r=null===e?this._itHead:e._next;return t._next=r,t._prev=e,null===r?this._itTail=t:r._prev=t,null===e?this._itHead=t:e._next=t,null===this._linkedRecords&&(this._linkedRecords=new Eo),this._linkedRecords.put(t),t.currentIndex=n,t}_remove(t){return this._addToRemovals(this._unlink(t))}_unlink(t){null!==this._linkedRecords&&this._linkedRecords.remove(t);const e=t._prev,n=t._next;return null===e?this._itHead=n:e._next=n,null===n?this._itTail=e:n._prev=e,t}_addToMoves(t,e){return t.previousIndex===e||(this._movesTail=null===this._movesTail?this._movesHead=t:this._movesTail._nextMoved=t),t}_addToRemovals(t){return null===this._unlinkedRecords&&(this._unlinkedRecords=new Eo),this._unlinkedRecords.put(t),t.currentIndex=null,t._nextRemoved=null,null===this._removalsTail?(this._removalsTail=this._removalsHead=t,t._prevRemoved=null):(t._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=t),t}_addIdentityChange(t,e){return t.item=e,this._identityChangesTail=null===this._identityChangesTail?this._identityChangesHead=t:this._identityChangesTail._nextIdentityChange=t,t}}class Io{constructor(t,e){this.item=t,this.trackById=e,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null}}class So{constructor(){this._head=null,this._tail=null}add(t){null===this._head?(this._head=this._tail=t,t._nextDup=null,t._prevDup=null):(this._tail._nextDup=t,t._prevDup=this._tail,t._nextDup=null,this._tail=t)}get(t,e){let n;for(n=this._head;null!==n;n=n._nextDup)if((null===e||e<=n.currentIndex)&&Object.is(n.trackById,t))return n;return null}remove(t){const e=t._prevDup,n=t._nextDup;return null===e?this._head=n:e._nextDup=n,null===n?this._tail=e:n._prevDup=e,null===this._head}}class Eo{constructor(){this.map=new Map}put(t){const e=t.trackById;let n=this.map.get(e);n||(n=new So,this.map.set(e,n)),n.add(t)}get(t,e){const n=this.map.get(t);return n?n.get(t,e):null}remove(t){const e=t.trackById;return this.map.get(e).remove(t)&&this.map.delete(e),t}get isEmpty(){return 0===this.map.size}clear(){this.map.clear()}}function To(t,e,n){const r=t.previousIndex;if(null===r)return r;let i=0;return n&&r<n.length&&(i=n[r]),r+e+i}class Co{constructor(){}supports(t){return t instanceof Map||vs(t)}create(){return new ko}}class ko{constructor(){this._records=new Map,this._mapHead=null,this._appendAfter=null,this._previousMapHead=null,this._changesHead=null,this._changesTail=null,this._additionsHead=null,this._additionsTail=null,this._removalsHead=null,this._removalsTail=null}get isDirty(){return null!==this._additionsHead||null!==this._changesHead||null!==this._removalsHead}forEachItem(t){let e;for(e=this._mapHead;null!==e;e=e._next)t(e)}forEachPreviousItem(t){let e;for(e=this._previousMapHead;null!==e;e=e._nextPrevious)t(e)}forEachChangedItem(t){let e;for(e=this._changesHead;null!==e;e=e._nextChanged)t(e)}forEachAddedItem(t){let e;for(e=this._additionsHead;null!==e;e=e._nextAdded)t(e)}forEachRemovedItem(t){let e;for(e=this._removalsHead;null!==e;e=e._nextRemoved)t(e)}diff(t){if(t){if(!(t instanceof Map||vs(t)))throw new Error(`Error trying to diff '${nt(t)}'. Only maps and objects are allowed`)}else t=new Map;return this.check(t)?this:null}onDestroy(){}check(t){this._reset();let e=this._mapHead;if(this._appendAfter=null,this._forEach(t,(t,n)=>{if(e&&e.key===n)this._maybeAddToChanges(e,t),this._appendAfter=e,e=e._next;else{const r=this._getOrCreateRecordForKey(n,t);e=this._insertBeforeOrAppend(e,r)}}),e){e._prev&&(e._prev._next=null),this._removalsHead=e;for(let t=e;null!==t;t=t._nextRemoved)t===this._mapHead&&(this._mapHead=null),this._records.delete(t.key),t._nextRemoved=t._next,t.previousValue=t.currentValue,t.currentValue=null,t._prev=null,t._next=null}return this._changesTail&&(this._changesTail._nextChanged=null),this._additionsTail&&(this._additionsTail._nextAdded=null),this.isDirty}_insertBeforeOrAppend(t,e){if(t){const n=t._prev;return e._next=t,e._prev=n,t._prev=e,n&&(n._next=e),t===this._mapHead&&(this._mapHead=e),this._appendAfter=t,t}return this._appendAfter?(this._appendAfter._next=e,e._prev=this._appendAfter):this._mapHead=e,this._appendAfter=e,null}_getOrCreateRecordForKey(t,e){if(this._records.has(t)){const n=this._records.get(t);this._maybeAddToChanges(n,e);const r=n._prev,i=n._next;return r&&(r._next=i),i&&(i._prev=r),n._next=null,n._prev=null,n}const n=new Ao(t);return this._records.set(t,n),n.currentValue=e,this._addToAdditions(n),n}_reset(){if(this.isDirty){let t;for(this._previousMapHead=this._mapHead,t=this._previousMapHead;null!==t;t=t._next)t._nextPrevious=t._next;for(t=this._changesHead;null!==t;t=t._nextChanged)t.previousValue=t.currentValue;for(t=this._additionsHead;null!=t;t=t._nextAdded)t.previousValue=t.currentValue;this._changesHead=this._changesTail=null,this._additionsHead=this._additionsTail=null,this._removalsHead=null}}_maybeAddToChanges(t,e){Object.is(e,t.currentValue)||(t.previousValue=t.currentValue,t.currentValue=e,this._addToChanges(t))}_addToAdditions(t){null===this._additionsHead?this._additionsHead=this._additionsTail=t:(this._additionsTail._nextAdded=t,this._additionsTail=t)}_addToChanges(t){null===this._changesHead?this._changesHead=this._changesTail=t:(this._changesTail._nextChanged=t,this._changesTail=t)}_forEach(t,e){t instanceof Map?t.forEach(e):Object.keys(t).forEach(n=>e(t[n],n))}}class Ao{constructor(t){this.key=t,this.previousValue=null,this.currentValue=null,this._nextPrevious=null,this._next=null,this._prev=null,this._nextAdded=null,this._nextRemoved=null,this._nextChanged=null}}function xo(){return new Oo([new wo])}let Oo=(()=>{class t{constructor(t){this.factories=t}static create(e,n){if(null!=n){const t=n.factories.slice();e=e.concat(t)}return new t(e)}static extend(e){return{provide:t,useFactory:n=>t.create(e,n||xo()),deps:[[t,new nr,new er]]}}find(t){const e=this.factories.find(e=>e.supports(t));if(null!=e)return e;throw new Error(`Cannot find a differ supporting object '${t}' of type '${n=t,n.name||typeof n}'`);var n}}return t.\u0275prov=dt({token:t,providedIn:"root",factory:xo}),t})();function Do(){return new No([new Co])}let No=(()=>{class t{constructor(t){this.factories=t}static create(e,n){if(n){const t=n.factories.slice();e=e.concat(t)}return new t(e)}static extend(e){return{provide:t,useFactory:n=>t.create(e,n||Do()),deps:[[t,new nr,new er]]}}find(t){const e=this.factories.find(e=>e.supports(t));if(e)return e;throw new Error(`Cannot find a differ supporting object '${t}'`)}}return t.\u0275prov=dt({token:t,providedIn:"root",factory:Do}),t})();function Ro(t,e,n,r,i=!1){for(;null!==n;){const s=e[n.index];if(null!==s&&r.push(me(s)),ee(s))for(let t=Zt;t<s.length;t++){const e=s[t],n=e[1].firstChild;null!==n&&Ro(e[1],e,n,r)}const o=n.type;if(8&o)Ro(t,e,n.child,r);else if(32&o){const t=vr(n,e);let i;for(;i=t();)r.push(i)}else if(16&o){const t=Mr(e,n);if(Array.isArray(t))r.push(...t);else{const n=wr(e[16]);Ro(n[1],n,t,r,!0)}}n=i?n.projectionNext:n.next}return r}class Po{constructor(t,e){this._lView=t,this._cdRefInjectingView=e,this._appRef=null,this._attachedToViewContainer=!1}get rootNodes(){const t=this._lView,e=t[1];return Ro(e,t,e.firstChild,[])}get context(){return this._lView[8]}set context(t){this._lView[8]=t}get destroyed(){return 256==(256&this._lView[2])}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){const t=this._lView[3];if(ee(t)){const e=t[8],n=e?e.indexOf(this):-1;n>-1&&(Cr(t,n),jn(e,n))}this._attachedToViewContainer=!1}kr(this._lView[1],this._lView)}onDestroy(t){!function(t,e,n,r){const i=$i(e);i.push(r)}(0,this._lView,0,t)}markForCheck(){Vi(this._cdRefInjectingView||this._lView)}detach(){this._lView[2]&=-129}reattach(){this._lView[2]|=128}detectChanges(){Fi(this._lView[1],this._lView,this.context)}checkNoChanges(){!function(t,e,n){Pe(!0);try{Fi(t,e,n)}finally{Pe(!1)}}(this._lView[1],this._lView,this.context)}attachToViewContainerRef(){if(this._appRef)throw new Error("This view is already attached directly to the ApplicationRef!");this._attachedToViewContainer=!0}detachFromAppRef(){var t;this._appRef=null,Fr(this._lView[1],t=this._lView,t[11],2,null,null)}attachToAppRef(t){if(this._attachedToViewContainer)throw new Error("This view is already attached to a ViewContainer!");this._appRef=t}}class Mo extends Po{constructor(t){super(t),this._view=t}detectChanges(){Ui(this._view)}checkNoChanges(){!function(t){Pe(!0);try{Ui(t)}finally{Pe(!1)}}(this._view)}get context(){return null}}const Lo=function(t){return function(t,e,n){if(re(t)&&!n){const n=be(t.index,e);return new Po(n,n)}return 47&t.type?new Po(e[16],e):null}(xe(),ke(),16==(16&t))};let Vo=(()=>{class t{}return t.__NG_ELEMENT_ID__=Lo,t})();const Fo=[new Co],Uo=new Oo([new wo]),jo=new No(Fo),Bo=function(){return t=xe(),e=ke(),4&t.type?new Ho(e,t,co(t,e)):null;var t,e};let $o=(()=>{class t{}return t.__NG_ELEMENT_ID__=Bo,t})();const qo=$o,Ho=class extends qo{constructor(t,e,n){super(),this._declarationLView=t,this._declarationTContainer=e,this.elementRef=n}createEmbeddedView(t){const e=this._declarationTContainer.tViews,n=ci(this._declarationLView,e,t,16,null,e.declTNode,null,null,null,null);n[17]=this._declarationLView[this._declarationTContainer.index];const r=this._declarationLView[19];return null!==r&&(n[19]=r.createEmbeddedView(e)),di(e,n,t),new Po(n)}};class zo{}class Ko{}const Go=function(){return function(t,e){let n;const r=e[t.index];if(ee(r))n=r;else{let i;if(8&t.type)i=me(r);else{const n=e[11];i=n.createComment("");const r=ve(t,e);xr(n,Nr(n,r),i,function(t,e){return pe(t)?t.nextSibling(e):e.nextSibling}(n,r),!1)}e[t.index]=n=Ni(r,e,i,t),Li(e,n)}return new Yo(n,t,e)}(xe(),ke())};let Wo=(()=>{class t{}return t.__NG_ELEMENT_ID__=Go,t})();const Qo=Wo,Yo=class extends Qo{constructor(t,e,n){super(),this._lContainer=t,this._hostTNode=e,this._hostLView=n}get element(){return co(this._hostTNode,this._hostLView)}get injector(){return new On(this._hostTNode,this._hostLView)}get parentInjector(){const t=wn(this._hostTNode,this._hostLView);if(ln(t)){const e=dn(t,this._hostLView),n=hn(t);return new On(e[1].data[n+8],e)}return new On(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(t){const e=Jo(this._lContainer);return null!==e&&e[t]||null}get length(){return this._lContainer.length-Zt}createEmbeddedView(t,e,n){const r=t.createEmbeddedView(e||{});return this.insert(r,n),r}createComponent(t,e,n,r,i){const s=n||this.parentInjector;if(!i&&null==t.ngModule&&s){const t=s.get(zo,null);t&&(i=t)}const o=t.create(s,r,void 0,i);return this.insert(o.hostView,e),o}insert(t,e){const n=t._lView,r=n[1];if(ee(n[3])){const e=this.indexOf(t);if(-1!==e)this.detach(e);else{const e=n[3],r=new Yo(e,e[6],e[3]);r.detach(r.indexOf(t))}}const i=this._adjustIndex(e),s=this._lContainer;!function(t,e,n,r){const i=Zt+r,s=n.length;r>0&&(n[i-1][4]=e),r<s-Zt?(e[4]=n[i],Un(n,Zt+r,e)):(n.push(e),e[4]=null),e[3]=n;const o=e[17];null!==o&&n!==o&&function(t,e){const n=t[9];e[16]!==e[3][3][16]&&(t[2]=!0),null===n?t[9]=[e]:n.push(e)}(o,e);const a=e[19];null!==a&&a.insertView(t),e[2]|=128}(r,n,s,i);const o=Lr(i,s),a=n[11],u=Nr(a,s[7]);return null!==u&&function(t,e,n,r,i,s){r[0]=i,r[6]=e,Fr(t,r,n,1,i,s)}(r,s[6],a,n,u,o),t.attachToViewContainerRef(),Un(Xo(s),i,t),t}move(t,e){return this.insert(t,e)}indexOf(t){const e=Jo(this._lContainer);return null!==e?e.indexOf(t):-1}remove(t){const e=this._adjustIndex(t,-1),n=Cr(this._lContainer,e);n&&(jn(Xo(this._lContainer),e),kr(n[1],n))}detach(t){const e=this._adjustIndex(t,-1),n=Cr(this._lContainer,e);return n&&null!=jn(Xo(this._lContainer),e)?new Po(n):null}_adjustIndex(t,e=0){return null==t?this.length+e:t}};function Jo(t){return t[8]}function Xo(t){return t[8]||(t[8]=[])}const Zo={};class ta extends ao{constructor(t){super(),this.ngModule=t}resolveComponentFactory(t){const e=Yt(t);return new ra(e,this.ngModule)}}function ea(t){const e=[];for(let n in t)t.hasOwnProperty(n)&&e.push({propName:t[n],templateName:n});return e}const na=new Mn("SCHEDULER_TOKEN",{providedIn:"root",factory:()=>gr});class ra extends so{constructor(t,e){super(),this.componentDef=t,this.ngModule=e,this.componentType=t.type,this.selector=t.selectors.map(Xr).join(","),this.ngContentSelectors=t.ngContentSelectors?t.ngContentSelectors:[],this.isBoundToModule=!!e}get inputs(){return ea(this.componentDef.inputs)}get outputs(){return ea(this.componentDef.outputs)}create(t,e,n,r){const i=(r=r||this.ngModule)?function(t,e){return{get:(n,r,i)=>{const s=t.get(n,Zo,i);return s!==Zo||r===Zo?s:e.get(n,r,i)}}}(t,r.injector):t,s=i.get(fo,ge),o=i.get(mo,null),a=s.createRenderer(null,this.componentDef),u=this.componentDef.selectors[0][0]||"div",c=n?function(t,e,n){if(pe(t))return t.selectRootElement(e,n===kt.ShadowDom);let r="string"==typeof e?t.querySelector(e):e;return r.textContent="",r}(a,n,this.componentDef.encapsulation):Er(s.createRenderer(null,this.componentDef),u,function(t){const e=t.toLowerCase();return"svg"===e?"http://www.w3.org/2000/svg":"math"===e?"http://www.w3.org/1998/MathML/":null}(u)),l=this.componentDef.onPush?576:528,h={components:[],scheduler:gr,clean:Bi,playerHandler:null,flags:0},d=wi(0,null,null,1,0,null,null,null,null,null),f=ci(null,d,h,l,null,null,s,a,o,i);let p,g;Be(f);try{const t=function(t,e,n,r,i,s){const o=n[1];n[20]=t;const a=li(o,20,2,"#host",null),u=a.mergedAttrs=e.hostAttrs;null!==u&&(Ki(a,u,!0),null!==t&&(sn(i,t,u),null!==a.classes&&Br(i,t,a.classes),null!==a.styles&&jr(i,t,a.styles)));const c=r.createRenderer(t,e),l=ci(n,vi(e),null,e.onPush?64:16,n[20],a,r,c,null,null);return o.firstCreatePass&&(bn(mn(a,n),o,e.type),Ti(o,a),ki(a,n.length,1)),Li(n,l),n[20]=l}(c,this.componentDef,f,s,a);if(c)if(n)sn(a,c,["ng-version",vo.full]);else{const{attrs:t,classes:e}=function(t){const e=[],n=[];let r=1,i=2;for(;r<t.length;){let s=t[r];if("string"==typeof s)2===i?""!==s&&e.push(s,t[++r]):8===i&&n.push(s);else{if(!Wr(i))break;i=s}r++}return{attrs:e,classes:n}}(this.componentDef.selectors[0]);t&&sn(a,c,t),e&&e.length>0&&Br(a,c,e.join(" "))}if(g=we(d,Xt),void 0!==e){const t=g.projection=[];for(let n=0;n<this.ngContentSelectors.length;n++){const r=e[n];t.push(null!=r?Array.from(r):null)}}p=function(t,e,n,r,i){const s=n[1],o=function(t,e,n){const r=xe();t.firstCreatePass&&(n.providersResolver&&n.providersResolver(n),Ai(t,r,e,hi(t,e,1,null),n));const i=kn(e,t,r.directiveStart,r);cr(i,e);const s=ve(r,e);return s&&cr(s,e),i}(s,n,e);if(r.components.push(o),t[8]=o,i&&i.forEach(t=>t(o,e)),e.contentQueries){const t=xe();e.contentQueries(1,o,t.directiveStart)}const a=xe();return!s.firstCreatePass||null===e.hostBindings&&null===e.hostAttrs||(We(a.index),Si(n[1],a,0,a.directiveStart,a.directiveEnd,e),Ei(e,o)),o}(t,this.componentDef,f,h,[cs]),di(d,f,null)}finally{Ke()}return new ia(this.componentType,p,co(g,f),f,g)}}class ia extends class{}{constructor(t,e,n,r,i){super(),this.location=n,this._rootLView=r,this._tNode=i,this.instance=e,this.hostView=this.changeDetectorRef=new Mo(r),this.componentType=t}get injector(){return new On(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(t){this.hostView.onDestroy(t)}}const sa=new Map;class oa extends zo{constructor(t,e){super(),this._parent=e,this._bootstrapComponents=[],this.injector=this,this.destroyCbs=[],this.componentFactoryResolver=new ta(this);const n=Jt(t),r=t[Ut]||null;r&&Ys(r),this._bootstrapComponents=mr(n.bootstrap),this._r3Injector=ts(t,e,[{provide:zo,useValue:this},{provide:ao,useValue:this.componentFactoryResolver}],nt(t)),this._r3Injector._resolveInjectorDefTypes(),this.instance=this.get(t)}get(t,e=us.THROW_IF_NOT_FOUND,n=_t.Default){return t===us||t===zo||t===Gi?this:this._r3Injector.get(t,e,n)}destroy(){const t=this._r3Injector;!t.destroyed&&t.destroy(),this.destroyCbs.forEach(t=>t()),this.destroyCbs=null}onDestroy(t){this.destroyCbs.push(t)}}class aa extends Ko{constructor(t){super(),this.moduleType=t,null!==Jt(t)&&function(t){const e=new Set;!function t(n){const r=Jt(n,!0),i=r.id;null!==i&&(function(t,e,n){if(e&&e!==n)throw new Error(`Duplicate module registered for ${t} - ${nt(e)} vs ${nt(e.name)}`)}(i,sa.get(i),n),sa.set(i,n));const s=mr(r.imports);for(const o of s)e.has(o)||(e.add(o),t(o))}(t)}(t)}create(t){return new oa(this.moduleType,t)}}function ua(t){return e=>{setTimeout(t,void 0,e)}}const ca=class extends T{constructor(t=!1){super(),this.__isAsync=t}emit(t){super.next(t)}subscribe(t,e,n){var r,i,s;let o=t,a=e||(()=>null),u=n;if(t&&"object"==typeof t){const e=t;o=null===(r=e.next)||void 0===r?void 0:r.bind(e),a=null===(i=e.error)||void 0===i?void 0:i.bind(e),u=null===(s=e.complete)||void 0===s?void 0:s.bind(e)}this.__isAsync&&(a=ua(a),o&&(o=ua(o)),u&&(u=ua(u)));const c=super.subscribe({next:o,error:a,complete:u});return t instanceof h&&t.add(c),c}},la=new Mn("Application Initializer");let ha=(()=>{class t{constructor(t){this.appInits=t,this.resolve=uo,this.reject=uo,this.initialized=!1,this.done=!1,this.donePromise=new Promise((t,e)=>{this.resolve=t,this.reject=e})}runInitializers(){if(this.initialized)return;const t=[],e=()=>{this.done=!0,this.resolve()};if(this.appInits)for(let n=0;n<this.appInits.length;n++){const e=this.appInits[n]();if(ks(e))t.push(e);else if(As(e)){const n=new Promise((t,n)=>{e.subscribe({complete:t,error:n})});t.push(n)}}Promise.all(t).then(()=>{e()}).catch(t=>{this.reject(t)}),0===t.length&&e(),this.initialized=!0}}return t.\u0275fac=function(e){return new(e||t)(Jn(la,8))},t.\u0275prov=dt({token:t,factory:t.\u0275fac}),t})();const da=new Mn("AppId"),fa={provide:da,useFactory:function(){return`${pa()}${pa()}${pa()}`},deps:[]};function pa(){return String.fromCharCode(97+Math.floor(25*Math.random()))}const ga=new Mn("Platform Initializer"),ma=new Mn("Platform ID"),ya=new Mn("appBootstrapListener");let va=(()=>{class t{log(t){console.log(t)}warn(t){console.warn(t)}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=dt({token:t,factory:t.\u0275fac}),t})();const wa=new Mn("LocaleId"),ba=new Mn("DefaultCurrencyCode");class _a{constructor(t,e){this.ngModuleFactory=t,this.componentFactories=e}}const Ia=function(t){return new aa(t)},Sa=Ia,Ea=function(t){return Promise.resolve(Ia(t))},Ta=function(t){const e=Ia(t),n=mr(Jt(t).declarations).reduce((t,e)=>{const n=Yt(e);return n&&t.push(new ra(n)),t},[]);return new _a(e,n)},Ca=Ta,ka=function(t){return Promise.resolve(Ta(t))};let Aa=(()=>{class t{constructor(){this.compileModuleSync=Sa,this.compileModuleAsync=Ea,this.compileModuleAndAllComponentsSync=Ca,this.compileModuleAndAllComponentsAsync=ka}clearCache(){}clearCacheFor(t){}getModuleId(t){}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=dt({token:t,factory:t.\u0275fac}),t})();const xa=(()=>Promise.resolve(0))();function Oa(t){"undefined"==typeof Zone?xa.then(()=>{t&&t.apply(null,null)}):Zone.current.scheduleMicroTask("scheduleMicrotask",t)}class Da{constructor({enableLongStackTrace:t=!1,shouldCoalesceEventChangeDetection:e=!1,shouldCoalesceRunChangeDetection:n=!1}){if(this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new ca(!1),this.onMicrotaskEmpty=new ca(!1),this.onStable=new ca(!1),this.onError=new ca(!1),"undefined"==typeof Zone)throw new Error("In this configuration Angular requires Zone.js");Zone.assertZonePatched();const r=this;r._nesting=0,r._outer=r._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(r._inner=r._inner.fork(new Zone.TaskTrackingZoneSpec)),t&&Zone.longStackTraceZoneSpec&&(r._inner=r._inner.fork(Zone.longStackTraceZoneSpec)),r.shouldCoalesceEventChangeDetection=!n&&e,r.shouldCoalesceRunChangeDetection=n,r.lastRequestAnimationFrameId=-1,r.nativeRequestAnimationFrame=function(){let t=Nt.requestAnimationFrame,e=Nt.cancelAnimationFrame;if("undefined"!=typeof Zone&&t&&e){const n=t[Zone.__symbol__("OriginalDelegate")];n&&(t=n);const r=e[Zone.__symbol__("OriginalDelegate")];r&&(e=r)}return{nativeRequestAnimationFrame:t,nativeCancelAnimationFrame:e}}().nativeRequestAnimationFrame,function(t){const e=()=>{!function(t){t.isCheckStableRunning||-1!==t.lastRequestAnimationFrameId||(t.lastRequestAnimationFrameId=t.nativeRequestAnimationFrame.call(Nt,()=>{t.fakeTopEventTask||(t.fakeTopEventTask=Zone.root.scheduleEventTask("fakeTopEventTask",()=>{t.lastRequestAnimationFrameId=-1,Pa(t),t.isCheckStableRunning=!0,Ra(t),t.isCheckStableRunning=!1},void 0,()=>{},()=>{})),t.fakeTopEventTask.invoke()}),Pa(t))}(t)};t._inner=t._inner.fork({name:"angular",properties:{isAngularZone:!0},onInvokeTask:(n,r,i,s,o,a)=>{try{return Ma(t),n.invokeTask(i,s,o,a)}finally{(t.shouldCoalesceEventChangeDetection&&"eventTask"===s.type||t.shouldCoalesceRunChangeDetection)&&e(),La(t)}},onInvoke:(n,r,i,s,o,a,u)=>{try{return Ma(t),n.invoke(i,s,o,a,u)}finally{t.shouldCoalesceRunChangeDetection&&e(),La(t)}},onHasTask:(e,n,r,i)=>{e.hasTask(r,i),n===r&&("microTask"==i.change?(t._hasPendingMicrotasks=i.microTask,Pa(t),Ra(t)):"macroTask"==i.change&&(t.hasPendingMacrotasks=i.macroTask))},onHandleError:(e,n,r,i)=>(e.handleError(r,i),t.runOutsideAngular(()=>t.onError.emit(i)),!1)})}(r)}static isInAngularZone(){return!0===Zone.current.get("isAngularZone")}static assertInAngularZone(){if(!Da.isInAngularZone())throw new Error("Expected to be in Angular Zone, but it is not!")}static assertNotInAngularZone(){if(Da.isInAngularZone())throw new Error("Expected to not be in Angular Zone, but it is!")}run(t,e,n){return this._inner.run(t,e,n)}runTask(t,e,n,r){const i=this._inner,s=i.scheduleEventTask("NgZoneEvent: "+r,t,Na,uo,uo);try{return i.runTask(s,e,n)}finally{i.cancelTask(s)}}runGuarded(t,e,n){return this._inner.runGuarded(t,e,n)}runOutsideAngular(t){return this._outer.run(t)}}const Na={};function Ra(t){if(0==t._nesting&&!t.hasPendingMicrotasks&&!t.isStable)try{t._nesting++,t.onMicrotaskEmpty.emit(null)}finally{if(t._nesting--,!t.hasPendingMicrotasks)try{t.runOutsideAngular(()=>t.onStable.emit(null))}finally{t.isStable=!0}}}function Pa(t){t.hasPendingMicrotasks=!!(t._hasPendingMicrotasks||(t.shouldCoalesceEventChangeDetection||t.shouldCoalesceRunChangeDetection)&&-1!==t.lastRequestAnimationFrameId)}function Ma(t){t._nesting++,t.isStable&&(t.isStable=!1,t.onUnstable.emit(null))}function La(t){t._nesting--,Ra(t)}class Va{constructor(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new ca,this.onMicrotaskEmpty=new ca,this.onStable=new ca,this.onError=new ca}run(t,e,n){return t.apply(e,n)}runGuarded(t,e,n){return t.apply(e,n)}runOutsideAngular(t){return t()}runTask(t,e,n,r){return t.apply(e,n)}}let Fa=(()=>{class t{constructor(t){this._ngZone=t,this._pendingCount=0,this._isZoneStable=!0,this._didWork=!1,this._callbacks=[],this.taskTrackingZone=null,this._watchAngularEvents(),t.run(()=>{this.taskTrackingZone="undefined"==typeof Zone?null:Zone.current.get("TaskTrackingZone")})}_watchAngularEvents(){this._ngZone.onUnstable.subscribe({next:()=>{this._didWork=!0,this._isZoneStable=!1}}),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.subscribe({next:()=>{Da.assertNotInAngularZone(),Oa(()=>{this._isZoneStable=!0,this._runCallbacksIfReady()})}})})}increasePendingRequestCount(){return this._pendingCount+=1,this._didWork=!0,this._pendingCount}decreasePendingRequestCount(){if(this._pendingCount-=1,this._pendingCount<0)throw new Error("pending async requests below zero");return this._runCallbacksIfReady(),this._pendingCount}isStable(){return this._isZoneStable&&0===this._pendingCount&&!this._ngZone.hasPendingMacrotasks}_runCallbacksIfReady(){if(this.isStable())Oa(()=>{for(;0!==this._callbacks.length;){let t=this._callbacks.pop();clearTimeout(t.timeoutId),t.doneCb(this._didWork)}this._didWork=!1});else{let t=this.getPendingTasks();this._callbacks=this._callbacks.filter(e=>!e.updateCb||!e.updateCb(t)||(clearTimeout(e.timeoutId),!1)),this._didWork=!0}}getPendingTasks(){return this.taskTrackingZone?this.taskTrackingZone.macroTasks.map(t=>({source:t.source,creationLocation:t.creationLocation,data:t.data})):[]}addCallback(t,e,n){let r=-1;e&&e>0&&(r=setTimeout(()=>{this._callbacks=this._callbacks.filter(t=>t.timeoutId!==r),t(this._didWork,this.getPendingTasks())},e)),this._callbacks.push({doneCb:t,timeoutId:r,updateCb:n})}whenStable(t,e,n){if(n&&!this.taskTrackingZone)throw new Error('Task tracking zone is required when passing an update callback to whenStable(). Is "zone.js/plugins/task-tracking" loaded?');this.addCallback(t,e,n),this._runCallbacksIfReady()}getPendingRequestCount(){return this._pendingCount}findProviders(t,e,n){return[]}}return t.\u0275fac=function(e){return new(e||t)(Jn(Da))},t.\u0275prov=dt({token:t,factory:t.\u0275fac}),t})(),Ua=(()=>{class t{constructor(){this._applications=new Map,$a.addToWindow(this)}registerApplication(t,e){this._applications.set(t,e)}unregisterApplication(t){this._applications.delete(t)}unregisterAllApplications(){this._applications.clear()}getTestability(t){return this._applications.get(t)||null}getAllTestabilities(){return Array.from(this._applications.values())}getAllRootElements(){return Array.from(this._applications.keys())}findTestabilityInTree(t,e=!0){return $a.findTestabilityInTree(this,t,e)}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=dt({token:t,factory:t.\u0275fac}),t})();class ja{addToWindow(t){}findTestabilityInTree(t,e,n){return null}}let Ba,$a=new ja,qa=!0,Ha=!1;const za=new Mn("AllowMultipleToken");class Ka{constructor(t,e){this.name=t,this.token=e}}function Ga(t,e,n=[]){const r=`Platform: ${e}`,i=new Mn(r);return(e=[])=>{let s=Wa();if(!s||s.injector.get(za,!1))if(t)t(n.concat(e).concat({provide:i,useValue:!0}));else{const t=n.concat(e).concat({provide:i,useValue:!0},{provide:Qi,useValue:"platform"});!function(t){if(Ba&&!Ba.destroyed&&!Ba.injector.get(za,!1))throw new Error("There can be only one platform. Destroy the previous one to create a new one.");Ba=t.get(Qa);const e=t.get(ga,null);e&&e.forEach(t=>t())}(us.create({providers:t,name:r}))}return function(t){const e=Wa();if(!e)throw new Error("No platform exists!");if(!e.injector.get(t,null))throw new Error("A platform with a different configuration has been created. Please destroy it first.");return e}(i)}}function Wa(){return Ba&&!Ba.destroyed?Ba:null}let Qa=(()=>{class t{constructor(t){this._injector=t,this._modules=[],this._destroyListeners=[],this._destroyed=!1}bootstrapModuleFactory(t,e){const n=function(t,e){let n;return n="noop"===t?new Va:("zone.js"===t?void 0:t)||new Da({enableLongStackTrace:(Ha=!0,qa),shouldCoalesceEventChangeDetection:!!(null==e?void 0:e.ngZoneEventCoalescing),shouldCoalesceRunChangeDetection:!!(null==e?void 0:e.ngZoneRunCoalescing)}),n}(e?e.ngZone:void 0,{ngZoneEventCoalescing:e&&e.ngZoneEventCoalescing||!1,ngZoneRunCoalescing:e&&e.ngZoneRunCoalescing||!1}),r=[{provide:Da,useValue:n}];return n.run(()=>{const e=us.create({providers:r,parent:this.injector,name:t.moduleType.name}),i=t.create(e),s=i.injector.get(pr,null);if(!s)throw new Error("No ErrorHandler. Is platform module (BrowserModule) included?");return n.runOutsideAngular(()=>{const t=n.onError.subscribe({next:t=>{s.handleError(t)}});i.onDestroy(()=>{Xa(this._modules,i),t.unsubscribe()})}),function(t,e,n){try{const r=n();return ks(r)?r.catch(n=>{throw e.runOutsideAngular(()=>t.handleError(n)),n}):r}catch(r){throw e.runOutsideAngular(()=>t.handleError(r)),r}}(s,n,()=>{const t=i.injector.get(ha);return t.runInitializers(),t.donePromise.then(()=>(Ys(i.injector.get(wa,Ws)||Ws),this._moduleDoBootstrap(i),i))})})}bootstrapModule(t,e=[]){const n=Ya({},e);return function(t,e,n){const r=new aa(n);return Promise.resolve(r)}(0,0,t).then(t=>this.bootstrapModuleFactory(t,n))}_moduleDoBootstrap(t){const e=t.injector.get(Ja);if(t._bootstrapComponents.length>0)t._bootstrapComponents.forEach(t=>e.bootstrap(t));else{if(!t.instance.ngDoBootstrap)throw new Error(`The module ${nt(t.instance.constructor)} was bootstrapped, but it does not declare "@NgModule.bootstrap" components nor a "ngDoBootstrap" method. Please define one of these.`);t.instance.ngDoBootstrap(e)}this._modules.push(t)}onDestroy(t){this._destroyListeners.push(t)}get injector(){return this._injector}destroy(){if(this._destroyed)throw new Error("The platform has already been destroyed!");this._modules.slice().forEach(t=>t.destroy()),this._destroyListeners.forEach(t=>t()),this._destroyed=!0}get destroyed(){return this._destroyed}}return t.\u0275fac=function(e){return new(e||t)(Jn(us))},t.\u0275prov=dt({token:t,factory:t.\u0275fac}),t})();function Ya(t,e){return Array.isArray(e)?e.reduce(Ya,t):Object.assign(Object.assign({},t),e)}let Ja=(()=>{class t{constructor(t,e,n,r,i){this._zone=t,this._injector=e,this._exceptionHandler=n,this._componentFactoryResolver=r,this._initStatus=i,this._bootstrapListeners=[],this._views=[],this._runningTick=!1,this._stable=!0,this.componentTypes=[],this.components=[],this._onMicrotaskEmptySubscription=this._zone.onMicrotaskEmpty.subscribe({next:()=>{this._zone.run(()=>{this.tick()})}});const s=new b(t=>{this._stable=this._zone.isStable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks,this._zone.runOutsideAngular(()=>{t.next(this._stable),t.complete()})}),o=new b(t=>{let e;this._zone.runOutsideAngular(()=>{e=this._zone.onStable.subscribe(()=>{Da.assertNotInAngularZone(),Oa(()=>{this._stable||this._zone.hasPendingMacrotasks||this._zone.hasPendingMicrotasks||(this._stable=!0,t.next(!0))})})});const n=this._zone.onUnstable.subscribe(()=>{Da.assertInAngularZone(),this._stable&&(this._stable=!1,this._zone.runOutsideAngular(()=>{t.next(!1)}))});return()=>{e.unsubscribe(),n.unsubscribe()}});this.isStable=function(...t){let e=Number.POSITIVE_INFINITY,n=null,r=t[t.length-1];return k(r)?(n=t.pop(),t.length>1&&"number"==typeof t[t.length-1]&&(e=t.pop())):"number"==typeof r&&(e=t.pop()),null===n&&1===t.length&&t[0]instanceof b?t[0]:z(e)(K(t,n))}(s,o.pipe(t=>{return G()((e=Z,function(t){let n;n="function"==typeof e?e:function(){return e};const r=Object.create(t,J);return r.source=t,r.subjectFactory=n,r})(t));var e}))}bootstrap(t,e){if(!this._initStatus.done)throw new Error("Cannot bootstrap as there are still asynchronous initializers running. Bootstrap components in the `ngDoBootstrap` method of the root module.");let n;n=t instanceof so?t:this._componentFactoryResolver.resolveComponentFactory(t),this.componentTypes.push(n.componentType);const r=n.isBoundToModule?void 0:this._injector.get(zo),i=n.create(us.NULL,[],e||n.selector,r),s=i.location.nativeElement,o=i.injector.get(Fa,null),a=o&&i.injector.get(Ua);return o&&a&&a.registerApplication(s,o),i.onDestroy(()=>{this.detachView(i.hostView),Xa(this.components,i),a&&a.unregisterApplication(s)}),this._loadComponent(i),i}tick(){if(this._runningTick)throw new Error("ApplicationRef.tick is called recursively");try{this._runningTick=!0;for(let t of this._views)t.detectChanges()}catch(t){this._zone.runOutsideAngular(()=>this._exceptionHandler.handleError(t))}finally{this._runningTick=!1}}attachView(t){const e=t;this._views.push(e),e.attachToAppRef(this)}detachView(t){const e=t;Xa(this._views,e),e.detachFromAppRef()}_loadComponent(t){this.attachView(t.hostView),this.tick(),this.components.push(t),this._injector.get(ya,[]).concat(this._bootstrapListeners).forEach(e=>e(t))}ngOnDestroy(){this._views.slice().forEach(t=>t.destroy()),this._onMicrotaskEmptySubscription.unsubscribe()}get viewCount(){return this._views.length}}return t.\u0275fac=function(e){return new(e||t)(Jn(Da),Jn(us),Jn(pr),Jn(ao),Jn(ha))},t.\u0275prov=dt({token:t,factory:t.\u0275fac}),t})();function Xa(t,e){const n=t.indexOf(e);n>-1&&t.splice(n,1)}class Za{}class tu{}const eu={factoryPathPrefix:"",factoryPathSuffix:".ngfactory"};let nu=(()=>{class t{constructor(t,e){this._compiler=t,this._config=e||eu}load(t){return this.loadAndCompile(t)}loadAndCompile(t){let[e,r]=t.split("#");return void 0===r&&(r="default"),n(255)(e).then(t=>t[r]).then(t=>ru(t,e,r)).then(t=>this._compiler.compileModuleAsync(t))}loadFactory(t){let[e,r]=t.split("#"),i="NgFactory";return void 0===r&&(r="default",i=""),n(255)(this._config.factoryPathPrefix+e+this._config.factoryPathSuffix).then(t=>t[r+i]).then(t=>ru(t,e,r))}}return t.\u0275fac=function(e){return new(e||t)(Jn(Aa),Jn(tu,8))},t.\u0275prov=dt({token:t,factory:t.\u0275fac}),t})();function ru(t,e,n){if(!t)throw new Error(`Cannot find '${n}' in '${e}'`);return t}const iu=Ga(null,"core",[{provide:ma,useValue:"unknown"},{provide:Qa,deps:[us]},{provide:Ua,deps:[]},{provide:va,deps:[]}]),su=[{provide:Ja,useClass:Ja,deps:[Da,us,pr,ao,ha]},{provide:na,deps:[Da],useFactory:function(t){let e=[];return t.onStable.subscribe(()=>{for(;e.length;)e.pop()()}),function(t){e.push(t)}}},{provide:ha,useClass:ha,deps:[[new er,la]]},{provide:Aa,useClass:Aa,deps:[]},fa,{provide:Oo,useFactory:function(){return Uo},deps:[]},{provide:No,useFactory:function(){return jo},deps:[]},{provide:wa,useFactory:function(t){return Ys(t=t||"undefined"!=typeof $localize&&$localize.locale||Ws),t},deps:[[new tr(wa),new er,new nr]]},{provide:ba,useValue:"USD"}];let ou=(()=>{class t{constructor(t){}}return t.\u0275fac=function(e){return new(e||t)(Jn(Ja))},t.\u0275mod=Gt({type:t}),t.\u0275inj=ft({providers:su}),t})(),au=null;function uu(){return au}const cu=new Mn("DocumentToken");let lu=(()=>{class t{historyGo(t){throw new Error("Not implemented")}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=dt({factory:hu,token:t,providedIn:"platform"}),t})();function hu(){return Jn(fu)}const du=new Mn("Location Initialized");let fu=(()=>{class t extends lu{constructor(t){super(),this._doc=t,this._init()}_init(){this.location=window.location,this._history=window.history}getBaseHrefFromDOM(){return uu().getBaseHref(this._doc)}onPopState(t){const e=uu().getGlobalEventTarget(this._doc,"window");return e.addEventListener("popstate",t,!1),()=>e.removeEventListener("popstate",t)}onHashChange(t){const e=uu().getGlobalEventTarget(this._doc,"window");return e.addEventListener("hashchange",t,!1),()=>e.removeEventListener("hashchange",t)}get href(){return this.location.href}get protocol(){return this.location.protocol}get hostname(){return this.location.hostname}get port(){return this.location.port}get pathname(){return this.location.pathname}get search(){return this.location.search}get hash(){return this.location.hash}set pathname(t){this.location.pathname=t}pushState(t,e,n){pu()?this._history.pushState(t,e,n):this.location.hash=n}replaceState(t,e,n){pu()?this._history.replaceState(t,e,n):this.location.hash=n}forward(){this._history.forward()}back(){this._history.back()}historyGo(t=0){this._history.go(t)}getState(){return this._history.state}}return t.\u0275fac=function(e){return new(e||t)(Jn(cu))},t.\u0275prov=dt({factory:gu,token:t,providedIn:"platform"}),t})();function pu(){return!!window.history.pushState}function gu(){return new fu(Jn(cu))}function mu(t,e){if(0==t.length)return e;if(0==e.length)return t;let n=0;return t.endsWith("/")&&n++,e.startsWith("/")&&n++,2==n?t+e.substring(1):1==n?t+e:t+"/"+e}function yu(t){const e=t.match(/#|\?|$/),n=e&&e.index||t.length;return t.slice(0,n-("/"===t[n-1]?1:0))+t.slice(n)}function vu(t){return t&&"?"!==t[0]?"?"+t:t}let wu=(()=>{class t{historyGo(t){throw new Error("Not implemented")}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=dt({factory:bu,token:t,providedIn:"root"}),t})();function bu(t){const e=Jn(cu).location;return new Iu(Jn(lu),e&&e.origin||"")}const _u=new Mn("appBaseHref");let Iu=(()=>{class t extends wu{constructor(t,e){if(super(),this._platformLocation=t,this._removeListenerFns=[],null==e&&(e=this._platformLocation.getBaseHrefFromDOM()),null==e)throw new Error("No base href set. Please provide a value for the APP_BASE_HREF token or add a base element to the document.");this._baseHref=e}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}prepareExternalUrl(t){return mu(this._baseHref,t)}path(t=!1){const e=this._platformLocation.pathname+vu(this._platformLocation.search),n=this._platformLocation.hash;return n&&t?`${e}${n}`:e}pushState(t,e,n,r){const i=this.prepareExternalUrl(n+vu(r));this._platformLocation.pushState(t,e,i)}replaceState(t,e,n,r){const i=this.prepareExternalUrl(n+vu(r));this._platformLocation.replaceState(t,e,i)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}historyGo(t=0){var e,n;null===(n=(e=this._platformLocation).historyGo)||void 0===n||n.call(e,t)}}return t.\u0275fac=function(e){return new(e||t)(Jn(lu),Jn(_u,8))},t.\u0275prov=dt({token:t,factory:t.\u0275fac}),t})(),Su=(()=>{class t extends wu{constructor(t,e){super(),this._platformLocation=t,this._baseHref="",this._removeListenerFns=[],null!=e&&(this._baseHref=e)}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}path(t=!1){let e=this._platformLocation.hash;return null==e&&(e="#"),e.length>0?e.substring(1):e}prepareExternalUrl(t){const e=mu(this._baseHref,t);return e.length>0?"#"+e:e}pushState(t,e,n,r){let i=this.prepareExternalUrl(n+vu(r));0==i.length&&(i=this._platformLocation.pathname),this._platformLocation.pushState(t,e,i)}replaceState(t,e,n,r){let i=this.prepareExternalUrl(n+vu(r));0==i.length&&(i=this._platformLocation.pathname),this._platformLocation.replaceState(t,e,i)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}historyGo(t=0){var e,n;null===(n=(e=this._platformLocation).historyGo)||void 0===n||n.call(e,t)}}return t.\u0275fac=function(e){return new(e||t)(Jn(lu),Jn(_u,8))},t.\u0275prov=dt({token:t,factory:t.\u0275fac}),t})(),Eu=(()=>{class t{constructor(t,e){this._subject=new ca,this._urlChangeListeners=[],this._platformStrategy=t;const n=this._platformStrategy.getBaseHref();this._platformLocation=e,this._baseHref=yu(Cu(n)),this._platformStrategy.onPopState(t=>{this._subject.emit({url:this.path(!0),pop:!0,state:t.state,type:t.type})})}path(t=!1){return this.normalize(this._platformStrategy.path(t))}getState(){return this._platformLocation.getState()}isCurrentPathEqualTo(t,e=""){return this.path()==this.normalize(t+vu(e))}normalize(e){return t.stripTrailingSlash(function(t,e){return t&&e.startsWith(t)?e.substring(t.length):e}(this._baseHref,Cu(e)))}prepareExternalUrl(t){return t&&"/"!==t[0]&&(t="/"+t),this._platformStrategy.prepareExternalUrl(t)}go(t,e="",n=null){this._platformStrategy.pushState(n,"",t,e),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+vu(e)),n)}replaceState(t,e="",n=null){this._platformStrategy.replaceState(n,"",t,e),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+vu(e)),n)}forward(){this._platformStrategy.forward()}back(){this._platformStrategy.back()}historyGo(t=0){var e,n;null===(n=(e=this._platformStrategy).historyGo)||void 0===n||n.call(e,t)}onUrlChange(t){this._urlChangeListeners.push(t),this._urlChangeSubscription||(this._urlChangeSubscription=this.subscribe(t=>{this._notifyUrlChangeListeners(t.url,t.state)}))}_notifyUrlChangeListeners(t="",e){this._urlChangeListeners.forEach(n=>n(t,e))}subscribe(t,e,n){return this._subject.subscribe({next:t,error:e,complete:n})}}return t.\u0275fac=function(e){return new(e||t)(Jn(wu),Jn(lu))},t.normalizeQueryParams=vu,t.joinWithSlash=mu,t.stripTrailingSlash=yu,t.\u0275prov=dt({factory:Tu,token:t,providedIn:"root"}),t})();function Tu(){return new Eu(Jn(wu),Jn(lu))}function Cu(t){return t.replace(/\/index.html$/,"")}var ku=function(t){return t[t.Zero=0]="Zero",t[t.One=1]="One",t[t.Two=2]="Two",t[t.Few=3]="Few",t[t.Many=4]="Many",t[t.Other=5]="Other",t}({});class Au{}let xu=(()=>{class t extends Au{constructor(t){super(),this.locale=t}getPluralCategory(t,e){switch(function(t){return function(t){const e=function(t){return t.toLowerCase().replace(/_/g,"-")}(t);let n=Ks(e);if(n)return n;const r=e.split("-")[0];if(n=Ks(r),n)return n;if("en"===r)return Hs;throw new Error(`Missing locale data for the locale "${t}".`)}(t)[Gs.PluralCase]}(e||this.locale)(t)){case ku.Zero:return"zero";case ku.One:return"one";case ku.Two:return"two";case ku.Few:return"few";case ku.Many:return"many";default:return"other"}}}return t.\u0275fac=function(e){return new(e||t)(Jn(wa))},t.\u0275prov=dt({token:t,factory:t.\u0275fac}),t})();class Ou{constructor(t,e,n,r){this.$implicit=t,this.ngForOf=e,this.index=n,this.count=r}get first(){return 0===this.index}get last(){return this.index===this.count-1}get even(){return this.index%2==0}get odd(){return!this.even}}let Du=(()=>{class t{constructor(t,e,n){this._viewContainer=t,this._template=e,this._differs=n,this._ngForOf=null,this._ngForOfDirty=!0,this._differ=null}set ngForOf(t){this._ngForOf=t,this._ngForOfDirty=!0}set ngForTrackBy(t){this._trackByFn=t}get ngForTrackBy(){return this._trackByFn}set ngForTemplate(t){t&&(this._template=t)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;const e=this._ngForOf;if(!this._differ&&e)try{this._differ=this._differs.find(e).create(this.ngForTrackBy)}catch(FF){throw new Error(`Cannot find a differ supporting object '${e}' of type '${t=e,t.name||typeof t}'. NgFor only supports binding to Iterables such as Arrays.`)}}var t;if(this._differ){const t=this._differ.diff(this._ngForOf);t&&this._applyChanges(t)}}_applyChanges(t){const e=[];t.forEachOperation((t,n,r)=>{if(null==t.previousIndex){const n=this._viewContainer.createEmbeddedView(this._template,new Ou(null,this._ngForOf,-1,-1),null===r?void 0:r),i=new Nu(t,n);e.push(i)}else if(null==r)this._viewContainer.remove(null===n?void 0:n);else if(null!==n){const i=this._viewContainer.get(n);this._viewContainer.move(i,r);const s=new Nu(t,i);e.push(s)}});for(let n=0;n<e.length;n++)this._perViewChange(e[n].view,e[n].record);for(let n=0,r=this._viewContainer.length;n<r;n++){const t=this._viewContainer.get(n);t.context.index=n,t.context.count=r,t.context.ngForOf=this._ngForOf}t.forEachIdentityChange(t=>{this._viewContainer.get(t.currentIndex).context.$implicit=t.item})}_perViewChange(t,e){t.context.$implicit=e.item}static ngTemplateContextGuard(t,e){return!0}}return t.\u0275fac=function(e){return new(e||t)(_s(Wo),_s($o),_s(Oo))},t.\u0275dir=Qt({type:t,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"}}),t})();class Nu{constructor(t,e){this.record=t,this.view=e}}let Ru=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=Gt({type:t}),t.\u0275inj=ft({providers:[{provide:Au,useClass:xu}]}),t})(),Pu=(()=>{class t{}return t.\u0275prov=dt({token:t,providedIn:"root",factory:()=>new Mu(Jn(cu),window)}),t})();class Mu{constructor(t,e){this.document=t,this.window=e,this.offset=()=>[0,0]}setOffset(t){this.offset=Array.isArray(t)?()=>t:t}getScrollPosition(){return this.supportsScrolling()?[this.window.pageXOffset,this.window.pageYOffset]:[0,0]}scrollToPosition(t){this.supportsScrolling()&&this.window.scrollTo(t[0],t[1])}scrollToAnchor(t){if(!this.supportsScrolling())return;const e=function(t,e){const n=t.getElementById(e)||t.getElementsByName(e)[0];if(n)return n;if("function"==typeof t.createTreeWalker&&t.body&&(t.body.createShadowRoot||t.body.attachShadow)){const n=t.createTreeWalker(t.body,NodeFilter.SHOW_ELEMENT);let r=n.currentNode;for(;r;){const t=r.shadowRoot;if(t){const n=t.getElementById(e)||t.querySelector(`[name="${e}"]`);if(n)return n}r=n.nextNode()}}return null}(this.document,t);e&&(this.scrollToElement(e),this.attemptFocus(e))}setHistoryScrollRestoration(t){if(this.supportScrollRestoration()){const e=this.window.history;e&&e.scrollRestoration&&(e.scrollRestoration=t)}}scrollToElement(t){const e=t.getBoundingClientRect(),n=e.left+this.window.pageXOffset,r=e.top+this.window.pageYOffset,i=this.offset();this.window.scrollTo(n-i[0],r-i[1])}attemptFocus(t){return t.focus(),this.document.activeElement===t}supportScrollRestoration(){try{if(!this.supportsScrolling())return!1;const t=Lu(this.window.history)||Lu(Object.getPrototypeOf(this.window.history));return!(!t||!t.writable&&!t.set)}catch(FF){return!1}}supportsScrolling(){try{return!!this.window&&!!this.window.scrollTo&&"pageXOffset"in this.window}catch(FF){return!1}}}function Lu(t){return Object.getOwnPropertyDescriptor(t,"scrollRestoration")}class Vu extends class extends class{}{constructor(){super(...arguments),this.supportsDOMEvents=!0}}{static makeCurrent(){var t;t=new Vu,au||(au=t)}onAndCancel(t,e,n){return t.addEventListener(e,n,!1),()=>{t.removeEventListener(e,n,!1)}}dispatchEvent(t,e){t.dispatchEvent(e)}remove(t){t.parentNode&&t.parentNode.removeChild(t)}createElement(t,e){return(e=e||this.getDefaultDocument()).createElement(t)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(t){return t.nodeType===Node.ELEMENT_NODE}isShadowRoot(t){return t instanceof DocumentFragment}getGlobalEventTarget(t,e){return"window"===e?window:"document"===e?t:"body"===e?t.body:null}getBaseHref(t){const e=(Uu=Uu||document.querySelector("base"),Uu?Uu.getAttribute("href"):null);return null==e?null:function(t){Fu=Fu||document.createElement("a"),Fu.setAttribute("href",t);const e=Fu.pathname;return"/"===e.charAt(0)?e:`/${e}`}(e)}resetBaseElement(){Uu=null}getUserAgent(){return window.navigator.userAgent}getCookie(t){return function(t,e){e=encodeURIComponent(e);for(const n of t.split(";")){const t=n.indexOf("="),[r,i]=-1==t?[n,""]:[n.slice(0,t),n.slice(t+1)];if(r.trim()===e)return decodeURIComponent(i)}return null}(document.cookie,t)}}let Fu,Uu=null;const ju=new Mn("TRANSITION_ID"),Bu=[{provide:la,useFactory:function(t,e,n){return()=>{n.get(ha).donePromise.then(()=>{const n=uu();Array.prototype.slice.apply(e.querySelectorAll("style[ng-transition]")).filter(e=>e.getAttribute("ng-transition")===t).forEach(t=>n.remove(t))})}},deps:[ju,cu,us],multi:!0}];class $u{static init(){var t;t=new $u,$a=t}addToWindow(t){Nt.getAngularTestability=(e,n=!0)=>{const r=t.findTestabilityInTree(e,n);if(null==r)throw new Error("Could not find testability for element.");return r},Nt.getAllAngularTestabilities=()=>t.getAllTestabilities(),Nt.getAllAngularRootElements=()=>t.getAllRootElements(),Nt.frameworkStabilizers||(Nt.frameworkStabilizers=[]),Nt.frameworkStabilizers.push(t=>{const e=Nt.getAllAngularTestabilities();let n=e.length,r=!1;const i=function(e){r=r||e,n--,0==n&&t(r)};e.forEach(function(t){t.whenStable(i)})})}findTestabilityInTree(t,e,n){if(null==e)return null;const r=t.getTestability(e);return null!=r?r:n?uu().isShadowRoot(e)?this.findTestabilityInTree(t,e.host,!0):this.findTestabilityInTree(t,e.parentElement,!0):null}}let qu=(()=>{class t{build(){return new XMLHttpRequest}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=dt({token:t,factory:t.\u0275fac}),t})();const Hu=new Mn("EventManagerPlugins");let zu=(()=>{class t{constructor(t,e){this._zone=e,this._eventNameToPlugin=new Map,t.forEach(t=>t.manager=this),this._plugins=t.slice().reverse()}addEventListener(t,e,n){return this._findPluginFor(e).addEventListener(t,e,n)}addGlobalEventListener(t,e,n){return this._findPluginFor(e).addGlobalEventListener(t,e,n)}getZone(){return this._zone}_findPluginFor(t){const e=this._eventNameToPlugin.get(t);if(e)return e;const n=this._plugins;for(let r=0;r<n.length;r++){const e=n[r];if(e.supports(t))return this._eventNameToPlugin.set(t,e),e}throw new Error(`No event manager plugin found for event ${t}`)}}return t.\u0275fac=function(e){return new(e||t)(Jn(Hu),Jn(Da))},t.\u0275prov=dt({token:t,factory:t.\u0275fac}),t})();class Ku{constructor(t){this._doc=t}addGlobalEventListener(t,e,n){const r=uu().getGlobalEventTarget(this._doc,t);if(!r)throw new Error(`Unsupported event target ${r} for event ${e}`);return this.addEventListener(r,e,n)}}let Gu=(()=>{class t{constructor(){this._stylesSet=new Set}addStyles(t){const e=new Set;t.forEach(t=>{this._stylesSet.has(t)||(this._stylesSet.add(t),e.add(t))}),this.onStylesAdded(e)}onStylesAdded(t){}getAllStyles(){return Array.from(this._stylesSet)}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=dt({token:t,factory:t.\u0275fac}),t})(),Wu=(()=>{class t extends Gu{constructor(t){super(),this._doc=t,this._hostNodes=new Map,this._hostNodes.set(t.head,[])}_addStylesToHost(t,e,n){t.forEach(t=>{const r=this._doc.createElement("style");r.textContent=t,n.push(e.appendChild(r))})}addHost(t){const e=[];this._addStylesToHost(this._stylesSet,t,e),this._hostNodes.set(t,e)}removeHost(t){const e=this._hostNodes.get(t);e&&e.forEach(Qu),this._hostNodes.delete(t)}onStylesAdded(t){this._hostNodes.forEach((e,n)=>{this._addStylesToHost(t,n,e)})}ngOnDestroy(){this._hostNodes.forEach(t=>t.forEach(Qu))}}return t.\u0275fac=function(e){return new(e||t)(Jn(cu))},t.\u0275prov=dt({token:t,factory:t.\u0275fac}),t})();function Qu(t){uu().remove(t)}const Yu={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"},Ju=/%COMP%/g;function Xu(t,e,n){for(let r=0;r<e.length;r++){let i=e[r];Array.isArray(i)?Xu(t,i,n):(i=i.replace(Ju,t),n.push(i))}return n}function Zu(t){return e=>{if("__ngUnwrap__"===e)return t;!1===t(e)&&(e.preventDefault(),e.returnValue=!1)}}let tc=(()=>{class t{constructor(t,e,n){this.eventManager=t,this.sharedStylesHost=e,this.appId=n,this.rendererByCompId=new Map,this.defaultRenderer=new ec(t)}createRenderer(t,e){if(!t||!e)return this.defaultRenderer;switch(e.encapsulation){case kt.Emulated:{let n=this.rendererByCompId.get(e.id);return n||(n=new nc(this.eventManager,this.sharedStylesHost,e,this.appId),this.rendererByCompId.set(e.id,n)),n.applyToHost(t),n}case 1:case kt.ShadowDom:return new rc(this.eventManager,this.sharedStylesHost,t,e);default:if(!this.rendererByCompId.has(e.id)){const t=Xu(e.id,e.styles,[]);this.sharedStylesHost.addStyles(t),this.rendererByCompId.set(e.id,this.defaultRenderer)}return this.defaultRenderer}}begin(){}end(){}}return t.\u0275fac=function(e){return new(e||t)(Jn(zu),Jn(Wu),Jn(da))},t.\u0275prov=dt({token:t,factory:t.\u0275fac}),t})();class ec{constructor(t){this.eventManager=t,this.data=Object.create(null)}destroy(){}createElement(t,e){return e?document.createElementNS(Yu[e]||e,t):document.createElement(t)}createComment(t){return document.createComment(t)}createText(t){return document.createTextNode(t)}appendChild(t,e){t.appendChild(e)}insertBefore(t,e,n){t&&t.insertBefore(e,n)}removeChild(t,e){t&&t.removeChild(e)}selectRootElement(t,e){let n="string"==typeof t?document.querySelector(t):t;if(!n)throw new Error(`The selector "${t}" did not match any elements`);return e||(n.textContent=""),n}parentNode(t){return t.parentNode}nextSibling(t){return t.nextSibling}setAttribute(t,e,n,r){if(r){e=r+":"+e;const i=Yu[r];i?t.setAttributeNS(i,e,n):t.setAttribute(e,n)}else t.setAttribute(e,n)}removeAttribute(t,e,n){if(n){const r=Yu[n];r?t.removeAttributeNS(r,e):t.removeAttribute(`${n}:${e}`)}else t.removeAttribute(e)}addClass(t,e){t.classList.add(e)}removeClass(t,e){t.classList.remove(e)}setStyle(t,e,n,r){r&(yr.DashCase|yr.Important)?t.style.setProperty(e,n,r&yr.Important?"important":""):t.style[e]=n}removeStyle(t,e,n){n&yr.DashCase?t.style.removeProperty(e):t.style[e]=""}setProperty(t,e,n){t[e]=n}setValue(t,e){t.nodeValue=e}listen(t,e,n){return"string"==typeof t?this.eventManager.addGlobalEventListener(t,e,Zu(n)):this.eventManager.addEventListener(t,e,Zu(n))}}class nc extends ec{constructor(t,e,n,r){super(t),this.component=n;const i=Xu(r+"-"+n.id,n.styles,[]);e.addStyles(i),this.contentAttr="_ngcontent-%COMP%".replace(Ju,r+"-"+n.id),this.hostAttr="_nghost-%COMP%".replace(Ju,r+"-"+n.id)}applyToHost(t){super.setAttribute(t,this.hostAttr,"")}createElement(t,e){const n=super.createElement(t,e);return super.setAttribute(n,this.contentAttr,""),n}}class rc extends ec{constructor(t,e,n,r){super(t),this.sharedStylesHost=e,this.hostEl=n,this.shadowRoot=n.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);const i=Xu(r.id,r.styles,[]);for(let s=0;s<i.length;s++){const t=document.createElement("style");t.textContent=i[s],this.shadowRoot.appendChild(t)}}nodeOrShadowRoot(t){return t===this.hostEl?this.shadowRoot:t}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}appendChild(t,e){return super.appendChild(this.nodeOrShadowRoot(t),e)}insertBefore(t,e,n){return super.insertBefore(this.nodeOrShadowRoot(t),e,n)}removeChild(t,e){return super.removeChild(this.nodeOrShadowRoot(t),e)}parentNode(t){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(t)))}}let ic=(()=>{class t extends Ku{constructor(t){super(t)}supports(t){return!0}addEventListener(t,e,n){return t.addEventListener(e,n,!1),()=>this.removeEventListener(t,e,n)}removeEventListener(t,e,n){return t.removeEventListener(e,n)}}return t.\u0275fac=function(e){return new(e||t)(Jn(cu))},t.\u0275prov=dt({token:t,factory:t.\u0275fac}),t})();const sc=["alt","control","meta","shift"],oc={"\b":"Backspace","\t":"Tab","\x7f":"Delete","\x1b":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},ac={A:"1",B:"2",C:"3",D:"4",E:"5",F:"6",G:"7",H:"8",I:"9",J:"*",K:"+",M:"-",N:".",O:"/","`":"0","\x90":"NumLock"},uc={alt:t=>t.altKey,control:t=>t.ctrlKey,meta:t=>t.metaKey,shift:t=>t.shiftKey};let cc=(()=>{class t extends Ku{constructor(t){super(t)}supports(e){return null!=t.parseEventName(e)}addEventListener(e,n,r){const i=t.parseEventName(n),s=t.eventCallback(i.fullKey,r,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>uu().onAndCancel(e,i.domEventName,s))}static parseEventName(e){const n=e.toLowerCase().split("."),r=n.shift();if(0===n.length||"keydown"!==r&&"keyup"!==r)return null;const i=t._normalizeKey(n.pop());let s="";if(sc.forEach(t=>{const e=n.indexOf(t);e>-1&&(n.splice(e,1),s+=t+".")}),s+=i,0!=n.length||0===i.length)return null;const o={};return o.domEventName=r,o.fullKey=s,o}static getEventFullKey(t){let e="",n=function(t){let e=t.key;if(null==e){if(e=t.keyIdentifier,null==e)return"Unidentified";e.startsWith("U+")&&(e=String.fromCharCode(parseInt(e.substring(2),16)),3===t.location&&ac.hasOwnProperty(e)&&(e=ac[e]))}return oc[e]||e}(t);return n=n.toLowerCase()," "===n?n="space":"."===n&&(n="dot"),sc.forEach(r=>{r!=n&&(0,uc[r])(t)&&(e+=r+".")}),e+=n,e}static eventCallback(e,n,r){return i=>{t.getEventFullKey(i)===e&&r.runGuarded(()=>n(i))}}static _normalizeKey(t){switch(t){case"esc":return"escape";default:return t}}}return t.\u0275fac=function(e){return new(e||t)(Jn(cu))},t.\u0275prov=dt({token:t,factory:t.\u0275fac}),t})();const lc=Ga(iu,"browser",[{provide:ma,useValue:"browser"},{provide:ga,useValue:function(){Vu.makeCurrent(),$u.init()},multi:!0},{provide:cu,useFactory:function(){return function(t){fe=t}(document),document},deps:[]}]),hc=[[],{provide:Qi,useValue:"root"},{provide:pr,useFactory:function(){return new pr},deps:[]},{provide:Hu,useClass:ic,multi:!0,deps:[cu,Da,ma]},{provide:Hu,useClass:cc,multi:!0,deps:[cu]},[],{provide:tc,useClass:tc,deps:[zu,Wu,da]},{provide:fo,useExisting:tc},{provide:Gu,useExisting:Wu},{provide:Wu,useClass:Wu,deps:[cu]},{provide:Fa,useClass:Fa,deps:[Da]},{provide:zu,useClass:zu,deps:[Hu,Da]},{provide:class{},useClass:qu,deps:[]},[]];let dc=(()=>{class t{constructor(t){if(t)throw new Error("BrowserModule has already been loaded. If you need access to common directives such as NgIf and NgFor from a lazy loaded module, import CommonModule instead.")}static withServerTransition(e){return{ngModule:t,providers:[{provide:da,useValue:e.appId},{provide:ju,useExisting:da},Bu]}}}return t.\u0275fac=function(e){return new(e||t)(Jn(t,12))},t.\u0275mod=Gt({type:t}),t.\u0275inj=ft({providers:hc,imports:[Ru,ou]}),t})();function fc(){return new pc(Jn(cu))}let pc=(()=>{class t{constructor(t){this._doc=t}getTitle(){return this._doc.title}setTitle(t){this._doc.title=t||""}}return t.\u0275fac=function(e){return new(e||t)(Jn(cu))},t.\u0275prov=dt({factory:fc,token:t,providedIn:"root"}),t})();function gc(...t){let e=t[t.length-1];return k(e)?(t.pop(),V(t,e)):K(t)}"undefined"!=typeof window&&window;class mc extends T{constructor(t){super(),this._value=t}get value(){return this.getValue()}_subscribe(t){const e=super._subscribe(t);return e&&!e.closed&&t.next(this._value),e}getValue(){if(this.hasError)throw this.thrownError;if(this.closed)throw new I;return this._value}next(t){super.next(this._value=t)}}class yc extends p{notifyNext(t,e,n,r,i){this.destination.next(e)}notifyError(t,e){this.destination.error(t)}notifyComplete(t){this.destination.complete()}}class vc extends p{constructor(t,e,n){super(),this.parent=t,this.outerValue=e,this.outerIndex=n,this.index=0}_next(t){this.parent.notifyNext(this.outerValue,t,this.outerIndex,this.index++,this)}_error(t){this.parent.notifyError(t,this),this.unsubscribe()}_complete(){this.parent.notifyComplete(this),this.unsubscribe()}}function wc(t,e,n,r,i=new vc(t,n,r)){if(!i.closed)return e instanceof b?e.subscribe(i):L(e)(i)}const bc={};class _c{constructor(t){this.resultSelector=t}call(t,e){return e.subscribe(new Ic(t,this.resultSelector))}}class Ic extends yc{constructor(t,e){super(t),this.resultSelector=e,this.active=0,this.values=[],this.observables=[]}_next(t){this.values.push(bc),this.observables.push(t)}_complete(){const t=this.observables,e=t.length;if(0===e)this.destination.complete();else{this.active=e,this.toRespond=e;for(let n=0;n<e;n++)this.add(wc(this,t[n],void 0,n))}}notifyComplete(t){0==(this.active-=1)&&this.destination.complete()}notifyNext(t,e,n){const r=this.values,i=this.toRespond?r[n]===bc?--this.toRespond:this.toRespond:0;r[n]=e,0===i&&(this.resultSelector?this._tryResultSelector(r):this.destination.next(r.slice()))}_tryResultSelector(t){let e;try{e=this.resultSelector.apply(this,t)}catch(n){return void this.destination.error(n)}this.destination.next(e)}}const Sc=(()=>{function t(){return Error.call(this),this.message="no elements in sequence",this.name="EmptyError",this}return t.prototype=Object.create(Error.prototype),t})();function Ec(...t){return z(1)(gc(...t))}const Tc=new b(t=>t.complete());function Cc(t){return t?function(t){return new b(e=>t.schedule(()=>e.complete()))}(t):Tc}function kc(t){return new b(e=>{let n;try{n=t()}catch(r){return void e.error(r)}return(n?F(n):Cc()).subscribe(e)})}function Ac(t,e){return"function"==typeof e?n=>n.pipe(Ac((n,r)=>F(t(n,r)).pipe(A((t,i)=>e(n,t,r,i))))):e=>e.lift(new xc(t))}class xc{constructor(t){this.project=t}call(t,e){return e.subscribe(new Oc(t,this.project))}}class Oc extends j{constructor(t,e){super(t),this.project=e,this.index=0}_next(t){let e;const n=this.index++;try{e=this.project(t,n)}catch(r){return void this.destination.error(r)}this._innerSub(e)}_innerSub(t){const e=this.innerSubscription;e&&e.unsubscribe();const n=new U(this),r=this.destination;r.add(n),this.innerSubscription=B(t,n),this.innerSubscription!==n&&r.add(this.innerSubscription)}_complete(){const{innerSubscription:t}=this;t&&!t.closed||super._complete(),this.unsubscribe()}_unsubscribe(){this.innerSubscription=void 0}notifyComplete(){this.innerSubscription=void 0,this.isStopped&&super._complete()}notifyNext(t){this.destination.next(t)}}const Dc=(()=>{function t(){return Error.call(this),this.message="argument out of range",this.name="ArgumentOutOfRangeError",this}return t.prototype=Object.create(Error.prototype),t})();function Nc(t){return e=>0===t?Cc():e.lift(new Rc(t))}class Rc{constructor(t){if(this.total=t,this.total<0)throw new Dc}call(t,e){return e.subscribe(new Pc(t,this.total))}}class Pc extends p{constructor(t,e){super(t),this.total=e,this.count=0}_next(t){const e=this.total,n=++this.count;n<=e&&(this.destination.next(t),n===e&&(this.destination.complete(),this.unsubscribe()))}}function Mc(...t){const e=t[t.length-1];return k(e)?(t.pop(),n=>Ec(t,n,e)):e=>Ec(t,e)}function Lc(t,e){let n=!1;return arguments.length>=2&&(n=!0),function(r){return r.lift(new Vc(t,e,n))}}class Vc{constructor(t,e,n=!1){this.accumulator=t,this.seed=e,this.hasSeed=n}call(t,e){return e.subscribe(new Fc(t,this.accumulator,this.seed,this.hasSeed))}}class Fc extends p{constructor(t,e,n,r){super(t),this.accumulator=e,this._seed=n,this.hasSeed=r,this.index=0}get seed(){return this._seed}set seed(t){this.hasSeed=!0,this._seed=t}_next(t){if(this.hasSeed)return this._tryNext(t);this.seed=t,this.destination.next(t)}_tryNext(t){const e=this.index++;let n;try{n=this.accumulator(this.seed,t,e)}catch(r){this.destination.error(r)}this.seed=n,this.destination.next(n)}}function Uc(t,e){return function(n){return n.lift(new jc(t,e))}}class jc{constructor(t,e){this.predicate=t,this.thisArg=e}call(t,e){return e.subscribe(new Bc(t,this.predicate,this.thisArg))}}class Bc extends p{constructor(t,e,n){super(t),this.predicate=e,this.thisArg=n,this.count=0}_next(t){let e;try{e=this.predicate.call(this.thisArg,t,this.count++)}catch(n){return void this.destination.error(n)}e&&this.destination.next(t)}}function $c(t){return function(e){const n=new qc(t),r=e.lift(n);return n.caught=r}}class qc{constructor(t){this.selector=t}call(t,e){return e.subscribe(new Hc(t,this.selector,this.caught))}}class Hc extends j{constructor(t,e,n){super(t),this.selector=e,this.caught=n}error(t){if(!this.isStopped){let n;try{n=this.selector(t,this.caught)}catch(e){return void super.error(e)}this._unsubscribeAndRecycle();const r=new U(this);this.add(r);const i=B(n,r);i!==r&&this.add(i)}}}function zc(t,e){return $(t,e,1)}function Kc(t){return function(e){return 0===t?Cc():e.lift(new Gc(t))}}class Gc{constructor(t){if(this.total=t,this.total<0)throw new Dc}call(t,e){return e.subscribe(new Wc(t,this.total))}}class Wc extends p{constructor(t,e){super(t),this.total=e,this.ring=new Array,this.count=0}_next(t){const e=this.ring,n=this.total,r=this.count++;e.length<n?e.push(t):e[r%n]=t}_complete(){const t=this.destination;let e=this.count;if(e>0){const n=this.count>=this.total?this.total:this.count,r=this.ring;for(let i=0;i<n;i++){const i=e++%n;t.next(r[i])}}t.complete()}}function Qc(t=Xc){return e=>e.lift(new Yc(t))}class Yc{constructor(t){this.errorFactory=t}call(t,e){return e.subscribe(new Jc(t,this.errorFactory))}}class Jc extends p{constructor(t,e){super(t),this.errorFactory=e,this.hasValue=!1}_next(t){this.hasValue=!0,this.destination.next(t)}_complete(){if(this.hasValue)return this.destination.complete();{let e;try{e=this.errorFactory()}catch(t){e=t}this.destination.error(e)}}}function Xc(){return new Sc}function Zc(t=null){return e=>e.lift(new tl(t))}class tl{constructor(t){this.defaultValue=t}call(t,e){return e.subscribe(new el(t,this.defaultValue))}}class el extends p{constructor(t,e){super(t),this.defaultValue=e,this.isEmpty=!0}_next(t){this.isEmpty=!1,this.destination.next(t)}_complete(){this.isEmpty&&this.destination.next(this.defaultValue),this.destination.complete()}}function nl(t,e){const n=arguments.length>=2;return r=>r.pipe(t?Uc((e,n)=>t(e,n,r)):y,Nc(1),n?Zc(e):Qc(()=>new Sc))}function rl(){}function il(t,e,n){return function(r){return r.lift(new sl(t,e,n))}}class sl{constructor(t,e,n){this.nextOrObserver=t,this.error=e,this.complete=n}call(t,e){return e.subscribe(new ol(t,this.nextOrObserver,this.error,this.complete))}}class ol extends p{constructor(t,e,n,i){super(t),this._tapNext=rl,this._tapError=rl,this._tapComplete=rl,this._tapError=n||rl,this._tapComplete=i||rl,r(e)?(this._context=this,this._tapNext=e):e&&(this._context=e,this._tapNext=e.next||rl,this._tapError=e.error||rl,this._tapComplete=e.complete||rl)}_next(t){try{this._tapNext.call(this._context,t)}catch(e){return void this.destination.error(e)}this.destination.next(t)}_error(t){try{this._tapError.call(this._context,t)}catch(t){return void this.destination.error(t)}this.destination.error(t)}_complete(){try{this._tapComplete.call(this._context)}catch(t){return void this.destination.error(t)}return this.destination.complete()}}class al{constructor(t){this.callback=t}call(t,e){return e.subscribe(new ul(t,this.callback))}}class ul extends p{constructor(t,e){super(t),this.add(new h(e))}}class cl{constructor(t,e){this.id=t,this.url=e}}class ll extends cl{constructor(t,e,n="imperative",r=null){super(t,e),this.navigationTrigger=n,this.restoredState=r}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}}class hl extends cl{constructor(t,e,n){super(t,e),this.urlAfterRedirects=n}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}}class dl extends cl{constructor(t,e,n){super(t,e),this.reason=n}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}}class fl extends cl{constructor(t,e,n){super(t,e),this.error=n}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}}class pl extends cl{constructor(t,e,n,r){super(t,e),this.urlAfterRedirects=n,this.state=r}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class gl extends cl{constructor(t,e,n,r){super(t,e),this.urlAfterRedirects=n,this.state=r}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class ml extends cl{constructor(t,e,n,r,i){super(t,e),this.urlAfterRedirects=n,this.state=r,this.shouldActivate=i}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}}class yl extends cl{constructor(t,e,n,r){super(t,e),this.urlAfterRedirects=n,this.state=r}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class vl extends cl{constructor(t,e,n,r){super(t,e),this.urlAfterRedirects=n,this.state=r}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class wl{constructor(t){this.route=t}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}}class bl{constructor(t){this.route=t}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}}class _l{constructor(t){this.snapshot=t}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class Il{constructor(t){this.snapshot=t}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class Sl{constructor(t){this.snapshot=t}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class El{constructor(t){this.snapshot=t}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class Tl{constructor(t,e,n){this.routerEvent=t,this.position=e,this.anchor=n}toString(){return`Scroll(anchor: '${this.anchor}', position: '${this.position?`${this.position[0]}, ${this.position[1]}`:null}')`}}const Cl="primary";class kl{constructor(t){this.params=t||{}}has(t){return Object.prototype.hasOwnProperty.call(this.params,t)}get(t){if(this.has(t)){const e=this.params[t];return Array.isArray(e)?e[0]:e}return null}getAll(t){if(this.has(t)){const e=this.params[t];return Array.isArray(e)?e:[e]}return[]}get keys(){return Object.keys(this.params)}}function Al(t){return new kl(t)}function xl(t){const e=Error("NavigationCancelingError: "+t);return e.ngNavigationCancelingError=!0,e}function Ol(t,e,n){const r=n.path.split("/");if(r.length>t.length)return null;if("full"===n.pathMatch&&(e.hasChildren()||r.length<t.length))return null;const i={};for(let s=0;s<r.length;s++){const e=r[s],n=t[s];if(e.startsWith(":"))i[e.substring(1)]=n;else if(e!==n.path)return null}return{consumed:t.slice(0,r.length),posParams:i}}function Dl(t,e){const n=t?Object.keys(t):void 0,r=e?Object.keys(e):void 0;if(!n||!r||n.length!=r.length)return!1;let i;for(let s=0;s<n.length;s++)if(i=n[s],!Nl(t[i],e[i]))return!1;return!0}function Nl(t,e){if(Array.isArray(t)&&Array.isArray(e)){if(t.length!==e.length)return!1;const n=[...t].sort(),r=[...e].sort();return n.every((t,e)=>r[e]===t)}return t===e}function Rl(t){return Array.prototype.concat.apply([],t)}function Pl(t){return t.length>0?t[t.length-1]:null}function Ml(t,e){for(const n in t)t.hasOwnProperty(n)&&e(t[n],n)}function Ll(t){return As(t)?t:ks(t)?F(Promise.resolve(t)):gc(t)}const Vl={exact:function t(e,n,r){if(!Kl(e.segments,n.segments))return!1;if(!$l(e.segments,n.segments,r))return!1;if(e.numberOfChildren!==n.numberOfChildren)return!1;for(const i in n.children){if(!e.children[i])return!1;if(!t(e.children[i],n.children[i],r))return!1}return!0},subset:jl},Fl={exact:function(t,e){return Dl(t,e)},subset:function(t,e){return Object.keys(e).length<=Object.keys(t).length&&Object.keys(e).every(n=>Nl(t[n],e[n]))},ignored:()=>!0};function Ul(t,e,n){return Vl[n.paths](t.root,e.root,n.matrixParams)&&Fl[n.queryParams](t.queryParams,e.queryParams)&&!("exact"===n.fragment&&t.fragment!==e.fragment)}function jl(t,e,n){return Bl(t,e,e.segments,n)}function Bl(t,e,n,r){if(t.segments.length>n.length){const i=t.segments.slice(0,n.length);return!!Kl(i,n)&&!e.hasChildren()&&!!$l(i,n,r)}if(t.segments.length===n.length){if(!Kl(t.segments,n))return!1;if(!$l(t.segments,n,r))return!1;for(const n in e.children){if(!t.children[n])return!1;if(!jl(t.children[n],e.children[n],r))return!1}return!0}{const i=n.slice(0,t.segments.length),s=n.slice(t.segments.length);return!!Kl(t.segments,i)&&!!$l(t.segments,i,r)&&!!t.children.primary&&Bl(t.children.primary,e,s,r)}}function $l(t,e,n){return e.every((e,r)=>Fl[n](t[r].parameters,e.parameters))}class ql{constructor(t,e,n){this.root=t,this.queryParams=e,this.fragment=n}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=Al(this.queryParams)),this._queryParamMap}toString(){return Ql.serialize(this)}}class Hl{constructor(t,e){this.segments=t,this.children=e,this.parent=null,Ml(e,(t,e)=>t.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return Yl(this)}}class zl{constructor(t,e){this.path=t,this.parameters=e}get parameterMap(){return this._parameterMap||(this._parameterMap=Al(this.parameters)),this._parameterMap}toString(){return rh(this)}}function Kl(t,e){return t.length===e.length&&t.every((t,n)=>t.path===e[n].path)}class Gl{}class Wl{parse(t){const e=new uh(t);return new ql(e.parseRootSegment(),e.parseQueryParams(),e.parseFragment())}serialize(t){var e;return`/${Jl(t.root,!0)}${function(t){const e=Object.keys(t).map(e=>{const n=t[e];return Array.isArray(n)?n.map(t=>`${Zl(e)}=${Zl(t)}`).join("&"):`${Zl(e)}=${Zl(n)}`}).filter(t=>!!t);return e.length?`?${e.join("&")}`:""}(t.queryParams)}${"string"==typeof t.fragment?`#${e=t.fragment,encodeURI(e)}`:""}`}}const Ql=new Wl;function Yl(t){return t.segments.map(t=>rh(t)).join("/")}function Jl(t,e){if(!t.hasChildren())return Yl(t);if(e){const e=t.children.primary?Jl(t.children.primary,!1):"",n=[];return Ml(t.children,(t,e)=>{e!==Cl&&n.push(`${e}:${Jl(t,!1)}`)}),n.length>0?`${e}(${n.join("//")})`:e}{const e=function(t,e){let n=[];return Ml(t.children,(t,r)=>{r===Cl&&(n=n.concat(e(t,r)))}),Ml(t.children,(t,r)=>{r!==Cl&&(n=n.concat(e(t,r)))}),n}(t,(e,n)=>n===Cl?[Jl(t.children.primary,!1)]:[`${n}:${Jl(e,!1)}`]);return 1===Object.keys(t.children).length&&null!=t.children.primary?`${Yl(t)}/${e[0]}`:`${Yl(t)}/(${e.join("//")})`}}function Xl(t){return encodeURIComponent(t).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function Zl(t){return Xl(t).replace(/%3B/gi,";")}function th(t){return Xl(t).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function eh(t){return decodeURIComponent(t)}function nh(t){return eh(t.replace(/\+/g,"%20"))}function rh(t){return`${th(t.path)}${e=t.parameters,Object.keys(e).map(t=>`;${th(t)}=${th(e[t])}`).join("")}`;var e}const ih=/^[^\/()?;=#]+/;function sh(t){const e=t.match(ih);return e?e[0]:""}const oh=/^[^=?&#]+/,ah=/^[^?&#]+/;class uh{constructor(t){this.url=t,this.remaining=t}parseRootSegment(){return this.consumeOptional("/"),""===this.remaining||this.peekStartsWith("?")||this.peekStartsWith("#")?new Hl([],{}):new Hl([],this.parseChildren())}parseQueryParams(){const t={};if(this.consumeOptional("?"))do{this.parseQueryParam(t)}while(this.consumeOptional("&"));return t}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(""===this.remaining)return{};this.consumeOptional("/");const t=[];for(this.peekStartsWith("(")||t.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),t.push(this.parseSegment());let e={};this.peekStartsWith("/(")&&(this.capture("/"),e=this.parseParens(!0));let n={};return this.peekStartsWith("(")&&(n=this.parseParens(!1)),(t.length>0||Object.keys(e).length>0)&&(n.primary=new Hl(t,e)),n}parseSegment(){const t=sh(this.remaining);if(""===t&&this.peekStartsWith(";"))throw new Error(`Empty path url segment cannot have parameters: '${this.remaining}'.`);return this.capture(t),new zl(eh(t),this.parseMatrixParams())}parseMatrixParams(){const t={};for(;this.consumeOptional(";");)this.parseParam(t);return t}parseParam(t){const e=sh(this.remaining);if(!e)return;this.capture(e);let n="";if(this.consumeOptional("=")){const t=sh(this.remaining);t&&(n=t,this.capture(n))}t[eh(e)]=eh(n)}parseQueryParam(t){const e=function(t){const e=t.match(oh);return e?e[0]:""}(this.remaining);if(!e)return;this.capture(e);let n="";if(this.consumeOptional("=")){const t=function(t){const e=t.match(ah);return e?e[0]:""}(this.remaining);t&&(n=t,this.capture(n))}const r=nh(e),i=nh(n);if(t.hasOwnProperty(r)){let e=t[r];Array.isArray(e)||(e=[e],t[r]=e),e.push(i)}else t[r]=i}parseParens(t){const e={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){const n=sh(this.remaining),r=this.remaining[n.length];if("/"!==r&&")"!==r&&";"!==r)throw new Error(`Cannot parse url '${this.url}'`);let i;n.indexOf(":")>-1?(i=n.substr(0,n.indexOf(":")),this.capture(i),this.capture(":")):t&&(i=Cl);const s=this.parseChildren();e[i]=1===Object.keys(s).length?s.primary:new Hl([],s),this.consumeOptional("//")}return e}peekStartsWith(t){return this.remaining.startsWith(t)}consumeOptional(t){return!!this.peekStartsWith(t)&&(this.remaining=this.remaining.substring(t.length),!0)}capture(t){if(!this.consumeOptional(t))throw new Error(`Expected "${t}".`)}}class ch{constructor(t){this._root=t}get root(){return this._root.value}parent(t){const e=this.pathFromRoot(t);return e.length>1?e[e.length-2]:null}children(t){const e=lh(t,this._root);return e?e.children.map(t=>t.value):[]}firstChild(t){const e=lh(t,this._root);return e&&e.children.length>0?e.children[0].value:null}siblings(t){const e=hh(t,this._root);return e.length<2?[]:e[e.length-2].children.map(t=>t.value).filter(e=>e!==t)}pathFromRoot(t){return hh(t,this._root).map(t=>t.value)}}function lh(t,e){if(t===e.value)return e;for(const n of e.children){const e=lh(t,n);if(e)return e}return null}function hh(t,e){if(t===e.value)return[e];for(const n of e.children){const r=hh(t,n);if(r.length)return r.unshift(e),r}return[]}class dh{constructor(t,e){this.value=t,this.children=e}toString(){return`TreeNode(${this.value})`}}function fh(t){const e={};return t&&t.children.forEach(t=>e[t.value.outlet]=t),e}class ph extends ch{constructor(t,e){super(t),this.snapshot=e,bh(this,t)}toString(){return this.snapshot.toString()}}function gh(t,e){const n=function(t,e){const n=new vh([],{},{},"",{},Cl,e,null,t.root,-1,{});return new wh("",new dh(n,[]))}(t,e),r=new mc([new zl("",{})]),i=new mc({}),s=new mc({}),o=new mc({}),a=new mc(""),u=new mh(r,i,o,a,s,Cl,e,n.root);return u.snapshot=n.root,new ph(new dh(u,[]),n)}class mh{constructor(t,e,n,r,i,s,o,a){this.url=t,this.params=e,this.queryParams=n,this.fragment=r,this.data=i,this.outlet=s,this.component=o,this._futureSnapshot=a}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=this.params.pipe(A(t=>Al(t)))),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=this.queryParams.pipe(A(t=>Al(t)))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}}function yh(t,e="emptyOnly"){const n=t.pathFromRoot;let r=0;if("always"!==e)for(r=n.length-1;r>=1;){const t=n[r],e=n[r-1];if(t.routeConfig&&""===t.routeConfig.path)r--;else{if(e.component)break;r--}}return function(t){return t.reduce((t,e)=>({params:Object.assign(Object.assign({},t.params),e.params),data:Object.assign(Object.assign({},t.data),e.data),resolve:Object.assign(Object.assign({},t.resolve),e._resolvedData)}),{params:{},data:{},resolve:{}})}(n.slice(r))}class vh{constructor(t,e,n,r,i,s,o,a,u,c,l){this.url=t,this.params=e,this.queryParams=n,this.fragment=r,this.data=i,this.outlet=s,this.component=o,this.routeConfig=a,this._urlSegment=u,this._lastPathIndex=c,this._resolve=l}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=Al(this.params)),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=Al(this.queryParams)),this._queryParamMap}toString(){return`Route(url:'${this.url.map(t=>t.toString()).join("/")}', path:'${this.routeConfig?this.routeConfig.path:""}')`}}class wh extends ch{constructor(t,e){super(e),this.url=t,bh(this,e)}toString(){return _h(this._root)}}function bh(t,e){e.value._routerState=t,e.children.forEach(e=>bh(t,e))}function _h(t){const e=t.children.length>0?` { ${t.children.map(_h).join(", ")} } `:"";return`${t.value}${e}`}function Ih(t){if(t.snapshot){const e=t.snapshot,n=t._futureSnapshot;t.snapshot=n,Dl(e.queryParams,n.queryParams)||t.queryParams.next(n.queryParams),e.fragment!==n.fragment&&t.fragment.next(n.fragment),Dl(e.params,n.params)||t.params.next(n.params),function(t,e){if(t.length!==e.length)return!1;for(let n=0;n<t.length;++n)if(!Dl(t[n],e[n]))return!1;return!0}(e.url,n.url)||t.url.next(n.url),Dl(e.data,n.data)||t.data.next(n.data)}else t.snapshot=t._futureSnapshot,t.data.next(t._futureSnapshot.data)}function Sh(t,e){return Dl(t.params,e.params)&&function(t,e){return Kl(t,e)&&t.every((t,n)=>Dl(t.parameters,e[n].parameters))}(t.url,e.url)&&!(!t.parent!=!e.parent)&&(!t.parent||Sh(t.parent,e.parent))}function Eh(t,e,n){if(n&&t.shouldReuseRoute(e.value,n.value.snapshot)){const r=n.value;r._futureSnapshot=e.value;const i=function(t,e,n){return e.children.map(e=>{for(const r of n.children)if(t.shouldReuseRoute(e.value,r.value.snapshot))return Eh(t,e,r);return Eh(t,e)})}(t,e,n);return new dh(r,i)}{if(t.shouldAttach(e.value)){const n=t.retrieve(e.value);if(null!==n){const t=n.route;return Th(e,t),t}}const n=new mh(new mc((r=e.value).url),new mc(r.params),new mc(r.queryParams),new mc(r.fragment),new mc(r.data),r.outlet,r.component,r),i=e.children.map(e=>Eh(t,e));return new dh(n,i)}var r}function Th(t,e){if(t.value.routeConfig!==e.value.routeConfig)throw new Error("Cannot reattach ActivatedRouteSnapshot created from a different route");if(t.children.length!==e.children.length)throw new Error("Cannot reattach ActivatedRouteSnapshot with a different number of children");e.value._futureSnapshot=t.value;for(let n=0;n<t.children.length;++n)Th(t.children[n],e.children[n])}function Ch(t){return"object"==typeof t&&null!=t&&!t.outlets&&!t.segmentPath}function kh(t){return"object"==typeof t&&null!=t&&t.outlets}function Ah(t,e,n,r,i){let s={};return r&&Ml(r,(t,e)=>{s[e]=Array.isArray(t)?t.map(t=>`${t}`):`${t}`}),new ql(n.root===t?e:xh(n.root,t,e),s,i)}function xh(t,e,n){const r={};return Ml(t.children,(t,i)=>{r[i]=t===e?n:xh(t,e,n)}),new Hl(t.segments,r)}class Oh{constructor(t,e,n){if(this.isAbsolute=t,this.numberOfDoubleDots=e,this.commands=n,t&&n.length>0&&Ch(n[0]))throw new Error("Root segment cannot have matrix parameters");const r=n.find(kh);if(r&&r!==Pl(n))throw new Error("{outlets:{}} has to be the last command")}toRoot(){return this.isAbsolute&&1===this.commands.length&&"/"==this.commands[0]}}class Dh{constructor(t,e,n){this.segmentGroup=t,this.processChildren=e,this.index=n}}function Nh(t,e,n){if(t||(t=new Hl([],{})),0===t.segments.length&&t.hasChildren())return Rh(t,e,n);const r=function(t,e,n){let r=0,i=e;const s={match:!1,pathIndex:0,commandIndex:0};for(;i<t.segments.length;){if(r>=n.length)return s;const e=t.segments[i],o=n[r];if(kh(o))break;const a=`${o}`,u=r<n.length-1?n[r+1]:null;if(i>0&&void 0===a)break;if(a&&u&&"object"==typeof u&&void 0===u.outlets){if(!Vh(a,u,e))return s;r+=2}else{if(!Vh(a,{},e))return s;r++}i++}return{match:!0,pathIndex:i,commandIndex:r}}(t,e,n),i=n.slice(r.commandIndex);if(r.match&&r.pathIndex<t.segments.length){const e=new Hl(t.segments.slice(0,r.pathIndex),{});return e.children.primary=new Hl(t.segments.slice(r.pathIndex),t.children),Rh(e,0,i)}return r.match&&0===i.length?new Hl(t.segments,{}):r.match&&!t.hasChildren()?Ph(t,e,n):r.match?Rh(t,0,i):Ph(t,e,n)}function Rh(t,e,n){if(0===n.length)return new Hl(t.segments,{});{const r=function(t){return kh(t[0])?t[0].outlets:{[Cl]:t}}(n),i={};return Ml(r,(n,r)=>{"string"==typeof n&&(n=[n]),null!==n&&(i[r]=Nh(t.children[r],e,n))}),Ml(t.children,(t,e)=>{void 0===r[e]&&(i[e]=t)}),new Hl(t.segments,i)}}function Ph(t,e,n){const r=t.segments.slice(0,e);let i=0;for(;i<n.length;){const s=n[i];if(kh(s)){const t=Mh(s.outlets);return new Hl(r,t)}if(0===i&&Ch(n[0])){r.push(new zl(t.segments[e].path,Lh(n[0]))),i++;continue}const o=kh(s)?s.outlets.primary:`${s}`,a=i<n.length-1?n[i+1]:null;o&&a&&Ch(a)?(r.push(new zl(o,Lh(a))),i+=2):(r.push(new zl(o,{})),i++)}return new Hl(r,{})}function Mh(t){const e={};return Ml(t,(t,n)=>{"string"==typeof t&&(t=[t]),null!==t&&(e[n]=Ph(new Hl([],{}),0,t))}),e}function Lh(t){const e={};return Ml(t,(t,n)=>e[n]=`${t}`),e}function Vh(t,e,n){return t==n.path&&Dl(e,n.parameters)}class Fh{constructor(t,e,n,r){this.routeReuseStrategy=t,this.futureState=e,this.currState=n,this.forwardEvent=r}activate(t){const e=this.futureState._root,n=this.currState?this.currState._root:null;this.deactivateChildRoutes(e,n,t),Ih(this.futureState.root),this.activateChildRoutes(e,n,t)}deactivateChildRoutes(t,e,n){const r=fh(e);t.children.forEach(t=>{const e=t.value.outlet;this.deactivateRoutes(t,r[e],n),delete r[e]}),Ml(r,(t,e)=>{this.deactivateRouteAndItsChildren(t,n)})}deactivateRoutes(t,e,n){const r=t.value,i=e?e.value:null;if(r===i)if(r.component){const i=n.getContext(r.outlet);i&&this.deactivateChildRoutes(t,e,i.children)}else this.deactivateChildRoutes(t,e,n);else i&&this.deactivateRouteAndItsChildren(e,n)}deactivateRouteAndItsChildren(t,e){this.routeReuseStrategy.shouldDetach(t.value.snapshot)?this.detachAndStoreRouteSubtree(t,e):this.deactivateRouteAndOutlet(t,e)}detachAndStoreRouteSubtree(t,e){const n=e.getContext(t.value.outlet);if(n&&n.outlet){const e=n.outlet.detach(),r=n.children.onOutletDeactivated();this.routeReuseStrategy.store(t.value.snapshot,{componentRef:e,route:t,contexts:r})}}deactivateRouteAndOutlet(t,e){const n=e.getContext(t.value.outlet),r=n&&t.value.component?n.children:e,i=fh(t);for(const s of Object.keys(i))this.deactivateRouteAndItsChildren(i[s],r);n&&n.outlet&&(n.outlet.deactivate(),n.children.onOutletDeactivated(),n.attachRef=null,n.resolver=null,n.route=null)}activateChildRoutes(t,e,n){const r=fh(e);t.children.forEach(t=>{this.activateRoutes(t,r[t.value.outlet],n),this.forwardEvent(new El(t.value.snapshot))}),t.children.length&&this.forwardEvent(new Il(t.value.snapshot))}activateRoutes(t,e,n){const r=t.value,i=e?e.value:null;if(Ih(r),r===i)if(r.component){const i=n.getOrCreateContext(r.outlet);this.activateChildRoutes(t,e,i.children)}else this.activateChildRoutes(t,e,n);else if(r.component){const e=n.getOrCreateContext(r.outlet);if(this.routeReuseStrategy.shouldAttach(r.snapshot)){const t=this.routeReuseStrategy.retrieve(r.snapshot);this.routeReuseStrategy.store(r.snapshot,null),e.children.onOutletReAttached(t.contexts),e.attachRef=t.componentRef,e.route=t.route.value,e.outlet&&e.outlet.attach(t.componentRef,t.route.value),Uh(t.route)}else{const n=function(t){for(let e=t.parent;e;e=e.parent){const t=e.routeConfig;if(t&&t._loadedConfig)return t._loadedConfig;if(t&&t.component)return null}return null}(r.snapshot),i=n?n.module.componentFactoryResolver:null;e.attachRef=null,e.route=r,e.resolver=i,e.outlet&&e.outlet.activateWith(r,i),this.activateChildRoutes(t,null,e.children)}}else this.activateChildRoutes(t,null,n)}}function Uh(t){Ih(t.value),t.children.forEach(Uh)}class jh{constructor(t,e){this.routes=t,this.module=e}}function Bh(t){return"function"==typeof t}function $h(t){return t instanceof ql}const qh=Symbol("INITIAL_VALUE");function Hh(){return Ac(t=>function(...t){let e,n;return k(t[t.length-1])&&(n=t.pop()),"function"==typeof t[t.length-1]&&(e=t.pop()),1===t.length&&u(t[0])&&(t=t[0]),K(t,n).lift(new _c(e))}(t.map(t=>t.pipe(Nc(1),Mc(qh)))).pipe(Lc((t,e)=>{let n=!1;return e.reduce((t,r,i)=>{if(t!==qh)return t;if(r===qh&&(n=!0),!n){if(!1===r)return r;if(i===e.length-1||$h(r))return r}return t},t)},qh),Uc(t=>t!==qh),A(t=>$h(t)?t:!0===t),Nc(1)))}let zh=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=qt({type:t,selectors:[["ng-component"]],decls:1,vars:0,template:function(t,e){1&t&&Cs(0,"router-outlet")},directives:function(){return[Bd]},encapsulation:2}),t})();function Kh(t,e=""){for(let n=0;n<t.length;n++){const r=t[n];Gh(r,Wh(e,r))}}function Gh(t,e){t.children&&Kh(t.children,e)}function Wh(t,e){return e?t||e.path?t&&!e.path?`${t}/`:!t&&e.path?e.path:`${t}/${e.path}`:"":t}function Qh(t){const e=t.children&&t.children.map(Qh),n=e?Object.assign(Object.assign({},t),{children:e}):Object.assign({},t);return!n.component&&(e||n.loadChildren)&&n.outlet&&n.outlet!==Cl&&(n.component=zh),n}function Yh(t){return t.outlet||Cl}function Jh(t,e){const n=t.filter(t=>Yh(t)===e);return n.push(...t.filter(t=>Yh(t)!==e)),n}const Xh={matched:!1,consumedSegments:[],lastChild:0,parameters:{},positionalParamSegments:{}};function Zh(t,e,n){var r;if(""===e.path)return"full"===e.pathMatch&&(t.hasChildren()||n.length>0)?Object.assign({},Xh):{matched:!0,consumedSegments:[],lastChild:0,parameters:{},positionalParamSegments:{}};const i=(e.matcher||Ol)(n,t,e);if(!i)return Object.assign({},Xh);const s={};Ml(i.posParams,(t,e)=>{s[e]=t.path});const o=i.consumed.length>0?Object.assign(Object.assign({},s),i.consumed[i.consumed.length-1].parameters):s;return{matched:!0,consumedSegments:i.consumed,lastChild:i.consumed.length,parameters:o,positionalParamSegments:null!==(r=i.posParams)&&void 0!==r?r:{}}}function td(t,e,n,r,i="corrected"){if(n.length>0&&function(t,e,n){return n.some(n=>ed(t,e,n)&&Yh(n)!==Cl)}(t,n,r)){const i=new Hl(e,function(t,e,n,r){const i={};i.primary=r,r._sourceSegment=t,r._segmentIndexShift=e.length;for(const s of n)if(""===s.path&&Yh(s)!==Cl){const n=new Hl([],{});n._sourceSegment=t,n._segmentIndexShift=e.length,i[Yh(s)]=n}return i}(t,e,r,new Hl(n,t.children)));return i._sourceSegment=t,i._segmentIndexShift=e.length,{segmentGroup:i,slicedSegments:[]}}if(0===n.length&&function(t,e,n){return n.some(n=>ed(t,e,n))}(t,n,r)){const s=new Hl(t.segments,function(t,e,n,r,i,s){const o={};for(const a of r)if(ed(t,n,a)&&!i[Yh(a)]){const n=new Hl([],{});n._sourceSegment=t,n._segmentIndexShift="legacy"===s?t.segments.length:e.length,o[Yh(a)]=n}return Object.assign(Object.assign({},i),o)}(t,e,n,r,t.children,i));return s._sourceSegment=t,s._segmentIndexShift=e.length,{segmentGroup:s,slicedSegments:n}}const s=new Hl(t.segments,t.children);return s._sourceSegment=t,s._segmentIndexShift=e.length,{segmentGroup:s,slicedSegments:n}}function ed(t,e,n){return(!(t.hasChildren()||e.length>0)||"full"!==n.pathMatch)&&""===n.path}function nd(t,e,n,r){return!!(Yh(t)===r||r!==Cl&&ed(e,n,t))&&("**"===t.path||Zh(e,t,n).matched)}function rd(t,e,n){return 0===e.length&&!t.children[n]}class id{constructor(t){this.segmentGroup=t||null}}class sd{constructor(t){this.urlTree=t}}function od(t){return new b(e=>e.error(new id(t)))}function ad(t){return new b(e=>e.error(new sd(t)))}function ud(t){return new b(e=>e.error(new Error(`Only absolute redirects can have named outlets. redirectTo: '${t}'`)))}class cd{constructor(t,e,n,r,i){this.configLoader=e,this.urlSerializer=n,this.urlTree=r,this.config=i,this.allowRedirects=!0,this.ngModule=t.get(zo)}apply(){const t=td(this.urlTree.root,[],[],this.config).segmentGroup,e=new Hl(t.segments,t.children);return this.expandSegmentGroup(this.ngModule,this.config,e,Cl).pipe(A(t=>this.createUrlTree(ld(t),this.urlTree.queryParams,this.urlTree.fragment))).pipe($c(t=>{if(t instanceof sd)return this.allowRedirects=!1,this.match(t.urlTree);if(t instanceof id)throw this.noMatchError(t);throw t}))}match(t){return this.expandSegmentGroup(this.ngModule,this.config,t.root,Cl).pipe(A(e=>this.createUrlTree(ld(e),t.queryParams,t.fragment))).pipe($c(t=>{if(t instanceof id)throw this.noMatchError(t);throw t}))}noMatchError(t){return new Error(`Cannot match any routes. URL Segment: '${t.segmentGroup}'`)}createUrlTree(t,e,n){const r=t.segments.length>0?new Hl([],{[Cl]:t}):t;return new ql(r,e,n)}expandSegmentGroup(t,e,n,r){return 0===n.segments.length&&n.hasChildren()?this.expandChildren(t,e,n).pipe(A(t=>new Hl([],t))):this.expandSegment(t,n,e,n.segments,r,!0)}expandChildren(t,e,n){const r=[];for(const i of Object.keys(n.children))"primary"===i?r.unshift(i):r.push(i);return F(r).pipe(zc(r=>{const i=n.children[r],s=Jh(e,r);return this.expandSegmentGroup(t,s,i,r).pipe(A(t=>({segment:t,outlet:r})))}),Lc((t,e)=>(t[e.outlet]=e.segment,t),{}),function(t,e){const n=arguments.length>=2;return r=>r.pipe(t?Uc((e,n)=>t(e,n,r)):y,Kc(1),n?Zc(e):Qc(()=>new Sc))}())}expandSegment(t,e,n,r,i,s){return F(n).pipe(zc(o=>this.expandSegmentAgainstRoute(t,e,n,o,r,i,s).pipe($c(t=>{if(t instanceof id)return gc(null);throw t}))),nl(t=>!!t),$c((t,n)=>{if(t instanceof Sc||"EmptyError"===t.name){if(rd(e,r,i))return gc(new Hl([],{}));throw new id(e)}throw t}))}expandSegmentAgainstRoute(t,e,n,r,i,s,o){return nd(r,e,i,s)?void 0===r.redirectTo?this.matchSegmentAgainstRoute(t,e,r,i,s):o&&this.allowRedirects?this.expandSegmentAgainstRouteUsingRedirect(t,e,n,r,i,s):od(e):od(e)}expandSegmentAgainstRouteUsingRedirect(t,e,n,r,i,s){return"**"===r.path?this.expandWildCardWithParamsAgainstRouteUsingRedirect(t,n,r,s):this.expandRegularSegmentAgainstRouteUsingRedirect(t,e,n,r,i,s)}expandWildCardWithParamsAgainstRouteUsingRedirect(t,e,n,r){const i=this.applyRedirectCommands([],n.redirectTo,{});return n.redirectTo.startsWith("/")?ad(i):this.lineralizeSegments(n,i).pipe($(n=>{const i=new Hl(n,{});return this.expandSegment(t,i,e,n,r,!1)}))}expandRegularSegmentAgainstRouteUsingRedirect(t,e,n,r,i,s){const{matched:o,consumedSegments:a,lastChild:u,positionalParamSegments:c}=Zh(e,r,i);if(!o)return od(e);const l=this.applyRedirectCommands(a,r.redirectTo,c);return r.redirectTo.startsWith("/")?ad(l):this.lineralizeSegments(r,l).pipe($(r=>this.expandSegment(t,e,n,r.concat(i.slice(u)),s,!1)))}matchSegmentAgainstRoute(t,e,n,r,i){if("**"===n.path)return n.loadChildren?(n._loadedConfig?gc(n._loadedConfig):this.configLoader.load(t.injector,n)).pipe(A(t=>(n._loadedConfig=t,new Hl(r,{})))):gc(new Hl(r,{}));const{matched:s,consumedSegments:o,lastChild:a}=Zh(e,n,r);if(!s)return od(e);const u=r.slice(a);return this.getChildConfig(t,n,r).pipe($(t=>{const r=t.module,s=t.routes,{segmentGroup:a,slicedSegments:c}=td(e,o,u,s),l=new Hl(a.segments,a.children);if(0===c.length&&l.hasChildren())return this.expandChildren(r,s,l).pipe(A(t=>new Hl(o,t)));if(0===s.length&&0===c.length)return gc(new Hl(o,{}));const h=Yh(n)===i;return this.expandSegment(r,l,s,c,h?Cl:i,!0).pipe(A(t=>new Hl(o.concat(t.segments),t.children)))}))}getChildConfig(t,e,n){return e.children?gc(new jh(e.children,t)):e.loadChildren?void 0!==e._loadedConfig?gc(e._loadedConfig):this.runCanLoadGuards(t.injector,e,n).pipe($(n=>n?this.configLoader.load(t.injector,e).pipe(A(t=>(e._loadedConfig=t,t))):function(t){return new b(e=>e.error(xl(`Cannot load children because the guard of the route "path: '${t.path}'" returned false`)))}(e))):gc(new jh([],t))}runCanLoadGuards(t,e,n){const r=e.canLoad;return r&&0!==r.length?gc(r.map(r=>{const i=t.get(r);let s;if(function(t){return t&&Bh(t.canLoad)}(i))s=i.canLoad(e,n);else{if(!Bh(i))throw new Error("Invalid CanLoad guard");s=i(e,n)}return Ll(s)})).pipe(Hh(),il(t=>{if(!$h(t))return;const e=xl(`Redirecting to "${this.urlSerializer.serialize(t)}"`);throw e.url=t,e}),A(t=>!0===t)):gc(!0)}lineralizeSegments(t,e){let n=[],r=e.root;for(;;){if(n=n.concat(r.segments),0===r.numberOfChildren)return gc(n);if(r.numberOfChildren>1||!r.children.primary)return ud(t.redirectTo);r=r.children.primary}}applyRedirectCommands(t,e,n){return this.applyRedirectCreatreUrlTree(e,this.urlSerializer.parse(e),t,n)}applyRedirectCreatreUrlTree(t,e,n,r){const i=this.createSegmentGroup(t,e.root,n,r);return new ql(i,this.createQueryParams(e.queryParams,this.urlTree.queryParams),e.fragment)}createQueryParams(t,e){const n={};return Ml(t,(t,r)=>{if("string"==typeof t&&t.startsWith(":")){const i=t.substring(1);n[r]=e[i]}else n[r]=t}),n}createSegmentGroup(t,e,n,r){const i=this.createSegments(t,e.segments,n,r);let s={};return Ml(e.children,(e,i)=>{s[i]=this.createSegmentGroup(t,e,n,r)}),new Hl(i,s)}createSegments(t,e,n,r){return e.map(e=>e.path.startsWith(":")?this.findPosParam(t,e,r):this.findOrReturn(e,n))}findPosParam(t,e,n){const r=n[e.path.substring(1)];if(!r)throw new Error(`Cannot redirect to '${t}'. Cannot find '${e.path}'.`);return r}findOrReturn(t,e){let n=0;for(const r of e){if(r.path===t.path)return e.splice(n),r;n++}return t}}function ld(t){const e={};for(const n of Object.keys(t.children)){const r=ld(t.children[n]);(r.segments.length>0||r.hasChildren())&&(e[n]=r)}return function(t){if(1===t.numberOfChildren&&t.children.primary){const e=t.children.primary;return new Hl(t.segments.concat(e.segments),e.children)}return t}(new Hl(t.segments,e))}class hd{constructor(t){this.path=t,this.route=this.path[this.path.length-1]}}class dd{constructor(t,e){this.component=t,this.route=e}}function fd(t,e,n){const r=t._root;return gd(r,e?e._root:null,n,[r.value])}function pd(t,e,n){const r=function(t){if(!t)return null;for(let e=t.parent;e;e=e.parent){const t=e.routeConfig;if(t&&t._loadedConfig)return t._loadedConfig}return null}(e);return(r?r.module.injector:n).get(t)}function gd(t,e,n,r,i={canDeactivateChecks:[],canActivateChecks:[]}){const s=fh(e);return t.children.forEach(t=>{!function(t,e,n,r,i={canDeactivateChecks:[],canActivateChecks:[]}){const s=t.value,o=e?e.value:null,a=n?n.getContext(t.value.outlet):null;if(o&&s.routeConfig===o.routeConfig){const u=function(t,e,n){if("function"==typeof n)return n(t,e);switch(n){case"pathParamsChange":return!Kl(t.url,e.url);case"pathParamsOrQueryParamsChange":return!Kl(t.url,e.url)||!Dl(t.queryParams,e.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!Sh(t,e)||!Dl(t.queryParams,e.queryParams);case"paramsChange":default:return!Sh(t,e)}}(o,s,s.routeConfig.runGuardsAndResolvers);u?i.canActivateChecks.push(new hd(r)):(s.data=o.data,s._resolvedData=o._resolvedData),gd(t,e,s.component?a?a.children:null:n,r,i),u&&a&&a.outlet&&a.outlet.isActivated&&i.canDeactivateChecks.push(new dd(a.outlet.component,o))}else o&&md(e,a,i),i.canActivateChecks.push(new hd(r)),gd(t,null,s.component?a?a.children:null:n,r,i)}(t,s[t.value.outlet],n,r.concat([t.value]),i),delete s[t.value.outlet]}),Ml(s,(t,e)=>md(t,n.getContext(e),i)),i}function md(t,e,n){const r=fh(t),i=t.value;Ml(r,(t,r)=>{md(t,i.component?e?e.children.getContext(r):null:e,n)}),n.canDeactivateChecks.push(new dd(i.component&&e&&e.outlet&&e.outlet.isActivated?e.outlet.component:null,i))}class yd{}function vd(t){return new b(e=>e.error(t))}class wd{constructor(t,e,n,r,i,s){this.rootComponentType=t,this.config=e,this.urlTree=n,this.url=r,this.paramsInheritanceStrategy=i,this.relativeLinkResolution=s}recognize(){const t=td(this.urlTree.root,[],[],this.config.filter(t=>void 0===t.redirectTo),this.relativeLinkResolution).segmentGroup,e=this.processSegmentGroup(this.config,t,Cl);if(null===e)return null;const n=new vh([],Object.freeze({}),Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,{},Cl,this.rootComponentType,null,this.urlTree.root,-1,{}),r=new dh(n,e),i=new wh(this.url,r);return this.inheritParamsAndData(i._root),i}inheritParamsAndData(t){const e=t.value,n=yh(e,this.paramsInheritanceStrategy);e.params=Object.freeze(n.params),e.data=Object.freeze(n.data),t.children.forEach(t=>this.inheritParamsAndData(t))}processSegmentGroup(t,e,n){return 0===e.segments.length&&e.hasChildren()?this.processChildren(t,e):this.processSegment(t,e,e.segments,n)}processChildren(t,e){const n=[];for(const i of Object.keys(e.children)){const r=e.children[i],s=Jh(t,i),o=this.processSegmentGroup(s,r,i);if(null===o)return null;n.push(...o)}const r=_d(n);return r.sort((t,e)=>t.value.outlet===Cl?-1:e.value.outlet===Cl?1:t.value.outlet.localeCompare(e.value.outlet)),r}processSegment(t,e,n,r){for(const i of t){const t=this.processSegmentAgainstRoute(i,e,n,r);if(null!==t)return t}return rd(e,n,r)?[]:null}processSegmentAgainstRoute(t,e,n,r){if(t.redirectTo||!nd(t,e,n,r))return null;let i,s=[],o=[];if("**"===t.path){const r=n.length>0?Pl(n).parameters:{};i=new vh(n,r,Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,Ed(t),Yh(t),t.component,t,Id(e),Sd(e)+n.length,Td(t))}else{const r=Zh(e,t,n);if(!r.matched)return null;s=r.consumedSegments,o=n.slice(r.lastChild),i=new vh(s,r.parameters,Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,Ed(t),Yh(t),t.component,t,Id(e),Sd(e)+s.length,Td(t))}const a=function(t){return t.children?t.children:t.loadChildren?t._loadedConfig.routes:[]}(t),{segmentGroup:u,slicedSegments:c}=td(e,s,o,a.filter(t=>void 0===t.redirectTo),this.relativeLinkResolution);if(0===c.length&&u.hasChildren()){const t=this.processChildren(a,u);return null===t?null:[new dh(i,t)]}if(0===a.length&&0===c.length)return[new dh(i,[])];const l=Yh(t)===r,h=this.processSegment(a,u,c,l?Cl:r);return null===h?null:[new dh(i,h)]}}function bd(t){const e=t.value.routeConfig;return e&&""===e.path&&void 0===e.redirectTo}function _d(t){const e=[],n=new Set;for(const r of t){if(!bd(r)){e.push(r);continue}const t=e.find(t=>r.value.routeConfig===t.value.routeConfig);void 0!==t?(t.children.push(...r.children),n.add(t)):e.push(r)}for(const r of n){const t=_d(r.children);e.push(new dh(r.value,t))}return e.filter(t=>!n.has(t))}function Id(t){let e=t;for(;e._sourceSegment;)e=e._sourceSegment;return e}function Sd(t){let e=t,n=e._segmentIndexShift?e._segmentIndexShift:0;for(;e._sourceSegment;)e=e._sourceSegment,n+=e._segmentIndexShift?e._segmentIndexShift:0;return n-1}function Ed(t){return t.data||{}}function Td(t){return t.resolve||{}}function Cd(t){return Ac(e=>{const n=t(e);return n?F(n).pipe(A(()=>e)):gc(e)})}class kd extends class{shouldDetach(t){return!1}store(t,e){}shouldAttach(t){return!1}retrieve(t){return null}shouldReuseRoute(t,e){return t.routeConfig===e.routeConfig}}{}const Ad=new Mn("ROUTES");class xd{constructor(t,e,n,r){this.loader=t,this.compiler=e,this.onLoadStartListener=n,this.onLoadEndListener=r}load(t,e){if(e._loader$)return e._loader$;this.onLoadStartListener&&this.onLoadStartListener(e);const n=this.loadModuleFactory(e.loadChildren).pipe(A(n=>{this.onLoadEndListener&&this.onLoadEndListener(e);const r=n.create(t);return new jh(Rl(r.injector.get(Ad,void 0,_t.Self|_t.Optional)).map(Qh),r)}),$c(t=>{throw e._loader$=void 0,t}));return e._loader$=new Y(n,()=>new T).pipe(G()),e._loader$}loadModuleFactory(t){return"string"==typeof t?F(this.loader.load(t)):Ll(t()).pipe($(t=>t instanceof Ko?gc(t):F(this.compiler.compileModuleAsync(t))))}}class Od{constructor(){this.outlet=null,this.route=null,this.resolver=null,this.children=new Dd,this.attachRef=null}}class Dd{constructor(){this.contexts=new Map}onChildOutletCreated(t,e){const n=this.getOrCreateContext(t);n.outlet=e,this.contexts.set(t,n)}onChildOutletDestroyed(t){const e=this.getContext(t);e&&(e.outlet=null)}onOutletDeactivated(){const t=this.contexts;return this.contexts=new Map,t}onOutletReAttached(t){this.contexts=t}getOrCreateContext(t){let e=this.getContext(t);return e||(e=new Od,this.contexts.set(t,e)),e}getContext(t){return this.contexts.get(t)||null}}class Nd{shouldProcessUrl(t){return!0}extract(t){return t}merge(t,e){return t}}function Rd(t){throw t}function Pd(t,e,n){return e.parse("/")}function Md(t,e){return gc(null)}const Ld={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},Vd={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"};let Fd=(()=>{class t{constructor(t,e,n,r,i,s,o,a){this.rootComponentType=t,this.urlSerializer=e,this.rootContexts=n,this.location=r,this.config=a,this.lastSuccessfulNavigation=null,this.currentNavigation=null,this.disposed=!1,this.lastLocationChangeInfo=null,this.navigationId=0,this.currentPageId=0,this.isNgZoneEnabled=!1,this.events=new T,this.errorHandler=Rd,this.malformedUriErrorHandler=Pd,this.navigated=!1,this.lastSuccessfulId=-1,this.hooks={beforePreactivation:Md,afterPreactivation:Md},this.urlHandlingStrategy=new Nd,this.routeReuseStrategy=new kd,this.onSameUrlNavigation="ignore",this.paramsInheritanceStrategy="emptyOnly",this.urlUpdateStrategy="deferred",this.relativeLinkResolution="corrected",this.canceledNavigationResolution="replace",this.ngModule=i.get(zo),this.console=i.get(va);const u=i.get(Da);this.isNgZoneEnabled=u instanceof Da&&Da.isInAngularZone(),this.resetConfig(a),this.currentUrlTree=new ql(new Hl([],{}),{},null),this.rawUrlTree=this.currentUrlTree,this.browserUrlTree=this.currentUrlTree,this.configLoader=new xd(s,o,t=>this.triggerEvent(new wl(t)),t=>this.triggerEvent(new bl(t))),this.routerState=gh(this.currentUrlTree,this.rootComponentType),this.transitions=new mc({id:0,targetPageId:0,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,extractedUrl:this.urlHandlingStrategy.extract(this.currentUrlTree),urlAfterRedirects:this.urlHandlingStrategy.extract(this.currentUrlTree),rawUrl:this.currentUrlTree,extras:{},resolve:null,reject:null,promise:Promise.resolve(!0),source:"imperative",restoredState:null,currentSnapshot:this.routerState.snapshot,targetSnapshot:null,currentRouterState:this.routerState,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.navigations=this.setupNavigations(this.transitions),this.processNavigations()}setupNavigations(t){const e=this.events;return t.pipe(Uc(t=>0!==t.id),A(t=>Object.assign(Object.assign({},t),{extractedUrl:this.urlHandlingStrategy.extract(t.rawUrl)})),Ac(t=>{let n=!1,r=!1;return gc(t).pipe(il(t=>{this.currentNavigation={id:t.id,initialUrl:t.currentRawUrl,extractedUrl:t.extractedUrl,trigger:t.source,extras:t.extras,previousNavigation:this.lastSuccessfulNavigation?Object.assign(Object.assign({},this.lastSuccessfulNavigation),{previousNavigation:null}):null}}),Ac(t=>{const n=!this.navigated||t.extractedUrl.toString()!==this.browserUrlTree.toString();if(("reload"===this.onSameUrlNavigation||n)&&this.urlHandlingStrategy.shouldProcessUrl(t.rawUrl))return gc(t).pipe(Ac(t=>{const n=this.transitions.getValue();return e.next(new ll(t.id,this.serializeUrl(t.extractedUrl),t.source,t.restoredState)),n!==this.transitions.getValue()?Tc:Promise.resolve(t)}),function(t,e,n,r){return Ac(i=>function(t,e,n,r,i){return new cd(t,e,n,r,i).apply()}(t,e,n,i.extractedUrl,r).pipe(A(t=>Object.assign(Object.assign({},i),{urlAfterRedirects:t}))))}(this.ngModule.injector,this.configLoader,this.urlSerializer,this.config),il(t=>{this.currentNavigation=Object.assign(Object.assign({},this.currentNavigation),{finalUrl:t.urlAfterRedirects})}),function(t,e,n,r,i){return $(s=>function(t,e,n,r,i="emptyOnly",s="legacy"){try{const o=new wd(t,e,n,r,i,s).recognize();return null===o?vd(new yd):gc(o)}catch(o){return vd(o)}}(t,e,s.urlAfterRedirects,n(s.urlAfterRedirects),r,i).pipe(A(t=>Object.assign(Object.assign({},s),{targetSnapshot:t}))))}(this.rootComponentType,this.config,t=>this.serializeUrl(t),this.paramsInheritanceStrategy,this.relativeLinkResolution),il(t=>{"eager"===this.urlUpdateStrategy&&(t.extras.skipLocationChange||this.setBrowserUrl(t.urlAfterRedirects,t),this.browserUrlTree=t.urlAfterRedirects);const n=new pl(t.id,this.serializeUrl(t.extractedUrl),this.serializeUrl(t.urlAfterRedirects),t.targetSnapshot);e.next(n)}));if(n&&this.rawUrlTree&&this.urlHandlingStrategy.shouldProcessUrl(this.rawUrlTree)){const{id:n,extractedUrl:r,source:i,restoredState:s,extras:o}=t,a=new ll(n,this.serializeUrl(r),i,s);e.next(a);const u=gh(r,this.rootComponentType).snapshot;return gc(Object.assign(Object.assign({},t),{targetSnapshot:u,urlAfterRedirects:r,extras:Object.assign(Object.assign({},o),{skipLocationChange:!1,replaceUrl:!1})}))}return this.rawUrlTree=t.rawUrl,this.browserUrlTree=t.urlAfterRedirects,t.resolve(null),Tc}),Cd(t=>{const{targetSnapshot:e,id:n,extractedUrl:r,rawUrl:i,extras:{skipLocationChange:s,replaceUrl:o}}=t;return this.hooks.beforePreactivation(e,{navigationId:n,appliedUrlTree:r,rawUrlTree:i,skipLocationChange:!!s,replaceUrl:!!o})}),il(t=>{const e=new gl(t.id,this.serializeUrl(t.extractedUrl),this.serializeUrl(t.urlAfterRedirects),t.targetSnapshot);this.triggerEvent(e)}),A(t=>Object.assign(Object.assign({},t),{guards:fd(t.targetSnapshot,t.currentSnapshot,this.rootContexts)})),function(t,e){return $(n=>{const{targetSnapshot:r,currentSnapshot:i,guards:{canActivateChecks:s,canDeactivateChecks:o}}=n;return 0===o.length&&0===s.length?gc(Object.assign(Object.assign({},n),{guardsResult:!0})):function(t,e,n,r){return F(t).pipe($(t=>function(t,e,n,r,i){const s=e&&e.routeConfig?e.routeConfig.canDeactivate:null;return s&&0!==s.length?gc(s.map(s=>{const o=pd(s,e,i);let a;if(function(t){return t&&Bh(t.canDeactivate)}(o))a=Ll(o.canDeactivate(t,e,n,r));else{if(!Bh(o))throw new Error("Invalid CanDeactivate guard");a=Ll(o(t,e,n,r))}return a.pipe(nl())})).pipe(Hh()):gc(!0)}(t.component,t.route,n,e,r)),nl(t=>!0!==t,!0))}(o,r,i,t).pipe($(n=>n&&function(t){return"boolean"==typeof t}(n)?function(t,e,n,r){return F(e).pipe(zc(e=>Ec(function(t,e){return null!==t&&e&&e(new _l(t)),gc(!0)}(e.route.parent,r),function(t,e){return null!==t&&e&&e(new Sl(t)),gc(!0)}(e.route,r),function(t,e,n){const r=e[e.length-1],i=e.slice(0,e.length-1).reverse().map(t=>function(t){const e=t.routeConfig?t.routeConfig.canActivateChild:null;return e&&0!==e.length?{node:t,guards:e}:null}(t)).filter(t=>null!==t).map(e=>kc(()=>gc(e.guards.map(i=>{const s=pd(i,e.node,n);let o;if(function(t){return t&&Bh(t.canActivateChild)}(s))o=Ll(s.canActivateChild(r,t));else{if(!Bh(s))throw new Error("Invalid CanActivateChild guard");o=Ll(s(r,t))}return o.pipe(nl())})).pipe(Hh())));return gc(i).pipe(Hh())}(t,e.path,n),function(t,e,n){const r=e.routeConfig?e.routeConfig.canActivate:null;return r&&0!==r.length?gc(r.map(r=>kc(()=>{const i=pd(r,e,n);let s;if(function(t){return t&&Bh(t.canActivate)}(i))s=Ll(i.canActivate(e,t));else{if(!Bh(i))throw new Error("Invalid CanActivate guard");s=Ll(i(e,t))}return s.pipe(nl())}))).pipe(Hh()):gc(!0)}(t,e.route,n))),nl(t=>!0!==t,!0))}(r,s,t,e):gc(n)),A(t=>Object.assign(Object.assign({},n),{guardsResult:t})))})}(this.ngModule.injector,t=>this.triggerEvent(t)),il(t=>{if($h(t.guardsResult)){const e=xl(`Redirecting to "${this.serializeUrl(t.guardsResult)}"`);throw e.url=t.guardsResult,e}const e=new ml(t.id,this.serializeUrl(t.extractedUrl),this.serializeUrl(t.urlAfterRedirects),t.targetSnapshot,!!t.guardsResult);this.triggerEvent(e)}),Uc(t=>!!t.guardsResult||(this.cancelNavigationTransition(t,""),!1)),Cd(t=>{if(t.guards.canActivateChecks.length)return gc(t).pipe(il(t=>{const e=new yl(t.id,this.serializeUrl(t.extractedUrl),this.serializeUrl(t.urlAfterRedirects),t.targetSnapshot);this.triggerEvent(e)}),Ac(t=>{let e=!1;return gc(t).pipe((n=this.paramsInheritanceStrategy,r=this.ngModule.injector,$(t=>{const{targetSnapshot:e,guards:{canActivateChecks:i}}=t;if(!i.length)return gc(t);let s=0;return F(i).pipe(zc(t=>function(t,e,n,r){return function(t,e,n,r){const i=Object.keys(t);if(0===i.length)return gc({});const s={};return F(i).pipe($(i=>function(t,e,n,r){const i=pd(t,e,r);return Ll(i.resolve?i.resolve(e,n):i(e,n))}(t[i],e,n,r).pipe(il(t=>{s[i]=t}))),Kc(1),$(()=>Object.keys(s).length===i.length?gc(s):Tc))}(t._resolve,t,e,r).pipe(A(e=>(t._resolvedData=e,t.data=Object.assign(Object.assign({},t.data),yh(t,n).resolve),null)))}(t.route,e,n,r)),il(()=>s++),Kc(1),$(e=>s===i.length?gc(t):Tc))})),il({next:()=>e=!0,complete:()=>{e||this.cancelNavigationTransition(t,"At least one route resolver didn't emit any value.")}}));var n,r}),il(t=>{const e=new vl(t.id,this.serializeUrl(t.extractedUrl),this.serializeUrl(t.urlAfterRedirects),t.targetSnapshot);this.triggerEvent(e)}))}),Cd(t=>{const{targetSnapshot:e,id:n,extractedUrl:r,rawUrl:i,extras:{skipLocationChange:s,replaceUrl:o}}=t;return this.hooks.afterPreactivation(e,{navigationId:n,appliedUrlTree:r,rawUrlTree:i,skipLocationChange:!!s,replaceUrl:!!o})}),A(t=>{const e=function(t,e,n){const r=Eh(t,e._root,n?n._root:void 0);return new ph(r,e)}(this.routeReuseStrategy,t.targetSnapshot,t.currentRouterState);return Object.assign(Object.assign({},t),{targetRouterState:e})}),il(t=>{this.currentUrlTree=t.urlAfterRedirects,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,t.rawUrl),this.routerState=t.targetRouterState,"deferred"===this.urlUpdateStrategy&&(t.extras.skipLocationChange||this.setBrowserUrl(this.rawUrlTree,t),this.browserUrlTree=t.urlAfterRedirects)}),(s=this.rootContexts,o=this.routeReuseStrategy,a=t=>this.triggerEvent(t),A(t=>(new Fh(o,t.targetRouterState,t.currentRouterState,a).activate(s),t))),il({next(){n=!0},complete(){n=!0}}),(i=()=>{n||r||this.cancelNavigationTransition(t,`Navigation ID ${t.id} is not equal to the current navigation id ${this.navigationId}`),this.currentNavigation=null},t=>t.lift(new al(i))),$c(n=>{if(r=!0,(i=n)&&i.ngNavigationCancelingError){const r=$h(n.url);r||(this.navigated=!0,this.resetStateAndUrl(t.currentRouterState,t.currentUrlTree,t.rawUrl));const i=new dl(t.id,this.serializeUrl(t.extractedUrl),n.message);e.next(i),r?setTimeout(()=>{const e=this.urlHandlingStrategy.merge(n.url,this.rawUrlTree);this.scheduleNavigation(e,"imperative",null,{skipLocationChange:t.extras.skipLocationChange,replaceUrl:"eager"===this.urlUpdateStrategy},{resolve:t.resolve,reject:t.reject,promise:t.promise})},0):t.resolve(!1)}else{this.resetStateAndUrl(t.currentRouterState,t.currentUrlTree,t.rawUrl);const r=new fl(t.id,this.serializeUrl(t.extractedUrl),n);e.next(r);try{t.resolve(this.errorHandler(n))}catch(uD){t.reject(uD)}}var i;return Tc}));var i,s,o,a}))}resetRootComponentType(t){this.rootComponentType=t,this.routerState.root.component=this.rootComponentType}getTransition(){const t=this.transitions.value;return t.urlAfterRedirects=this.browserUrlTree,t}setTransition(t){this.transitions.next(Object.assign(Object.assign({},this.getTransition()),t))}initialNavigation(){this.setUpLocationChangeListener(),0===this.navigationId&&this.navigateByUrl(this.location.path(!0),{replaceUrl:!0})}setUpLocationChangeListener(){this.locationSubscription||(this.locationSubscription=this.location.subscribe(t=>{const e=this.extractLocationChangeInfoFromEvent(t);this.shouldScheduleNavigation(this.lastLocationChangeInfo,e)&&setTimeout(()=>{const{source:t,state:n,urlTree:r}=e,i={replaceUrl:!0};if(n){const t=Object.assign({},n);delete t.navigationId,delete t.\u0275routerPageId,0!==Object.keys(t).length&&(i.state=t)}this.scheduleNavigation(r,t,n,i)},0),this.lastLocationChangeInfo=e}))}extractLocationChangeInfoFromEvent(t){var e;return{source:"popstate"===t.type?"popstate":"hashchange",urlTree:this.parseUrl(t.url),state:(null===(e=t.state)||void 0===e?void 0:e.navigationId)?t.state:null,transitionId:this.getTransition().id}}shouldScheduleNavigation(t,e){if(!t)return!0;const n=e.urlTree.toString()===t.urlTree.toString();return!(e.transitionId===t.transitionId&&n&&("hashchange"===e.source&&"popstate"===t.source||"popstate"===e.source&&"hashchange"===t.source))}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.currentNavigation}triggerEvent(t){this.events.next(t)}resetConfig(t){Kh(t),this.config=t.map(Qh),this.navigated=!1,this.lastSuccessfulId=-1}ngOnDestroy(){this.dispose()}dispose(){this.transitions.complete(),this.locationSubscription&&(this.locationSubscription.unsubscribe(),this.locationSubscription=void 0),this.disposed=!0}createUrlTree(t,e={}){const{relativeTo:n,queryParams:r,fragment:i,queryParamsHandling:s,preserveFragment:o}=e,a=n||this.routerState.root,u=o?this.currentUrlTree.fragment:i;let c=null;switch(s){case"merge":c=Object.assign(Object.assign({},this.currentUrlTree.queryParams),r);break;case"preserve":c=this.currentUrlTree.queryParams;break;default:c=r||null}return null!==c&&(c=this.removeEmptyProps(c)),function(t,e,n,r,i){if(0===n.length)return Ah(e.root,e.root,e,r,i);const s=function(t){if("string"==typeof t[0]&&1===t.length&&"/"===t[0])return new Oh(!0,0,t);let e=0,n=!1;const r=t.reduce((t,r,i)=>{if("object"==typeof r&&null!=r){if(r.outlets){const e={};return Ml(r.outlets,(t,n)=>{e[n]="string"==typeof t?t.split("/"):t}),[...t,{outlets:e}]}if(r.segmentPath)return[...t,r.segmentPath]}return"string"!=typeof r?[...t,r]:0===i?(r.split("/").forEach((r,i)=>{0==i&&"."===r||(0==i&&""===r?n=!0:".."===r?e++:""!=r&&t.push(r))}),t):[...t,r]},[]);return new Oh(n,e,r)}(n);if(s.toRoot())return Ah(e.root,new Hl([],{}),e,r,i);const o=function(t,e,n){if(t.isAbsolute)return new Dh(e.root,!0,0);if(-1===n.snapshot._lastPathIndex){const t=n.snapshot._urlSegment;return new Dh(t,t===e.root,0)}const r=Ch(t.commands[0])?0:1;return function(t,e,n){let r=t,i=e,s=n;for(;s>i;){if(s-=i,r=r.parent,!r)throw new Error("Invalid number of '../'");i=r.segments.length}return new Dh(r,!1,i-s)}(n.snapshot._urlSegment,n.snapshot._lastPathIndex+r,t.numberOfDoubleDots)}(s,e,t),a=o.processChildren?Rh(o.segmentGroup,o.index,s.commands):Nh(o.segmentGroup,o.index,s.commands);return Ah(o.segmentGroup,a,e,r,i)}(a,this.currentUrlTree,t,c,null!=u?u:null)}navigateByUrl(t,e={skipLocationChange:!1}){const n=$h(t)?t:this.parseUrl(t),r=this.urlHandlingStrategy.merge(n,this.rawUrlTree);let i=null;return"computed"===this.canceledNavigationResolution&&(0===this.currentPageId||e.skipLocationChange||e.replaceUrl)&&(i=this.location.getState()),this.scheduleNavigation(r,"imperative",i,e)}navigate(t,e={skipLocationChange:!1}){return function(t){for(let e=0;e<t.length;e++){const n=t[e];if(null==n)throw new Error(`The requested path contains ${n} segment at index ${e}`)}}(t),this.navigateByUrl(this.createUrlTree(t,e),e)}serializeUrl(t){return this.urlSerializer.serialize(t)}parseUrl(t){let e;try{e=this.urlSerializer.parse(t)}catch(n){e=this.malformedUriErrorHandler(n,this.urlSerializer,t)}return e}isActive(t,e){let n;if(n=!0===e?Object.assign({},Ld):!1===e?Object.assign({},Vd):e,$h(t))return Ul(this.currentUrlTree,t,n);const r=this.parseUrl(t);return Ul(this.currentUrlTree,r,n)}removeEmptyProps(t){return Object.keys(t).reduce((e,n)=>{const r=t[n];return null!=r&&(e[n]=r),e},{})}processNavigations(){this.navigations.subscribe(t=>{this.navigated=!0,this.lastSuccessfulId=t.id,this.currentPageId=t.targetPageId,this.events.next(new hl(t.id,this.serializeUrl(t.extractedUrl),this.serializeUrl(this.currentUrlTree))),this.lastSuccessfulNavigation=this.currentNavigation,t.resolve(!0)},t=>{this.console.warn("Unhandled Navigation Error: ")})}scheduleNavigation(t,e,n,r,i){if(this.disposed)return Promise.resolve(!1);const s=this.getTransition(),o="imperative"!==e&&"imperative"===(null==s?void 0:s.source),a=(this.lastSuccessfulId===s.id||this.currentNavigation?s.rawUrl:s.urlAfterRedirects).toString()===t.toString();if(o&&a)return Promise.resolve(!0);let u,c,l;i?(u=i.resolve,c=i.reject,l=i.promise):l=new Promise((t,e)=>{u=t,c=e});const h=++this.navigationId;let d;return d="computed"===this.canceledNavigationResolution?n&&n.\u0275routerPageId?n.\u0275routerPageId:this.currentPageId+1:0,this.setTransition({id:h,targetPageId:d,source:e,restoredState:n,currentUrlTree:this.currentUrlTree,currentRawUrl:this.rawUrlTree,rawUrl:t,extras:r,resolve:u,reject:c,promise:l,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),l.catch(t=>Promise.reject(t))}setBrowserUrl(t,e){const n=this.urlSerializer.serialize(t),r=Object.assign(Object.assign({},e.extras.state),this.generateNgRouterState(e.id,e.targetPageId));this.location.isCurrentPathEqualTo(n)||e.extras.replaceUrl?this.location.replaceState(n,"",r):this.location.go(n,"",r)}resetStateAndUrl(t,e,n){this.routerState=t,this.currentUrlTree=e,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,n),this.resetUrlToCurrentUrlTree()}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}cancelNavigationTransition(t,e){"computed"===this.canceledNavigationResolution?"popstate"!==t.source&&"eager"!==this.urlUpdateStrategy||this.location.historyGo(this.currentPageId-t.targetPageId):this.resetUrlToCurrentUrlTree();const n=new dl(t.id,this.serializeUrl(t.extractedUrl),e);this.triggerEvent(n),t.resolve(!1)}generateNgRouterState(t,e){return"computed"===this.canceledNavigationResolution?{navigationId:t,"\u0275routerPageId":e}:{navigationId:t}}}return t.\u0275fac=function(e){return new(e||t)(Jn(Vn),Jn(Gl),Jn(Dd),Jn(Eu),Jn(us),Jn(Za),Jn(Aa),Jn(void 0))},t.\u0275prov=dt({token:t,factory:t.\u0275fac}),t})(),Ud=(()=>{class t{constructor(t,e,n){this.router=t,this.route=e,this.locationStrategy=n,this.commands=[],this.onChanges=new T,this.subscription=t.events.subscribe(t=>{t instanceof hl&&this.updateTargetUrlAndHref()})}set routerLink(t){this.commands=null!=t?Array.isArray(t)?t:[t]:[]}ngOnChanges(t){this.updateTargetUrlAndHref(),this.onChanges.next(this)}ngOnDestroy(){this.subscription.unsubscribe()}onClick(t,e,n,r,i){if(0!==t||e||n||r||i)return!0;if("string"==typeof this.target&&"_self"!=this.target)return!0;const s={skipLocationChange:jd(this.skipLocationChange),replaceUrl:jd(this.replaceUrl),state:this.state};return this.router.navigateByUrl(this.urlTree,s),!1}updateTargetUrlAndHref(){this.href=this.locationStrategy.prepareExternalUrl(this.router.serializeUrl(this.urlTree))}get urlTree(){return this.router.createUrlTree(this.commands,{relativeTo:void 0!==this.relativeTo?this.relativeTo:this.route,queryParams:this.queryParams,fragment:this.fragment,queryParamsHandling:this.queryParamsHandling,preserveFragment:jd(this.preserveFragment)})}}return t.\u0275fac=function(e){return new(e||t)(_s(Fd),_s(mh),_s(wu))},t.\u0275dir=Qt({type:t,selectors:[["a","routerLink",""],["area","routerLink",""]],hostVars:2,hostBindings:function(t,e){1&t&&xs("click",function(t){return e.onClick(t.button,t.ctrlKey,t.shiftKey,t.altKey,t.metaKey)}),2&t&&($s("href",e.href,ur),bs("target",e.target))},inputs:{routerLink:"routerLink",target:"target",queryParams:"queryParams",fragment:"fragment",queryParamsHandling:"queryParamsHandling",preserveFragment:"preserveFragment",skipLocationChange:"skipLocationChange",replaceUrl:"replaceUrl",state:"state",relativeTo:"relativeTo"},features:[ue]}),t})();function jd(t){return""===t||!!t}let Bd=(()=>{class t{constructor(t,e,n,r,i){this.parentContexts=t,this.location=e,this.resolver=n,this.changeDetector=i,this.activated=null,this._activatedRoute=null,this.activateEvents=new ca,this.deactivateEvents=new ca,this.name=r||Cl,t.onChildOutletCreated(this.name,this)}ngOnDestroy(){this.parentContexts.onChildOutletDestroyed(this.name)}ngOnInit(){if(!this.activated){const t=this.parentContexts.getContext(this.name);t&&t.route&&(t.attachRef?this.attach(t.attachRef,t.route):this.activateWith(t.route,t.resolver||null))}}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new Error("Outlet is not activated");return this.activated.instance}get activatedRoute(){if(!this.activated)throw new Error("Outlet is not activated");return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new Error("Outlet is not activated");this.location.detach();const t=this.activated;return this.activated=null,this._activatedRoute=null,t}attach(t,e){this.activated=t,this._activatedRoute=e,this.location.insert(t.hostView)}deactivate(){if(this.activated){const t=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(t)}}activateWith(t,e){if(this.isActivated)throw new Error("Cannot activate an already activated outlet");this._activatedRoute=t;const n=(e=e||this.resolver).resolveComponentFactory(t._futureSnapshot.routeConfig.component),r=this.parentContexts.getOrCreateContext(this.name).children,i=new $d(t,r,this.location.injector);this.activated=this.location.createComponent(n,this.location.length,i),this.changeDetector.markForCheck(),this.activateEvents.emit(this.activated.instance)}}return t.\u0275fac=function(e){return new(e||t)(_s(Dd),_s(Wo),_s(ao),("name",function(t,e){const n=t.attrs;if(n){const t=n.length;let r=0;for(;r<t;){const i=n[r];if(on(i))break;if(0===i)r+=2;else if("number"==typeof i)for(r++;r<t&&"string"==typeof n[r];)r++;else{if(i===e)return n[r+1];r+=2}}}return null}(xe(),"name")),_s(Vo))},t.\u0275dir=Qt({type:t,selectors:[["router-outlet"]],outputs:{activateEvents:"activate",deactivateEvents:"deactivate"},exportAs:["outlet"]}),t})();class $d{constructor(t,e,n){this.route=t,this.childContexts=e,this.parent=n}get(t,e){return t===mh?this.route:t===Dd?this.childContexts:this.parent.get(t,e)}}class qd{}class Hd{preload(t,e){return gc(null)}}let zd=(()=>{class t{constructor(t,e,n,r,i){this.router=t,this.injector=r,this.preloadingStrategy=i,this.loader=new xd(e,n,e=>t.triggerEvent(new wl(e)),e=>t.triggerEvent(new bl(e)))}setUpPreloading(){this.subscription=this.router.events.pipe(Uc(t=>t instanceof hl),zc(()=>this.preload())).subscribe(()=>{})}preload(){const t=this.injector.get(zo);return this.processRoutes(t,this.router.config)}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}processRoutes(t,e){const n=[];for(const r of e)if(r.loadChildren&&!r.canLoad&&r._loadedConfig){const t=r._loadedConfig;n.push(this.processRoutes(t.module,t.routes))}else r.loadChildren&&!r.canLoad?n.push(this.preloadConfig(t,r)):r.children&&n.push(this.processRoutes(t,r.children));return F(n).pipe(z(),A(t=>{}))}preloadConfig(t,e){return this.preloadingStrategy.preload(e,()=>(e._loadedConfig?gc(e._loadedConfig):this.loader.load(t.injector,e)).pipe($(t=>(e._loadedConfig=t,this.processRoutes(t.module,t.routes)))))}}return t.\u0275fac=function(e){return new(e||t)(Jn(Fd),Jn(Za),Jn(Aa),Jn(us),Jn(qd))},t.\u0275prov=dt({token:t,factory:t.\u0275fac}),t})(),Kd=(()=>{class t{constructor(t,e,n={}){this.router=t,this.viewportScroller=e,this.options=n,this.lastId=0,this.lastSource="imperative",this.restoredId=0,this.store={},n.scrollPositionRestoration=n.scrollPositionRestoration||"disabled",n.anchorScrolling=n.anchorScrolling||"disabled"}init(){"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}createScrollEvents(){return this.router.events.subscribe(t=>{t instanceof ll?(this.store[this.lastId]=this.viewportScroller.getScrollPosition(),this.lastSource=t.navigationTrigger,this.restoredId=t.restoredState?t.restoredState.navigationId:0):t instanceof hl&&(this.lastId=t.id,this.scheduleScrollEvent(t,this.router.parseUrl(t.urlAfterRedirects).fragment))})}consumeScrollEvents(){return this.router.events.subscribe(t=>{t instanceof Tl&&(t.position?"top"===this.options.scrollPositionRestoration?this.viewportScroller.scrollToPosition([0,0]):"enabled"===this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition(t.position):t.anchor&&"enabled"===this.options.anchorScrolling?this.viewportScroller.scrollToAnchor(t.anchor):"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition([0,0]))})}scheduleScrollEvent(t,e){this.router.triggerEvent(new Tl(t,"popstate"===this.lastSource?this.store[this.restoredId]:null,e))}ngOnDestroy(){this.routerEventsSubscription&&this.routerEventsSubscription.unsubscribe(),this.scrollEventsSubscription&&this.scrollEventsSubscription.unsubscribe()}}return t.\u0275fac=function(e){return new(e||t)(Jn(Fd),Jn(Pu),Jn(void 0))},t.\u0275prov=dt({token:t,factory:t.\u0275fac}),t})();const Gd=new Mn("ROUTER_CONFIGURATION"),Wd=new Mn("ROUTER_FORROOT_GUARD"),Qd=[Eu,{provide:Gl,useClass:Wl},{provide:Fd,useFactory:function(t,e,n,r,i,s,o,a={},u,c){const l=new Fd(null,t,e,n,r,i,s,Rl(o));return u&&(l.urlHandlingStrategy=u),c&&(l.routeReuseStrategy=c),function(t,e){t.errorHandler&&(e.errorHandler=t.errorHandler),t.malformedUriErrorHandler&&(e.malformedUriErrorHandler=t.malformedUriErrorHandler),t.onSameUrlNavigation&&(e.onSameUrlNavigation=t.onSameUrlNavigation),t.paramsInheritanceStrategy&&(e.paramsInheritanceStrategy=t.paramsInheritanceStrategy),t.relativeLinkResolution&&(e.relativeLinkResolution=t.relativeLinkResolution),t.urlUpdateStrategy&&(e.urlUpdateStrategy=t.urlUpdateStrategy)}(a,l),a.enableTracing&&l.events.subscribe(t=>{var e,n;null===(e=console.group)||void 0===e||e.call(console,`Router Event: ${t.constructor.name}`),console.log(t.toString()),console.log(t),null===(n=console.groupEnd)||void 0===n||n.call(console)}),l},deps:[Gl,Dd,Eu,us,Za,Aa,Ad,Gd,[class{},new er],[class{},new er]]},Dd,{provide:mh,useFactory:function(t){return t.routerState.root},deps:[Fd]},{provide:Za,useClass:nu},zd,Hd,class{preload(t,e){return e().pipe($c(()=>gc(null)))}},{provide:Gd,useValue:{enableTracing:!1}}];function Yd(){return new Ka("Router",Fd)}let Jd=(()=>{class t{constructor(t,e){}static forRoot(e,n){return{ngModule:t,providers:[Qd,ef(e),{provide:Wd,useFactory:tf,deps:[[Fd,new er,new nr]]},{provide:Gd,useValue:n||{}},{provide:wu,useFactory:Zd,deps:[lu,[new tr(_u),new er],Gd]},{provide:Kd,useFactory:Xd,deps:[Fd,Pu,Gd]},{provide:qd,useExisting:n&&n.preloadingStrategy?n.preloadingStrategy:Hd},{provide:Ka,multi:!0,useFactory:Yd},[nf,{provide:la,multi:!0,useFactory:rf,deps:[nf]},{provide:of,useFactory:sf,deps:[nf]},{provide:ya,multi:!0,useExisting:of}]]}}static forChild(e){return{ngModule:t,providers:[ef(e)]}}}return t.\u0275fac=function(e){return new(e||t)(Jn(Wd,8),Jn(Fd,8))},t.\u0275mod=Gt({type:t}),t.\u0275inj=ft({}),t})();function Xd(t,e,n){return n.scrollOffset&&e.setOffset(n.scrollOffset),new Kd(t,e,n)}function Zd(t,e,n={}){return n.useHash?new Su(t,e):new Iu(t,e)}function tf(t){return"guarded"}function ef(t){return[{provide:Ln,multi:!0,useValue:t},{provide:Ad,multi:!0,useValue:t}]}let nf=(()=>{class t{constructor(t){this.injector=t,this.initNavigation=!1,this.resultOfPreactivationDone=new T}appInitializer(){return this.injector.get(du,Promise.resolve(null)).then(()=>{let t=null;const e=new Promise(e=>t=e),n=this.injector.get(Fd),r=this.injector.get(Gd);return"disabled"===r.initialNavigation?(n.setUpLocationChangeListener(),t(!0)):"enabled"===r.initialNavigation||"enabledBlocking"===r.initialNavigation?(n.hooks.afterPreactivation=()=>this.initNavigation?gc(null):(this.initNavigation=!0,t(!0),this.resultOfPreactivationDone),n.initialNavigation()):t(!0),e})}bootstrapListener(t){const e=this.injector.get(Gd),n=this.injector.get(zd),r=this.injector.get(Kd),i=this.injector.get(Fd),s=this.injector.get(Ja);t===s.components[0]&&("enabledNonBlocking"!==e.initialNavigation&&void 0!==e.initialNavigation||i.initialNavigation(),n.setUpPreloading(),r.init(),i.resetRootComponentType(s.componentTypes[0]),this.resultOfPreactivationDone.next(null),this.resultOfPreactivationDone.complete())}}return t.\u0275fac=function(e){return new(e||t)(Jn(us))},t.\u0275prov=dt({token:t,factory:t.\u0275fac}),t})();function rf(t){return t.appInitializer.bind(t)}function sf(t){return t.bootstrapListener.bind(t)}const of=new Mn("Router Initializer");function af(t,e,n,r,i,s,o){try{var a=t[s](o),u=a.value}catch(c){return void n(c)}a.done?e(u):Promise.resolve(u).then(r,i)}function uf(t){return function(){var e=this,n=arguments;return new Promise(function(r,i){var s=t.apply(e,n);function o(t){af(s,r,i,o,a,"next",t)}function a(t){af(s,r,i,o,a,"throw",t)}o(void 0)})}}const cf=function(t){const e=[];let n=0;for(let r=0;r<t.length;r++){let i=t.charCodeAt(r);i<128?e[n++]=i:i<2048?(e[n++]=i>>6|192,e[n++]=63&i|128):55296==(64512&i)&&r+1<t.length&&56320==(64512&t.charCodeAt(r+1))?(i=65536+((1023&i)<<10)+(1023&t.charCodeAt(++r)),e[n++]=i>>18|240,e[n++]=i>>12&63|128,e[n++]=i>>6&63|128,e[n++]=63&i|128):(e[n++]=i>>12|224,e[n++]=i>>6&63|128,e[n++]=63&i|128)}return e},lf={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"==typeof atob,encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let i=0;i<t.length;i+=3){const e=t[i],s=i+1<t.length,o=s?t[i+1]:0,a=i+2<t.length,u=a?t[i+2]:0;let c=(15&o)<<2|u>>6,l=63&u;a||(l=64,s||(c=64)),r.push(n[e>>2],n[(3&e)<<4|o>>4],n[c],n[l])}return r.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(cf(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):function(t){const e=[];let n=0,r=0;for(;n<t.length;){const i=t[n++];if(i<128)e[r++]=String.fromCharCode(i);else if(i>191&&i<224){const s=t[n++];e[r++]=String.fromCharCode((31&i)<<6|63&s)}else if(i>239&&i<365){const s=((7&i)<<18|(63&t[n++])<<12|(63&t[n++])<<6|63&t[n++])-65536;e[r++]=String.fromCharCode(55296+(s>>10)),e[r++]=String.fromCharCode(56320+(1023&s))}else{const s=t[n++],o=t[n++];e[r++]=String.fromCharCode((15&i)<<12|(63&s)<<6|63&o)}}return e.join("")}(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let i=0;i<t.length;){const e=n[t.charAt(i++)],s=i<t.length?n[t.charAt(i)]:0;++i;const o=i<t.length?n[t.charAt(i)]:64;++i;const a=i<t.length?n[t.charAt(i)]:64;if(++i,null==e||null==s||null==o||null==a)throw Error();r.push(e<<2|s>>4),64!==o&&(r.push(s<<4&240|o>>2),64!==a&&r.push(o<<6&192|a))}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}},hf=function(t){return function(t){const e=cf(t);return lf.encodeByteArray(e,!0)}(t).replace(/\./g,"")};class df{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((t,e)=>{this.resolve=t,this.reject=e})}wrapCallback(t){return(e,n)=>{e?this.reject(e):this.resolve(n),"function"==typeof t&&(this.promise.catch(()=>{}),1===t.length?t(e):t(e,n))}}}function ff(){return"undefined"!=typeof navigator&&"string"==typeof navigator.userAgent?navigator.userAgent:""}function pf(){return"undefined"!=typeof window&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(ff())}function gf(){const t="object"==typeof chrome?chrome.runtime:"object"==typeof browser?browser.runtime:void 0;return"object"==typeof t&&void 0!==t.id}function mf(){return"object"==typeof navigator&&"ReactNative"===navigator.product}function yf(){const t=ff();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0}function vf(){return"object"==typeof indexedDB}function wf(){return new Promise((t,e)=>{try{let n=!0;const r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=()=>{i.result.close(),n||self.indexedDB.deleteDatabase(r),t(!0)},i.onupgradeneeded=()=>{n=!1},i.onerror=()=>{var t;e((null===(t=i.error)||void 0===t?void 0:t.message)||"")}}catch(n){e(n)}})}function bf(){return!("undefined"==typeof navigator||!navigator.cookieEnabled)}class _f extends Error{constructor(t,e,n){super(e),this.code=t,this.customData=n,this.name="FirebaseError",Object.setPrototypeOf(this,_f.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,If.prototype.create)}}class If{constructor(t,e,n){this.service=t,this.serviceName=e,this.errors=n}create(t,...e){const n=e[0]||{},r=`${this.service}/${t}`,i=this.errors[t],s=i?function(t,e){return t.replace(Sf,(t,n)=>{const r=e[n];return null!=r?String(r):`<${n}?>`})}(i,n):"Error";return new _f(r,`${this.serviceName}: ${s} (${r}).`,n)}}const Sf=/\{\$([^}]+)}/g;function Ef(t,e){if(t===e)return!0;const n=Object.keys(t),r=Object.keys(e);for(const i of n){if(!r.includes(i))return!1;const n=t[i],s=e[i];if(Tf(n)&&Tf(s)){if(!Ef(n,s))return!1}else if(n!==s)return!1}for(const i of r)if(!n.includes(i))return!1;return!0}function Tf(t){return null!==t&&"object"==typeof t}function Cf(t){const e=[];for(const[n,r]of Object.entries(t))Array.isArray(r)?r.forEach(t=>{e.push(encodeURIComponent(n)+"="+encodeURIComponent(t))}):e.push(encodeURIComponent(n)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}function kf(t){const e={};return t.replace(/^\?/,"").split("&").forEach(t=>{if(t){const[n,r]=t.split("=");e[decodeURIComponent(n)]=decodeURIComponent(r)}}),e}function Af(t){const e=t.indexOf("?");if(!e)return"";const n=t.indexOf("#",e);return t.substring(e,n>0?n:void 0)}class xf{constructor(t,e){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=e,this.task.then(()=>{t(this)}).catch(t=>{this.error(t)})}next(t){this.forEachObserver(e=>{e.next(t)})}error(t){this.forEachObserver(e=>{e.error(t)}),this.close(t)}complete(){this.forEachObserver(t=>{t.complete()}),this.close()}subscribe(t,e,n){let r;if(void 0===t&&void 0===e&&void 0===n)throw new Error("Missing Observer.");r=function(t,e){if("object"!=typeof t||null===t)return!1;for(const n of["next","error","complete"])if(n in t&&"function"==typeof t[n])return!0;return!1}(t)?t:{next:t,error:e,complete:n},void 0===r.next&&(r.next=Of),void 0===r.error&&(r.error=Of),void 0===r.complete&&(r.complete=Of);const i=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?r.error(this.finalError):r.complete()}catch(t){}}),this.observers.push(r),i}unsubscribeOne(t){void 0!==this.observers&&void 0!==this.observers[t]&&(delete this.observers[t],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))}forEachObserver(t){if(!this.finalized)for(let e=0;e<this.observers.length;e++)this.sendOne(e,t)}sendOne(t,e){this.task.then(()=>{if(void 0!==this.observers&&void 0!==this.observers[t])try{e(this.observers[t])}catch(n){"undefined"!=typeof console&&console.error&&console.error(n)}})}close(t){this.finalized||(this.finalized=!0,void 0!==t&&(this.finalError=t),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function Of(){}function Df(t,e=1e3,n=2){const r=e*Math.pow(n,t),i=Math.round(.5*r*(Math.random()-.5)*2);return Math.min(144e5,r+i)}function Nf(t){return t&&t._delegate?t._delegate:t}function Rf(t,e){return new Promise((n,r)=>{t.onsuccess=t=>{n(t.target.result)},t.onerror=t=>{var n;r(`${e}: ${null===(n=t.target.error)||void 0===n?void 0:n.message}`)}})}class Pf{constructor(t){this._db=t,this.objectStoreNames=this._db.objectStoreNames}transaction(t,e="readonly"){return new Mf(this._db.transaction.call(this._db,t,e))}createObjectStore(t,e){return new Lf(this._db.createObjectStore(t,e))}close(){this._db.close()}}class Mf{constructor(t){this._transaction=t,this.complete=new Promise((t,e)=>{this._transaction.oncomplete=function(){t()},this._transaction.onerror=()=>{e(this._transaction.error)},this._transaction.onabort=()=>{e(this._transaction.error)}})}objectStore(t){return new Lf(this._transaction.objectStore(t))}}class Lf{constructor(t){this._store=t}index(t){return new Vf(this._store.index(t))}createIndex(t,e,n){return new Vf(this._store.createIndex(t,e,n))}get(t){return Rf(this._store.get(t),"Error reading from IndexedDB")}put(t,e){return Rf(this._store.put(t,e),"Error writing to IndexedDB")}delete(t){return Rf(this._store.delete(t),"Error deleting from IndexedDB")}clear(){return Rf(this._store.clear(),"Error clearing IndexedDB object store")}}class Vf{constructor(t){this._index=t}get(t){return Rf(this._index.get(t),"Error reading from IndexedDB")}}function Ff(t,e,n){return new Promise((r,i)=>{try{const s=indexedDB.open(t,e);s.onsuccess=t=>{r(new Pf(t.target.result))},s.onerror=t=>{var e;i(`Error opening indexedDB: ${null===(e=t.target.error)||void 0===e?void 0:e.message}`)},s.onupgradeneeded=t=>{n(new Pf(s.result),t.oldVersion,t.newVersion,new Mf(s.transaction))}}catch(s){i(`Error opening indexedDB: ${s.message}`)}})}function Uf(t){return jf.apply(this,arguments)}function jf(){return(jf=uf(function*(t){return new Promise((e,n)=>{try{const r=indexedDB.deleteDatabase(t);r.onsuccess=()=>{e()},r.onerror=e=>{var r;n(`Error deleting indexedDB database "${t}": ${null===(r=e.target.error)||void 0===r?void 0:r.message}`)}}catch(r){n(`Error deleting indexedDB database "${t}": ${r.message}`)}})})).apply(this,arguments)}class Bf{constructor(t,e,n){this.name=t,this.instanceFactory=e,this.type=n,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(t){return this.instantiationMode=t,this}setMultipleInstances(t){return this.multipleInstances=t,this}setServiceProps(t){return this.serviceProps=t,this}setInstanceCreatedCallback(t){return this.onInstanceCreated=t,this}}const $f="[DEFAULT]";class qf{constructor(t,e){this.name=t,this.container=e,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(t){const e=this.normalizeInstanceIdentifier(t);if(!this.instancesDeferred.has(e)){const t=new df;if(this.instancesDeferred.set(e,t),this.isInitialized(e)||this.shouldAutoInitialize())try{const n=this.getOrInitializeService({instanceIdentifier:e});n&&t.resolve(n)}catch(n){}}return this.instancesDeferred.get(e).promise}getImmediate(t){var e;const n=this.normalizeInstanceIdentifier(null==t?void 0:t.identifier),r=null!==(e=null==t?void 0:t.optional)&&void 0!==e&&e;if(!this.isInitialized(n)&&!this.shouldAutoInitialize()){if(r)return null;throw Error(`Service ${this.name} is not available`)}try{return this.getOrInitializeService({instanceIdentifier:n})}catch(i){if(r)return null;throw i}}getComponent(){return this.component}setComponent(t){if(t.name!==this.name)throw Error(`Mismatching Component ${t.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=t,this.shouldAutoInitialize()){if(function(t){return"EAGER"===t.instantiationMode}(t))try{this.getOrInitializeService({instanceIdentifier:$f})}catch(e){}for(const[t,n]of this.instancesDeferred.entries()){const r=this.normalizeInstanceIdentifier(t);try{const t=this.getOrInitializeService({instanceIdentifier:r});n.resolve(t)}catch(e){}}}}clearInstance(t="[DEFAULT]"){this.instancesDeferred.delete(t),this.instancesOptions.delete(t),this.instances.delete(t)}delete(){var t=this;return uf(function*(){const e=Array.from(t.instances.values());yield Promise.all([...e.filter(t=>"INTERNAL"in t).map(t=>t.INTERNAL.delete()),...e.filter(t=>"_delete"in t).map(t=>t._delete())])})()}isComponentSet(){return null!=this.component}isInitialized(t="[DEFAULT]"){return this.instances.has(t)}getOptions(t="[DEFAULT]"){return this.instancesOptions.get(t)||{}}initialize(t={}){const{options:e={}}=t,n=this.normalizeInstanceIdentifier(t.instanceIdentifier);if(this.isInitialized(n))throw Error(`${this.name}(${n}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const r=this.getOrInitializeService({instanceIdentifier:n,options:e});for(const[i,s]of this.instancesDeferred.entries())n===this.normalizeInstanceIdentifier(i)&&s.resolve(r);return r}onInit(t,e){var n;const r=this.normalizeInstanceIdentifier(e),i=null!==(n=this.onInitCallbacks.get(r))&&void 0!==n?n:new Set;i.add(t),this.onInitCallbacks.set(r,i);const s=this.instances.get(r);return s&&t(s,r),()=>{i.delete(t)}}invokeOnInitCallbacks(t,e){const n=this.onInitCallbacks.get(e);if(n)for(const r of n)try{r(t,e)}catch(FF){}}getOrInitializeService({instanceIdentifier:t,options:e={}}){let n=this.instances.get(t);if(!n&&this.component&&(n=this.component.instanceFactory(this.container,{instanceIdentifier:(r=t,r===$f?void 0:r),options:e}),this.instances.set(t,n),this.instancesOptions.set(t,e),this.invokeOnInitCallbacks(n,t),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,t,n)}catch(FF){}var r;return n||null}normalizeInstanceIdentifier(t="[DEFAULT]"){return this.component?this.component.multipleInstances?t:$f:t}shouldAutoInitialize(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode}}class Hf{constructor(t){this.name=t,this.providers=new Map}addComponent(t){const e=this.getProvider(t.name);if(e.isComponentSet())throw new Error(`Component ${t.name} has already been registered with ${this.name}`);e.setComponent(t)}addOrOverwriteComponent(t){this.getProvider(t.name).isComponentSet()&&this.providers.delete(t.name),this.addComponent(t)}getProvider(t){if(this.providers.has(t))return this.providers.get(t);const e=new qf(t,this);return this.providers.set(t,e),e}getProviders(){return Array.from(this.providers.values())}}const zf=[];var Kf,Gf;(Gf=Kf||(Kf={}))[Gf.DEBUG=0]="DEBUG",Gf[Gf.VERBOSE=1]="VERBOSE",Gf[Gf.INFO=2]="INFO",Gf[Gf.WARN=3]="WARN",Gf[Gf.ERROR=4]="ERROR",Gf[Gf.SILENT=5]="SILENT";const Wf={debug:Kf.DEBUG,verbose:Kf.VERBOSE,info:Kf.INFO,warn:Kf.WARN,error:Kf.ERROR,silent:Kf.SILENT},Qf=Kf.INFO,Yf={[Kf.DEBUG]:"log",[Kf.VERBOSE]:"log",[Kf.INFO]:"info",[Kf.WARN]:"warn",[Kf.ERROR]:"error"},Jf=(t,e,...n)=>{if(e<t.logLevel)return;const r=(new Date).toISOString(),i=Yf[e];if(!i)throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`);console[i](`[${r}]  ${t.name}:`,...n)};class Xf{constructor(t){this.name=t,this._logLevel=Qf,this._logHandler=Jf,this._userLogHandler=null,zf.push(this)}get logLevel(){return this._logLevel}set logLevel(t){if(!(t in Kf))throw new TypeError(`Invalid value "${t}" assigned to \`logLevel\``);this._logLevel=t}setLogLevel(t){this._logLevel="string"==typeof t?Wf[t]:t}get logHandler(){return this._logHandler}set logHandler(t){if("function"!=typeof t)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=t}get userLogHandler(){return this._userLogHandler}set userLogHandler(t){this._userLogHandler=t}debug(...t){this._userLogHandler&&this._userLogHandler(this,Kf.DEBUG,...t),this._logHandler(this,Kf.DEBUG,...t)}log(...t){this._userLogHandler&&this._userLogHandler(this,Kf.VERBOSE,...t),this._logHandler(this,Kf.VERBOSE,...t)}info(...t){this._userLogHandler&&this._userLogHandler(this,Kf.INFO,...t),this._logHandler(this,Kf.INFO,...t)}warn(...t){this._userLogHandler&&this._userLogHandler(this,Kf.WARN,...t),this._logHandler(this,Kf.WARN,...t)}error(...t){this._userLogHandler&&this._userLogHandler(this,Kf.ERROR,...t),this._logHandler(this,Kf.ERROR,...t)}}class Zf{constructor(t){this.container=t}getPlatformInfoString(){return this.container.getProviders().map(t=>{if(function(t){const e=t.getComponent();return"VERSION"===(null==e?void 0:e.type)}(t)){const e=t.getImmediate();return`${e.library}/${e.version}`}return null}).filter(t=>t).join(" ")}}const tp="@firebase/app",ep="0.7.21",np=new Xf("@firebase/app"),rp={[tp]:"fire-core","@firebase/app-compat":"fire-core-compat","@firebase/analytics":"fire-analytics","@firebase/analytics-compat":"fire-analytics-compat","@firebase/app-check":"fire-app-check","@firebase/app-check-compat":"fire-app-check-compat","@firebase/auth":"fire-auth","@firebase/auth-compat":"fire-auth-compat","@firebase/database":"fire-rtdb","@firebase/database-compat":"fire-rtdb-compat","@firebase/functions":"fire-fn","@firebase/functions-compat":"fire-fn-compat","@firebase/installations":"fire-iid","@firebase/installations-compat":"fire-iid-compat","@firebase/messaging":"fire-fcm","@firebase/messaging-compat":"fire-fcm-compat","@firebase/performance":"fire-perf","@firebase/performance-compat":"fire-perf-compat","@firebase/remote-config":"fire-rc","@firebase/remote-config-compat":"fire-rc-compat","@firebase/storage":"fire-gcs","@firebase/storage-compat":"fire-gcs-compat","@firebase/firestore":"fire-fst","@firebase/firestore-compat":"fire-fst-compat","fire-js":"fire-js",firebase:"fire-js-all"},ip=new Map,sp=new Map;function op(t,e){try{t.container.addComponent(e)}catch(n){np.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function ap(t){const e=t.name;if(sp.has(e))return np.debug(`There were multiple attempts to register component ${e}.`),!1;sp.set(e,t);for(const n of ip.values())op(n,t);return!0}function up(t,e){const n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}const cp=new If("app","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","bad-app-name":"Illegal App name: '{$appName}","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","storage-delete":"Error thrown when deleting from storage. Original error: {$originalErrorMessage}."});class lp{constructor(t,e,n){this._isDeleted=!1,this._options=Object.assign({},t),this._config=Object.assign({},e),this._name=e.name,this._automaticDataCollectionEnabled=e.automaticDataCollectionEnabled,this._container=n,this.container.addComponent(new Bf("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(t){this.checkDestroyed(),this._automaticDataCollectionEnabled=t}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(t){this._isDeleted=t}checkDestroyed(){if(this.isDeleted)throw cp.create("app-deleted",{appName:this._name})}}const hp="9.6.11";function dp(t="[DEFAULT]"){const e=ip.get(t);if(!e)throw cp.create("no-app",{appName:t});return e}function fp(){return Array.from(ip.values())}function pp(){return(pp=uf(function*(t){const e=t.name;ip.has(e)&&(ip.delete(e),yield Promise.all(t.container.getProviders().map(t=>t.delete())),t.isDeleted=!0)})).apply(this,arguments)}function gp(t,e,n){var r;let i=null!==(r=rp[t])&&void 0!==r?r:t;n&&(i+=`-${n}`);const s=i.match(/\s|\//),o=e.match(/\s|\//);if(s||o){const t=[`Unable to register library "${i}" with version "${e}":`];return s&&t.push(`library name "${i}" contains illegal characters (whitespace or "/")`),s&&o&&t.push("and"),o&&t.push(`version name "${e}" contains illegal characters (whitespace or "/")`),void np.warn(t.join(" "))}ap(new Bf(`${i}-version`,()=>({library:i,version:e}),"VERSION"))}const mp="firebase-heartbeat-store";let yp=null;function vp(){return yp||(yp=Ff("firebase-heartbeat-database",1,(t,e)=>{switch(e){case 0:t.createObjectStore(mp)}}).catch(t=>{throw cp.create("storage-open",{originalErrorMessage:t.message})})),yp}function wp(){return(wp=uf(function*(t){try{return(yield vp()).transaction(mp).objectStore(mp).get(Ip(t))}catch(e){throw cp.create("storage-get",{originalErrorMessage:e.message})}})).apply(this,arguments)}function bp(t,e){return _p.apply(this,arguments)}function _p(){return(_p=uf(function*(t,e){try{const n=(yield vp()).transaction(mp,"readwrite"),r=n.objectStore(mp);return yield r.put(e,Ip(t)),n.complete}catch(n){throw cp.create("storage-set",{originalErrorMessage:n.message})}})).apply(this,arguments)}function Ip(t){return`${t.name}!${t.options.appId}`}class Sp{constructor(t){this.container=t,this._heartbeatsCache=null;const e=this.container.getProvider("app").getImmediate();this._storage=new Tp(e),this._heartbeatsCachePromise=this._storage.read().then(t=>(this._heartbeatsCache=t,t))}triggerHeartbeat(){var t=this;return uf(function*(){const e=t.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),n=Ep();if(null===t._heartbeatsCache&&(t._heartbeatsCache=yield t._heartbeatsCachePromise),t._heartbeatsCache.lastSentHeartbeatDate!==n&&!t._heartbeatsCache.heartbeats.some(t=>t.date===n))return t._heartbeatsCache.heartbeats.push({date:n,agent:e}),t._heartbeatsCache.heartbeats=t._heartbeatsCache.heartbeats.filter(t=>{const e=new Date(t.date).valueOf();return Date.now()-e<=2592e6}),t._storage.overwrite(t._heartbeatsCache)})()}getHeartbeatsHeader(){var t=this;return uf(function*(){if(null===t._heartbeatsCache&&(yield t._heartbeatsCachePromise),null===t._heartbeatsCache||0===t._heartbeatsCache.heartbeats.length)return"";const e=Ep(),{heartbeatsToSend:n,unsentEntries:r}=function(t,e=1024){const n=[];let r=t.slice();for(const i of t){const t=n.find(t=>t.agent===i.agent);if(t){if(t.dates.push(i.date),Cp(n)>e){t.dates.pop();break}}else if(n.push({agent:i.agent,dates:[i.date]}),Cp(n)>e){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}(t._heartbeatsCache.heartbeats),i=hf(JSON.stringify({version:2,heartbeats:n}));return t._heartbeatsCache.lastSentHeartbeatDate=e,r.length>0?(t._heartbeatsCache.heartbeats=r,yield t._storage.overwrite(t._heartbeatsCache)):(t._heartbeatsCache.heartbeats=[],t._storage.overwrite(t._heartbeatsCache)),i})()}}function Ep(){return(new Date).toISOString().substring(0,10)}class Tp{constructor(t){this.app=t,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}runIndexedDBEnvironmentCheck(){return uf(function*(){return!!vf()&&wf().then(()=>!0).catch(()=>!1)})()}read(){var t=this;return uf(function*(){return(yield t._canUseIndexedDBPromise)&&(yield function(t){return wp.apply(this,arguments)}(t.app))||{heartbeats:[]}})()}overwrite(t){var e=this;return uf(function*(){var n;if(yield e._canUseIndexedDBPromise){const r=yield e.read();return bp(e.app,{lastSentHeartbeatDate:null!==(n=t.lastSentHeartbeatDate)&&void 0!==n?n:r.lastSentHeartbeatDate,heartbeats:t.heartbeats})}})()}add(t){var e=this;return uf(function*(){var n;if(yield e._canUseIndexedDBPromise){const r=yield e.read();return bp(e.app,{lastSentHeartbeatDate:null!==(n=t.lastSentHeartbeatDate)&&void 0!==n?n:r.lastSentHeartbeatDate,heartbeats:[...r.heartbeats,...t.heartbeats]})}})()}}function Cp(t){return hf(JSON.stringify({version:2,heartbeats:t})).length}ap(new Bf("platform-logger",t=>new Zf(t),"PRIVATE")),ap(new Bf("heartbeat",t=>new Sp(t),"PRIVATE")),gp(tp,ep,""),gp(tp,ep,"esm2017"),gp("fire-js",""),gp("firebase","9.6.11","app");const kp="@firebase/installations",Ap="0.5.8",xp="w:0.5.8",Op="FIS_v2",Dp=new If("installations","Installations",{"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"not-registered":"Firebase Installation is not registered.","installation-not-found":"Firebase Installation not found.","request-failed":'{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',"app-offline":"Could not process request. Application offline.","delete-pending-registration":"Can't delete installation while there is a pending registration request."});function Np(t){return t instanceof _f&&t.code.includes("request-failed")}function Rp({projectId:t}){return`https://firebaseinstallations.googleapis.com/v1/projects/${t}/installations`}function Pp(t){return{token:t.token,requestStatus:2,expiresIn:(e=t.expiresIn,Number(e.replace("s","000"))),creationTime:Date.now()};var e}function Mp(t,e){return Lp.apply(this,arguments)}function Lp(){return(Lp=uf(function*(t,e){const n=(yield e.json()).error;return Dp.create("request-failed",{requestName:t,serverCode:n.code,serverMessage:n.message,serverStatus:n.status})})).apply(this,arguments)}function Vp({apiKey:t}){return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":t})}function Fp(t,{refreshToken:e}){const n=Vp(t);return n.append("Authorization",function(t){return`FIS_v2 ${t}`}(e)),n}function Up(t){return jp.apply(this,arguments)}function jp(){return(jp=uf(function*(t){const e=yield t();return e.status>=500&&e.status<600?t():e})).apply(this,arguments)}function Bp(t,e){return $p.apply(this,arguments)}function $p(){return($p=uf(function*({appConfig:t,heartbeatServiceProvider:e},{fid:n}){const r=Rp(t),i=Vp(t),s=e.getImmediate({optional:!0});if(s){const t=yield s.getHeartbeatsHeader();t&&i.append("x-firebase-client",t)}const o={method:"POST",headers:i,body:JSON.stringify({fid:n,authVersion:Op,appId:t.appId,sdkVersion:xp})},a=yield Up(()=>fetch(r,o));if(a.ok){const t=yield a.json();return{fid:t.fid||n,registrationStatus:2,refreshToken:t.refreshToken,authToken:Pp(t.authToken)}}throw yield Mp("Create Installation",a)})).apply(this,arguments)}function qp(t){return new Promise(e=>{setTimeout(e,t)})}const Hp=/^[cdef][\w-]{21}$/;function zp(){try{const t=new Uint8Array(17);(self.crypto||self.msCrypto).getRandomValues(t),t[0]=112+t[0]%16;const e=function(t){return(e=t,btoa(String.fromCharCode(...e)).replace(/\+/g,"-").replace(/\//g,"_")).substr(0,22);var e}(t);return Hp.test(e)?e:""}catch(FF){return""}}function Kp(t){return`${t.appName}!${t.appId}`}const Gp=new Map;function Wp(t,e){const n=Kp(t);Qp(n,e),function(t,e){const n=(!Yp&&"BroadcastChannel"in self&&(Yp=new BroadcastChannel("[Firebase] FID Change"),Yp.onmessage=t=>{Qp(t.data.key,t.data.fid)}),Yp);n&&n.postMessage({key:t,fid:e}),0===Gp.size&&Yp&&(Yp.close(),Yp=null)}(n,e)}function Qp(t,e){const n=Gp.get(t);if(n)for(const r of n)r(e)}let Yp=null;const Jp="firebase-installations-store";let Xp=null;function Zp(){return Xp||(Xp=Ff("firebase-installations-database",1,(t,e)=>{switch(e){case 0:t.createObjectStore(Jp)}})),Xp}function tg(t,e){return eg.apply(this,arguments)}function eg(){return(eg=uf(function*(t,e){const n=Kp(t),r=(yield Zp()).transaction(Jp,"readwrite"),i=r.objectStore(Jp),s=yield i.get(n);return yield i.put(e,n),yield r.complete,s&&s.fid===e.fid||Wp(t,e.fid),e})).apply(this,arguments)}function ng(t){return rg.apply(this,arguments)}function rg(){return(rg=uf(function*(t){const e=Kp(t),n=(yield Zp()).transaction(Jp,"readwrite");yield n.objectStore(Jp).delete(e),yield n.complete})).apply(this,arguments)}function ig(t,e){return sg.apply(this,arguments)}function sg(){return(sg=uf(function*(t,e){const n=Kp(t),r=(yield Zp()).transaction(Jp,"readwrite"),i=r.objectStore(Jp),s=yield i.get(n),o=e(s);return void 0===o?yield i.delete(n):yield i.put(o,n),yield r.complete,!o||s&&s.fid===o.fid||Wp(t,o.fid),o})).apply(this,arguments)}function og(t){return ag.apply(this,arguments)}function ag(){return(ag=uf(function*(t){let e;const n=yield ig(t.appConfig,n=>{const r=ug(n),i=cg(t,r);return e=i.registrationPromise,i.installationEntry});return""===n.fid?{installationEntry:yield e}:{installationEntry:n,registrationPromise:e}})).apply(this,arguments)}function ug(t){return pg(t||{fid:zp(),registrationStatus:0})}function cg(t,e){if(0===e.registrationStatus){if(!navigator.onLine)return{installationEntry:e,registrationPromise:Promise.reject(Dp.create("app-offline"))};const n={fid:e.fid,registrationStatus:1,registrationTime:Date.now()};return{installationEntry:n,registrationPromise:function(t,e){return lg.apply(this,arguments)}(t,n)}}return 1===e.registrationStatus?{installationEntry:e,registrationPromise:hg(t)}:{installationEntry:e}}function lg(){return(lg=uf(function*(t,e){try{const n=yield Bp(t,e);return tg(t.appConfig,n)}catch(n){throw Np(n)&&409===n.customData.serverCode?yield ng(t.appConfig):yield tg(t.appConfig,{fid:e.fid,registrationStatus:0}),n}})).apply(this,arguments)}function hg(t){return dg.apply(this,arguments)}function dg(){return(dg=uf(function*(t){let e=yield fg(t.appConfig);for(;1===e.registrationStatus;)yield qp(100),e=yield fg(t.appConfig);if(0===e.registrationStatus){const{installationEntry:e,registrationPromise:n}=yield og(t);return n||e}return e})).apply(this,arguments)}function fg(t){return ig(t,t=>{if(!t)throw Dp.create("installation-not-found");return pg(t)})}function pg(t){return 1===(e=t).registrationStatus&&e.registrationTime+1e4<Date.now()?{fid:t.fid,registrationStatus:0}:t;var e}function gg(t,e){return mg.apply(this,arguments)}function mg(){return(mg=uf(function*({appConfig:t,heartbeatServiceProvider:e},n){const r=yg(t,n),i=Fp(t,n),s=e.getImmediate({optional:!0});if(s){const t=yield s.getHeartbeatsHeader();t&&i.append("x-firebase-client",t)}const o={method:"POST",headers:i,body:JSON.stringify({installation:{sdkVersion:xp,appId:t.appId}})},a=yield Up(()=>fetch(r,o));if(a.ok)return Pp(yield a.json());throw yield Mp("Generate Auth Token",a)})).apply(this,arguments)}function yg(t,{fid:e}){return`${Rp(t)}/${e}/authTokens:generate`}function vg(t){return wg.apply(this,arguments)}function wg(){return(wg=uf(function*(t,e=!1){let n;const r=yield ig(t.appConfig,r=>{if(!Tg(r))throw Dp.create("not-registered");const i=r.authToken;if(!e&&Cg(i))return r;if(1===i.requestStatus)return n=bg(t,e),r;{if(!navigator.onLine)throw Dp.create("app-offline");const e=kg(r);return n=Sg(t,e),e}});return n?yield n:r.authToken})).apply(this,arguments)}function bg(t,e){return _g.apply(this,arguments)}function _g(){return(_g=uf(function*(t,e){let n=yield Ig(t.appConfig);for(;1===n.authToken.requestStatus;)yield qp(100),n=yield Ig(t.appConfig);const r=n.authToken;return 0===r.requestStatus?vg(t,e):r})).apply(this,arguments)}function Ig(t){return ig(t,t=>{if(!Tg(t))throw Dp.create("not-registered");return 1===(e=t.authToken).requestStatus&&e.requestTime+1e4<Date.now()?Object.assign(Object.assign({},t),{authToken:{requestStatus:0}}):t;var e})}function Sg(t,e){return Eg.apply(this,arguments)}function Eg(){return(Eg=uf(function*(t,e){try{const n=yield gg(t,e),r=Object.assign(Object.assign({},e),{authToken:n});return yield tg(t.appConfig,r),n}catch(n){if(!Np(n)||401!==n.customData.serverCode&&404!==n.customData.serverCode){const n=Object.assign(Object.assign({},e),{authToken:{requestStatus:0}});yield tg(t.appConfig,n)}else yield ng(t.appConfig);throw n}})).apply(this,arguments)}function Tg(t){return void 0!==t&&2===t.registrationStatus}function Cg(t){return 2===t.requestStatus&&!function(t){const e=Date.now();return e<t.creationTime||t.creationTime+t.expiresIn<e+36e5}(t)}function kg(t){const e={requestStatus:1,requestTime:Date.now()};return Object.assign(Object.assign({},t),{authToken:e})}function Ag(){return(Ag=uf(function*(t){const e=t,{installationEntry:n,registrationPromise:r}=yield og(e);return r?r.catch(console.error):vg(e).catch(console.error),n.fid})).apply(this,arguments)}function xg(){return(xg=uf(function*(t,e=!1){const n=t;return yield Og(n),(yield vg(n,e)).token})).apply(this,arguments)}function Og(t){return Dg.apply(this,arguments)}function Dg(){return(Dg=uf(function*(t){const{registrationPromise:e}=yield og(t);e&&(yield e)})).apply(this,arguments)}function Ng(t){return Dp.create("missing-app-config-values",{valueName:t})}const Rg="installations";ap(new Bf(Rg,t=>{const e=t.getProvider("app").getImmediate();return{app:e,appConfig:function(t){if(!t||!t.options)throw Ng("App Configuration");if(!t.name)throw Ng("App Name");const e=["projectId","apiKey","appId"];for(const n of e)if(!t.options[n])throw Ng(n);return{appName:t.name,projectId:t.options.projectId,apiKey:t.options.apiKey,appId:t.options.appId}}(e),heartbeatServiceProvider:up(e,"heartbeat"),_delete:()=>Promise.resolve()}},"PUBLIC")),ap(new Bf("installations-internal",t=>{const e=up(t.getProvider("app").getImmediate(),Rg).getImmediate();return{getId:()=>function(t){return Ag.apply(this,arguments)}(e),getToken:t=>function(t){return xg.apply(this,arguments)}(e,t)}},"PRIVATE")),gp(kp,Ap),gp(kp,Ap,"esm2017");const Pg="@firebase/remote-config",Mg="0.3.7",Lg=new If("remoteconfig","Remote Config",{"registration-window":"Undefined window object. This SDK only supports usage in a browser environment.","registration-project-id":"Undefined project identifier. Check Firebase app initialization.","registration-api-key":"Undefined API key. Check Firebase app initialization.","registration-app-id":"Undefined app identifier. Check Firebase app initialization.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","storage-delete":"Error thrown when deleting from storage. Original error: {$originalErrorMessage}.","fetch-client-network":"Fetch client failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-timeout":'The config fetch request timed out.  Configure timeout using "fetchTimeoutMillis" SDK setting.',"fetch-throttle":'The config fetch request timed out while in an exponential backoff state. Configure timeout using "fetchTimeoutMillis" SDK setting. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.',"fetch-client-parse":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","indexed-db-unavailable":"Indexed DB is not supported by current browser"});class Vg{constructor(t,e,n,r){this.client=t,this.storage=e,this.storageCache=n,this.logger=r}isCachedDataFresh(t,e){if(!e)return this.logger.debug("Config fetch cache check. Cache unpopulated."),!1;const n=Date.now()-e,r=n<=t;return this.logger.debug(`Config fetch cache check. Cache age millis: ${n}. Cache max age millis (minimumFetchIntervalMillis setting): ${t}. Is cache hit: ${r}.`),r}fetch(t){var e=this;return uf(function*(){const[n,r]=yield Promise.all([e.storage.getLastSuccessfulFetchTimestampMillis(),e.storage.getLastSuccessfulFetchResponse()]);if(r&&e.isCachedDataFresh(t.cacheMaxAgeMillis,n))return r;t.eTag=r&&r.eTag;const i=yield e.client.fetch(t),s=[e.storageCache.setLastSuccessfulFetchTimestampMillis(Date.now())];return 200===i.status&&s.push(e.storage.setLastSuccessfulFetchResponse(i)),yield Promise.all(s),i})()}}function Fg(t=navigator){return t.languages&&t.languages[0]||t.language}class Ug{constructor(t,e,n,r,i,s){this.firebaseInstallations=t,this.sdkVersion=e,this.namespace=n,this.projectId=r,this.apiKey=i,this.appId=s}fetch(t){var e=this;return uf(function*(){const[n,r]=yield Promise.all([e.firebaseInstallations.getId(),e.firebaseInstallations.getToken()]),i=`${window.FIREBASE_REMOTE_CONFIG_URL_BASE||"https://firebaseremoteconfig.googleapis.com"}/v1/projects/${e.projectId}/namespaces/${e.namespace}:fetch?key=${e.apiKey}`,s={"Content-Type":"application/json","Content-Encoding":"gzip","If-None-Match":t.eTag||"*"},o={sdk_version:e.sdkVersion,app_instance_id:n,app_instance_id_token:r,app_id:e.appId,language_code:Fg()},a={method:"POST",headers:s,body:JSON.stringify(o)},u=fetch(i,a),c=new Promise((e,n)=>{t.signal.addEventListener(()=>{const t=new Error("The operation was aborted.");t.name="AbortError",n(t)})});let l;try{yield Promise.race([u,c]),l=yield u}catch(g){let t="fetch-client-network";throw"AbortError"===g.name&&(t="fetch-timeout"),Lg.create(t,{originalErrorMessage:g.message})}let h=l.status;const d=l.headers.get("ETag")||void 0;let f,p;if(200===l.status){let t;try{t=yield l.json()}catch(g){throw Lg.create("fetch-client-parse",{originalErrorMessage:g.message})}f=t.entries,p=t.state}if("INSTANCE_STATE_UNSPECIFIED"===p?h=500:"NO_CHANGE"===p?h=304:"NO_TEMPLATE"!==p&&"EMPTY_CONFIG"!==p||(f={}),304!==h&&200!==h)throw Lg.create("fetch-status",{httpStatus:h});return{status:h,eTag:d,config:f}})()}}class jg{constructor(t,e){this.client=t,this.storage=e}fetch(t){var e=this;return uf(function*(){const n=(yield e.storage.getThrottleMetadata())||{backoffCount:0,throttleEndTimeMillis:Date.now()};return e.attemptFetch(t,n)})()}attemptFetch(t,{throttleEndTimeMillis:e,backoffCount:n}){var r=this;return uf(function*(){yield function(t,e){return new Promise((n,r)=>{const i=Math.max(e-Date.now(),0),s=setTimeout(n,i);t.addEventListener(()=>{clearTimeout(s),r(Lg.create("fetch-throttle",{throttleEndTimeMillis:e}))})})}(t.signal,e);try{const e=yield r.client.fetch(t);return yield r.storage.deleteThrottleMetadata(),e}catch(i){if(!function(t){if(!(t instanceof _f&&t.customData))return!1;const e=Number(t.customData.httpStatus);return 429===e||500===e||503===e||504===e}(i))throw i;const e={throttleEndTimeMillis:Date.now()+Df(n),backoffCount:n+1};return yield r.storage.setThrottleMetadata(e),r.attemptFetch(t,e)}})()}}class Bg{constructor(t,e,n,r,i){this.app=t,this._client=e,this._storageCache=n,this._storage=r,this._logger=i,this._isInitializationComplete=!1,this.settings={fetchTimeoutMillis:6e4,minimumFetchIntervalMillis:432e5},this.defaultConfig={}}get fetchTimeMillis(){return this._storageCache.getLastSuccessfulFetchTimestampMillis()||-1}get lastFetchStatus(){return this._storageCache.getLastFetchStatus()||"no-fetch-yet"}}function $g(t,e){const n=t.target.error||void 0;return Lg.create(e,{originalErrorMessage:n&&n.message})}const qg="app_namespace_store";class Hg{constructor(t,e,n,r=function(){return new Promise((t,e)=>{try{const n=indexedDB.open("firebase_remote_config",1);n.onerror=t=>{e($g(t,"storage-open"))},n.onsuccess=e=>{t(e.target.result)},n.onupgradeneeded=t=>{const e=t.target.result;switch(t.oldVersion){case 0:e.createObjectStore(qg,{keyPath:"compositeKey"})}}}catch(n){e(Lg.create("storage-open",{originalErrorMessage:n}))}})}()){this.appId=t,this.appName=e,this.namespace=n,this.openDbPromise=r}getLastFetchStatus(){return this.get("last_fetch_status")}setLastFetchStatus(t){return this.set("last_fetch_status",t)}getLastSuccessfulFetchTimestampMillis(){return this.get("last_successful_fetch_timestamp_millis")}setLastSuccessfulFetchTimestampMillis(t){return this.set("last_successful_fetch_timestamp_millis",t)}getLastSuccessfulFetchResponse(){return this.get("last_successful_fetch_response")}setLastSuccessfulFetchResponse(t){return this.set("last_successful_fetch_response",t)}getActiveConfig(){return this.get("active_config")}setActiveConfig(t){return this.set("active_config",t)}getActiveConfigEtag(){return this.get("active_config_etag")}setActiveConfigEtag(t){return this.set("active_config_etag",t)}getThrottleMetadata(){return this.get("throttle_metadata")}setThrottleMetadata(t){return this.set("throttle_metadata",t)}deleteThrottleMetadata(){return this.delete("throttle_metadata")}get(t){var e=this;return uf(function*(){const n=yield e.openDbPromise;return new Promise((r,i)=>{const s=n.transaction([qg],"readonly").objectStore(qg),o=e.createCompositeKey(t);try{const t=s.get(o);t.onerror=t=>{i($g(t,"storage-get"))},t.onsuccess=t=>{const e=t.target.result;r(e?e.value:void 0)}}catch(a){i(Lg.create("storage-get",{originalErrorMessage:a&&a.message}))}})})()}set(t,e){var n=this;return uf(function*(){const r=yield n.openDbPromise;return new Promise((i,s)=>{const o=r.transaction([qg],"readwrite").objectStore(qg),a=n.createCompositeKey(t);try{const t=o.put({compositeKey:a,value:e});t.onerror=t=>{s($g(t,"storage-set"))},t.onsuccess=()=>{i()}}catch(u){s(Lg.create("storage-set",{originalErrorMessage:u&&u.message}))}})})()}delete(t){var e=this;return uf(function*(){const n=yield e.openDbPromise;return new Promise((r,i)=>{const s=n.transaction([qg],"readwrite").objectStore(qg),o=e.createCompositeKey(t);try{const t=s.delete(o);t.onerror=t=>{i($g(t,"storage-delete"))},t.onsuccess=()=>{r()}}catch(a){i(Lg.create("storage-delete",{originalErrorMessage:a&&a.message}))}})})()}createCompositeKey(t){return[this.appId,this.appName,this.namespace,t].join()}}class zg{constructor(t){this.storage=t}getLastFetchStatus(){return this.lastFetchStatus}getLastSuccessfulFetchTimestampMillis(){return this.lastSuccessfulFetchTimestampMillis}getActiveConfig(){return this.activeConfig}loadFromStorage(){var t=this;return uf(function*(){const e=t.storage.getLastFetchStatus(),n=t.storage.getLastSuccessfulFetchTimestampMillis(),r=t.storage.getActiveConfig(),i=yield e;i&&(t.lastFetchStatus=i);const s=yield n;s&&(t.lastSuccessfulFetchTimestampMillis=s);const o=yield r;o&&(t.activeConfig=o)})()}setLastFetchStatus(t){return this.lastFetchStatus=t,this.storage.setLastFetchStatus(t)}setLastSuccessfulFetchTimestampMillis(t){return this.lastSuccessfulFetchTimestampMillis=t,this.storage.setLastSuccessfulFetchTimestampMillis(t)}setActiveConfig(t){return this.activeConfig=t,this.storage.setActiveConfig(t)}}function Kg(){return(Kg=uf(function*(){if(!vf())return!1;try{return yield wf()}catch(t){return!1}})).apply(this,arguments)}ap(new Bf("remote-config",function(t,{instanceIdentifier:e}){const n=t.getProvider("app").getImmediate(),r=t.getProvider("installations-internal").getImmediate();if("undefined"==typeof window)throw Lg.create("registration-window");if(!vf())throw Lg.create("indexed-db-unavailable");const{projectId:i,apiKey:s,appId:o}=n.options;if(!i)throw Lg.create("registration-project-id");if(!s)throw Lg.create("registration-api-key");if(!o)throw Lg.create("registration-app-id");const a=new Hg(o,n.name,e=e||"firebase"),u=new zg(a),c=new Xf(Pg);c.logLevel=Kf.ERROR;const l=new Ug(r,hp,e,i,s,o),h=new jg(l,a),d=new Vg(h,a,u,c),f=new Bg(n,d,u,a,c);return function(t){const e=Nf(t);e._initializePromise||(e._initializePromise=e._storageCache.loadFromStorage().then(()=>{e._isInitializationComplete=!0}))}(f),f},"PUBLIC").setMultipleInstances(!0)),gp(Pg,Mg),gp(Pg,Mg,"esm2017");const Gg="/firebase-messaging-sw.js",Wg="/firebase-cloud-messaging-push-scope",Qg="BDOU99-h67HcA6JeFXHbSNMu7e2yNNu3RzoMj8TM4W88jITfq7ZmPvIM1Iv-4_l2LxQcYwhqby2xGpWwzjfAnG4";var Yg,Jg;function Xg(t){const e=new Uint8Array(t);return btoa(String.fromCharCode(...e)).replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")}function Zg(t){const e=(t+"=".repeat((4-t.length%4)%4)).replace(/\-/g,"+").replace(/_/g,"/"),n=atob(e),r=new Uint8Array(n.length);for(let i=0;i<n.length;++i)r[i]=n.charCodeAt(i);return r}!function(t){t[t.DATA_MESSAGE=1]="DATA_MESSAGE",t[t.DISPLAY_NOTIFICATION=3]="DISPLAY_NOTIFICATION"}(Yg||(Yg={})),function(t){t.PUSH_RECEIVED="push-received",t.NOTIFICATION_CLICKED="notification-clicked"}(Jg||(Jg={}));const tm="fcm_token_details_db",em="fcm_token_object_Store";function nm(t){return rm.apply(this,arguments)}function rm(){return(rm=uf(function*(t){if("databases"in indexedDB&&!(yield indexedDB.databases()).map(t=>t.name).includes(tm))return null;let e=null;return(yield Ff(tm,5,function(){var n=uf(function*(n,r,i,s){var o;if(r<2)return;if(!n.objectStoreNames.contains(em))return;const a=s.objectStore(em),u=yield a.index("fcmSenderId").get(t);if(yield a.clear(),u)if(2===r){const t=u;if(!t.auth||!t.p256dh||!t.endpoint)return;e={token:t.fcmToken,createTime:null!==(o=t.createTime)&&void 0!==o?o:Date.now(),subscriptionOptions:{auth:t.auth,p256dh:t.p256dh,endpoint:t.endpoint,swScope:t.swScope,vapidKey:"string"==typeof t.vapidKey?t.vapidKey:Xg(t.vapidKey)}}}else if(3===r){const t=u;e={token:t.fcmToken,createTime:t.createTime,subscriptionOptions:{auth:Xg(t.auth),p256dh:Xg(t.p256dh),endpoint:t.endpoint,swScope:t.swScope,vapidKey:Xg(t.vapidKey)}}}else if(4===r){const t=u;e={token:t.fcmToken,createTime:t.createTime,subscriptionOptions:{auth:Xg(t.auth),p256dh:Xg(t.p256dh),endpoint:t.endpoint,swScope:t.swScope,vapidKey:Xg(t.vapidKey)}}}});return function(t,e,r,i){return n.apply(this,arguments)}}())).close(),yield Uf(tm),yield Uf("fcm_vapid_details_db"),yield Uf("undefined"),im(e)?e:null})).apply(this,arguments)}function im(t){if(!t||!t.subscriptionOptions)return!1;const{subscriptionOptions:e}=t;return"number"==typeof t.createTime&&t.createTime>0&&"string"==typeof t.token&&t.token.length>0&&"string"==typeof e.auth&&e.auth.length>0&&"string"==typeof e.p256dh&&e.p256dh.length>0&&"string"==typeof e.endpoint&&e.endpoint.length>0&&"string"==typeof e.swScope&&e.swScope.length>0&&"string"==typeof e.vapidKey&&e.vapidKey.length>0}const sm="firebase-messaging-store";let om=null;function am(){return om||(om=Ff("firebase-messaging-database",1,(t,e)=>{switch(e){case 0:t.createObjectStore(sm)}})),om}function um(t){return cm.apply(this,arguments)}function cm(){return(cm=uf(function*(t){const e=pm(t),n=yield am(),r=yield n.transaction(sm).objectStore(sm).get(e);if(r)return r;{const e=yield nm(t.appConfig.senderId);if(e)return yield lm(t,e),e}})).apply(this,arguments)}function lm(t,e){return hm.apply(this,arguments)}function hm(){return(hm=uf(function*(t,e){const n=pm(t),r=(yield am()).transaction(sm,"readwrite");return yield r.objectStore(sm).put(e,n),yield r.complete,e})).apply(this,arguments)}function dm(t){return fm.apply(this,arguments)}function fm(){return(fm=uf(function*(t){const e=pm(t),n=(yield am()).transaction(sm,"readwrite");yield n.objectStore(sm).delete(e),yield n.complete})).apply(this,arguments)}function pm({appConfig:t}){return t.appId}const gm=new If("messaging","Messaging",{"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"only-available-in-window":"This method is available in a Window context.","only-available-in-sw":"This method is available in a service worker context.","permission-default":"The notification permission was not granted and dismissed instead.","permission-blocked":"The notification permission was not granted and blocked instead.","unsupported-browser":"This browser doesn't support the API's required to use the Firebase SDK.","indexed-db-unsupported":"This browser doesn't support indexedDb.open() (ex. Safari iFrame, Firefox Private Browsing, etc)","failed-service-worker-registration":"We are unable to register the default service worker. {$browserErrorMessage}","token-subscribe-failed":"A problem occurred while subscribing the user to FCM: {$errorInfo}","token-subscribe-no-token":"FCM returned no token when subscribing the user to push.","token-unsubscribe-failed":"A problem occurred while unsubscribing the user from FCM: {$errorInfo}","token-update-failed":"A problem occurred while updating the user from FCM: {$errorInfo}","token-update-no-token":"FCM returned no token when updating the user to push.","use-sw-after-get-token":"The useServiceWorker() method may only be called once and must be called before calling getToken() to ensure your service worker is used.","invalid-sw-registration":"The input to useServiceWorker() must be a ServiceWorkerRegistration.","invalid-bg-handler":"The input to setBackgroundMessageHandler() must be a function.","invalid-vapid-key":"The public VAPID key must be a string.","use-vapid-key-after-get-token":"The usePublicVapidKey() method may only be called once and must be called before calling getToken() to ensure your VAPID key is used."});function mm(t,e){return ym.apply(this,arguments)}function ym(){return(ym=uf(function*(t,e){const n=yield Sm(t),r=Tm(e),i={method:"POST",headers:n,body:JSON.stringify(r)};let s;try{const e=yield fetch(Im(t.appConfig),i);s=yield e.json()}catch(o){throw gm.create("token-subscribe-failed",{errorInfo:o})}if(s.error)throw gm.create("token-subscribe-failed",{errorInfo:s.error.message});if(!s.token)throw gm.create("token-subscribe-no-token");return s.token})).apply(this,arguments)}function vm(t,e){return wm.apply(this,arguments)}function wm(){return(wm=uf(function*(t,e){const n=yield Sm(t),r=Tm(e.subscriptionOptions),i={method:"PATCH",headers:n,body:JSON.stringify(r)};let s;try{const n=yield fetch(`${Im(t.appConfig)}/${e.token}`,i);s=yield n.json()}catch(o){throw gm.create("token-update-failed",{errorInfo:o})}if(s.error)throw gm.create("token-update-failed",{errorInfo:s.error.message});if(!s.token)throw gm.create("token-update-no-token");return s.token})).apply(this,arguments)}function bm(t,e){return _m.apply(this,arguments)}function _m(){return(_m=uf(function*(t,e){const n={method:"DELETE",headers:yield Sm(t)};try{const r=yield fetch(`${Im(t.appConfig)}/${e}`,n),i=yield r.json();if(i.error)throw gm.create("token-unsubscribe-failed",{errorInfo:i.error.message})}catch(r){throw gm.create("token-unsubscribe-failed",{errorInfo:r})}})).apply(this,arguments)}function Im({projectId:t}){return`https://fcmregistrations.googleapis.com/v1/projects/${t}/registrations`}function Sm(t){return Em.apply(this,arguments)}function Em(){return(Em=uf(function*({appConfig:t,installations:e}){const n=yield e.getToken();return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":t.apiKey,"x-goog-firebase-installations-auth":`FIS ${n}`})})).apply(this,arguments)}function Tm({p256dh:t,auth:e,endpoint:n,vapidKey:r}){const i={web:{endpoint:n,auth:e,p256dh:t}};return r!==Qg&&(i.web.applicationPubKey=r),i}const Cm=6048e5;function km(t){return Am.apply(this,arguments)}function Am(){return(Am=uf(function*(t){const e=yield Mm(t.swRegistration,t.vapidKey),n={vapidKey:t.vapidKey,swScope:t.swRegistration.scope,endpoint:e.endpoint,auth:Xg(e.getKey("auth")),p256dh:Xg(e.getKey("p256dh"))},r=yield um(t.firebaseDependencies);if(r){if(Vm(r.subscriptionOptions,n))return Date.now()>=r.createTime+Cm?Dm(t,{token:r.token,createTime:Date.now(),subscriptionOptions:n}):r.token;try{yield bm(t.firebaseDependencies,r.token)}catch(i){console.warn(i)}return Rm(t.firebaseDependencies,n)}return Rm(t.firebaseDependencies,n)})).apply(this,arguments)}function xm(t){return Om.apply(this,arguments)}function Om(){return(Om=uf(function*(t){const e=yield um(t.firebaseDependencies);e&&(yield bm(t.firebaseDependencies,e.token),yield dm(t.firebaseDependencies));const n=yield t.swRegistration.pushManager.getSubscription();return!n||n.unsubscribe()})).apply(this,arguments)}function Dm(t,e){return Nm.apply(this,arguments)}function Nm(){return(Nm=uf(function*(t,e){try{const n=yield vm(t.firebaseDependencies,e),r=Object.assign(Object.assign({},e),{token:n,createTime:Date.now()});return yield lm(t.firebaseDependencies,r),n}catch(n){throw yield xm(t),n}})).apply(this,arguments)}function Rm(t,e){return Pm.apply(this,arguments)}function Pm(){return(Pm=uf(function*(t,e){const n={token:yield mm(t,e),createTime:Date.now(),subscriptionOptions:e};return yield lm(t,n),n.token})).apply(this,arguments)}function Mm(t,e){return Lm.apply(this,arguments)}function Lm(){return(Lm=uf(function*(t,e){return(yield t.pushManager.getSubscription())||t.pushManager.subscribe({userVisibleOnly:!0,applicationServerKey:Zg(e)})})).apply(this,arguments)}function Vm(t,e){return e.vapidKey===t.vapidKey&&e.endpoint===t.endpoint&&e.auth===t.auth&&e.p256dh===t.p256dh}function Fm(t){const e={from:t.from,collapseKey:t.collapse_key,messageId:t.fcmMessageId};return function(t,e){if(!e.notification)return;t.notification={};const n=e.notification.title;n&&(t.notification.title=n);const r=e.notification.body;r&&(t.notification.body=r);const i=e.notification.image;i&&(t.notification.image=i)}(e,t),function(t,e){e.data&&(t.data=e.data)}(e,t),function(t,e){if(!e.fcmOptions)return;t.fcmOptions={};const n=e.fcmOptions.link;n&&(t.fcmOptions.link=n);const r=e.fcmOptions.analytics_label;r&&(t.fcmOptions.analyticsLabel=r)}(e,t),e}function Um(t){return"object"==typeof t&&!!t&&"google.c.a.c_id"in t}function jm(t,e){const n=[];for(let r=0;r<t.length;r++)n.push(t.charAt(r)),r<e.length&&n.push(e.charAt(r));return n.join("")}function Bm(t){return gm.create("missing-app-config-values",{valueName:t})}jm("hts/frbslgigp.ogepscmv/ieo/eaylg","tp:/ieaeogn-agolai.o/1frlglgc/o"),jm("AzSCbw63g1R0nCw85jG8","Iaya3yLKwmgvh7cF0q4");class $m{constructor(t,e,n){this.deliveryMetricsExportedToBigQueryEnabled=!1,this.onBackgroundMessageHandler=null,this.onMessageHandler=null,this.logEvents=[],this.isLogServiceStarted=!1;const r=function(t){if(!t||!t.options)throw Bm("App Configuration Object");if(!t.name)throw Bm("App Name");const e=["projectId","apiKey","appId","messagingSenderId"],{options:n}=t;for(const r of e)if(!n[r])throw Bm(r);return{appName:t.name,projectId:n.projectId,apiKey:n.apiKey,appId:n.appId,senderId:n.messagingSenderId}}(t);this.firebaseDependencies={app:t,appConfig:r,installations:e,analyticsProvider:n}}_delete(){return Promise.resolve()}}function qm(t){return Hm.apply(this,arguments)}function Hm(){return(Hm=uf(function*(t){try{t.swRegistration=yield navigator.serviceWorker.register(Gg,{scope:Wg}),t.swRegistration.update().catch(()=>{})}catch(e){throw gm.create("failed-service-worker-registration",{browserErrorMessage:e.message})}})).apply(this,arguments)}function zm(t,e){return Km.apply(this,arguments)}function Km(){return(Km=uf(function*(t,e){if(e||t.swRegistration||(yield qm(t)),e||!t.swRegistration){if(!(e instanceof ServiceWorkerRegistration))throw gm.create("invalid-sw-registration");t.swRegistration=e}})).apply(this,arguments)}function Gm(t,e){return Wm.apply(this,arguments)}function Wm(){return(Wm=uf(function*(t,e){e?t.vapidKey=e:t.vapidKey||(t.vapidKey=Qg)})).apply(this,arguments)}function Qm(){return(Qm=uf(function*(t,e){if(!navigator)throw gm.create("only-available-in-window");if("default"===Notification.permission&&(yield Notification.requestPermission()),"granted"!==Notification.permission)throw gm.create("permission-blocked");return yield Gm(t,null==e?void 0:e.vapidKey),yield zm(t,null==e?void 0:e.serviceWorkerRegistration),km(t)})).apply(this,arguments)}function Ym(t,e,n){return Jm.apply(this,arguments)}function Jm(){return(Jm=uf(function*(t,e,n){const r=Xm(e);(yield t.firebaseDependencies.analyticsProvider.get()).logEvent(r,{message_id:n["google.c.a.c_id"],message_name:n["google.c.a.c_l"],message_time:n["google.c.a.ts"],message_device_time:Math.floor(Date.now()/1e3)})})).apply(this,arguments)}function Xm(t){switch(t){case Jg.NOTIFICATION_CLICKED:return"notification_open";case Jg.PUSH_RECEIVED:return"notification_foreground";default:throw new Error}}function Zm(){return(Zm=uf(function*(t,e){const n=e.data;if(!n.isFirebaseMessaging)return;t.onMessageHandler&&n.messageType===Jg.PUSH_RECEIVED&&("function"==typeof t.onMessageHandler?t.onMessageHandler(Fm(n)):t.onMessageHandler.next(Fm(n)));const r=n.data;Um(r)&&"1"===r["google.c.a.e"]&&(yield Ym(t,n.messageType,r))})).apply(this,arguments)}const ty="@firebase/messaging",ey="0.9.12";function ny(){return(ny=uf(function*(){try{yield wf()}catch(t){return!1}return"undefined"!=typeof window&&vf()&&bf()&&"serviceWorker"in navigator&&"PushManager"in window&&"Notification"in window&&"fetch"in window&&ServiceWorkerRegistration.prototype.hasOwnProperty("showNotification")&&PushSubscription.prototype.hasOwnProperty("getKey")})).apply(this,arguments)}ap(new Bf("messaging",t=>{const e=new $m(t.getProvider("app").getImmediate(),t.getProvider("installations-internal").getImmediate(),t.getProvider("analytics-internal"));return navigator.serviceWorker.addEventListener("message",t=>function(t,e){return Zm.apply(this,arguments)}(e,t)),e},"PUBLIC")),ap(new Bf("messaging-internal",t=>{const e=t.getProvider("messaging").getImmediate();return{getToken:t=>function(t,e){return Qm.apply(this,arguments)}(e,t)}},"PRIVATE")),gp(ty,ey),gp(ty,ey,"esm2017");const ry="analytics",iy="https://firebase.googleapis.com/v1alpha/projects/-/apps/{app-id}/webConfig",sy="https://www.googletagmanager.com/gtag/js",oy=new Xf("@firebase/analytics");function ay(t){return Promise.all(t.map(t=>t.catch(t=>t)))}function uy(t,e){const n=document.createElement("script");n.src=`${sy}?l=${t}&id=${e}`,n.async=!0,document.head.appendChild(n)}function cy(t,e,n,r,i,s){return ly.apply(this,arguments)}function ly(){return(ly=uf(function*(t,e,n,r,i,s){const o=r[i];try{if(o)yield e[o];else{const t=(yield ay(n)).find(t=>t.measurementId===i);t&&(yield e[t.appId])}}catch(a){oy.error(a)}t("config",i,s)})).apply(this,arguments)}function hy(t,e,n,r,i){return dy.apply(this,arguments)}function dy(){return(dy=uf(function*(t,e,n,r,i){try{let s=[];if(i&&i.send_to){let t=i.send_to;Array.isArray(t)||(t=[t]);const r=yield ay(n);for(const n of t){const t=r.find(t=>t.measurementId===n),i=t&&e[t.appId];if(!i){s=[];break}s.push(i)}}0===s.length&&(s=Object.values(e)),yield Promise.all(s),t("event",r,i||{})}catch(s){oy.error(s)}})).apply(this,arguments)}function fy(){const t=window.document.getElementsByTagName("script");for(const e of Object.values(t))if(e.src&&e.src.includes(sy))return e;return null}const py=new If("analytics","Analytics",{"already-exists":"A Firebase Analytics instance with the appId {$id}  already exists. Only one Firebase Analytics instance can be created for each appId.","already-initialized":"initializeAnalytics() cannot be called again with different options than those it was initially called with. It can be called again with the same options to return the existing instance, or getAnalytics() can be used to get a reference to the already-intialized instance.","already-initialized-settings":"Firebase Analytics has already been initialized.settings() must be called before initializing any Analytics instanceor it will have no effect.","interop-component-reg-failed":"Firebase Analytics Interop Component failed to instantiate: {$reason}","invalid-analytics-context":"Firebase Analytics is not supported in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","indexeddb-unavailable":"IndexedDB unavailable or restricted in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","fetch-throttle":"The config fetch request timed out while in an exponential backoff state. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.","config-fetch-failed":"Dynamic config fetch failed: [{$httpStatus}] {$responseMessage}","no-api-key":'The "apiKey" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid API key.',"no-app-id":'The "appId" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid app ID.'}),gy=new class{constructor(t={},e=1e3){this.throttleMetadata=t,this.intervalMillis=e}getThrottleMetadata(t){return this.throttleMetadata[t]}setThrottleMetadata(t,e){this.throttleMetadata[t]=e}deleteThrottleMetadata(t){delete this.throttleMetadata[t]}};function my(t){return new Headers({Accept:"application/json","x-goog-api-key":t})}function yy(t){return vy.apply(this,arguments)}function vy(){return(vy=uf(function*(t){var e;const{appId:n,apiKey:r}=t,i={method:"GET",headers:my(r)},s=iy.replace("{app-id}",n),o=yield fetch(s,i);if(200!==o.status&&304!==o.status){let t="";try{const n=yield o.json();(null===(e=n.error)||void 0===e?void 0:e.message)&&(t=n.error.message)}catch(a){}throw py.create("config-fetch-failed",{httpStatus:o.status,responseMessage:t})}return o.json()})).apply(this,arguments)}function wy(t){return by.apply(this,arguments)}function by(){return(by=uf(function*(t,e=gy,n){const{appId:r,apiKey:i,measurementId:s}=t.options;if(!r)throw py.create("no-app-id");if(!i){if(s)return{measurementId:s,appId:r};throw py.create("no-api-key")}const o=e.getThrottleMetadata(r)||{backoffCount:0,throttleEndTimeMillis:Date.now()},a=new Ty;return setTimeout(uf(function*(){a.abort()}),void 0!==n?n:6e4),_y({appId:r,apiKey:i,measurementId:s},o,a,e)})).apply(this,arguments)}function _y(t,e,n){return Iy.apply(this,arguments)}function Iy(){return(Iy=uf(function*(t,{throttleEndTimeMillis:e,backoffCount:n},r,i=gy){const{appId:s,measurementId:o}=t;try{yield Sy(r,e)}catch(a){if(o)return oy.warn(`Timed out fetching this Firebase app's measurement ID from the server. Falling back to the measurement ID ${o} provided in the "measurementId" field in the local Firebase config. [${a.message}]`),{appId:s,measurementId:o};throw a}try{const e=yield yy(t);return i.deleteThrottleMetadata(s),e}catch(a){if(!Ey(a)){if(i.deleteThrottleMetadata(s),o)return oy.warn(`Failed to fetch this Firebase app's measurement ID from the server. Falling back to the measurement ID ${o} provided in the "measurementId" field in the local Firebase config. [${a.message}]`),{appId:s,measurementId:o};throw a}const e=503===Number(a.customData.httpStatus)?Df(n,i.intervalMillis,30):Df(n,i.intervalMillis),u={throttleEndTimeMillis:Date.now()+e,backoffCount:n+1};return i.setThrottleMetadata(s,u),oy.debug(`Calling attemptFetch again in ${e} millis`),_y(t,u,r,i)}})).apply(this,arguments)}function Sy(t,e){return new Promise((n,r)=>{const i=Math.max(e-Date.now(),0),s=setTimeout(n,i);t.addEventListener(()=>{clearTimeout(s),r(py.create("fetch-throttle",{throttleEndTimeMillis:e}))})})}function Ey(t){if(!(t instanceof _f&&t.customData))return!1;const e=Number(t.customData.httpStatus);return 429===e||500===e||503===e||504===e}class Ty{constructor(){this.listeners=[]}addEventListener(t){this.listeners.push(t)}abort(){this.listeners.forEach(t=>t())}}function Cy(){return ky.apply(this,arguments)}function ky(){return(ky=uf(function*(){if(!vf())return oy.warn(py.create("indexeddb-unavailable",{errorInfo:"IndexedDB is not available in this environment."}).message),!1;try{yield wf()}catch(t){return oy.warn(py.create("indexeddb-unavailable",{errorInfo:t}).message),!1}return!0})).apply(this,arguments)}function Ay(){return(Ay=uf(function*(t,e,n,r,i,s,o){var a;const u=wy(t);u.then(e=>{n[e.measurementId]=e.appId,t.options.measurementId&&e.measurementId!==t.options.measurementId&&oy.warn(`The measurement ID in the local Firebase config (${t.options.measurementId}) does not match the measurement ID fetched from the server (${e.measurementId}). To ensure analytics events are always sent to the correct Analytics property, update the measurement ID field in the local config or remove it from the local config.`)}).catch(t=>oy.error(t)),e.push(u);const c=Cy().then(t=>t?r.getId():void 0),[l,h]=yield Promise.all([u,c]);fy()||uy(s,l.measurementId),i("js",new Date);const d=null!==(a=null==o?void 0:o.config)&&void 0!==a?a:{};return d.origin="firebase",d.update=!0,null!=h&&(d.firebase_id=h),i("config",l.measurementId,d),l.measurementId})).apply(this,arguments)}class xy{constructor(t){this.app=t}_delete(){return delete Oy[this.app.options.appId],Promise.resolve()}}let Oy={},Dy=[];const Ny={};let Ry,Py,My="dataLayer",Ly="gtag",Vy=!1;function Fy(){return(Fy=uf(function*(t,e,n,r,i){if(i&&i.global)t("event",n,r);else{const i=yield e;t("event",n,Object.assign(Object.assign({},r),{send_to:i}))}})).apply(this,arguments)}function Uy(){return(Uy=uf(function*(t,e,n,r){if(r&&r.global)return t("set",{screen_name:n}),Promise.resolve();t("config",yield e,{update:!0,screen_name:n})})).apply(this,arguments)}function jy(){return(jy=uf(function*(t,e,n,r){if(r&&r.global)return t("set",{user_id:n}),Promise.resolve();t("config",yield e,{update:!0,user_id:n})})).apply(this,arguments)}function By(){return(By=uf(function*(t,e,n,r){if(r&&r.global){const e={};for(const t of Object.keys(n))e[`user_properties.${t}`]=n[t];return t("set",e),Promise.resolve()}t("config",yield e,{update:!0,user_properties:n})})).apply(this,arguments)}function $y(){return($y=uf(function*(t,e){const n=yield t;window[`ga-disable-${n}`]=!e})).apply(this,arguments)}function qy(t,e={}){const n=up(t,ry);if(n.isInitialized()){const t=n.getImmediate();if(Ef(e,n.getOptions()))return t;throw py.create("already-initialized")}return n.initialize({options:e})}function Hy(){return(Hy=uf(function*(){if(gf())return!1;if(!bf())return!1;if(!vf())return!1;try{return yield wf()}catch(t){return!1}})).apply(this,arguments)}function zy(t,e,n,r){t=Nf(t),function(t,e,n,r,i){return Fy.apply(this,arguments)}(Py,Oy[t.app.options.appId],e,n,r).catch(t=>oy.error(t))}const Ky="@firebase/analytics",Gy="0.7.8";ap(new Bf(ry,(t,{options:e})=>function(t,e,n){!function(){const t=[];if(gf()&&t.push("This is a browser extension environment."),bf()||t.push("Cookies are not available."),t.length>0){const e=t.map((t,e)=>`(${e+1}) ${t}`).join(" "),n=py.create("invalid-analytics-context",{errorInfo:e});oy.warn(n.message)}}();const r=t.options.appId;if(!r)throw py.create("no-app-id");if(!t.options.apiKey){if(!t.options.measurementId)throw py.create("no-api-key");oy.warn(`The "apiKey" field is empty in the local Firebase config. This is needed to fetch the latest measurement ID for this Firebase app. Falling back to the measurement ID ${t.options.measurementId} provided in the "measurementId" field in the local Firebase config.`)}if(null!=Oy[r])throw py.create("already-exists",{id:r});if(!Vy){!function(t){let e=[];Array.isArray(window[t])?e=window[t]:window[t]=e}(My);const{wrappedGtag:t,gtagCore:e}=function(t,e,n,r,i){let s=function(...t){window[r].push(arguments)};return window[i]&&"function"==typeof window[i]&&(s=window[i]),window[i]=function(t,e,n,r){function i(){return(i=uf(function*(i,s,o){try{"event"===i?yield hy(t,e,n,s,o):"config"===i?yield cy(t,e,n,r,s,o):t("set",s)}catch(a){oy.error(a)}})).apply(this,arguments)}return function(t,e,n){return i.apply(this,arguments)}}(s,t,e,n),{gtagCore:s,wrappedGtag:window[i]}}(Oy,Dy,Ny,My,Ly);Py=t,Ry=e,Vy=!0}return Oy[r]=function(t,e,n,r,i,s,o){return Ay.apply(this,arguments)}(t,Dy,Ny,e,Ry,My,n),new xy(t)}(t.getProvider("app").getImmediate(),t.getProvider("installations-internal").getImmediate(),e),"PUBLIC")),ap(new Bf("analytics-internal",function(t){try{const e=t.getProvider(ry).getImmediate();return{logEvent:(t,n,r)=>zy(e,t,n,r)}}catch(e){throw py.create("interop-component-reg-failed",{reason:e})}},"PRIVATE")),gp(Ky,Gy),gp(Ky,Gy,"esm2017");var Wy=function(t,e){return(Wy=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)};function Qy(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function n(){this.constructor=t}Wy(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}function Yy(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(null!=t&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]])}return n}function Jy(t,e,n,r){return new(n||(n=Promise))(function(i,s){function o(t){try{u(r.next(t))}catch(e){s(e)}}function a(t){try{u(r.throw(t))}catch(e){s(e)}}function u(t){var e;t.done?i(t.value):(e=t.value,e instanceof n?e:new n(function(t){t(e)})).then(o,a)}u((r=r.apply(t,e||[])).next())})}function Xy(t,e){var n,r,i,s,o={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return s={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(s[Symbol.iterator]=function(){return this}),s;function a(s){return function(a){return function(s){if(n)throw new TypeError("Generator is already executing.");for(;o;)try{if(n=1,r&&(i=2&s[0]?r.return:s[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,s[1])).done)return i;switch(r=0,i&&(s=[2&s[0],i.value]),s[0]){case 0:case 1:i=s;break;case 4:return o.label++,{value:s[1],done:!1};case 5:o.label++,r=s[1],s=[0];continue;case 7:s=o.ops.pop(),o.trys.pop();continue;default:if(!((i=(i=o.trys).length>0&&i[i.length-1])||6!==s[0]&&2!==s[0])){o=0;continue}if(3===s[0]&&(!i||s[1]>i[0]&&s[1]<i[3])){o.label=s[1];break}if(6===s[0]&&o.label<i[1]){o.label=i[1],i=s;break}if(i&&o.label<i[2]){o.label=i[2],o.ops.push(s);break}i[2]&&o.ops.pop(),o.trys.pop();continue}s=e.call(t,o)}catch(a){s=[6,a],r=0}finally{n=i=0}if(5&s[0])throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}([s,a])}}}function Zy(t){var e="function"==typeof Symbol&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function tv(t,e){var n="function"==typeof Symbol&&t[Symbol.iterator];if(!n)return t;var r,i,s=n.call(t),o=[];try{for(;(void 0===e||e-- >0)&&!(r=s.next()).done;)o.push(r.value)}catch(a){i={error:a}}finally{try{r&&!r.done&&(n=s.return)&&n.call(s)}finally{if(i)throw i.error}}return o}function ev(t,e,n){if(n||2===arguments.length)for(var r,i=0,s=e.length;i<s;i++)!r&&i in e||(r||(r=Array.prototype.slice.call(e,0,i)),r[i]=e[i]);return t.concat(r||Array.prototype.slice.call(e))}function nv(t){return this instanceof nv?(this.v=t,this):new nv(t)}function rv(t,e,n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r,i=n.apply(t,e||[]),s=[];return r={},o("next"),o("throw"),o("return"),r[Symbol.asyncIterator]=function(){return this},r;function o(t){i[t]&&(r[t]=function(e){return new Promise(function(n,r){s.push([t,e,n,r])>1||a(t,e)})})}function a(t,e){try{(n=i[t](e)).value instanceof nv?Promise.resolve(n.value.v).then(u,c):l(s[0][2],n)}catch(r){l(s[0][3],r)}var n}function u(t){a("next",t)}function c(t){a("throw",t)}function l(t,e){t(e),s.shift(),s.length&&a(s[0][0],s[0][1])}}function iv(t){return"function"==typeof t}function sv(t){var e=t(function(t){Error.call(t),t.stack=(new Error).stack});return e.prototype=Object.create(Error.prototype),e.prototype.constructor=e,e}var ov=sv(function(t){return function(e){t(this),this.message=e?e.length+" errors occurred during unsubscription:\n"+e.map(function(t,e){return e+1+") "+t.toString()}).join("\n  "):"",this.name="UnsubscriptionError",this.errors=e}});function av(t,e){if(t){var n=t.indexOf(e);0<=n&&t.splice(n,1)}}var uv=function(){function t(t){this.initialTeardown=t,this.closed=!1,this._parentage=null,this._finalizers=null}return t.prototype.unsubscribe=function(){var t,e,n,r,i;if(!this.closed){this.closed=!0;var s=this._parentage;if(s)if(this._parentage=null,Array.isArray(s))try{for(var o=Zy(s),a=o.next();!a.done;a=o.next())a.value.remove(this)}catch(f){t={error:f}}finally{try{a&&!a.done&&(e=o.return)&&e.call(o)}finally{if(t)throw t.error}}else s.remove(this);var u=this.initialTeardown;if(iv(u))try{u()}catch(p){i=p instanceof ov?p.errors:[p]}var c=this._finalizers;if(c){this._finalizers=null;try{for(var l=Zy(c),h=l.next();!h.done;h=l.next()){var d=h.value;try{hv(d)}catch(g){i=null!=i?i:[],g instanceof ov?i=ev(ev([],tv(i)),tv(g.errors)):i.push(g)}}}catch(m){n={error:m}}finally{try{h&&!h.done&&(r=l.return)&&r.call(l)}finally{if(n)throw n.error}}}if(i)throw new ov(i)}},t.prototype.add=function(e){var n;if(e&&e!==this)if(this.closed)hv(e);else{if(e instanceof t){if(e.closed||e._hasParent(this))return;e._addParent(this)}(this._finalizers=null!==(n=this._finalizers)&&void 0!==n?n:[]).push(e)}},t.prototype._hasParent=function(t){var e=this._parentage;return e===t||Array.isArray(e)&&e.includes(t)},t.prototype._addParent=function(t){var e=this._parentage;this._parentage=Array.isArray(e)?(e.push(t),e):e?[e,t]:t},t.prototype._removeParent=function(t){var e=this._parentage;e===t?this._parentage=null:Array.isArray(e)&&av(e,t)},t.prototype.remove=function(e){var n=this._finalizers;n&&av(n,e),e instanceof t&&e._removeParent(this)},t.EMPTY=function(){var e=new t;return e.closed=!0,e}(),t}(),cv=uv.EMPTY;function lv(t){return t instanceof uv||t&&"closed"in t&&iv(t.remove)&&iv(t.add)&&iv(t.unsubscribe)}function hv(t){iv(t)?t():t.unsubscribe()}var dv=function(t){function e(e,n){return t.call(this)||this}return Qy(e,t),e.prototype.schedule=function(t,e){return void 0===e&&(e=0),this},e}(uv),fv={setInterval:function(t,e){for(var n=[],r=2;r<arguments.length;r++)n[r-2]=arguments[r];var i=fv.delegate;return(null==i?void 0:i.setInterval)?i.setInterval.apply(i,ev([t,e],tv(n))):setInterval.apply(void 0,ev([t,e],tv(n)))},clearInterval:function(t){var e=fv.delegate;return((null==e?void 0:e.clearInterval)||clearInterval)(t)},delegate:void 0},pv=function(t){function e(e,n){var r=t.call(this,e,n)||this;return r.scheduler=e,r.work=n,r.pending=!1,r}return Qy(e,t),e.prototype.schedule=function(t,e){if(void 0===e&&(e=0),this.closed)return this;this.state=t;var n=this.id,r=this.scheduler;return null!=n&&(this.id=this.recycleAsyncId(r,n,e)),this.pending=!0,this.delay=e,this.id=this.id||this.requestAsyncId(r,this.id,e),this},e.prototype.requestAsyncId=function(t,e,n){return void 0===n&&(n=0),fv.setInterval(t.flush.bind(t,this),n)},e.prototype.recycleAsyncId=function(t,e,n){if(void 0===n&&(n=0),null!=n&&this.delay===n&&!1===this.pending)return e;fv.clearInterval(e)},e.prototype.execute=function(t,e){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;var n=this._execute(t,e);if(n)return n;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))},e.prototype._execute=function(t,e){var n,r=!1;try{this.work(t)}catch(i){r=!0,n=i||new Error("Scheduled action threw falsy error")}if(r)return this.unsubscribe(),n},e.prototype.unsubscribe=function(){if(!this.closed){var e=this.id,n=this.scheduler,r=n.actions;this.work=this.state=this.scheduler=null,this.pending=!1,av(r,this),null!=e&&(this.id=this.recycleAsyncId(n,e,null)),this.delay=null,t.prototype.unsubscribe.call(this)}},e}(dv),gv=function(t){function e(e,n){var r=t.call(this,e,n)||this;return r.scheduler=e,r.work=n,r}return Qy(e,t),e.prototype.schedule=function(e,n){return void 0===n&&(n=0),n>0?t.prototype.schedule.call(this,e,n):(this.delay=n,this.state=e,this.scheduler.flush(this),this)},e.prototype.execute=function(e,n){return n>0||this.closed?t.prototype.execute.call(this,e,n):this._execute(e,n)},e.prototype.requestAsyncId=function(e,n,r){return void 0===r&&(r=0),null!=r&&r>0||null==r&&this.delay>0?t.prototype.requestAsyncId.call(this,e,n,r):e.flush(this)},e}(pv),mv={now:function(){return(mv.delegate||Date).now()},delegate:void 0},yv=function(){function t(e,n){void 0===n&&(n=t.now),this.schedulerActionCtor=e,this.now=n}return t.prototype.schedule=function(t,e,n){return void 0===e&&(e=0),new this.schedulerActionCtor(this,t).schedule(n,e)},t.now=mv.now,t}(),vv=function(t){function e(e,n){void 0===n&&(n=yv.now);var r=t.call(this,e,n)||this;return r.actions=[],r._active=!1,r._scheduled=void 0,r}return Qy(e,t),e.prototype.flush=function(t){var e=this.actions;if(this._active)e.push(t);else{var n;this._active=!0;do{if(n=t.execute(t.state,t.delay))break}while(t=e.shift());if(this._active=!1,n){for(;t=e.shift();)t.unsubscribe();throw n}}},e}(yv),wv=new(function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Qy(e,t),e}(vv))(gv),bv=new vv(pv),_v=bv,Iv={setTimeout:function(t,e){for(var n=[],r=2;r<arguments.length;r++)n[r-2]=arguments[r];var i=Iv.delegate;return(null==i?void 0:i.setTimeout)?i.setTimeout.apply(i,ev([t,e],tv(n))):setTimeout.apply(void 0,ev([t,e],tv(n)))},clearTimeout:function(t){var e=Iv.delegate;return((null==e?void 0:e.clearTimeout)||clearTimeout)(t)},delegate:void 0};function Sv(t){Iv.setTimeout(function(){throw t})}function Ev(){}var Tv=Cv("C",void 0,void 0);function Cv(t,e,n){return{kind:t,value:e,error:n}}function kv(t){t()}var Av=function(t){function e(e){var n=t.call(this)||this;return n.isStopped=!1,e?(n.destination=e,lv(e)&&e.add(n)):n.destination=Rv,n}return Qy(e,t),e.create=function(t,e,n){return new Ov(t,e,n)},e.prototype.next=function(t){this.isStopped?Nv(function(t){return Cv("N",t,void 0)}(t),this):this._next(t)},e.prototype.error=function(t){this.isStopped?Nv(Cv("E",void 0,t),this):(this.isStopped=!0,this._error(t))},e.prototype.complete=function(){this.isStopped?Nv(Tv,this):(this.isStopped=!0,this._complete())},e.prototype.unsubscribe=function(){this.closed||(this.isStopped=!0,t.prototype.unsubscribe.call(this),this.destination=null)},e.prototype._next=function(t){this.destination.next(t)},e.prototype._error=function(t){try{this.destination.error(t)}finally{this.unsubscribe()}},e.prototype._complete=function(){try{this.destination.complete()}finally{this.unsubscribe()}},e}(uv);var xv=function(){function t(t){this.partialObserver=t}return t.prototype.next=function(t){var e=this.partialObserver;if(e.next)try{e.next(t)}catch(n){Dv(n)}},t.prototype.error=function(t){var e=this.partialObserver;if(e.error)try{e.error(t)}catch(n){Dv(n)}else Dv(t)},t.prototype.complete=function(){var t=this.partialObserver;if(t.complete)try{t.complete()}catch(e){Dv(e)}},t}(),Ov=function(t){function e(e,n,r){var i,s=t.call(this)||this;return i=iv(e)||!e?{next:null!=e?e:void 0,error:null!=n?n:void 0,complete:null!=r?r:void 0}:e,s.destination=new xv(i),s}return Qy(e,t),e}(Av);function Dv(t){Sv(t)}function Nv(t,e){var n=null;n&&Iv.setTimeout(function(){return n(t,e)})}var Rv={closed:!0,next:Ev,error:function(t){throw t},complete:Ev},Pv="function"==typeof Symbol&&Symbol.observable||"@@observable";function Mv(t){return t}function Lv(t){return 0===t.length?Mv:1===t.length?t[0]:function(e){return t.reduce(function(t,e){return e(t)},e)}}var Vv=function(){function t(t){t&&(this._subscribe=t)}return t.prototype.lift=function(e){var n=new t;return n.source=this,n.operator=e,n},t.prototype.subscribe=function(t,e,n){var r,i=this,s=(r=t)&&r instanceof Av||function(t){return t&&iv(t.next)&&iv(t.error)&&iv(t.complete)}(r)&&lv(r)?t:new Ov(t,e,n);return kv(function(){var t=i.operator,e=i.source;s.add(t?t.call(s,e):e?i._subscribe(s):i._trySubscribe(s))}),s},t.prototype._trySubscribe=function(t){try{return this._subscribe(t)}catch(e){t.error(e)}},t.prototype.forEach=function(t,e){var n=this;return new(e=Fv(e))(function(e,r){var i=new Ov({next:function(e){try{t(e)}catch(n){r(n),i.unsubscribe()}},error:r,complete:e});n.subscribe(i)})},t.prototype._subscribe=function(t){var e;return null===(e=this.source)||void 0===e?void 0:e.subscribe(t)},t.prototype[Pv]=function(){return this},t.prototype.pipe=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return Lv(t)(this)},t.prototype.toPromise=function(t){var e=this;return new(t=Fv(t))(function(t,n){var r;e.subscribe(function(t){return r=t},function(t){return n(t)},function(){return t(r)})})},t.create=function(e){return new t(e)},t}();function Fv(t){var e;return null!==(e=null!=t?t:undefined)&&void 0!==e?e:Promise}function Uv(t){return function(e){if(function(t){return iv(null==t?void 0:t.lift)}(e))return e.lift(function(e){try{return t(e,this)}catch(n){this.error(n)}});throw new TypeError("Unable to lift unknown Observable type")}}function jv(t,e,n,r,i){return new Bv(t,e,n,r,i)}var Bv=function(t){function e(e,n,r,i,s,o){var a=t.call(this,e)||this;return a.onFinalize=s,a.shouldUnsubscribe=o,a._next=n?function(t){try{n(t)}catch(r){e.error(r)}}:t.prototype._next,a._error=i?function(t){try{i(t)}catch(t){e.error(t)}finally{this.unsubscribe()}}:t.prototype._error,a._complete=r?function(){try{r()}catch(t){e.error(t)}finally{this.unsubscribe()}}:t.prototype._complete,a}return Qy(e,t),e.prototype.unsubscribe=function(){var e;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){var n=this.closed;t.prototype.unsubscribe.call(this),!n&&(null===(e=this.onFinalize)||void 0===e||e.call(this))}},e}(Av);function $v(t,e){return void 0===e&&(e=0),Uv(function(n,r){r.add(t.schedule(function(){return n.subscribe(r)},e))})}function qv(t,e,n,r,i){void 0===r&&(r=0),void 0===i&&(i=!1);var s=e.schedule(function(){n(),i?t.add(this.schedule(null,r)):this.unsubscribe()},r);if(t.add(s),!i)return s}function Hv(t,e){return void 0===e&&(e=0),Uv(function(n,r){n.subscribe(jv(r,function(n){return qv(r,t,function(){return r.next(n)},e)},function(){return qv(r,t,function(){return r.complete()},e)},function(n){return qv(r,t,function(){return r.error(n)},e)}))})}const zv=new yo("7.3.0"),Kv="__angularfire_symbol__analyticsIsSupportedValue",Gv="__angularfire_symbol__analyticsIsSupported",Wv="__angularfire_symbol__remoteConfigIsSupportedValue",Qv="__angularfire_symbol__remoteConfigIsSupported",Yv="__angularfire_symbol__messagingIsSupportedValue",Jv="__angularfire_symbol__messagingIsSupported";globalThis[Gv]||(globalThis[Gv]=function(){return Hy.apply(this,arguments)}().then(t=>globalThis[Kv]=t).catch(()=>globalThis[Kv]=!1)),globalThis[Jv]||(globalThis[Jv]=function(){return ny.apply(this,arguments)}().then(t=>globalThis[Yv]=t).catch(()=>globalThis[Yv]=!1)),globalThis[Qv]||(globalThis[Qv]=function(){return Kg.apply(this,arguments)}().then(t=>globalThis[Wv]=t).catch(()=>globalThis[Wv]=!1));const Xv={async:()=>globalThis[Gv],sync:()=>{const t=globalThis[Kv];if(void 0===t)throw new Error(`The APP_INITIALIZER that is "making" isSupported() sync for the sake of convenient DI has not resolved in this\ncontext. Rather than injecting ${"Analytics"} in the constructor, first ensure that Analytics is supported by calling\n\`await isSupported()\`, then retrieve the instance from the injector manually \`injector.get(Analytics)\`.`);return t}};function Zv(t,e,n){if(e){if(1===e.length)return e[0];const t=e.filter(t=>t.app===n);if(1===t.length)return t[0]}return n.container.getProvider(t).getImmediate({optional:!0})}const tw=(t,e)=>{const n=e?[e]:fp(),r=[];return n.forEach(e=>{e.container.getProvider(t).instances.forEach(t=>{r.includes(t)||r.push(t)})}),r};function ew(){}class nw{constructor(t,e=wv){this.zone=t,this.delegate=e}now(){return this.delegate.now()}schedule(t,e,n){const r=this.zone;return this.delegate.schedule(function(e){r.runGuarded(()=>{t.apply(this,[e])})},e,n)}}class rw{constructor(t){this.zone=t,this.task=null}call(t,e){const n=this.unscheduleTask.bind(this);return this.task=this.zone.run(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",ew,{},ew,ew)),e.pipe((r={next:n,complete:n,error:n},i=iv(r)?{next:r,error:undefined,complete:undefined}:r,i?Uv(function(t,e){var n;null===(n=i.subscribe)||void 0===n||n.call(i);var r=!0;t.subscribe(jv(e,function(t){var n;null===(n=i.next)||void 0===n||n.call(i,t),e.next(t)},function(){var t;r=!1,null===(t=i.complete)||void 0===t||t.call(i),e.complete()},function(t){var n;r=!1,null===(n=i.error)||void 0===n||n.call(i,t),e.error(t)},function(){var t,e;r&&(null===(t=i.unsubscribe)||void 0===t||t.call(i)),null===(e=i.finalize)||void 0===e||e.call(i)}))}):Mv)).subscribe(t).add(n);var r,i}unscheduleTask(){setTimeout(()=>{null!=this.task&&"scheduled"===this.task.state&&(this.task.invoke(),this.task=null)},10)}}let iw=(()=>{class t{constructor(t){this.ngZone=t,this.outsideAngular=t.runOutsideAngular(()=>new nw(Zone.current)),this.insideAngular=t.run(()=>new nw(Zone.current,bv)),globalThis.\u0275AngularFireScheduler||(globalThis.\u0275AngularFireScheduler=this)}}return t.\u0275fac=function(e){return new(e||t)(Jn(Da))},t.\u0275prov=dt({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();function sw(){const t=globalThis.\u0275AngularFireScheduler;if(!t)throw new Error("Either AngularFireModule has not been provided in your AppModule (this can be done manually or implictly using\nprovideFirebaseApp) or you're calling an AngularFire method outside of an NgModule (which is not supported).");return t}function ow(t){return sw().ngZone.runOutsideAngular(()=>t())}function aw(t){return sw().ngZone.run(()=>t())}function uw(t){return sw(),(e=sw(),function(t){return(t=t.lift(new rw(e.ngZone))).pipe($v(e.outsideAngular),Hv(e.insideAngular))})(t);var e}const cw=(t,e)=>{const n=void 0;return function(){const r=arguments;return e&&setTimeout(()=>{"scheduled"===e.state&&e.invoke()},10),aw(()=>t.apply(n,r))}},lw=(t,e)=>function(){let n;const r=arguments;for(let t=0;t<arguments.length;t++)"function"==typeof r[t]&&(e&&(n||(n=aw(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",ew,{},ew,ew)))),r[t]=cw(r[t],n));const i=ow(()=>t.apply(this,r));if(!e){if(i instanceof Vv){const t=sw();return i.pipe($v(t.outsideAngular),Hv(t.insideAngular))}return aw(()=>i)}return i instanceof Vv?i.pipe(uw):i instanceof Promise?aw(()=>new Promise((t,e)=>i.then(e=>aw(()=>t(e)),t=>aw(()=>e(t))))):"function"==typeof i&&n?function(){return setTimeout(()=>{n&&"scheduled"===n.state&&n.invoke()},10),i.apply(this,arguments)}:aw(()=>i)};function hw(t){return t&&iv(t.schedule)}function dw(t,e,n){void 0===t&&(t=0),void 0===n&&(n=_v);var r=-1;return null!=e&&(hw(e)?n=e:r=e),new Vv(function(e){var i,s=(i=t)instanceof Date&&!isNaN(i)?+t-n.now():t;s<0&&(s=0);var o=0;return n.schedule(function(){e.closed||(e.next(o++),0<=r?this.schedule(void 0,r):e.complete())},s)})}var fw=function(t){return t&&"number"==typeof t.length&&"function"!=typeof t};function pw(t){return iv(null==t?void 0:t.then)}function gw(t){return iv(t[Pv])}function mw(t){return Symbol.asyncIterator&&iv(null==t?void 0:t[Symbol.asyncIterator])}function yw(t){return new TypeError("You provided "+(null!==t&&"object"==typeof t?"an invalid object":"'"+t+"'")+" where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.")}var vw="function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator";function ww(t){return iv(null==t?void 0:t[vw])}function bw(t){return rv(this,arguments,function(){var e,n,r;return Xy(this,function(i){switch(i.label){case 0:e=t.getReader(),i.label=1;case 1:i.trys.push([1,,9,10]),i.label=2;case 2:return[4,nv(e.read())];case 3:return n=i.sent(),r=n.value,n.done?[4,nv(void 0)]:[3,5];case 4:return[2,i.sent()];case 5:return[4,nv(r)];case 6:return[4,i.sent()];case 7:return i.sent(),[3,2];case 8:return[3,10];case 9:return e.releaseLock(),[7];case 10:return[2]}})})}function _w(t){return iv(null==t?void 0:t.getReader)}function Iw(t){if(t instanceof Vv)return t;if(null!=t){if(gw(t))return r=t,new Vv(function(t){var e=r[Pv]();if(iv(e.subscribe))return e.subscribe(t);throw new TypeError("Provided object does not correctly implement Symbol.observable")});if(fw(t))return n=t,new Vv(function(t){for(var e=0;e<n.length&&!t.closed;e++)t.next(n[e]);t.complete()});if(pw(t))return function(t){return new Vv(function(e){t.then(function(t){e.closed||(e.next(t),e.complete())},function(t){return e.error(t)}).then(null,Sv)})}(t);if(mw(t))return Sw(t);if(ww(t))return e=t,new Vv(function(t){var n,r;try{for(var i=Zy(e),s=i.next();!s.done;s=i.next())if(t.next(s.value),t.closed)return}catch(o){n={error:o}}finally{try{s&&!s.done&&(r=i.return)&&r.call(i)}finally{if(n)throw n.error}}t.complete()});if(_w(t))return Sw(bw(t))}var e,n,r;throw yw(t)}function Sw(t){return new Vv(function(e){(function(t,e){var n,r,i,s;return Jy(this,void 0,void 0,function(){var o;return Xy(this,function(a){switch(a.label){case 0:a.trys.push([0,5,6,11]),n=function(t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e,n=t[Symbol.asyncIterator];return n?n.call(t):(t=Zy(t),e={},r("next"),r("throw"),r("return"),e[Symbol.asyncIterator]=function(){return this},e);function r(n){e[n]=t[n]&&function(e){return new Promise(function(r,i){!function(t,e,n,r){Promise.resolve(r).then(function(e){t({value:e,done:n})},e)}(r,i,(e=t[n](e)).done,e.value)})}}}(t),a.label=1;case 1:return[4,n.next()];case 2:if((r=a.sent()).done)return[3,4];if(e.next(r.value),e.closed)return[2];a.label=3;case 3:return[3,1];case 4:return[3,11];case 5:return o=a.sent(),i={error:o},[3,11];case 6:return a.trys.push([6,,9,10]),r&&!r.done&&(s=n.return)?[4,s.call(n)]:[3,8];case 7:a.sent(),a.label=8;case 8:return[3,10];case 9:if(i)throw i.error;return[7];case 10:return[7];case 11:return e.complete(),[2]}})})})(t,e).catch(function(t){return e.error(t)})})}function Ew(t,e){if(!t)throw new Error("Iterable cannot be null");return new Vv(function(n){qv(n,e,function(){var r=t[Symbol.asyncIterator]();qv(n,e,function(){r.next().then(function(t){t.done?n.complete():n.next(t.value)})},0,!0)})})}function Tw(t,e){return e?function(t,e){if(null!=t){if(gw(t))return function(t,e){return Iw(t).pipe($v(e),Hv(e))}(t,e);if(fw(t))return function(t,e){return new Vv(function(n){var r=0;return e.schedule(function(){r===t.length?n.complete():(n.next(t[r++]),n.closed||this.schedule())})})}(t,e);if(pw(t))return function(t,e){return Iw(t).pipe($v(e),Hv(e))}(t,e);if(mw(t))return Ew(t,e);if(ww(t))return function(t,e){return new Vv(function(n){var r;return qv(n,e,function(){r=t[vw](),qv(n,e,function(){var t,e,i;try{e=(t=r.next()).value,i=t.done}catch(s){return void n.error(s)}i?n.complete():n.next(e)},0,!0)}),function(){return iv(null==r?void 0:r.return)&&r.return()}})}(t,e);if(_w(t))return function(t,e){return Ew(bw(t),e)}(t,e)}throw yw(t)}(t,e):Iw(t)}function Cw(t,e){return Uv(function(n,r){var i=0;n.subscribe(jv(r,function(n){r.next(t.call(e,n,i++))}))})}function kw(t,e,n){return void 0===n&&(n=1/0),iv(e)?kw(function(n,r){return Cw(function(t,i){return e(n,t,r,i)})(Iw(t(n,r)))},n):("number"==typeof e&&(n=e),Uv(function(e,r){return function(t,e,n,r,i,s,o,a){var u=[],c=0,l=0,h=!1,d=function(){!h||u.length||c||e.complete()},f=function(t){c++;var i=!1;Iw(n(t,l++)).subscribe(jv(e,function(t){e.next(t)},function(){i=!0},void 0,function(){if(i)try{for(c--;u.length&&c<r;)void 0,t=u.shift(),f(t);d()}catch(n){e.error(n)}var t}))};return t.subscribe(jv(e,function(t){return c<r?f(t):u.push(t)},function(){h=!0,d()})),function(){}}(e,r,t,n)}))}function Aw(t,e){return iv(e)?kw(t,e,1):kw(t,1)}function xw(t,e){return Uv(function(n,r){var i=new Set;n.subscribe(jv(r,function(e){var n=t?t(e):e;i.has(n)||(i.add(n),r.next(e))})),null==e||e.subscribe(jv(r,function(){return i.clear()},Ev))})}class Ow{constructor(t){return t}}class Dw{constructor(){return fp()}}dw(0,300).pipe(Aw(()=>Tw(fp())),xw());const Nw=new Mn("angularfire2._apps"),Rw={provide:Ow,useFactory:function(t){return t&&1===t.length?t[0]:new Ow(dp())},deps:[[new er,Nw]]},Pw={provide:Dw,deps:[[new er,Nw]]};function Mw(t){return(e,n)=>{const r=e.runOutsideAngular(()=>t(n));return new Ow(r)}}let Lw=(()=>{class t{constructor(t){gp("angularfire",zv.full,"core"),gp("angularfire",zv.full,"app"),gp("angular",vo.full,t.toString())}}return t.\u0275fac=function(e){return new(e||t)(Jn(ma))},t.\u0275mod=Gt({type:t}),t.\u0275inj=ft({providers:[Rw,Pw]}),t})();function Vw(t,...e){return{ngModule:Lw,providers:[{provide:Nw,useFactory:Mw(t),multi:!0,deps:[Da,us,iw,...e]}]}}lw(function(t){return pp.apply(this,arguments)},!0),lw(dp,!0),lw(fp,!0);const Fw=lw(function(t,e={}){"object"!=typeof e&&(e={name:e});const n=Object.assign({name:"[DEFAULT]",automaticDataCollectionEnabled:!1},e),r=n.name;if("string"!=typeof r||!r)throw cp.create("bad-app-name",{appName:String(r)});const i=ip.get(r);if(i){if(Ef(t,i.options)&&Ef(n,i.config))return i;throw cp.create("duplicate-app",{appName:r})}const s=new Hf(r);for(const a of sp.values())s.addComponent(a);const o=new lp(t,n,s);return ip.set(r,o),o},!0),Uw=(lw(function(t,e){if(null!==t&&"function"!=typeof t)throw cp.create("invalid-log-argument");!function(t,e){for(const n of zf){let r=null;e&&e.level&&(r=Wf[e.level]),n.userLogHandler=null===t?null:(e,n,...i)=>{const s=i.map(t=>{if(null==t)return null;if("string"==typeof t)return t;if("number"==typeof t||"boolean"==typeof t)return t.toString();if(t instanceof Error)return t.message;try{return JSON.stringify(t)}catch(e){return null}}).filter(t=>t).join(" ");n>=(null!=r?r:e.logLevel)&&t({level:Kf[n].toLowerCase(),message:s,args:i,type:e.name})}}}(t,e)},!0),lw(gp,!0),lw(function(t){var e;e=t,zf.forEach(t=>{t.setLogLevel(e)})},!0),new Map),jw={activated:!1,tokenObservers:[]},Bw={initialized:!1,enabled:!1};function $w(t){return Uw.get(t)||jw}function qw(t,e){Uw.set(t,e)}function Hw(){return Bw}class zw{constructor(t,e,n,r,i){if(this.operation=t,this.retryPolicy=e,this.getWaitDuration=n,this.lowerBound=r,this.upperBound=i,this.pending=null,this.nextErrorWaitInterval=r,r>i)throw new Error("Proactive refresh lower bound greater than upper bound!")}start(){this.nextErrorWaitInterval=this.lowerBound,this.process(!0).catch(()=>{})}stop(){this.pending&&(this.pending.reject("cancelled"),this.pending=null)}isRunning(){return!!this.pending}process(t){var e=this;return uf(function*(){e.stop();try{e.pending=new df,yield function(t){return new Promise(e=>{setTimeout(e,t)})}(e.getNextRun(t)),e.pending.resolve(),yield e.pending.promise,e.pending=new df,yield e.operation(),e.pending.resolve(),yield e.pending.promise,e.process(!0).catch(()=>{})}catch(n){e.retryPolicy(n)?e.process(!1).catch(()=>{}):e.stop()}})()}getNextRun(t){if(t)return this.nextErrorWaitInterval=this.lowerBound,this.getWaitDuration();{const t=this.nextErrorWaitInterval;return this.nextErrorWaitInterval*=2,this.nextErrorWaitInterval>this.upperBound&&(this.nextErrorWaitInterval=this.upperBound),t}}}const Kw=new If("appCheck","AppCheck",{"already-initialized":"You have already called initializeAppCheck() for FirebaseApp {$appName} with different options. To avoid this error, call initializeAppCheck() with the same options as when it was originally called. This will return the already initialized instance.","use-before-activation":"App Check is being used before initializeAppCheck() is called for FirebaseApp {$appName}. Call initializeAppCheck() before instantiating other Firebase services.","fetch-network-error":"Fetch failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-parse-error":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status-error":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","recaptcha-error":"ReCAPTCHA error.",throttled:"Requests throttled due to {$httpStatus} error. Attempts allowed again after {$time}"});function Gw(t){if(!$w(t).activated)throw Kw.create("use-before-activation",{appName:t.name})}function Ww(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,t=>{const e=16*Math.random()|0;return("x"===t?e:3&e|8).toString(16)})}function Qw(t,e){return Yw.apply(this,arguments)}function Yw(){return(Yw=uf(function*({url:t,body:e},n){const r={"Content-Type":"application/json"},i=n.getImmediate({optional:!0});if(i){const t=yield i.getHeartbeatsHeader();t&&(r["X-Firebase-Client"]=t)}const s={method:"POST",body:JSON.stringify(e),headers:r};let o,a;try{o=yield fetch(t,s)}catch(h){throw Kw.create("fetch-network-error",{originalErrorMessage:h.message})}if(200!==o.status)throw Kw.create("fetch-status-error",{httpStatus:o.status});try{a=yield o.json()}catch(h){throw Kw.create("fetch-parse-error",{originalErrorMessage:h.message})}const u=a.ttl.match(/^([\d.]+)(s)$/);if(!u||!u[2]||isNaN(Number(u[1])))throw Kw.create("fetch-parse-error",{originalErrorMessage:`ttl field (timeToLive) is not in standard Protobuf Duration format: ${a.ttl}`});const c=1e3*Number(u[1]),l=Date.now();return{token:a.attestationToken,expireTimeMillis:l+c,issuedAtTimeMillis:l}})).apply(this,arguments)}function Jw(t,e){const{projectId:n,appId:r,apiKey:i}=t.options;return{url:`https://content-firebaseappcheck.googleapis.com/v1beta/projects/${n}/apps/${r}:exchangeDebugToken?key=${i}`,body:{debug_token:e}}}const Xw="firebase-app-check-store",Zw="debug-token";let tb=null;function eb(){return tb||(tb=new Promise((t,e)=>{try{const n=indexedDB.open("firebase-app-check-database",1);n.onsuccess=e=>{t(e.target.result)},n.onerror=t=>{var n;e(Kw.create("storage-open",{originalErrorMessage:null===(n=t.target.error)||void 0===n?void 0:n.message}))},n.onupgradeneeded=t=>{const e=t.target.result;switch(t.oldVersion){case 0:e.createObjectStore(Xw,{keyPath:"compositeKey"})}}}catch(n){e(Kw.create("storage-open",{originalErrorMessage:n.message}))}}),tb)}function nb(t){return ab(cb(t))}function rb(t){return sb(Zw,t)}function ib(){return ab(Zw)}function sb(t,e){return ob.apply(this,arguments)}function ob(){return(ob=uf(function*(t,e){const n=(yield eb()).transaction(Xw,"readwrite"),r=n.objectStore(Xw).put({compositeKey:t,value:e});return new Promise((t,e)=>{r.onsuccess=e=>{t()},n.onerror=t=>{var n;e(Kw.create("storage-set",{originalErrorMessage:null===(n=t.target.error)||void 0===n?void 0:n.message}))}})})).apply(this,arguments)}function ab(t){return ub.apply(this,arguments)}function ub(){return(ub=uf(function*(t){const e=(yield eb()).transaction(Xw,"readonly"),n=e.objectStore(Xw).get(t);return new Promise((t,r)=>{n.onsuccess=e=>{const n=e.target.result;t(n?n.value:void 0)},e.onerror=t=>{var e;r(Kw.create("storage-get",{originalErrorMessage:null===(e=t.target.error)||void 0===e?void 0:e.message}))}})})).apply(this,arguments)}function cb(t){return`${t.options.appId}-${t.name}`}const lb=new Xf("@firebase/app-check");function hb(){return(hb=uf(function*(t){if(vf()){let n;try{n=yield nb(t)}catch(e){lb.warn(`Failed to read token from IndexedDB. Error: ${e}`)}return n}})).apply(this,arguments)}function db(t,e){return vf()?function(t,e){return sb(cb(t),e)}(t,e).catch(t=>{lb.warn(`Failed to write token to IndexedDB. Error: ${t}`)}):Promise.resolve()}function fb(){return(fb=uf(function*(){let t;try{t=yield ib()}catch(_D){}if(t)return t;{const t=Ww();return rb(t).catch(t=>lb.warn(`Failed to persist debug token to IndexedDB. Error: ${t}`)),t}})).apply(this,arguments)}function pb(){return Hw().enabled}function gb(){return mb.apply(this,arguments)}function mb(){return(mb=uf(function*(){const t=Hw();if(t.enabled&&t.token)return t.token.promise;throw Error("\n            Can't get debug token in production mode.\n        ")})).apply(this,arguments)}const yb={error:"UNKNOWN_ERROR"};function vb(t){return wb.apply(this,arguments)}function wb(){return(wb=uf(function*(t,e=!1){const n=t.app;Gw(n);const r=$w(n);let i,s=r.token;if(!s){const t=yield r.cachedTokenPromise;t&&Eb(t)&&(s=t)}if(!e&&s&&Eb(s))return{token:s.token};let o,a=!1;if(pb()){r.exchangeTokenPromise||(r.exchangeTokenPromise=Qw(Jw(n,yield gb()),t.heartbeatServiceProvider).then(t=>(r.exchangeTokenPromise=void 0,t)),a=!0);const e=yield r.exchangeTokenPromise;return yield db(n,e),qw(n,Object.assign(Object.assign({},r),{token:e})),{token:e.token}}try{r.exchangeTokenPromise||(r.exchangeTokenPromise=r.provider.getToken().then(t=>(r.exchangeTokenPromise=void 0,t)),a=!0),s=yield r.exchangeTokenPromise}catch(u){"appCheck/throttled"===u.code?lb.warn(u.message):lb.error(u),i=u}return s?(o={token:s.token},qw(n,Object.assign(Object.assign({},r),{token:s})),yield db(n,s)):o=Tb(i),a&&Sb(n,o),o})).apply(this,arguments)}function bb(t,e,n,r){const{app:i}=t,s=$w(i),o={next:n,error:r,type:e};if(qw(i,Object.assign(Object.assign({},s),{tokenObservers:[...s.tokenObservers,o]})),s.token&&Eb(s.token)){const e=s.token;Promise.resolve().then(()=>{n({token:e.token}),Ib(t)}).catch(()=>{})}s.cachedTokenPromise.then(()=>Ib(t))}function _b(t,e){const n=$w(t),r=n.tokenObservers.filter(t=>t.next!==e);0===r.length&&n.tokenRefresher&&n.tokenRefresher.isRunning()&&n.tokenRefresher.stop(),qw(t,Object.assign(Object.assign({},n),{tokenObservers:r}))}function Ib(t){const{app:e}=t,n=$w(e);let r=n.tokenRefresher;r||(r=function(t){const{app:e}=t;return new zw(uf(function*(){let n;if(n=$w(e).token?yield vb(t,!0):yield vb(t),n.error)throw n.error}),()=>!0,()=>{const t=$w(e);if(t.token){let e=t.token.issuedAtTimeMillis+.5*(t.token.expireTimeMillis-t.token.issuedAtTimeMillis)+3e5;return e=Math.min(e,t.token.expireTimeMillis-3e5),Math.max(0,e-Date.now())}return 0},3e4,96e4)}(t),qw(e,Object.assign(Object.assign({},n),{tokenRefresher:r}))),!r.isRunning()&&n.isTokenAutoRefreshEnabled&&r.start()}function Sb(t,e){const n=$w(t).tokenObservers;for(const i of n)try{"EXTERNAL"===i.type&&null!=e.error?i.error(e.error):i.next(e)}catch(r){}}function Eb(t){return t.expireTimeMillis-Date.now()>0}function Tb(t){return{token:(e=yb,lf.encodeString(JSON.stringify(e),!1)),error:t};var e}class Cb{constructor(t,e){this.app=t,this.heartbeatServiceProvider=e}_delete(){const{tokenObservers:t}=$w(this.app);for(const e of t)_b(this.app,e.next);return Promise.resolve()}}function kb(){return(kb=uf(function*(t,e){const n=yield vb(t,e);if(n.error)throw n.error;return{token:n.token}})).apply(this,arguments)}const Ab="app-check-internal";ap(new Bf("app-check",t=>{return e=t.getProvider("app").getImmediate(),n=t.getProvider("heartbeat"),new Cb(e,n);var e,n},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((t,e,n)=>{t.getProvider(Ab).initialize()})),ap(new Bf(Ab,t=>{return e=t.getProvider("app-check").getImmediate(),{getToken:t=>vb(e,t),addTokenListener:t=>bb(e,"INTERNAL",t),removeTokenListener:t=>_b(e.app,t)};var e},"PUBLIC").setInstantiationMode("EXPLICIT")),gp("@firebase/app-check","0.5.6");const xb="app-check";class Ob{constructor(){return tw(xb)}}dw(0,300).pipe(Aw(()=>Tw(tw(xb))),xw()),new Mn("angularfire2.app-check-instances"),Symbol("angularfire2.app-check.namespace"),"undefined"!=typeof window&&["localhost","0.0.0.0","127.0.0.1"].includes(window.location.hostname),new er,new er,lw(function(t,e){return kb.apply(this,arguments)},!0),lw(function(t=dp(),e){const n=up(t=Nf(t),"app-check");if(Hw().initialized||function(){const t=function(){if("undefined"!=typeof self)return self;if("undefined"!=typeof window)return window;if("undefined"!=typeof global)return global;throw new Error("Unable to locate global object.")}(),e=Hw();if(e.initialized=!0,"string"!=typeof t.FIREBASE_APPCHECK_DEBUG_TOKEN&&!0!==t.FIREBASE_APPCHECK_DEBUG_TOKEN)return;e.enabled=!0;const n=new df;e.token=n,n.resolve("string"==typeof t.FIREBASE_APPCHECK_DEBUG_TOKEN?t.FIREBASE_APPCHECK_DEBUG_TOKEN:function(){return fb.apply(this,arguments)}())}(),pb()&&gb().then(t=>console.log(`App Check debug token: ${t}. You will need to add it to your app's App Check settings in the Firebase console for it to work.`)),n.isInitialized()){const r=n.getImmediate(),i=n.getOptions();if(i.isTokenAutoRefreshEnabled===e.isTokenAutoRefreshEnabled&&i.provider.isEqual(e.provider))return r;throw Kw.create("already-initialized",{appName:t.name})}const r=n.initialize({options:e});return function(t,e,n){const r=$w(t),i=Object.assign(Object.assign({},r),{activated:!0});i.provider=e,i.cachedTokenPromise=function(t){return hb.apply(this,arguments)}(t).then(e=>(e&&Eb(e)&&(qw(t,Object.assign(Object.assign({},$w(t)),{token:e})),Sb(t,{token:e.token})),e)),i.isTokenAutoRefreshEnabled=void 0===n?t.automaticDataCollectionEnabled:n,qw(t,i),i.provider.initialize(t)}(t,e.provider,e.isTokenAutoRefreshEnabled),$w(t).isTokenAutoRefreshEnabled&&bb(r,"INTERNAL",()=>{}),r},!0),lw(function(t,e,n,r){let i=()=>{},s=()=>{};return i=null!=e.next?e.next.bind(e):e,null!=e.error?s=e.error.bind(e):n&&(s=n),bb(t,"EXTERNAL",i,s),()=>_b(t.app,i)},!0),lw(function(t,e){const n=t.app,r=$w(n);r.tokenRefresher&&(!0===e?r.tokenRefresher.start():r.tokenRefresher.stop()),qw(n,Object.assign(Object.assign({},r),{isTokenAutoRefreshEnabled:e}))},!0);const Db=new If("auth","Firebase",{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}),Nb=new Xf("@firebase/auth");function Rb(t,...e){Nb.logLevel<=Kf.ERROR&&Nb.error(`Auth (9.6.11): ${t}`,...e)}function Pb(t,...e){throw Fb(t,...e)}function Mb(t,...e){return Fb(t,...e)}function Lb(t,e,n){const r=Object.assign(Object.assign({},{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}),{[e]:n});return new If("auth","Firebase",r).create(e,{appName:t.name})}function Vb(t,e,n){if(!(e instanceof n))throw n.name!==e.constructor.name&&Pb(t,"argument-error"),Lb(t,"argument-error",`Type of ${e.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function Fb(t,...e){if("string"!=typeof t){const n=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=t.name),t._errorFactory.create(n,...r)}return Db.create(t,...e)}function Ub(t,e,...n){if(!t)throw Fb(e,...n)}function jb(t){const e="INTERNAL ASSERTION FAILED: "+t;throw Rb(e),new Error(e)}function Bb(t,e){t||jb(e)}const $b=new Map;function qb(t){Bb(t instanceof Function,"Expected a class definition");let e=$b.get(t);return e?(Bb(e instanceof t,"Instance stored in cache mismatched with class"),e):(e=new t,$b.set(t,e),e)}function Hb(t,e){const n=up(t,"auth");if(n.isInitialized()){const t=n.getImmediate();if(Ef(n.getOptions(),null!=e?e:{}))return t;Pb(t,"already-initialized")}return n.initialize({options:e})}function zb(){var t;return"undefined"!=typeof self&&(null===(t=self.location)||void 0===t?void 0:t.href)||""}function Kb(){return"http:"===Gb()||"https:"===Gb()}function Gb(){var t;return"undefined"!=typeof self&&(null===(t=self.location)||void 0===t?void 0:t.protocol)||null}class Wb{constructor(t,e){this.shortDelay=t,this.longDelay=e,Bb(e>t,"Short delay should be less than long delay!"),this.isMobile=pf()||mf()}get(){return"undefined"!=typeof navigator&&navigator&&"onLine"in navigator&&"boolean"==typeof navigator.onLine&&(Kb()||gf()||"connection"in navigator)&&!navigator.onLine?Math.min(5e3,this.shortDelay):this.isMobile?this.longDelay:this.shortDelay}}function Qb(t,e){Bb(t.emulator,"Emulator should always be set here");const{url:n}=t.emulator;return e?`${n}${e.startsWith("/")?e.slice(1):e}`:n}class Yb{static initialize(t,e,n){this.fetchImpl=t,e&&(this.headersImpl=e),n&&(this.responseImpl=n)}static fetch(){return this.fetchImpl?this.fetchImpl:"undefined"!=typeof self&&"fetch"in self?self.fetch:void jb("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){return this.headersImpl?this.headersImpl:"undefined"!=typeof self&&"Headers"in self?self.Headers:void jb("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){return this.responseImpl?this.responseImpl:"undefined"!=typeof self&&"Response"in self?self.Response:void jb("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}const Jb={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"internal-error",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error"},Xb=new Wb(3e4,6e4);function Zb(t,e){return t.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:t.tenantId}):e}function t_(t,e,n,r){return e_.apply(this,arguments)}function e_(){return(e_=uf(function*(t,e,n,r,i={}){return n_(t,i,uf(function*(){let i={},s={};r&&("GET"===e?s=r:i={body:JSON.stringify(r)});const o=Cf(Object.assign({key:t.config.apiKey},s)).slice(1),a=yield t._getAdditionalHeaders();return a["Content-Type"]="application/json",t.languageCode&&(a["X-Firebase-Locale"]=t.languageCode),Yb.fetch()(o_(t,t.config.apiHost,n,o),Object.assign({method:e,headers:a,referrerPolicy:"no-referrer"},i))}))})).apply(this,arguments)}function n_(t,e,n){return r_.apply(this,arguments)}function r_(){return(r_=uf(function*(t,e,n){t._canInitEmulator=!1;const r=Object.assign(Object.assign({},Jb),e);try{const e=new a_(t),i=yield Promise.race([n(),e.promise]);e.clearNetworkTimeout();const s=yield i.json();if("needConfirmation"in s)throw u_(t,"account-exists-with-different-credential",s);if(i.ok&&!("errorMessage"in s))return s;{const e=i.ok?s.errorMessage:s.error.message,[n,o]=e.split(" : ");if("FEDERATED_USER_ID_ALREADY_LINKED"===n)throw u_(t,"credential-already-in-use",s);if("EMAIL_EXISTS"===n)throw u_(t,"email-already-in-use",s);const a=r[n]||n.toLowerCase().replace(/[_\s]+/g,"-");if(o)throw Lb(t,a,o);Pb(t,a)}}catch(i){if(i instanceof _f)throw i;Pb(t,"network-request-failed")}})).apply(this,arguments)}function i_(t,e,n,r){return s_.apply(this,arguments)}function s_(){return(s_=uf(function*(t,e,n,r,i={}){const s=yield t_(t,e,n,r,i);return"mfaPendingCredential"in s&&Pb(t,"multi-factor-auth-required",{_serverResponse:s}),s})).apply(this,arguments)}function o_(t,e,n,r){const i=`${e}${n}?${r}`;return t.config.emulator?Qb(t.config,i):`${t.config.apiScheme}://${i}`}class a_{constructor(t){this.auth=t,this.timer=null,this.promise=new Promise((t,e)=>{this.timer=setTimeout(()=>e(Mb(this.auth,"network-request-failed")),Xb.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function u_(t,e,n){const r={appName:t.name};n.email&&(r.email=n.email),n.phoneNumber&&(r.phoneNumber=n.phoneNumber);const i=Mb(t,e,r);return i.customData._tokenResponse=n,i}function c_(){return(c_=uf(function*(t,e){return t_(t,"POST","/v1/accounts:delete",e)})).apply(this,arguments)}function l_(t,e){return h_.apply(this,arguments)}function h_(){return(h_=uf(function*(t,e){return t_(t,"POST","/v1/accounts:update",e)})).apply(this,arguments)}function d_(t,e){return f_.apply(this,arguments)}function f_(){return(f_=uf(function*(t,e){return t_(t,"POST","/v1/accounts:lookup",e)})).apply(this,arguments)}function p_(t){if(t)try{const e=new Date(Number(t));if(!isNaN(e.getTime()))return e.toUTCString()}catch(e){}}function g_(t,e=!1){return Nf(t).getIdToken(e)}function m_(t){return y_.apply(this,arguments)}function y_(){return(y_=uf(function*(t,e=!1){const n=Nf(t),r=yield n.getIdToken(e),i=w_(r);Ub(i&&i.exp&&i.auth_time&&i.iat,n.auth,"internal-error");const s="object"==typeof i.firebase?i.firebase:void 0,o=null==s?void 0:s.sign_in_provider;return{claims:i,token:r,authTime:p_(v_(i.auth_time)),issuedAtTime:p_(v_(i.iat)),expirationTime:p_(v_(i.exp)),signInProvider:o||null,signInSecondFactor:(null==s?void 0:s.sign_in_second_factor)||null}})).apply(this,arguments)}function v_(t){return 1e3*Number(t)}function w_(t){const[e,n,r]=t.split(".");if(void 0===e||void 0===n||void 0===r)return Rb("JWT malformed, contained fewer than 3 sections"),null;try{const t=function(t){try{return lf.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null}(n);return t?JSON.parse(t):(Rb("Failed to decode base64 JWT payload"),null)}catch(i){return Rb("Caught error parsing JWT payload as JSON",i),null}}function b_(t,e){return __.apply(this,arguments)}function __(){return(__=uf(function*(t,e,n=!1){if(n)return e;try{return yield e}catch(r){throw r instanceof _f&&I_(r)&&t.auth.currentUser===t&&(yield t.auth.signOut()),r}})).apply(this,arguments)}function I_({code:t}){return"auth/user-disabled"===t||"auth/user-token-expired"===t}class S_{constructor(t){this.user=t,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,null!==this.timerId&&clearTimeout(this.timerId))}getInterval(t){var e;if(t){const t=this.errorBackoff;return this.errorBackoff=Math.min(2*this.errorBackoff,96e4),t}{this.errorBackoff=3e4;const t=(null!==(e=this.user.stsTokenManager.expirationTime)&&void 0!==e?e:0)-Date.now()-3e5;return Math.max(0,t)}}schedule(t=!1){var e=this;if(!this.isRunning)return;const n=this.getInterval(t);this.timerId=setTimeout(uf(function*(){yield e.iteration()}),n)}iteration(){var t=this;return uf(function*(){try{yield t.user.getIdToken(!0)}catch(e){return void("auth/network-request-failed"===e.code&&t.schedule(!0))}t.schedule()})()}}class E_{constructor(t,e){this.createdAt=t,this.lastLoginAt=e,this._initializeTime()}_initializeTime(){this.lastSignInTime=p_(this.lastLoginAt),this.creationTime=p_(this.createdAt)}_copy(t){this.createdAt=t.createdAt,this.lastLoginAt=t.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}function T_(t){return C_.apply(this,arguments)}function C_(){return(C_=uf(function*(t){var e;const n=t.auth,r=yield t.getIdToken(),i=yield b_(t,d_(n,{idToken:r}));Ub(null==i?void 0:i.users.length,n,"internal-error");const s=i.users[0];t._notifyReloadListener(s);const o=(null===(e=s.providerUserInfo)||void 0===e?void 0:e.length)?O_(s.providerUserInfo):[],a=x_(t.providerData,o),u=!!t.isAnonymous&&!(t.email&&s.passwordHash||(null==a?void 0:a.length)),c={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:a,metadata:new E_(s.createdAt,s.lastLoginAt),isAnonymous:u};Object.assign(t,c)})).apply(this,arguments)}function k_(t){return A_.apply(this,arguments)}function A_(){return(A_=uf(function*(t){const e=Nf(t);yield T_(e),yield e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)})).apply(this,arguments)}function x_(t,e){return[...t.filter(t=>!e.some(e=>e.providerId===t.providerId)),...e]}function O_(t){return t.map(t=>{var{providerId:e}=t,n=Yy(t,["providerId"]);return{providerId:e,uid:n.rawId||"",displayName:n.displayName||null,email:n.email||null,phoneNumber:n.phoneNumber||null,photoURL:n.photoUrl||null}})}function D_(){return(D_=uf(function*(t,e){const n=yield n_(t,{},uf(function*(){const n=Cf({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:r,apiKey:i}=t.config,s=o_(t,r,"/v1/token",`key=${i}`),o=yield t._getAdditionalHeaders();return o["Content-Type"]="application/x-www-form-urlencoded",Yb.fetch()(s,{method:"POST",headers:o,body:n})}));return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}})).apply(this,arguments)}class N_{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(t){Ub(t.idToken,"internal-error"),Ub(void 0!==t.idToken,"internal-error"),Ub(void 0!==t.refreshToken,"internal-error");const e="expiresIn"in t&&void 0!==t.expiresIn?Number(t.expiresIn):function(t){const e=w_(t);return Ub(e,"internal-error"),Ub(void 0!==e.exp,"internal-error"),Ub(void 0!==e.iat,"internal-error"),Number(e.exp)-Number(e.iat)}(t.idToken);this.updateTokensAndExpiration(t.idToken,t.refreshToken,e)}getToken(t,e=!1){var n=this;return uf(function*(){return Ub(!n.accessToken||n.refreshToken,t,"user-token-expired"),e||!n.accessToken||n.isExpired?n.refreshToken?(yield n.refresh(t,n.refreshToken),n.accessToken):null:n.accessToken})()}clearRefreshToken(){this.refreshToken=null}refresh(t,e){var n=this;return uf(function*(){const{accessToken:r,refreshToken:i,expiresIn:s}=yield function(t,e){return D_.apply(this,arguments)}(t,e);n.updateTokensAndExpiration(r,i,Number(s))})()}updateTokensAndExpiration(t,e,n){this.refreshToken=e||null,this.accessToken=t||null,this.expirationTime=Date.now()+1e3*n}static fromJSON(t,e){const{refreshToken:n,accessToken:r,expirationTime:i}=e,s=new N_;return n&&(Ub("string"==typeof n,"internal-error",{appName:t}),s.refreshToken=n),r&&(Ub("string"==typeof r,"internal-error",{appName:t}),s.accessToken=r),i&&(Ub("number"==typeof i,"internal-error",{appName:t}),s.expirationTime=i),s}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(t){this.accessToken=t.accessToken,this.refreshToken=t.refreshToken,this.expirationTime=t.expirationTime}_clone(){return Object.assign(new N_,this.toJSON())}_performRefresh(){return jb("not implemented")}}function R_(t,e){Ub("string"==typeof t||void 0===t,"internal-error",{appName:e})}class P_{constructor(t){var{uid:e,auth:n,stsTokenManager:r}=t,i=Yy(t,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new S_(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=e,this.auth=n,this.stsTokenManager=r,this.accessToken=r.accessToken,this.displayName=i.displayName||null,this.email=i.email||null,this.emailVerified=i.emailVerified||!1,this.phoneNumber=i.phoneNumber||null,this.photoURL=i.photoURL||null,this.isAnonymous=i.isAnonymous||!1,this.tenantId=i.tenantId||null,this.providerData=i.providerData?[...i.providerData]:[],this.metadata=new E_(i.createdAt||void 0,i.lastLoginAt||void 0)}getIdToken(t){var e=this;return uf(function*(){const n=yield b_(e,e.stsTokenManager.getToken(e.auth,t));return Ub(n,e.auth,"internal-error"),e.accessToken!==n&&(e.accessToken=n,yield e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)),n})()}getIdTokenResult(t){return m_(this,t)}reload(){return k_(this)}_assign(t){this!==t&&(Ub(this.uid===t.uid,this.auth,"internal-error"),this.displayName=t.displayName,this.photoURL=t.photoURL,this.email=t.email,this.emailVerified=t.emailVerified,this.phoneNumber=t.phoneNumber,this.isAnonymous=t.isAnonymous,this.tenantId=t.tenantId,this.providerData=t.providerData.map(t=>Object.assign({},t)),this.metadata._copy(t.metadata),this.stsTokenManager._assign(t.stsTokenManager))}_clone(t){return new P_(Object.assign(Object.assign({},this),{auth:t,stsTokenManager:this.stsTokenManager._clone()}))}_onReload(t){Ub(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=t,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(t){this.reloadListener?this.reloadListener(t):this.reloadUserInfo=t}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}_updateTokensIfNecessary(t,e=!1){var n=this;return uf(function*(){let r=!1;t.idToken&&t.idToken!==n.stsTokenManager.accessToken&&(n.stsTokenManager.updateFromServerResponse(t),r=!0),e&&(yield T_(n)),yield n.auth._persistUserIfCurrent(n),r&&n.auth._notifyListenersIfCurrent(n)})()}delete(){var t=this;return uf(function*(){const e=yield t.getIdToken();return yield b_(t,function(t,e){return c_.apply(this,arguments)}(t.auth,{idToken:e})),t.stsTokenManager.clearRefreshToken(),t.auth.signOut()})()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(t=>Object.assign({},t)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(t,e){var n,r,i,s,o,a,u,c;const l=null!==(n=e.displayName)&&void 0!==n?n:void 0,h=null!==(r=e.email)&&void 0!==r?r:void 0,d=null!==(i=e.phoneNumber)&&void 0!==i?i:void 0,f=null!==(s=e.photoURL)&&void 0!==s?s:void 0,p=null!==(o=e.tenantId)&&void 0!==o?o:void 0,g=null!==(a=e._redirectEventId)&&void 0!==a?a:void 0,m=null!==(u=e.createdAt)&&void 0!==u?u:void 0,y=null!==(c=e.lastLoginAt)&&void 0!==c?c:void 0,{uid:v,emailVerified:w,isAnonymous:b,providerData:_,stsTokenManager:I}=e;Ub(v&&I,t,"internal-error");const S=N_.fromJSON(this.name,I);Ub("string"==typeof v,t,"internal-error"),R_(l,t.name),R_(h,t.name),Ub("boolean"==typeof w,t,"internal-error"),Ub("boolean"==typeof b,t,"internal-error"),R_(d,t.name),R_(f,t.name),R_(p,t.name),R_(g,t.name),R_(m,t.name),R_(y,t.name);const E=new P_({uid:v,auth:t,email:h,emailVerified:w,displayName:l,isAnonymous:b,photoURL:f,phoneNumber:d,tenantId:p,stsTokenManager:S,createdAt:m,lastLoginAt:y});return _&&Array.isArray(_)&&(E.providerData=_.map(t=>Object.assign({},t))),g&&(E._redirectEventId=g),E}static _fromIdTokenResponse(t,e,n=!1){return uf(function*(){const r=new N_;r.updateFromServerResponse(e);const i=new P_({uid:e.localId,auth:t,stsTokenManager:r,isAnonymous:n});return yield T_(i),i})()}}const M_=(()=>{class t{constructor(){this.type="NONE",this.storage={}}_isAvailable(){return uf(function*(){return!0})()}_set(t,e){var n=this;return uf(function*(){n.storage[t]=e})()}_get(t){var e=this;return uf(function*(){const n=e.storage[t];return void 0===n?null:n})()}_remove(t){var e=this;return uf(function*(){delete e.storage[t]})()}_addListener(t,e){}_removeListener(t,e){}}return t.type="NONE",t})();function L_(t,e,n){return`firebase:${t}:${e}:${n}`}class V_{constructor(t,e,n){this.persistence=t,this.auth=e,this.userKey=n;const{config:r,name:i}=this.auth;this.fullUserKey=L_(this.userKey,r.apiKey,i),this.fullPersistenceKey=L_("persistence",r.apiKey,i),this.boundEventHandler=e._onStorageEvent.bind(e),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(t){return this.persistence._set(this.fullUserKey,t.toJSON())}getCurrentUser(){var t=this;return uf(function*(){const e=yield t.persistence._get(t.fullUserKey);return e?P_._fromJSON(t.auth,e):null})()}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}setPersistence(t){var e=this;return uf(function*(){if(e.persistence===t)return;const n=yield e.getCurrentUser();return yield e.removeCurrentUser(),e.persistence=t,n?e.setCurrentUser(n):void 0})()}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static create(t,e,n="authUser"){return uf(function*(){if(!e.length)return new V_(qb(M_),t,n);const r=(yield Promise.all(e.map(function(){var t=uf(function*(t){if(yield t._isAvailable())return t});return function(e){return t.apply(this,arguments)}}()))).filter(t=>t);let i=r[0]||qb(M_);const s=L_(n,t.config.apiKey,t.name);let o=null;for(const n of e)try{const e=yield n._get(s);if(e){const r=P_._fromJSON(t,e);n!==i&&(o=r),i=n;break}}catch(FF){}const a=r.filter(t=>t._shouldAllowMigration);return i._shouldAllowMigration&&a.length?(i=a[0],o&&(yield i._set(s,o.toJSON())),yield Promise.all(e.map(function(){var t=uf(function*(t){if(t!==i)try{yield t._remove(s)}catch(FF){}});return function(e){return t.apply(this,arguments)}}())),new V_(i,t,n)):new V_(i,t,n)})()}}function F_(t){const e=t.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if($_(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(U_(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(H_(e))return"Blackberry";if(z_(e))return"Webos";if(j_(e))return"Safari";if((e.includes("chrome/")||B_(e))&&!e.includes("edge/"))return"Chrome";if(q_(e))return"Android";{const e=t.match(/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/);if(2===(null==e?void 0:e.length))return e[1]}return"Other"}function U_(t=ff()){return/firefox\//i.test(t)}function j_(t=ff()){const e=t.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function B_(t=ff()){return/crios\//i.test(t)}function $_(t=ff()){return/iemobile/i.test(t)}function q_(t=ff()){return/android/i.test(t)}function H_(t=ff()){return/blackberry/i.test(t)}function z_(t=ff()){return/webos/i.test(t)}function K_(t=ff()){return/iphone|ipad|ipod/i.test(t)}function G_(t=ff()){return K_(t)||q_(t)||z_(t)||H_(t)||/windows phone/i.test(t)||$_(t)}function W_(t,e=[]){let n;switch(t){case"Browser":n=F_(ff());break;case"Worker":n=`${F_(ff())}-${t}`;break;default:n=t}return`${n}/JsCore/9.6.11/${e.length?e.join(","):"FirebaseCore-web"}`}class Q_{constructor(t,e,n){this.app=t,this.heartbeatServiceProvider=e,this.config=n,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new J_(this),this.idTokenSubscription=new J_(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=Db,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=t.name,this.clientVersion=n.sdkClientVersion}_initializeWithPersistence(t,e){var n=this;return e&&(this._popupRedirectResolver=qb(e)),this._initializationPromise=this.queue(uf(function*(){var r,i;if(!n._deleted&&(n.persistenceManager=yield V_.create(n,t),!n._deleted)){if(null===(r=n._popupRedirectResolver)||void 0===r?void 0:r._shouldInitProactively)try{yield n._popupRedirectResolver._initialize(n)}catch(s){}yield n.initializeCurrentUser(e),n.lastNotifiedUid=(null===(i=n.currentUser)||void 0===i?void 0:i.uid)||null,n._deleted||(n._isInitialized=!0)}})),this._initializationPromise}_onStorageEvent(){var t=this;return uf(function*(){if(t._deleted)return;const e=yield t.assertedPersistence.getCurrentUser();return t.currentUser||e?t.currentUser&&e&&t.currentUser.uid===e.uid?(t._currentUser._assign(e),void(yield t.currentUser.getIdToken())):void(yield t._updateCurrentUser(e)):void 0})()}initializeCurrentUser(t){var e=this;return uf(function*(){var n;let r=yield e.assertedPersistence.getCurrentUser();if(t&&e.config.authDomain){yield e.getOrInitRedirectPersistenceManager();const i=null===(n=e.redirectUser)||void 0===n?void 0:n._redirectEventId,s=null==r?void 0:r._redirectEventId,o=yield e.tryRedirectSignIn(t);i&&i!==s||!(null==o?void 0:o.user)||(r=o.user)}return r?r._redirectEventId?(Ub(e._popupRedirectResolver,e,"argument-error"),yield e.getOrInitRedirectPersistenceManager(),e.redirectUser&&e.redirectUser._redirectEventId===r._redirectEventId?e.directlySetCurrentUser(r):e.reloadAndSetCurrentUserOrClear(r)):e.reloadAndSetCurrentUserOrClear(r):e.directlySetCurrentUser(null)})()}tryRedirectSignIn(t){var e=this;return uf(function*(){let n=null;try{n=yield e._popupRedirectResolver._completeRedirectFn(e,t,!0)}catch(r){yield e._setRedirectUser(null)}return n})()}reloadAndSetCurrentUserOrClear(t){var e=this;return uf(function*(){try{yield T_(t)}catch(n){if("auth/network-request-failed"!==n.code)return e.directlySetCurrentUser(null)}return e.directlySetCurrentUser(t)})()}useDeviceLanguage(){this.languageCode=function(){if("undefined"==typeof navigator)return null;const t=navigator;return t.languages&&t.languages[0]||t.language||null}()}_delete(){var t=this;return uf(function*(){t._deleted=!0})()}updateCurrentUser(t){var e=this;return uf(function*(){const n=t?Nf(t):null;return n&&Ub(n.auth.config.apiKey===e.config.apiKey,e,"invalid-user-token"),e._updateCurrentUser(n&&n._clone(e))})()}_updateCurrentUser(t){var e=this;return uf(function*(){if(!e._deleted)return t&&Ub(e.tenantId===t.tenantId,e,"tenant-id-mismatch"),e.queue(uf(function*(){yield e.directlySetCurrentUser(t),e.notifyAuthListeners()}))})()}signOut(){var t=this;return uf(function*(){return(t.redirectPersistenceManager||t._popupRedirectResolver)&&(yield t._setRedirectUser(null)),t._updateCurrentUser(null)})()}setPersistence(t){var e=this;return this.queue(uf(function*(){yield e.assertedPersistence.setPersistence(qb(t))}))}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(t){this._errorFactory=new If("auth","Firebase",t())}onAuthStateChanged(t,e,n){return this.registerStateListener(this.authStateSubscription,t,e,n)}onIdTokenChanged(t,e,n){return this.registerStateListener(this.idTokenSubscription,t,e,n)}toJSON(){var t;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:null===(t=this._currentUser)||void 0===t?void 0:t.toJSON()}}_setRedirectUser(t,e){var n=this;return uf(function*(){const r=yield n.getOrInitRedirectPersistenceManager(e);return null===t?r.removeCurrentUser():r.setCurrentUser(t)})()}getOrInitRedirectPersistenceManager(t){var e=this;return uf(function*(){if(!e.redirectPersistenceManager){const n=t&&qb(t)||e._popupRedirectResolver;Ub(n,e,"argument-error"),e.redirectPersistenceManager=yield V_.create(e,[qb(n._redirectPersistence)],"redirectUser"),e.redirectUser=yield e.redirectPersistenceManager.getCurrentUser()}return e.redirectPersistenceManager})()}_redirectUserForId(t){var e=this;return uf(function*(){var n,r;return e._isInitialized&&(yield e.queue(uf(function*(){}))),(null===(n=e._currentUser)||void 0===n?void 0:n._redirectEventId)===t?e._currentUser:(null===(r=e.redirectUser)||void 0===r?void 0:r._redirectEventId)===t?e.redirectUser:null})()}_persistUserIfCurrent(t){var e=this;return uf(function*(){if(t===e.currentUser)return e.queue(uf(function*(){return e.directlySetCurrentUser(t)}))})()}_notifyListenersIfCurrent(t){t===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var t,e;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const n=null!==(e=null===(t=this.currentUser)||void 0===t?void 0:t.uid)&&void 0!==e?e:null;this.lastNotifiedUid!==n&&(this.lastNotifiedUid=n,this.authStateSubscription.next(this.currentUser))}registerStateListener(t,e,n,r){if(this._deleted)return()=>{};const i="function"==typeof e?e:e.next.bind(e),s=this._isInitialized?Promise.resolve():this._initializationPromise;return Ub(s,this,"internal-error"),s.then(()=>i(this.currentUser)),"function"==typeof e?t.addObserver(e,n,r):t.addObserver(e)}directlySetCurrentUser(t){var e=this;return uf(function*(){e.currentUser&&e.currentUser!==t&&(e._currentUser._stopProactiveRefresh(),t&&e.isProactiveRefreshEnabled&&t._startProactiveRefresh()),e.currentUser=t,t?yield e.assertedPersistence.setCurrentUser(t):yield e.assertedPersistence.removeCurrentUser()})()}queue(t){return this.operations=this.operations.then(t,t),this.operations}get assertedPersistence(){return Ub(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(t){t&&!this.frameworks.includes(t)&&(this.frameworks.push(t),this.frameworks.sort(),this.clientVersion=W_(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}_getAdditionalHeaders(){var t=this;return uf(function*(){var e;const n={"X-Client-Version":t.clientVersion};t.app.options.appId&&(n["X-Firebase-gmpid"]=t.app.options.appId);const r=yield null===(e=t.heartbeatServiceProvider.getImmediate({optional:!0}))||void 0===e?void 0:e.getHeartbeatsHeader();return r&&(n["X-Firebase-Client"]=r),n})()}}function Y_(t){return Nf(t)}class J_{constructor(t){this.auth=t,this.observer=null,this.addObserver=function(t,e){const n=new xf(t,void 0);return n.subscribe.bind(n)}(t=>this.observer=t)}get next(){return Ub(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}function X_(t){const e=t.indexOf(":");return e<0?"":t.substr(0,e+1)}function Z_(t){if(!t)return null;const e=Number(t);return isNaN(e)?null:e}class tI{constructor(t,e){this.providerId=t,this.signInMethod=e}toJSON(){return jb("not implemented")}_getIdTokenResponse(t){return jb("not implemented")}_linkToIdToken(t,e){return jb("not implemented")}_getReauthenticationResolver(t){return jb("not implemented")}}function eI(t,e){return nI.apply(this,arguments)}function nI(){return(nI=uf(function*(t,e){return t_(t,"POST","/v1/accounts:resetPassword",Zb(t,e))})).apply(this,arguments)}function rI(t,e){return iI.apply(this,arguments)}function iI(){return(iI=uf(function*(t,e){return t_(t,"POST","/v1/accounts:update",e)})).apply(this,arguments)}function sI(t,e){return oI.apply(this,arguments)}function oI(){return(oI=uf(function*(t,e){return t_(t,"POST","/v1/accounts:update",Zb(t,e))})).apply(this,arguments)}function aI(){return(aI=uf(function*(t,e){return i_(t,"POST","/v1/accounts:signInWithPassword",Zb(t,e))})).apply(this,arguments)}function uI(t,e){return cI.apply(this,arguments)}function cI(){return(cI=uf(function*(t,e){return t_(t,"POST","/v1/accounts:sendOobCode",Zb(t,e))})).apply(this,arguments)}function lI(t,e){return hI.apply(this,arguments)}function hI(){return(hI=uf(function*(t,e){return uI(t,e)})).apply(this,arguments)}function dI(t,e){return fI.apply(this,arguments)}function fI(){return(fI=uf(function*(t,e){return uI(t,e)})).apply(this,arguments)}function pI(t,e){return gI.apply(this,arguments)}function gI(){return(gI=uf(function*(t,e){return uI(t,e)})).apply(this,arguments)}function mI(t,e){return yI.apply(this,arguments)}function yI(){return(yI=uf(function*(t,e){return uI(t,e)})).apply(this,arguments)}function vI(){return(vI=uf(function*(t,e){return i_(t,"POST","/v1/accounts:signInWithEmailLink",Zb(t,e))})).apply(this,arguments)}function wI(){return(wI=uf(function*(t,e){return i_(t,"POST","/v1/accounts:signInWithEmailLink",Zb(t,e))})).apply(this,arguments)}class bI extends tI{constructor(t,e,n,r=null){super("password",n),this._email=t,this._password=e,this._tenantId=r}static _fromEmailAndPassword(t,e){return new bI(t,e,"password")}static _fromEmailAndCode(t,e,n=null){return new bI(t,e,"emailLink",n)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(t){const e="string"==typeof t?JSON.parse(t):t;if((null==e?void 0:e.email)&&(null==e?void 0:e.password)){if("password"===e.signInMethod)return this._fromEmailAndPassword(e.email,e.password);if("emailLink"===e.signInMethod)return this._fromEmailAndCode(e.email,e.password,e.tenantId)}return null}_getIdTokenResponse(t){var e=this;return uf(function*(){switch(e.signInMethod){case"password":return function(t,e){return aI.apply(this,arguments)}(t,{returnSecureToken:!0,email:e._email,password:e._password});case"emailLink":return function(t,e){return vI.apply(this,arguments)}(t,{email:e._email,oobCode:e._password});default:Pb(t,"internal-error")}})()}_linkToIdToken(t,e){var n=this;return uf(function*(){switch(n.signInMethod){case"password":return rI(t,{idToken:e,returnSecureToken:!0,email:n._email,password:n._password});case"emailLink":return function(t,e){return wI.apply(this,arguments)}(t,{idToken:e,email:n._email,oobCode:n._password});default:Pb(t,"internal-error")}})()}_getReauthenticationResolver(t){return this._getIdTokenResponse(t)}}function _I(t,e){return II.apply(this,arguments)}function II(){return(II=uf(function*(t,e){return i_(t,"POST","/v1/accounts:signInWithIdp",Zb(t,e))})).apply(this,arguments)}function SI(t,e){return EI.apply(this,arguments)}function EI(){return(EI=uf(function*(t,e){return t_(t,"POST","/v1/accounts:sendVerificationCode",Zb(t,e))})).apply(this,arguments)}function TI(){return(TI=uf(function*(t,e){return i_(t,"POST","/v1/accounts:signInWithPhoneNumber",Zb(t,e))})).apply(this,arguments)}function CI(){return(CI=uf(function*(t,e){const n=yield i_(t,"POST","/v1/accounts:signInWithPhoneNumber",Zb(t,e));if(n.temporaryProof)throw u_(t,"account-exists-with-different-credential",n);return n})).apply(this,arguments)}const kI={USER_NOT_FOUND:"user-not-found"};function AI(){return(AI=uf(function*(t,e){return i_(t,"POST","/v1/accounts:signInWithPhoneNumber",Zb(t,Object.assign(Object.assign({},e),{operation:"REAUTH"})),kI)})).apply(this,arguments)}class xI extends tI{constructor(t){super("phone","phone"),this.params=t}static _fromVerification(t,e){return new xI({verificationId:t,verificationCode:e})}static _fromTokenResponse(t,e){return new xI({phoneNumber:t,temporaryProof:e})}_getIdTokenResponse(t){return function(t,e){return TI.apply(this,arguments)}(t,this._makeVerificationRequest())}_linkToIdToken(t,e){return function(t,e){return CI.apply(this,arguments)}(t,Object.assign({idToken:e},this._makeVerificationRequest()))}_getReauthenticationResolver(t){return function(t,e){return AI.apply(this,arguments)}(t,this._makeVerificationRequest())}_makeVerificationRequest(){const{temporaryProof:t,phoneNumber:e,verificationId:n,verificationCode:r}=this.params;return t&&e?{temporaryProof:t,phoneNumber:e}:{sessionInfo:n,code:r}}toJSON(){const t={providerId:this.providerId};return this.params.phoneNumber&&(t.phoneNumber=this.params.phoneNumber),this.params.temporaryProof&&(t.temporaryProof=this.params.temporaryProof),this.params.verificationCode&&(t.verificationCode=this.params.verificationCode),this.params.verificationId&&(t.verificationId=this.params.verificationId),t}static fromJSON(t){"string"==typeof t&&(t=JSON.parse(t));const{verificationId:e,verificationCode:n,phoneNumber:r,temporaryProof:i}=t;return n||e||r||i?new xI({verificationId:e,verificationCode:n,phoneNumber:r,temporaryProof:i}):null}}class OI{constructor(t){var e,n,r,i,s,o;const a=kf(Af(t)),u=null!==(e=a.apiKey)&&void 0!==e?e:null,c=null!==(n=a.oobCode)&&void 0!==n?n:null,l=function(t){switch(t){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}(null!==(r=a.mode)&&void 0!==r?r:null);Ub(u&&c&&l,"argument-error"),this.apiKey=u,this.operation=l,this.code=c,this.continueUrl=null!==(i=a.continueUrl)&&void 0!==i?i:null,this.languageCode=null!==(s=a.languageCode)&&void 0!==s?s:null,this.tenantId=null!==(o=a.tenantId)&&void 0!==o?o:null}static parseLink(t){const e=function(t){const e=kf(Af(t)).link,n=e?kf(Af(e)).deep_link_id:null,r=kf(Af(t)).deep_link_id;return(r?kf(Af(r)).link:null)||r||n||e||t}(t);try{return new OI(e)}catch(FF){return null}}}let DI=(()=>{class t{constructor(){this.providerId=t.PROVIDER_ID}static credential(t,e){return bI._fromEmailAndPassword(t,e)}static credentialWithLink(t,e){const n=OI.parseLink(e);return Ub(n,"argument-error"),bI._fromEmailAndCode(t,n.code,n.tenantId)}}return t.PROVIDER_ID="password",t.EMAIL_PASSWORD_SIGN_IN_METHOD="password",t.EMAIL_LINK_SIGN_IN_METHOD="emailLink",t})();class NI{constructor(t){this.providerId=t,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(t){this.defaultLanguageCode=t}setCustomParameters(t){return this.customParameters=t,this}getCustomParameters(){return this.customParameters}}class RI extends NI{constructor(){super(...arguments),this.scopes=[]}addScope(t){return this.scopes.includes(t)||this.scopes.push(t),this}getScopes(){return[...this.scopes]}}function PI(t,e){return MI.apply(this,arguments)}function MI(){return(MI=uf(function*(t,e){return i_(t,"POST","/v1/accounts:signUp",Zb(t,e))})).apply(this,arguments)}class LI{constructor(t){this.user=t.user,this.providerId=t.providerId,this._tokenResponse=t._tokenResponse,this.operationType=t.operationType}static _fromIdTokenResponse(t,e,n,r=!1){return uf(function*(){const i=yield P_._fromIdTokenResponse(t,n,r),s=VI(n);return new LI({user:i,providerId:s,_tokenResponse:n,operationType:e})})()}static _forOperation(t,e,n){return uf(function*(){yield t._updateTokensIfNecessary(n,!0);const r=VI(n);return new LI({user:t,providerId:r,_tokenResponse:n,operationType:e})})()}}function VI(t){return t.providerId?t.providerId:"phoneNumber"in t?"phone":null}function FI(){return(FI=uf(function*(t){var e;const n=Y_(t);if(yield n._initializationPromise,null===(e=n.currentUser)||void 0===e?void 0:e.isAnonymous)return new LI({user:n.currentUser,providerId:null,operationType:"signIn"});const r=yield PI(n,{returnSecureToken:!0}),i=yield LI._fromIdTokenResponse(n,"signIn",r,!0);return yield n._updateCurrentUser(i.user),i})).apply(this,arguments)}class UI extends _f{constructor(t,e,n,r){var i;super(e.code,e.message),this.operationType=n,this.user=r,Object.setPrototypeOf(this,UI.prototype),this.customData={appName:t.name,tenantId:null!==(i=t.tenantId)&&void 0!==i?i:void 0,_serverResponse:e.customData._serverResponse,operationType:n}}static _fromErrorAndOperation(t,e,n,r){return new UI(t,e,n,r)}}function jI(t,e,n,r){return("reauthenticate"===e?n._getReauthenticationResolver(t):n._getIdTokenResponse(t)).catch(n=>{if("auth/multi-factor-auth-required"===n.code)throw UI._fromErrorAndOperation(t,n,e,r);throw n})}function BI(t){return new Set(t.map(({providerId:t})=>t).filter(t=>!!t))}function $I(){return($I=uf(function*(t,e){const n=Nf(t);yield zI(!0,n,e);const{providerUserInfo:r}=yield l_(n.auth,{idToken:yield n.getIdToken(),deleteProvider:[e]}),i=BI(r||[]);return n.providerData=n.providerData.filter(t=>i.has(t.providerId)),i.has("phone")||(n.phoneNumber=null),yield n.auth._persistUserIfCurrent(n),n})).apply(this,arguments)}function qI(t,e){return HI.apply(this,arguments)}function HI(){return(HI=uf(function*(t,e,n=!1){const r=yield b_(t,e._linkToIdToken(t.auth,yield t.getIdToken()),n);return LI._forOperation(t,"link",r)})).apply(this,arguments)}function zI(t,e,n){return KI.apply(this,arguments)}function KI(){return(KI=uf(function*(t,e,n){yield T_(e);const r=!1===t?"provider-already-linked":"no-such-provider";Ub(BI(e.providerData).has(n)===t,e.auth,r)})).apply(this,arguments)}function GI(t,e){return WI.apply(this,arguments)}function WI(){return(WI=uf(function*(t,e,n=!1){const{auth:r}=t,i="reauthenticate";try{const s=yield b_(t,jI(r,i,e,t),n);Ub(s.idToken,r,"internal-error");const o=w_(s.idToken);Ub(o,r,"internal-error");const{sub:a}=o;return Ub(t.uid===a,r,"user-mismatch"),LI._forOperation(t,i,s)}catch(s){throw"auth/user-not-found"===(null==s?void 0:s.code)&&Pb(r,"user-mismatch"),s}})).apply(this,arguments)}function QI(t,e){return YI.apply(this,arguments)}function YI(){return(YI=uf(function*(t,e,n=!1){const r="signIn",i=yield jI(t,r,e),s=yield LI._fromIdTokenResponse(t,r,i);return n||(yield t._updateCurrentUser(s.user)),s})).apply(this,arguments)}function JI(t,e){return XI.apply(this,arguments)}function XI(){return(XI=uf(function*(t,e){return QI(Y_(t),e)})).apply(this,arguments)}function ZI(t,e){return tS.apply(this,arguments)}function tS(){return(tS=uf(function*(t,e){const n=Nf(t);return yield zI(!1,n,e.providerId),qI(n,e)})).apply(this,arguments)}function eS(t,e){return nS.apply(this,arguments)}function nS(){return(nS=uf(function*(t,e){return GI(Nf(t),e)})).apply(this,arguments)}function rS(t,e){return iS.apply(this,arguments)}function iS(){return(iS=uf(function*(t,e){return i_(t,"POST","/v1/accounts:signInWithCustomToken",Zb(t,e))})).apply(this,arguments)}function sS(){return(sS=uf(function*(t,e){const n=Y_(t),r=yield rS(n,{token:e,returnSecureToken:!0}),i=yield LI._fromIdTokenResponse(n,"signIn",r);return yield n._updateCurrentUser(i.user),i})).apply(this,arguments)}class oS{constructor(t,e){this.factorId=t,this.uid=e.mfaEnrollmentId,this.enrollmentTime=new Date(e.enrolledAt).toUTCString(),this.displayName=e.displayName}static _fromServerResponse(t,e){return"phoneInfo"in e?aS._fromServerResponse(t,e):Pb(t,"internal-error")}}class aS extends oS{constructor(t){super("phone",t),this.phoneNumber=t.phoneInfo}static _fromServerResponse(t,e){return new aS(e)}}function uS(t,e,n){var r;Ub((null===(r=n.url)||void 0===r?void 0:r.length)>0,t,"invalid-continue-uri"),Ub(void 0===n.dynamicLinkDomain||n.dynamicLinkDomain.length>0,t,"invalid-dynamic-link-domain"),e.continueUrl=n.url,e.dynamicLinkDomain=n.dynamicLinkDomain,e.canHandleCodeInApp=n.handleCodeInApp,n.iOS&&(Ub(n.iOS.bundleId.length>0,t,"missing-ios-bundle-id"),e.iOSBundleId=n.iOS.bundleId),n.android&&(Ub(n.android.packageName.length>0,t,"missing-android-pkg-name"),e.androidInstallApp=n.android.installApp,e.androidMinimumVersionCode=n.android.minimumVersion,e.androidPackageName=n.android.packageName)}function cS(){return(cS=uf(function*(t,e,n){const r=Nf(t),i={requestType:"PASSWORD_RESET",email:e};n&&uS(r,i,n),yield dI(r,i)})).apply(this,arguments)}function lS(){return(lS=uf(function*(t,e,n){yield eI(Nf(t),{oobCode:e,newPassword:n})})).apply(this,arguments)}function hS(){return(hS=uf(function*(t,e){yield sI(Nf(t),{oobCode:e})})).apply(this,arguments)}function dS(t,e){return fS.apply(this,arguments)}function fS(){return(fS=uf(function*(t,e){const n=Nf(t),r=yield eI(n,{oobCode:e}),i=r.requestType;switch(Ub(i,n,"internal-error"),i){case"EMAIL_SIGNIN":break;case"VERIFY_AND_CHANGE_EMAIL":Ub(r.newEmail,n,"internal-error");break;case"REVERT_SECOND_FACTOR_ADDITION":Ub(r.mfaInfo,n,"internal-error");default:Ub(r.email,n,"internal-error")}let s=null;return r.mfaInfo&&(s=oS._fromServerResponse(Y_(n),r.mfaInfo)),{data:{email:("VERIFY_AND_CHANGE_EMAIL"===r.requestType?r.newEmail:r.email)||null,previousEmail:("VERIFY_AND_CHANGE_EMAIL"===r.requestType?r.email:r.newEmail)||null,multiFactorInfo:s},operation:i}})).apply(this,arguments)}function pS(){return(pS=uf(function*(t,e){const{data:n}=yield dS(Nf(t),e);return n.email})).apply(this,arguments)}function gS(){return(gS=uf(function*(t,e,n){const r=Y_(t),i=yield PI(r,{returnSecureToken:!0,email:e,password:n}),s=yield LI._fromIdTokenResponse(r,"signIn",i);return yield r._updateCurrentUser(s.user),s})).apply(this,arguments)}function mS(t,e,n){return JI(Nf(t),DI.credential(e,n))}function yS(){return(yS=uf(function*(t,e,n){const r=Nf(t),i={requestType:"EMAIL_SIGNIN",email:e};Ub(n.handleCodeInApp,r,"argument-error"),n&&uS(r,i,n),yield pI(r,i)})).apply(this,arguments)}function vS(){return(vS=uf(function*(t,e,n){const r=Nf(t),i=DI.credentialWithLink(e,n||zb());return Ub(i._tenantId===(r.tenantId||null),r,"tenant-id-mismatch"),JI(r,i)})).apply(this,arguments)}function wS(t,e){return bS.apply(this,arguments)}function bS(){return(bS=uf(function*(t,e){return t_(t,"POST","/v1/accounts:createAuthUri",Zb(t,e))})).apply(this,arguments)}function _S(){return(_S=uf(function*(t,e){const n={identifier:e,continueUri:Kb()?zb():"http://localhost"},{signinMethods:r}=yield wS(Nf(t),n);return r||[]})).apply(this,arguments)}function IS(){return(IS=uf(function*(t,e){const n=Nf(t),r={requestType:"VERIFY_EMAIL",idToken:yield t.getIdToken()};e&&uS(n.auth,r,e);const{email:i}=yield lI(n.auth,r);i!==t.email&&(yield t.reload())})).apply(this,arguments)}function SS(){return(SS=uf(function*(t,e,n){const r=Nf(t),i={requestType:"VERIFY_AND_CHANGE_EMAIL",idToken:yield t.getIdToken(),newEmail:e};n&&uS(r.auth,i,n);const{email:s}=yield mI(r.auth,i);s!==t.email&&(yield t.reload())})).apply(this,arguments)}function ES(t,e){return TS.apply(this,arguments)}function TS(){return(TS=uf(function*(t,e){return t_(t,"POST","/v1/accounts:update",e)})).apply(this,arguments)}function CS(){return(CS=uf(function*(t,{displayName:e,photoURL:n}){if(void 0===e&&void 0===n)return;const r=Nf(t),i={idToken:yield r.getIdToken(),displayName:e,photoUrl:n,returnSecureToken:!0},s=yield b_(r,ES(r.auth,i));r.displayName=s.displayName||null,r.photoURL=s.photoUrl||null;const o=r.providerData.find(({providerId:t})=>"password"===t);o&&(o.displayName=r.displayName,o.photoURL=r.photoURL),yield r._updateTokensIfNecessary(s)})).apply(this,arguments)}function kS(t,e,n){return AS.apply(this,arguments)}function AS(){return(AS=uf(function*(t,e,n){const{auth:r}=t,i={idToken:yield t.getIdToken(),returnSecureToken:!0};e&&(i.email=e),n&&(i.password=n);const s=yield b_(t,rI(r,i));yield t._updateTokensIfNecessary(s,!0)})).apply(this,arguments)}class xS{constructor(t,e,n={}){this.isNewUser=t,this.providerId=e,this.profile=n}}class OS extends xS{constructor(t,e,n,r){super(t,e,n),this.username=r}}class DS extends xS{constructor(t,e){super(t,"facebook.com",e)}}class NS extends OS{constructor(t,e){super(t,"github.com",e,"string"==typeof(null==e?void 0:e.login)?null==e?void 0:e.login:null)}}class RS extends xS{constructor(t,e){super(t,"google.com",e)}}class PS extends OS{constructor(t,e,n){super(t,"twitter.com",e,n)}}function MS(t,e,n,r){return Nf(t).onIdTokenChanged(e,n,r)}function LS(t,e,n,r){return Nf(t).onAuthStateChanged(e,n,r)}function VS(){return(VS=uf(function*(t){return Nf(t).delete()})).apply(this,arguments)}class FS{constructor(t,e){this.type=t,this.credential=e}static _fromIdtoken(t){return new FS("enroll",t)}static _fromMfaPendingCredential(t){return new FS("signin",t)}toJSON(){return{multiFactorSession:{["enroll"===this.type?"idToken":"pendingCredential"]:this.credential}}}static fromJSON(t){var e,n;if(null==t?void 0:t.multiFactorSession){if(null===(e=t.multiFactorSession)||void 0===e?void 0:e.pendingCredential)return FS._fromMfaPendingCredential(t.multiFactorSession.pendingCredential);if(null===(n=t.multiFactorSession)||void 0===n?void 0:n.idToken)return FS._fromIdtoken(t.multiFactorSession.idToken)}return null}}class US{constructor(t,e,n){this.session=t,this.hints=e,this.signInResolver=n}static _fromError(t,e){const n=Y_(t),r=e.customData._serverResponse,i=(r.mfaInfo||[]).map(t=>oS._fromServerResponse(n,t));Ub(r.mfaPendingCredential,n,"internal-error");const s=FS._fromMfaPendingCredential(r.mfaPendingCredential);return new US(s,i,function(){var t=uf(function*(t){const i=yield t._process(n,s);delete r.mfaInfo,delete r.mfaPendingCredential;const o=Object.assign(Object.assign({},r),{idToken:i.idToken,refreshToken:i.refreshToken});switch(e.operationType){case"signIn":const t=yield LI._fromIdTokenResponse(n,e.operationType,o);return yield n._updateCurrentUser(t.user),t;case"reauthenticate":return Ub(e.user,n,"internal-error"),LI._forOperation(e.user,e.operationType,o);default:Pb(n,"internal-error")}});return function(e){return t.apply(this,arguments)}}())}resolveSignIn(t){var e=this;return uf(function*(){return e.signInResolver(t)})()}}function jS(t,e){return t_(t,"POST","/v2/accounts/mfaEnrollment:start",Zb(t,e))}class BS{constructor(t){this.user=t,this.enrolledFactors=[],t._onReload(e=>{e.mfaInfo&&(this.enrolledFactors=e.mfaInfo.map(e=>oS._fromServerResponse(t.auth,e)))})}static _fromUser(t){return new BS(t)}getSession(){var t=this;return uf(function*(){return FS._fromIdtoken(yield t.user.getIdToken())})()}enroll(t,e){var n=this;return uf(function*(){const r=t,i=yield n.getSession(),s=yield b_(n.user,r._process(n.user.auth,i,e));return yield n.user._updateTokensIfNecessary(s),n.user.reload()})()}unenroll(t){var e=this;return uf(function*(){const n="string"==typeof t?t:t.uid,r=yield e.user.getIdToken(),i=yield b_(e.user,(s=e.user.auth,o={idToken:r,mfaEnrollmentId:n},t_(s,"POST","/v2/accounts/mfaEnrollment:withdraw",Zb(s,o))));var s,o;e.enrolledFactors=e.enrolledFactors.filter(({uid:t})=>t!==n),yield e.user._updateTokensIfNecessary(i);try{yield e.user.reload()}catch(a){if("auth/user-token-expired"!==a.code)throw a}})()}}const $S=new WeakMap,qS="__sak";class HS{constructor(t,e){this.storageRetriever=t,this.type=e}_isAvailable(){try{return this.storage?(this.storage.setItem(qS,"1"),this.storage.removeItem(qS),Promise.resolve(!0)):Promise.resolve(!1)}catch(FF){return Promise.resolve(!1)}}_set(t,e){return this.storage.setItem(t,JSON.stringify(e)),Promise.resolve()}_get(t){const e=this.storage.getItem(t);return Promise.resolve(e?JSON.parse(e):null)}_remove(t){return this.storage.removeItem(t),Promise.resolve()}get storage(){return this.storageRetriever()}}const zS=(()=>{class t extends HS{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(t,e)=>this.onStorageEvent(t,e),this.listeners={},this.localCache={},this.pollTimer=null,this.safariLocalStorageNotSynced=function(){const t=ff();return j_(t)||K_(t)}()&&function(){try{return!(!window||window===window.top)}catch(t){return!1}}(),this.fallbackToPolling=G_(),this._shouldAllowMigration=!0}forAllChangedKeys(t){for(const e of Object.keys(this.listeners)){const n=this.storage.getItem(e),r=this.localCache[e];n!==r&&t(e,r,n)}}onStorageEvent(t,e=!1){if(!t.key)return void this.forAllChangedKeys((t,e,n)=>{this.notifyListeners(t,n)});const n=t.key;if(e?this.detachListener():this.stopPolling(),this.safariLocalStorageNotSynced){const r=this.storage.getItem(n);if(t.newValue!==r)null!==t.newValue?this.storage.setItem(n,t.newValue):this.storage.removeItem(n);else if(this.localCache[n]===t.newValue&&!e)return}const r=()=>{const t=this.storage.getItem(n);(e||this.localCache[n]!==t)&&this.notifyListeners(n,t)},i=this.storage.getItem(n);yf()&&10===document.documentMode&&i!==t.newValue&&t.newValue!==t.oldValue?setTimeout(r,10):r()}notifyListeners(t,e){this.localCache[t]=e;const n=this.listeners[t];if(n)for(const r of Array.from(n))r(e?JSON.parse(e):e)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((t,e,n)=>{this.onStorageEvent(new StorageEvent("storage",{key:t,oldValue:e,newValue:n}),!0)})},1e3)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(t,e){0===Object.keys(this.listeners).length&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[t]||(this.listeners[t]=new Set,this.localCache[t]=this.storage.getItem(t)),this.listeners[t].add(e)}_removeListener(t,e){this.listeners[t]&&(this.listeners[t].delete(e),0===this.listeners[t].size&&delete this.listeners[t]),0===Object.keys(this.listeners).length&&(this.detachListener(),this.stopPolling())}_set(t,e){var n=()=>super._set,r=this;return uf(function*(){yield n().call(r,t,e),r.localCache[t]=JSON.stringify(e)})()}_get(t){var e=()=>super._get,n=this;return uf(function*(){const r=yield e().call(n,t);return n.localCache[t]=JSON.stringify(r),r})()}_remove(t){var e=()=>super._remove,n=this;return uf(function*(){yield e().call(n,t),delete n.localCache[t]})()}}return t.type="LOCAL",t})(),KS=(()=>{class t extends HS{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(t,e){}_removeListener(t,e){}}return t.type="SESSION",t})();let GS=(()=>{class t{constructor(t){this.eventTarget=t,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const n=this.receivers.find(t=>t.isListeningto(e));if(n)return n;const r=new t(e);return this.receivers.push(r),r}isListeningto(t){return this.eventTarget===t}handleEvent(t){var e=this;return uf(function*(){const n=t,{eventId:r,eventType:i,data:s}=n.data,o=e.handlersMap[i];if(!(null==o?void 0:o.size))return;n.ports[0].postMessage({status:"ack",eventId:r,eventType:i});const a=Array.from(o).map(function(){var t=uf(function*(t){return t(n.origin,s)});return function(e){return t.apply(this,arguments)}}()),u=yield function(t){return Promise.all(t.map(function(){var t=uf(function*(t){try{return{fulfilled:!0,value:yield t}}catch(e){return{fulfilled:!1,reason:e}}});return function(e){return t.apply(this,arguments)}}()))}(a);n.ports[0].postMessage({status:"done",eventId:r,eventType:i,response:u})})()}_subscribe(t,e){0===Object.keys(this.handlersMap).length&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[t]||(this.handlersMap[t]=new Set),this.handlersMap[t].add(e)}_unsubscribe(t,e){this.handlersMap[t]&&e&&this.handlersMap[t].delete(e),e&&0!==this.handlersMap[t].size||delete this.handlersMap[t],0===Object.keys(this.handlersMap).length&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}return t.receivers=[],t})();function WS(t="",e=10){let n="";for(let r=0;r<e;r++)n+=Math.floor(10*Math.random());return t+n}class QS{constructor(t){this.target=t,this.handlers=new Set}removeMessageHandler(t){t.messageChannel&&(t.messageChannel.port1.removeEventListener("message",t.onMessage),t.messageChannel.port1.close()),this.handlers.delete(t)}_send(t,e,n=50){var r=this;return uf(function*(){const i="undefined"!=typeof MessageChannel?new MessageChannel:null;if(!i)throw new Error("connection_unavailable");let s,o;return new Promise((a,u)=>{const c=WS("",20);i.port1.start();const l=setTimeout(()=>{u(new Error("unsupported_event"))},n);o={messageChannel:i,onMessage(t){const e=t;if(e.data.eventId===c)switch(e.data.status){case"ack":clearTimeout(l),s=setTimeout(()=>{u(new Error("timeout"))},3e3);break;case"done":clearTimeout(s),a(e.data.response);break;default:clearTimeout(l),clearTimeout(s),u(new Error("invalid_response"))}}},r.handlers.add(o),i.port1.addEventListener("message",o.onMessage),r.target.postMessage({eventType:t,eventId:c,data:e},[i.port2])}).finally(()=>{o&&r.removeMessageHandler(o)})})()}}function YS(){return window}function JS(){return void 0!==YS().WorkerGlobalScope&&"function"==typeof YS().importScripts}function XS(){return(XS=uf(function*(){if(!(null===navigator||void 0===navigator?void 0:navigator.serviceWorker))return null;try{return(yield navigator.serviceWorker.ready).active}catch(FF){return null}})).apply(this,arguments)}const ZS="firebaseLocalStorageDb",tE="firebaseLocalStorage",eE="fbase_key";class nE{constructor(t){this.request=t}toPromise(){return new Promise((t,e)=>{this.request.addEventListener("success",()=>{t(this.request.result)}),this.request.addEventListener("error",()=>{e(this.request.error)})})}}function rE(t,e){return t.transaction([tE],e?"readwrite":"readonly").objectStore(tE)}function iE(){const t=indexedDB.open(ZS,1);return new Promise((e,n)=>{t.addEventListener("error",()=>{n(t.error)}),t.addEventListener("upgradeneeded",()=>{const e=t.result;try{e.createObjectStore(tE,{keyPath:eE})}catch(r){n(r)}}),t.addEventListener("success",uf(function*(){const n=t.result;n.objectStoreNames.contains(tE)?e(n):(n.close(),yield function(){const t=indexedDB.deleteDatabase(ZS);return new nE(t).toPromise()}(),e(yield iE()))}))})}function sE(t,e,n){return oE.apply(this,arguments)}function oE(){return(oE=uf(function*(t,e,n){const r=rE(t,!0).put({[eE]:e,value:n});return new nE(r).toPromise()})).apply(this,arguments)}function aE(){return(aE=uf(function*(t,e){const n=rE(t,!1).get(e),r=yield new nE(n).toPromise();return void 0===r?null:r.value})).apply(this,arguments)}function uE(t,e){const n=rE(t,!0).delete(e);return new nE(n).toPromise()}const cE=(()=>{class t{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}_openDb(){var t=this;return uf(function*(){return t.db||(t.db=yield iE()),t.db})()}_withRetries(t){var e=this;return uf(function*(){let n=0;for(;;)try{const n=yield e._openDb();return yield t(n)}catch(r){if(n++>3)throw r;e.db&&(e.db.close(),e.db=void 0)}})()}initializeServiceWorkerMessaging(){var t=this;return uf(function*(){return JS()?t.initializeReceiver():t.initializeSender()})()}initializeReceiver(){var t=this;return uf(function*(){t.receiver=GS._getInstance(JS()?self:null),t.receiver._subscribe("keyChanged",function(){var e=uf(function*(e,n){return{keyProcessed:(yield t._poll()).includes(n.key)}});return function(t,n){return e.apply(this,arguments)}}()),t.receiver._subscribe("ping",function(){var t=uf(function*(t,e){return["keyChanged"]});return function(e,n){return t.apply(this,arguments)}}())})()}initializeSender(){var t=this;return uf(function*(){var e,n;if(t.activeServiceWorker=yield function(){return XS.apply(this,arguments)}(),!t.activeServiceWorker)return;t.sender=new QS(t.activeServiceWorker);const r=yield t.sender._send("ping",{},800);r&&(null===(e=r[0])||void 0===e?void 0:e.fulfilled)&&(null===(n=r[0])||void 0===n?void 0:n.value.includes("keyChanged"))&&(t.serviceWorkerReceiverAvailable=!0)})()}notifyServiceWorker(t){var e=this;return uf(function*(){if(e.sender&&e.activeServiceWorker&&function(){var t;return(null===(t=null===navigator||void 0===navigator?void 0:navigator.serviceWorker)||void 0===t?void 0:t.controller)||null}()===e.activeServiceWorker)try{yield e.sender._send("keyChanged",{key:t},e.serviceWorkerReceiverAvailable?800:50)}catch(FF){}})()}_isAvailable(){return uf(function*(){try{if(!indexedDB)return!1;const t=yield iE();return yield sE(t,qS,"1"),yield uE(t,qS),!0}catch(FF){}return!1})()}_withPendingWrite(t){var e=this;return uf(function*(){e.pendingWrites++;try{yield t()}finally{e.pendingWrites--}})()}_set(t,e){var n=this;return uf(function*(){return n._withPendingWrite(uf(function*(){return yield n._withRetries(n=>sE(n,t,e)),n.localCache[t]=e,n.notifyServiceWorker(t)}))})()}_get(t){var e=this;return uf(function*(){const n=yield e._withRetries(e=>function(t,e){return aE.apply(this,arguments)}(e,t));return e.localCache[t]=n,n})()}_remove(t){var e=this;return uf(function*(){return e._withPendingWrite(uf(function*(){return yield e._withRetries(e=>uE(e,t)),delete e.localCache[t],e.notifyServiceWorker(t)}))})()}_poll(){var t=this;return uf(function*(){const e=yield t._withRetries(t=>{const e=rE(t,!1).getAll();return new nE(e).toPromise()});if(!e)return[];if(0!==t.pendingWrites)return[];const n=[],r=new Set;for(const{fbase_key:i,value:s}of e)r.add(i),JSON.stringify(t.localCache[i])!==JSON.stringify(s)&&(t.notifyListeners(i,s),n.push(i));for(const i of Object.keys(t.localCache))t.localCache[i]&&!r.has(i)&&(t.notifyListeners(i,null),n.push(i));return n})()}notifyListeners(t,e){this.localCache[t]=e;const n=this.listeners[t];if(n)for(const r of Array.from(n))r(e)}startPolling(){var t=this;this.stopPolling(),this.pollTimer=setInterval(uf(function*(){return t._poll()}),800)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(t,e){0===Object.keys(this.listeners).length&&this.startPolling(),this.listeners[t]||(this.listeners[t]=new Set,this._get(t)),this.listeners[t].add(e)}_removeListener(t,e){this.listeners[t]&&(this.listeners[t].delete(e),0===this.listeners[t].size&&delete this.listeners[t]),0===Object.keys(this.listeners).length&&this.stopPolling()}}return t.type="LOCAL",t})();function lE(t,e){return t_(t,"POST","/v2/accounts/mfaSignIn:start",Zb(t,e))}function hE(t){return`__${t}${Math.floor(1e6*Math.random())}`}hE("rcb"),new Wb(3e4,6e4);const dE="recaptcha";class fE{constructor(t,e){this.verificationId=t,this.onConfirmation=e}confirm(t){const e=xI._fromVerification(this.verificationId,t);return this.onConfirmation(e)}}function pE(){return(pE=uf(function*(t,e,n){const r=Y_(t),i=yield yE(r,e,Nf(n));return new fE(i,t=>JI(r,t))})).apply(this,arguments)}function gE(){return(gE=uf(function*(t,e,n){const r=Nf(t);yield zI(!1,r,"phone");const i=yield yE(r.auth,e,Nf(n));return new fE(i,t=>ZI(r,t))})).apply(this,arguments)}function mE(){return(mE=uf(function*(t,e,n){const r=Nf(t),i=yield yE(r.auth,e,Nf(n));return new fE(i,t=>eS(r,t))})).apply(this,arguments)}function yE(t,e,n){return vE.apply(this,arguments)}function vE(){return(vE=uf(function*(t,e,n){var r;const i=yield n.verify();try{let s;if(Ub("string"==typeof i,t,"argument-error"),Ub(n.type===dE,t,"argument-error"),s="string"==typeof e?{phoneNumber:e}:e,"session"in s){const e=s.session;if("phoneNumber"in s)return Ub("enroll"===e.type,t,"internal-error"),(yield jS(t,{idToken:e.credential,phoneEnrollmentInfo:{phoneNumber:s.phoneNumber,recaptchaToken:i}})).phoneSessionInfo.sessionInfo;{Ub("signin"===e.type,t,"internal-error");const n=(null===(r=s.multiFactorHint)||void 0===r?void 0:r.uid)||s.multiFactorUid;return Ub(n,t,"missing-multi-factor-info"),(yield lE(t,{mfaPendingCredential:e.credential,mfaEnrollmentId:n,phoneSignInInfo:{recaptchaToken:i}})).phoneResponseInfo.sessionInfo}}{const{sessionInfo:e}=yield SI(t,{phoneNumber:s.phoneNumber,recaptchaToken:i});return e}}finally{n._reset()}})).apply(this,arguments)}function wE(){return(wE=uf(function*(t,e){yield qI(Nf(t),e)})).apply(this,arguments)}function bE(t,e){return e?qb(e):(Ub(t._popupRedirectResolver,t,"argument-error"),t._popupRedirectResolver)}class _E extends tI{constructor(t){super("custom","custom"),this.params=t}_getIdTokenResponse(t){return _I(t,this._buildIdpRequest())}_linkToIdToken(t,e){return _I(t,this._buildIdpRequest(e))}_getReauthenticationResolver(t){return _I(t,this._buildIdpRequest())}_buildIdpRequest(t){const e={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return t&&(e.idToken=t),e}}function IE(t){return QI(t.auth,new _E(t),t.bypassAuthState)}function SE(t){const{auth:e,user:n}=t;return Ub(n,e,"internal-error"),GI(n,new _E(t),t.bypassAuthState)}function EE(t){return TE.apply(this,arguments)}function TE(){return(TE=uf(function*(t){const{auth:e,user:n}=t;return Ub(n,e,"internal-error"),qI(n,new _E(t),t.bypassAuthState)})).apply(this,arguments)}class CE{constructor(t,e,n,r,i=!1){this.auth=t,this.resolver=n,this.user=r,this.bypassAuthState=i,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(e)?e:[e]}execute(){var t=this;return new Promise(function(){var e=uf(function*(e,n){t.pendingPromise={resolve:e,reject:n};try{t.eventManager=yield t.resolver._initialize(t.auth),yield t.onExecution(),t.eventManager.registerConsumer(t)}catch(r){t.reject(r)}});return function(t,n){return e.apply(this,arguments)}}())}onAuthEvent(t){var e=this;return uf(function*(){const{urlResponse:n,sessionId:r,postBody:i,tenantId:s,error:o,type:a}=t;if(o)return void e.reject(o);const u={auth:e.auth,requestUri:n,sessionId:r,tenantId:s||void 0,postBody:i||void 0,user:e.user,bypassAuthState:e.bypassAuthState};try{e.resolve(yield e.getIdpTask(a)(u))}catch(c){e.reject(c)}})()}onError(t){this.reject(t)}getIdpTask(t){switch(t){case"signInViaPopup":case"signInViaRedirect":return IE;case"linkViaPopup":case"linkViaRedirect":return EE;case"reauthViaPopup":case"reauthViaRedirect":return SE;default:Pb(this.auth,"internal-error")}}resolve(t){Bb(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(t),this.unregisterAndCleanUp()}reject(t){Bb(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(t),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}const kE=new Wb(2e3,1e4);function AE(){return(AE=uf(function*(t,e,n){const r=Y_(t);Vb(t,e,NI);const i=bE(r,n);return new DE(r,"signInViaPopup",e,i).executeNotNull()})).apply(this,arguments)}function xE(){return(xE=uf(function*(t,e,n){const r=Nf(t);Vb(r.auth,e,NI);const i=bE(r.auth,n);return new DE(r.auth,"reauthViaPopup",e,i,r).executeNotNull()})).apply(this,arguments)}function OE(){return(OE=uf(function*(t,e,n){const r=Nf(t);Vb(r.auth,e,NI);const i=bE(r.auth,n);return new DE(r.auth,"linkViaPopup",e,i,r).executeNotNull()})).apply(this,arguments)}let DE=(()=>{class t extends CE{constructor(e,n,r,i,s){super(e,n,i,s),this.provider=r,this.authWindow=null,this.pollId=null,t.currentPopupAction&&t.currentPopupAction.cancel(),t.currentPopupAction=this}executeNotNull(){var t=this;return uf(function*(){const e=yield t.execute();return Ub(e,t.auth,"internal-error"),e})()}onExecution(){var t=this;return uf(function*(){Bb(1===t.filter.length,"Popup operations only handle one event");const e=WS();t.authWindow=yield t.resolver._openPopup(t.auth,t.provider,t.filter[0],e),t.authWindow.associatedEvent=e,t.resolver._originValidation(t.auth).catch(e=>{t.reject(e)}),t.resolver._isIframeWebStorageSupported(t.auth,e=>{e||t.reject(Mb(t.auth,"web-storage-unsupported"))}),t.pollUserCancellation()})()}get eventId(){var t;return(null===(t=this.authWindow)||void 0===t?void 0:t.associatedEvent)||null}cancel(){this.reject(Mb(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,t.currentPopupAction=null}pollUserCancellation(){const t=()=>{var e,n;this.pollId=(null===(n=null===(e=this.authWindow)||void 0===e?void 0:e.window)||void 0===n?void 0:n.closed)?window.setTimeout(()=>{this.pollId=null,this.reject(Mb(this.auth,"popup-closed-by-user"))},2e3):window.setTimeout(t,kE.get())};t()}}return t.currentPopupAction=null,t})();const NE=new Map;class RE extends CE{constructor(t,e,n=!1){super(t,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],e,void 0,n),this.eventId=null}execute(){var t=()=>super.execute,e=this;return uf(function*(){let n=NE.get(e.auth._key());if(!n){try{const r=(yield function(t,e){return PE.apply(this,arguments)}(e.resolver,e.auth))?yield t().call(e):null;n=()=>Promise.resolve(r)}catch(r){n=()=>Promise.reject(r)}NE.set(e.auth._key(),n)}return e.bypassAuthState||NE.set(e.auth._key(),()=>Promise.resolve(null)),n()})()}onAuthEvent(t){var e=()=>super.onAuthEvent,n=this;return uf(function*(){if("signInViaRedirect"===t.type)return e().call(n,t);if("unknown"!==t.type){if(t.eventId){const r=yield n.auth._redirectUserForId(t.eventId);if(r)return n.user=r,e().call(n,t);n.resolve(null)}}else n.resolve(null)})()}onExecution(){return uf(function*(){})()}cleanUp(){}}function PE(){return(PE=uf(function*(t,e){const n=FE(e),r=VE(t);if(!(yield r._isAvailable()))return!1;const i="true"===(yield r._get(n));return yield r._remove(n),i})).apply(this,arguments)}function ME(t,e){return LE.apply(this,arguments)}function LE(){return(LE=uf(function*(t,e){return VE(t)._set(FE(e),"true")})).apply(this,arguments)}function VE(t){return qb(t._redirectPersistence)}function FE(t){return L_("pendingRedirect",t.config.apiKey,t.name)}function UE(){return(UE=uf(function*(t,e,n){const r=Y_(t);Vb(t,e,NI);const i=bE(r,n);return yield ME(i,r),i._openRedirect(r,e,"signInViaRedirect")})).apply(this,arguments)}function jE(){return(jE=uf(function*(t,e,n){const r=Nf(t);Vb(r.auth,e,NI);const i=bE(r.auth,n);yield ME(i,r.auth);const s=yield zE(r);return i._openRedirect(r.auth,e,"reauthViaRedirect",s)})).apply(this,arguments)}function BE(){return(BE=uf(function*(t,e,n){const r=Nf(t);Vb(r.auth,e,NI);const i=bE(r.auth,n);yield zI(!1,r,e.providerId),yield ME(i,r.auth);const s=yield zE(r);return i._openRedirect(r.auth,e,"linkViaRedirect",s)})).apply(this,arguments)}function $E(){return($E=uf(function*(t,e){return yield Y_(t)._initializationPromise,qE(t,e,!1)})).apply(this,arguments)}function qE(t,e){return HE.apply(this,arguments)}function HE(){return(HE=uf(function*(t,e,n=!1){const r=Y_(t),i=bE(r,e),s=new RE(r,i,n),o=yield s.execute();return o&&!n&&(delete o.user._redirectEventId,yield r._persistUserIfCurrent(o.user),yield r._setRedirectUser(null,e)),o})).apply(this,arguments)}function zE(t){return KE.apply(this,arguments)}function KE(){return(KE=uf(function*(t){const e=WS(`${t.uid}:::`);return t._redirectEventId=e,yield t.auth._setRedirectUser(t),yield t.auth._persistUserIfCurrent(t),e})).apply(this,arguments)}class GE{constructor(t){this.auth=t,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(t){this.consumers.add(t),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,t)&&(this.sendToConsumer(this.queuedRedirectEvent,t),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(t){this.consumers.delete(t)}onEvent(t){if(this.hasEventBeenHandled(t))return!1;let e=!1;return this.consumers.forEach(n=>{this.isEventForConsumer(t,n)&&(e=!0,this.sendToConsumer(t,n),this.saveEventToCache(t))}),this.hasHandledPotentialRedirect||!function(t){switch(t.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return QE(t);default:return!1}}(t)||(this.hasHandledPotentialRedirect=!0,e||(this.queuedRedirectEvent=t,e=!0)),e}sendToConsumer(t,e){var n;if(t.error&&!QE(t)){const r=(null===(n=t.error.code)||void 0===n?void 0:n.split("auth/")[1])||"internal-error";e.onError(Mb(this.auth,r))}else e.onAuthEvent(t)}isEventForConsumer(t,e){const n=null===e.eventId||!!t.eventId&&t.eventId===e.eventId;return e.filter.includes(t.type)&&n}hasEventBeenHandled(t){return Date.now()-this.lastProcessedEventTime>=6e5&&this.cachedEventUids.clear(),this.cachedEventUids.has(WE(t))}saveEventToCache(t){this.cachedEventUids.add(WE(t)),this.lastProcessedEventTime=Date.now()}}function WE(t){return[t.type,t.eventId,t.sessionId,t.tenantId].filter(t=>t).join("-")}function QE({type:t,error:e}){return"unknown"===t&&"auth/no-auth-event"===(null==e?void 0:e.code)}function YE(t){return JE.apply(this,arguments)}function JE(){return(JE=uf(function*(t,e={}){return t_(t,"GET","/v1/projects",e)})).apply(this,arguments)}const XE=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,ZE=/^https?/;function tT(){return(tT=uf(function*(t){if(t.config.emulator)return;const{authorizedDomains:e}=yield YE(t);for(const n of e)try{if(eT(n))return}catch(FF){}Pb(t,"unauthorized-domain")})).apply(this,arguments)}function eT(t){const e=zb(),{protocol:n,hostname:r}=new URL(e);if(t.startsWith("chrome-extension://")){const i=new URL(t);return""===i.hostname&&""===r?"chrome-extension:"===n&&t.replace("chrome-extension://","")===e.replace("chrome-extension://",""):"chrome-extension:"===n&&i.hostname===r}if(!ZE.test(n))return!1;if(XE.test(t))return r===t;const i=t.replace(/\./g,"\\.");return new RegExp("^(.+\\."+i+"|"+i+")$","i").test(r)}const nT=new Wb(3e4,6e4);function rT(){const t=YS().___jsl;if(null==t?void 0:t.H)for(const e of Object.keys(t.H))if(t.H[e].r=t.H[e].r||[],t.H[e].L=t.H[e].L||[],t.H[e].r=[...t.H[e].L],t.CP)for(let n=0;n<t.CP.length;n++)t.CP[n]=null}let iT=null;function sT(t){return iT=iT||function(t){return new Promise((e,n)=>{var r,i,s,o;function a(){rT(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{rT(),n(Mb(t,"network-request-failed"))},timeout:nT.get()})}if(null===(i=null===(r=YS().gapi)||void 0===r?void 0:r.iframes)||void 0===i?void 0:i.Iframe)e(gapi.iframes.getContext());else{if(!(null===(s=YS().gapi)||void 0===s?void 0:s.load)){const e=hE("iframefcb");return YS()[e]=()=>{gapi.load?a():n(Mb(t,"network-request-failed"))},(o=`https://apis.google.com/js/api.js?onload=${e}`,new Promise((t,e)=>{const n=document.createElement("script");n.setAttribute("src",o),n.onload=t,n.onerror=t=>{const n=Mb("internal-error");n.customData=t,e(n)},n.type="text/javascript",n.charset="UTF-8",function(){var t,e;return null!==(e=null===(t=document.getElementsByTagName("head"))||void 0===t?void 0:t[0])&&void 0!==e?e:document}().appendChild(n)})).catch(t=>n(t))}a()}}).catch(t=>{throw iT=null,t})}(t),iT}const oT=new Wb(5e3,15e3),aT={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},uT=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function cT(t){const e=t.config;Ub(e.authDomain,t,"auth-domain-config-required");const n=e.emulator?Qb(e,"emulator/auth/iframe"):`https://${t.config.authDomain}/__/auth/iframe`,r={apiKey:e.apiKey,appName:t.name,v:hp},i=uT.get(t.config.apiHost);i&&(r.eid=i);const s=t._getFrameworks();return s.length&&(r.fw=s.join(",")),`${n}?${Cf(r).slice(1)}`}function lT(){return(lT=uf(function*(t){const e=yield sT(t),n=YS().gapi;return Ub(n,t,"internal-error"),e.open({where:document.body,url:cT(t),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:aT,dontclear:!0},e=>new Promise(function(){var n=uf(function*(n,r){yield e.restyle({setHideOnLeave:!1});const i=Mb(t,"network-request-failed"),s=YS().setTimeout(()=>{r(i)},oT.get());function o(){YS().clearTimeout(s),n(e)}e.ping(o).then(o,()=>{r(i)})});return function(t,e){return n.apply(this,arguments)}}()))})).apply(this,arguments)}const hT={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"};class dT{constructor(t){this.window=t,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch(t){}}}function fT(t,e,n,r,i,s){Ub(t.config.authDomain,t,"auth-domain-config-required"),Ub(t.config.apiKey,t,"invalid-api-key");const o={apiKey:t.config.apiKey,appName:t.name,authType:n,redirectUrl:r,v:hp,eventId:i};if(e instanceof NI){e.setDefaultLanguage(t.languageCode),o.providerId=e.providerId||"",function(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}(e.getCustomParameters())||(o.customParameters=JSON.stringify(e.getCustomParameters()));for(const[t,e]of Object.entries(s||{}))o[t]=e}if(e instanceof RI){const t=e.getScopes().filter(t=>""!==t);t.length>0&&(o.scopes=t.join(","))}t.tenantId&&(o.tid=t.tenantId);const a=o;for(const u of Object.keys(a))void 0===a[u]&&delete a[u];return`${function({config:t}){return t.emulator?Qb(t,"emulator/auth/handler"):`https://${t.authDomain}/__/auth/handler`}(t)}?${Cf(a).slice(1)}`}const pT="webStorageSupport",gT=class{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=KS,this._completeRedirectFn=qE}_openPopup(t,e,n,r){var i=this;return uf(function*(){var s;Bb(null===(s=i.eventManagers[t._key()])||void 0===s?void 0:s.manager,"_initialize() not called before _openPopup()");const o=fT(t,e,n,zb(),r);return function(t,e,n,r=500,i=600){const s=Math.max((window.screen.availHeight-i)/2,0).toString(),o=Math.max((window.screen.availWidth-r)/2,0).toString();let a="";const u=Object.assign(Object.assign({},hT),{width:r.toString(),height:i.toString(),top:s,left:o}),c=ff().toLowerCase();n&&(a=B_(c)?"_blank":n),U_(c)&&(e=e||"http://localhost",u.scrollbars="yes");const l=Object.entries(u).reduce((t,[e,n])=>`${t}${e}=${n},`,"");if(function(t=ff()){var e;return K_(t)&&!!(null===(e=window.navigator)||void 0===e?void 0:e.standalone)}(c)&&"_self"!==a)return function(t,e){const n=document.createElement("a");n.href=t,n.target=e;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(r)}(e||"",a),new dT(null);const h=window.open(e||"",a,l);Ub(h,t,"popup-blocked");try{h.focus()}catch(d){}return new dT(h)}(t,o,WS())})()}_openRedirect(t,e,n,r){var i=this;return uf(function*(){var s;return yield i._originValidation(t),s=fT(t,e,n,zb(),r),YS().location.href=s,new Promise(()=>{})})()}_initialize(t){const e=t._key();if(this.eventManagers[e]){const{manager:t,promise:n}=this.eventManagers[e];return t?Promise.resolve(t):(Bb(n,"If manager is not set, promise should be"),n)}const n=this.initAndGetManager(t);return this.eventManagers[e]={promise:n},n.catch(()=>{delete this.eventManagers[e]}),n}initAndGetManager(t){var e=this;return uf(function*(){const n=yield function(t){return lT.apply(this,arguments)}(t),r=new GE(t);return n.register("authEvent",e=>(Ub(null==e?void 0:e.authEvent,t,"invalid-auth-event"),{status:r.onEvent(e.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),e.eventManagers[t._key()]={manager:r},e.iframes[t._key()]=n,r})()}_isIframeWebStorageSupported(t,e){this.iframes[t._key()].send(pT,{type:pT},n=>{var r;const i=null===(r=null==n?void 0:n[0])||void 0===r?void 0:r.webStorageSupport;void 0!==i&&e(!!i),Pb(t,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(t){const e=t._key();return this.originValidationPromises[e]||(this.originValidationPromises[e]=function(t){return tT.apply(this,arguments)}(t)),this.originValidationPromises[e]}get _shouldInitProactively(){return G_()||j_()||K_()}};var mT,yT="@firebase/auth",vT="0.19.12";class wT{constructor(t){this.auth=t,this.internalListeners=new Map}getUid(){var t;return this.assertAuthConfigured(),(null===(t=this.auth.currentUser)||void 0===t?void 0:t.uid)||null}getToken(t){var e=this;return uf(function*(){return e.assertAuthConfigured(),yield e.auth._initializationPromise,e.auth.currentUser?{accessToken:yield e.auth.currentUser.getIdToken(t)}:null})()}addAuthTokenListener(t){if(this.assertAuthConfigured(),this.internalListeners.has(t))return;const e=this.auth.onIdTokenChanged(e=>{var n;t((null===(n=e)||void 0===n?void 0:n.stsTokenManager.accessToken)||null)});this.internalListeners.set(t,e),this.updateProactiveRefresh()}removeAuthTokenListener(t){this.assertAuthConfigured();const e=this.internalListeners.get(t);e&&(this.internalListeners.delete(t),e(),this.updateProactiveRefresh())}assertAuthConfigured(){Ub(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}function bT(t){return new b(function(e){return{unsubscribe:MS(t,e.next.bind(e),e.error.bind(e),e.complete.bind(e))}})}mT="Browser",ap(new Bf("auth",(t,{options:e})=>{const n=t.getProvider("app").getImmediate(),r=t.getProvider("heartbeat"),{apiKey:i,authDomain:s}=n.options;return((t,n)=>{Ub(i&&!i.includes(":"),"invalid-api-key",{appName:t.name}),Ub(!(null==s?void 0:s.includes(":")),"argument-error",{appName:t.name});const r={apiKey:i,authDomain:s,clientPlatform:mT,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:W_(mT)},o=new Q_(t,n,r);return function(t,e){const n=(null==e?void 0:e.persistence)||[],r=(Array.isArray(n)?n:[n]).map(qb);(null==e?void 0:e.errorMap)&&t._updateErrorMap(e.errorMap),t._initializeWithPersistence(r,null==e?void 0:e.popupRedirectResolver)}(o,e),o})(n,r)},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((t,e,n)=>{t.getProvider("auth-internal").initialize()})),ap(new Bf("auth-internal",t=>{return e=Y_(t.getProvider("auth").getImmediate()),new wT(e);var e},"PRIVATE").setInstantiationMode("EXPLICIT")),gp(yT,vT,void 0),gp(yT,vT,"esm2017");const _T="auth";class IT{constructor(t){return t}}class ST{constructor(){return tw(_T)}}dw(0,300).pipe(Aw(()=>Tw(tw(_T))),xw());const ET=new Mn("angularfire2.auth-instances");function TT(t){return(e,n)=>{const r=e.runOutsideAngular(()=>t(n));return new IT(r)}}const CT={provide:ST,deps:[[new er,ET]]},kT={provide:IT,useFactory:function(t,e){const n=Zv(_T,t,e);return n&&new IT(n)},deps:[[new er,ET],Ow]};let AT=(()=>{class t{constructor(){gp("angularfire",zv.full,"auth")}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=Gt({type:t}),t.\u0275inj=ft({providers:[kT,CT]}),t})();function xT(t,...e){return{ngModule:AT,providers:[{provide:ET,useFactory:TT(t),multi:!0,deps:[Da,us,iw,Dw,[new er,Ob],...e]}]}}const OT=lw(function(t){return new b(function(e){return{unsubscribe:LS(t,e.next.bind(e),e.error.bind(e),e.complete.bind(e))}})},!0),DT=(lw(bT,!0),lw(function(t){return bT(t).pipe(Ac(function(t){return t?F(g_(t)):gc(null)}))},!0),lw(function(t,e){return hS.apply(this,arguments)},!0),lw(dS,!0),lw(function(t,e,n){return lS.apply(this,arguments)},!0),lw(function(t,e,n){const r=Y_(t);Ub(r._canInitEmulator,r,"emulator-config-failed"),Ub(/^https?:\/\//.test(e),r,"invalid-emulator-scheme");const i=!!(null==n?void 0:n.disableWarnings),s=X_(e),{host:o,port:a}=function(t){const e=X_(t),n=/(\/\/)?([^?#/]+)/.exec(t.substr(e.length));if(!n)return{host:"",port:null};const r=n[2].split("@").pop()||"",i=/^(\[[^\]]+\])(:|$)/.exec(r);if(i){const t=i[1];return{host:t,port:Z_(r.substr(t.length+1))}}{const[t,e]=r.split(":");return{host:t,port:Z_(e)}}}(e);r.config.emulator={url:`${s}//${o}${null===a?"":`:${a}`}/`},r.settings.appVerificationDisabledForTesting=!0,r.emulatorConfig=Object.freeze({host:o,port:a,protocol:s.replace(":",""),options:Object.freeze({disableWarnings:i})}),i||function(){function t(){const t=document.createElement("p"),e=t.style;t.innerText="Running in emulator mode. Do not use with production credentials.",e.position="fixed",e.width="100%",e.backgroundColor="#ffffff",e.border=".1em solid #000000",e.color="#b50000",e.bottom="0px",e.left="0px",e.margin="0px",e.zIndex="10000",e.textAlign="center",t.classList.add("firebase-emulator-warning"),document.body.appendChild(t)}"undefined"!=typeof console&&"function"==typeof console.info&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),"undefined"!=typeof window&&"undefined"!=typeof document&&("loading"===document.readyState?window.addEventListener("DOMContentLoaded",t):t())}()},!0),lw(function(t,e,n){return gS.apply(this,arguments)},!0)),NT=(lw(function(t){return VS.apply(this,arguments)},!0),lw(function(t,e){return _S.apply(this,arguments)},!0),lw(function(t){const{user:e,_tokenResponse:n}=t;return e.isAnonymous&&!n?{providerId:null,isNewUser:!1,profile:null}:function(t){var e,n;if(!t)return null;const{providerId:r}=t,i=t.rawUserInfo?JSON.parse(t.rawUserInfo):{},s=t.isNewUser||"identitytoolkit#SignupNewUserResponse"===t.kind;if(!r&&(null==t?void 0:t.idToken)){const r=null===(n=null===(e=w_(t.idToken))||void 0===e?void 0:e.firebase)||void 0===n?void 0:n.sign_in_provider;if(r)return new xS(s,"anonymous"!==r&&"custom"!==r?r:null)}if(!r)return null;switch(r){case"facebook.com":return new DS(s,i);case"github.com":return new NS(s,i);case"google.com":return new RS(s,i);case"twitter.com":return new PS(s,i,t.screenName||null);case"custom":case"anonymous":return new xS(s,null);default:return new xS(s,r,i)}}(n)},!0),lw(function(t=dp()){const e=up(t,"auth");return e.isInitialized()?e.getImmediate():Hb(t,{popupRedirectResolver:gT,persistence:[cE,zS,KS]})},!0));function RT(t,e){for(var n=0,r=e.length,i=t.length;n<r;n++,i++)t[i]=e[n];return t}lw(g_,!0),lw(m_,!0),lw(function(t,e){var n;const r=Nf(t),i=e;return Ub(e.customData.operationType,r,"argument-error"),Ub(null===(n=i.customData._serverResponse)||void 0===n?void 0:n.mfaPendingCredential,r,"argument-error"),US._fromError(r,i)},!0),lw(function(t,e){return $E.apply(this,arguments)},!0),lw(Hb,!0),lw(function(t,e){const n=OI.parseLink(e);return"EMAIL_SIGNIN"===(null==n?void 0:n.operation)},!0),lw(ZI,!0),lw(function(t,e,n){return gE.apply(this,arguments)},!0),lw(function(t,e,n){return OE.apply(this,arguments)},!0),lw(function(t,e,n){return function(t,e,n){return BE.apply(this,arguments)}(t,e,n)},!0),lw(function(t){const e=Nf(t);return $S.has(e)||$S.set(e,BS._fromUser(e)),$S.get(e)},!0),lw(LS,!0),lw(MS,!0),lw(function(t){return OI.parseLink(t)},!0),lw(eS,!0),lw(function(t,e,n){return mE.apply(this,arguments)},!0),lw(function(t,e,n){return xE.apply(this,arguments)},!0),lw(function(t,e,n){return function(t,e,n){return jE.apply(this,arguments)}(t,e,n)},!0),lw(k_,!0),lw(function(t,e){return IS.apply(this,arguments)},!0),lw(function(t,e,n){return cS.apply(this,arguments)},!0),lw(function(t,e,n){return yS.apply(this,arguments)},!0),lw(function(t,e){return Nf(t).setPersistence(e)},!0),lw(function(t){return FI.apply(this,arguments)},!0),lw(JI,!0),lw(function(t,e){return sS.apply(this,arguments)},!0),lw(mS,!0),lw(function(t,e,n){return vS.apply(this,arguments)},!0),lw(function(t,e,n){return pE.apply(this,arguments)},!0),lw(function(t,e,n){return AE.apply(this,arguments)},!0),lw(function(t,e,n){return function(t,e,n){return UE.apply(this,arguments)}(t,e,n)},!0),lw(function(t){return Nf(t).signOut()},!0),lw(function(t,e){return $I.apply(this,arguments)},!0),lw(function(t,e){return Nf(t).updateCurrentUser(e)},!0),lw(function(t,e){return kS(Nf(t),e,null)},!0),lw(function(t,e){return kS(Nf(t),null,e)},!0),lw(function(t,e){return wE.apply(this,arguments)},!0),lw(function(t,e){return CS.apply(this,arguments)},!0),lw(function(t){Nf(t).useDeviceLanguage()},!0),lw(function(t,e,n){return SS.apply(this,arguments)},!0),lw(function(t,e){return pS.apply(this,arguments)},!0);var PT,MT="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},LT={},VT=VT||{},FT=MT||self;function UT(){}function jT(t){var e=typeof t;return"array"==(e="object"!=e?e:t?Array.isArray(t)?"array":e:"null")||"object"==e&&"number"==typeof t.length}function BT(t){var e=typeof t;return"object"==e&&null!=t||"function"==e}var $T="closure_uid_"+(1e9*Math.random()>>>0),qT=0;function HT(t,e,n){return t.call.apply(t.bind,arguments)}function zT(t,e,n){if(!t)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var n=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(n,r),t.apply(e,n)}}return function(){return t.apply(e,arguments)}}function KT(t,e,n){return(KT=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?HT:zT).apply(null,arguments)}function GT(t,e){var n=Array.prototype.slice.call(arguments,1);return function(){var e=n.slice();return e.push.apply(e,arguments),t.apply(this,e)}}function WT(t,e){function n(){}n.prototype=e.prototype,t.Z=e.prototype,t.prototype=new n,t.prototype.constructor=t,t.Vb=function(t,n,r){for(var i=Array(arguments.length-2),s=2;s<arguments.length;s++)i[s-2]=arguments[s];return e.prototype[n].apply(t,i)}}function QT(){this.s=this.s,this.o=this.o}var YT={};QT.prototype.s=!1,QT.prototype.na=function(){if(!this.s&&(this.s=!0,this.M(),0)){var t=function(t){return Object.prototype.hasOwnProperty.call(t,$T)&&t[$T]||(t[$T]=++qT)}(this);delete YT[t]}},QT.prototype.M=function(){if(this.o)for(;this.o.length;)this.o.shift()()};const JT=Array.prototype.indexOf?function(t,e){return Array.prototype.indexOf.call(t,e,void 0)}:function(t,e){if("string"==typeof t)return"string"!=typeof e||1!=e.length?-1:t.indexOf(e,0);for(let n=0;n<t.length;n++)if(n in t&&t[n]===e)return n;return-1},XT=Array.prototype.forEach?function(t,e,n){Array.prototype.forEach.call(t,e,n)}:function(t,e,n){const r=t.length,i="string"==typeof t?t.split(""):t;for(let s=0;s<r;s++)s in i&&e.call(n,i[s],s,t)};function ZT(t){return Array.prototype.concat.apply([],arguments)}function tC(t){const e=t.length;if(0<e){const n=Array(e);for(let r=0;r<e;r++)n[r]=t[r];return n}return[]}function eC(t){return/^[\s\xa0]*$/.test(t)}var nC,rC=String.prototype.trim?function(t){return t.trim()}:function(t){return/^[\s\xa0]*([\s\S]*?)[\s\xa0]*$/.exec(t)[1]};function iC(t,e){return-1!=t.indexOf(e)}function sC(t,e){return t<e?-1:t>e?1:0}t:{var oC=FT.navigator;if(oC){var aC=oC.userAgent;if(aC){nC=aC;break t}}nC=""}function uC(t,e,n){for(const r in t)e.call(n,t[r],r,t)}function cC(t){const e={};for(const n in t)e[n]=t[n];return e}var lC="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function hC(t,e){let n,r;for(let i=1;i<arguments.length;i++){for(n in r=arguments[i],r)t[n]=r[n];for(let e=0;e<lC.length;e++)n=lC[e],Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}}function dC(t){return dC[" "](t),t}dC[" "]=UT;var fC,pC,gC=iC(nC,"Opera"),mC=iC(nC,"Trident")||iC(nC,"MSIE"),yC=iC(nC,"Edge"),vC=yC||mC,wC=iC(nC,"Gecko")&&!(iC(nC.toLowerCase(),"webkit")&&!iC(nC,"Edge"))&&!(iC(nC,"Trident")||iC(nC,"MSIE"))&&!iC(nC,"Edge"),bC=iC(nC.toLowerCase(),"webkit")&&!iC(nC,"Edge");function _C(){var t=FT.document;return t?t.documentMode:void 0}t:{var IC="",SC=(pC=nC,wC?/rv:([^\);]+)(\)|;)/.exec(pC):yC?/Edge\/([\d\.]+)/.exec(pC):mC?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(pC):bC?/WebKit\/(\S+)/.exec(pC):gC?/(?:Version)[ \/]?(\S+)/.exec(pC):void 0);if(SC&&(IC=SC?SC[1]:""),mC){var EC=_C();if(null!=EC&&EC>parseFloat(IC)){fC=String(EC);break t}}fC=IC}var TC={};var CC=FT.document&&mC&&(_C()||parseInt(fC,10))||void 0,kC=function(){if(!FT.addEventListener||!Object.defineProperty)return!1;var t=!1,e=Object.defineProperty({},"passive",{get:function(){t=!0}});try{FT.addEventListener("test",UT,e),FT.removeEventListener("test",UT,e)}catch(n){}return t}();function AC(t,e){this.type=t,this.g=this.target=e,this.defaultPrevented=!1}function xC(t,e){if(AC.call(this,t?t.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,t){var n=this.type=t.type,r=t.changedTouches&&t.changedTouches.length?t.changedTouches[0]:null;if(this.target=t.target||t.srcElement,this.g=e,e=t.relatedTarget){if(wC){t:{try{dC(e.nodeName);var i=!0;break t}catch(s){}i=!1}i||(e=null)}}else"mouseover"==n?e=t.fromElement:"mouseout"==n&&(e=t.toElement);this.relatedTarget=e,r?(this.clientX=void 0!==r.clientX?r.clientX:r.pageX,this.clientY=void 0!==r.clientY?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=void 0!==t.clientX?t.clientX:t.pageX,this.clientY=void 0!==t.clientY?t.clientY:t.pageY,this.screenX=t.screenX||0,this.screenY=t.screenY||0),this.button=t.button,this.key=t.key||"",this.ctrlKey=t.ctrlKey,this.altKey=t.altKey,this.shiftKey=t.shiftKey,this.metaKey=t.metaKey,this.pointerId=t.pointerId||0,this.pointerType="string"==typeof t.pointerType?t.pointerType:OC[t.pointerType]||"",this.state=t.state,this.i=t,t.defaultPrevented&&xC.Z.h.call(this)}}AC.prototype.h=function(){this.defaultPrevented=!0},WT(xC,AC);var OC={2:"touch",3:"pen",4:"mouse"};xC.prototype.h=function(){xC.Z.h.call(this);var t=this.i;t.preventDefault?t.preventDefault():t.returnValue=!1};var DC="closure_listenable_"+(1e6*Math.random()|0),NC=0;function RC(t,e,n,r,i){this.listener=t,this.proxy=null,this.src=e,this.type=n,this.capture=!!r,this.ia=i,this.key=++NC,this.ca=this.fa=!1}function PC(t){t.ca=!0,t.listener=null,t.proxy=null,t.src=null,t.ia=null}function MC(t){this.src=t,this.g={},this.h=0}function LC(t,e){var n=e.type;if(n in t.g){var r,i=t.g[n],s=JT(i,e);(r=0<=s)&&Array.prototype.splice.call(i,s,1),r&&(PC(e),0==t.g[n].length&&(delete t.g[n],t.h--))}}function VC(t,e,n,r){for(var i=0;i<t.length;++i){var s=t[i];if(!s.ca&&s.listener==e&&s.capture==!!n&&s.ia==r)return i}return-1}MC.prototype.add=function(t,e,n,r,i){var s=t.toString();(t=this.g[s])||(t=this.g[s]=[],this.h++);var o=VC(t,e,r,i);return-1<o?(e=t[o],n||(e.fa=!1)):((e=new RC(e,this.src,s,!!r,i)).fa=n,t.push(e)),e};var FC="closure_lm_"+(1e6*Math.random()|0),UC={};function jC(t,e,n,r,i){if(r&&r.once)return $C(t,e,n,r,i);if(Array.isArray(e)){for(var s=0;s<e.length;s++)jC(t,e[s],n,r,i);return null}return n=QC(n),t&&t[DC]?t.N(e,n,BT(r)?!!r.capture:!!r,i):BC(t,e,n,!1,r,i)}function BC(t,e,n,r,i,s){if(!e)throw Error("Invalid event type");var o=BT(i)?!!i.capture:!!i,a=GC(t);if(a||(t[FC]=a=new MC(t)),(n=a.add(e,n,r,o,s)).proxy)return n;if(r=function(){var t=KC;return function e(n){return t.call(e.src,e.listener,n)}}(),n.proxy=r,r.src=t,r.listener=n,t.addEventListener)kC||(i=o),void 0===i&&(i=!1),t.addEventListener(e.toString(),r,i);else if(t.attachEvent)t.attachEvent(zC(e.toString()),r);else{if(!t.addListener||!t.removeListener)throw Error("addEventListener and attachEvent are unavailable.");t.addListener(r)}return n}function $C(t,e,n,r,i){if(Array.isArray(e)){for(var s=0;s<e.length;s++)$C(t,e[s],n,r,i);return null}return n=QC(n),t&&t[DC]?t.O(e,n,BT(r)?!!r.capture:!!r,i):BC(t,e,n,!0,r,i)}function qC(t,e,n,r,i){if(Array.isArray(e))for(var s=0;s<e.length;s++)qC(t,e[s],n,r,i);else r=BT(r)?!!r.capture:!!r,n=QC(n),t&&t[DC]?(t=t.i,(e=String(e).toString())in t.g&&-1<(n=VC(s=t.g[e],n,r,i))&&(PC(s[n]),Array.prototype.splice.call(s,n,1),0==s.length&&(delete t.g[e],t.h--))):t&&(t=GC(t))&&(e=t.g[e.toString()],t=-1,e&&(t=VC(e,n,r,i)),(n=-1<t?e[t]:null)&&HC(n))}function HC(t){if("number"!=typeof t&&t&&!t.ca){var e=t.src;if(e&&e[DC])LC(e.i,t);else{var n=t.type,r=t.proxy;e.removeEventListener?e.removeEventListener(n,r,t.capture):e.detachEvent?e.detachEvent(zC(n),r):e.addListener&&e.removeListener&&e.removeListener(r),(n=GC(e))?(LC(n,t),0==n.h&&(n.src=null,e[FC]=null)):PC(t)}}}function zC(t){return t in UC?UC[t]:UC[t]="on"+t}function KC(t,e){if(t.ca)t=!0;else{e=new xC(e,this);var n=t.listener,r=t.ia||t.src;t.fa&&HC(t),t=n.call(r,e)}return t}function GC(t){return(t=t[FC])instanceof MC?t:null}var WC="__closure_events_fn_"+(1e9*Math.random()>>>0);function QC(t){return"function"==typeof t?t:(t[WC]||(t[WC]=function(e){return t.handleEvent(e)}),t[WC])}function YC(){QT.call(this),this.i=new MC(this),this.P=this,this.I=null}function JC(t,e){var n,r=t.I;if(r)for(n=[];r;r=r.I)n.push(r);if(t=t.P,r=e.type||e,"string"==typeof e)e=new AC(e,t);else if(e instanceof AC)e.target=e.target||t;else{var i=e;hC(e=new AC(r,t),i)}if(i=!0,n)for(var s=n.length-1;0<=s;s--){var o=e.g=n[s];i=XC(o,r,!0,e)&&i}if(i=XC(o=e.g=t,r,!0,e)&&i,i=XC(o,r,!1,e)&&i,n)for(s=0;s<n.length;s++)i=XC(o=e.g=n[s],r,!1,e)&&i}function XC(t,e,n,r){if(!(e=t.i.g[String(e)]))return!0;e=e.concat();for(var i=!0,s=0;s<e.length;++s){var o=e[s];if(o&&!o.ca&&o.capture==n){var a=o.listener,u=o.ia||o.src;o.fa&&LC(t.i,o),i=!1!==a.call(u,r)&&i}}return i&&!r.defaultPrevented}WT(YC,QT),YC.prototype[DC]=!0,YC.prototype.removeEventListener=function(t,e,n,r){qC(this,t,e,n,r)},YC.prototype.M=function(){if(YC.Z.M.call(this),this.i){var t,e=this.i;for(t in e.g){for(var n=e.g[t],r=0;r<n.length;r++)PC(n[r]);delete e.g[t],e.h--}}this.I=null},YC.prototype.N=function(t,e,n,r){return this.i.add(String(t),e,!1,n,r)},YC.prototype.O=function(t,e,n,r){return this.i.add(String(t),e,!0,n,r)};var ZC=FT.JSON.stringify;function tk(){var t=ak;let e=null;return t.g&&(e=t.g,t.g=t.g.next,t.g||(t.h=null),e.next=null),e}var ek,nk=new class{constructor(t,e){this.i=t,this.j=e,this.h=0,this.g=null}get(){let t;return 0<this.h?(this.h--,t=this.g,this.g=t.next,t.next=null):t=this.i(),t}}(()=>new rk,t=>t.reset());class rk{constructor(){this.next=this.g=this.h=null}set(t,e){this.h=t,this.g=e,this.next=null}reset(){this.next=this.g=this.h=null}}function ik(t){FT.setTimeout(()=>{throw t},0)}function sk(t,e){ek||function(){var t=FT.Promise.resolve(void 0);ek=function(){t.then(uk)}}(),ok||(ek(),ok=!0),ak.add(t,e)}var ok=!1,ak=new class{constructor(){this.h=this.g=null}add(t,e){const n=nk.get();n.set(t,e),this.h?this.h.next=n:this.g=n,this.h=n}};function uk(){for(var t;t=tk();){try{t.h.call(t.g)}catch(n){ik(n)}var e=nk;e.j(t),100>e.h&&(e.h++,t.next=e.g,e.g=t)}ok=!1}function ck(t,e){YC.call(this),this.h=t||1,this.g=e||FT,this.j=KT(this.kb,this),this.l=Date.now()}function lk(t){t.da=!1,t.S&&(t.g.clearTimeout(t.S),t.S=null)}function hk(t,e,n){if("function"==typeof t)n&&(t=KT(t,n));else{if(!t||"function"!=typeof t.handleEvent)throw Error("Invalid listener argument");t=KT(t.handleEvent,t)}return 2147483647<Number(e)?-1:FT.setTimeout(t,e||0)}function dk(t){t.g=hk(()=>{t.g=null,t.i&&(t.i=!1,dk(t))},t.j);const e=t.h;t.h=null,t.m.apply(null,e)}WT(ck,YC),(PT=ck.prototype).da=!1,PT.S=null,PT.kb=function(){if(this.da){var t=Date.now()-this.l;0<t&&t<.8*this.h?this.S=this.g.setTimeout(this.j,this.h-t):(this.S&&(this.g.clearTimeout(this.S),this.S=null),JC(this,"tick"),this.da&&(lk(this),this.start()))}},PT.start=function(){this.da=!0,this.S||(this.S=this.g.setTimeout(this.j,this.h),this.l=Date.now())},PT.M=function(){ck.Z.M.call(this),lk(this),delete this.g};class fk extends QT{constructor(t,e){super(),this.m=t,this.j=e,this.h=null,this.i=!1,this.g=null}l(t){this.h=arguments,this.g?this.i=!0:dk(this)}M(){super.M(),this.g&&(FT.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function pk(t){QT.call(this),this.h=t,this.g={}}WT(pk,QT);var gk=[];function mk(t,e,n,r){Array.isArray(n)||(n&&(gk[0]=n.toString()),n=gk);for(var i=0;i<n.length;i++){var s=jC(e,n[i],r||t.handleEvent,!1,t.h||t);if(!s)break;t.g[s.key]=s}}function yk(t){uC(t.g,function(t,e){this.g.hasOwnProperty(e)&&HC(t)},t),t.g={}}function vk(){this.g=!0}function wk(t,e,n,r){t.info(function(){return"XMLHTTP TEXT ("+e+"): "+function(t,e){if(!t.g)return e;if(!e)return null;try{var n=JSON.parse(e);if(n)for(t=0;t<n.length;t++)if(Array.isArray(n[t])){var r=n[t];if(!(2>r.length)){var i=r[1];if(Array.isArray(i)&&!(1>i.length)){var s=i[0];if("noop"!=s&&"stop"!=s&&"close"!=s)for(var o=1;o<i.length;o++)i[o]=""}}}return ZC(n)}catch(a){return e}}(t,n)+(r?" "+r:"")})}pk.prototype.M=function(){pk.Z.M.call(this),yk(this)},pk.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")},vk.prototype.Aa=function(){this.g=!1},vk.prototype.info=function(){};var bk={},_k=null;function Ik(){return _k=_k||new YC}function Sk(t){AC.call(this,bk.Ma,t)}function Ek(t){const e=Ik();JC(e,new Sk(e,t))}function Tk(t,e){AC.call(this,bk.STAT_EVENT,t),this.stat=e}function Ck(t){const e=Ik();JC(e,new Tk(e,t))}function kk(t,e){AC.call(this,bk.Na,t),this.size=e}function Ak(t,e){if("function"!=typeof t)throw Error("Fn must not be null and must be a function");return FT.setTimeout(function(){t()},e)}bk.Ma="serverreachability",WT(Sk,AC),bk.STAT_EVENT="statevent",WT(Tk,AC),bk.Na="timingevent",WT(kk,AC);var xk={NO_ERROR:0,lb:1,yb:2,xb:3,sb:4,wb:5,zb:6,Ja:7,TIMEOUT:8,Cb:9},Ok={qb:"complete",Mb:"success",Ka:"error",Ja:"abort",Eb:"ready",Fb:"readystatechange",TIMEOUT:"timeout",Ab:"incrementaldata",Db:"progress",tb:"downloadprogress",Ub:"uploadprogress"};function Dk(){}function Nk(){}Dk.prototype.h=null;var Rk,Pk={OPEN:"a",pb:"b",Ka:"c",Bb:"d"};function Mk(){AC.call(this,"d")}function Lk(){AC.call(this,"c")}function Vk(){}function Fk(t,e,n,r){this.l=t,this.j=e,this.m=n,this.X=r||1,this.V=new pk(this),this.P=jk,this.W=new ck(t=vC?125:void 0),this.H=null,this.i=!1,this.s=this.A=this.v=this.K=this.F=this.Y=this.B=null,this.D=[],this.g=null,this.C=0,this.o=this.u=null,this.N=-1,this.I=!1,this.O=0,this.L=null,this.aa=this.J=this.$=this.U=!1,this.h=new Uk}function Uk(){this.i=null,this.g="",this.h=!1}WT(Mk,AC),WT(Lk,AC),WT(Vk,Dk),Vk.prototype.g=function(){return new XMLHttpRequest},Vk.prototype.i=function(){return{}},Rk=new Vk;var jk=45e3,Bk={},$k={};function qk(t,e,n){t.K=1,t.v=dA(oA(e)),t.s=n,t.U=!0,Hk(t,null)}function Hk(t,e){t.F=Date.now(),Wk(t),t.A=oA(t.v);var n=t.A,r=t.X;Array.isArray(r)||(r=[String(r)]),TA(n.h,"t",r),t.C=0,n=t.l.H,t.h=new Uk,t.g=Tx(t.l,n?e:null,!t.s),0<t.O&&(t.L=new fk(KT(t.Ia,t,t.g),t.O)),mk(t.V,t.g,"readystatechange",t.gb),e=t.H?cC(t.H):{},t.s?(t.u||(t.u="POST"),e["Content-Type"]="application/x-www-form-urlencoded",t.g.ea(t.A,t.u,t.s,e)):(t.u="GET",t.g.ea(t.A,t.u,null,e)),Ek(1),function(t,e,n,r,i,s){t.info(function(){if(t.g)if(s)for(var o="",a=s.split("&"),u=0;u<a.length;u++){var c=a[u].split("=");if(1<c.length){var l=c[0];c=c[1];var h=l.split("_");o=2<=h.length&&"type"==h[1]?o+(l+"=")+c+"&":o+(l+"=redacted&")}}else o=null;else o=s;return"XMLHTTP REQ ("+r+") [attempt "+i+"]: "+e+"\n"+n+"\n"+o})}(t.j,t.u,t.A,t.m,t.X,t.s)}function zk(t){return!!t.g&&"GET"==t.u&&2!=t.K&&t.l.Ba}function Kk(t,e,n){let r,i=!0;for(;!t.I&&t.C<n.length;){if(r=Gk(t,n),r==$k){4==e&&(t.o=4,Ck(14),i=!1),wk(t.j,t.m,null,"[Incomplete Response]");break}if(r==Bk){t.o=4,Ck(15),wk(t.j,t.m,n,"[Invalid Chunk]"),i=!1;break}wk(t.j,t.m,r,null),Zk(t,r)}zk(t)&&r!=$k&&r!=Bk&&(t.h.g="",t.C=0),4!=e||0!=n.length||t.h.h||(t.o=1,Ck(16),i=!1),t.i=t.i&&i,i?0<n.length&&!t.aa&&(t.aa=!0,(e=t.l).g==t&&e.$&&!e.L&&(e.h.info("Great, no buffering proxy detected. Bytes received: "+n.length),yx(e),e.L=!0,Ck(11))):(wk(t.j,t.m,n,"[Invalid Chunked Response]"),Xk(t),Jk(t))}function Gk(t,e){var n=t.C,r=e.indexOf("\n",n);return-1==r?$k:(n=Number(e.substring(n,r)),isNaN(n)?Bk:(r+=1)+n>e.length?$k:(e=e.substr(r,n),t.C=r+n,e))}function Wk(t){t.Y=Date.now()+t.P,Qk(t,t.P)}function Qk(t,e){if(null!=t.B)throw Error("WatchDog timer not null");t.B=Ak(KT(t.eb,t),e)}function Yk(t){t.B&&(FT.clearTimeout(t.B),t.B=null)}function Jk(t){0==t.l.G||t.I||bx(t.l,t)}function Xk(t){Yk(t);var e=t.L;e&&"function"==typeof e.na&&e.na(),t.L=null,lk(t.W),yk(t.V),t.g&&(e=t.g,t.g=null,e.abort(),e.na())}function Zk(t,e){try{var n=t.l;if(0!=n.G&&(n.g==t||DA(n.i,t)))if(n.I=t.N,!t.J&&DA(n.i,t)&&3==n.G){try{var r=n.Ca.g.parse(e)}catch(c){r=null}if(Array.isArray(r)&&3==r.length){var i=r;if(0==i[0]){t:if(!n.u){if(n.g){if(!(n.g.F+3e3<t.F))break t;wx(n),ux(n)}mx(n),Ck(18)}}else n.ta=i[1],0<n.ta-n.U&&37500>i[2]&&n.N&&0==n.A&&!n.v&&(n.v=Ak(KT(n.ab,n),6e3));if(1>=OA(n.i)&&n.ka){try{n.ka()}catch(c){}n.ka=void 0}}else Ix(n,11)}else if((t.J||n.g==t)&&wx(n),!eC(e))for(i=n.Ca.g.parse(e),e=0;e<i.length;e++){let c=i[e];if(n.U=c[0],c=c[1],2==n.G)if("c"==c[0]){n.J=c[1],n.la=c[2];const e=c[3];null!=e&&(n.ma=e,n.h.info("VER="+n.ma));const i=c[4];null!=i&&(n.za=i,n.h.info("SVER="+n.za));const l=c[5];null!=l&&"number"==typeof l&&0<l&&(n.K=r=1.5*l,n.h.info("backChannelRequestTimeoutMs_="+r)),r=n;const h=t.g;if(h){const t=h.g?h.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(t){var s=r.i;!s.g&&(iC(t,"spdy")||iC(t,"quic")||iC(t,"h2"))&&(s.j=s.l,s.g=new Set,s.h&&(NA(s,s.h),s.h=null))}if(r.D){const t=h.g?h.g.getResponseHeader("X-HTTP-Session-Id"):null;t&&(r.sa=t,hA(r.F,r.D,t))}}n.G=3,n.j&&n.j.xa(),n.$&&(n.O=Date.now()-t.F,n.h.info("Handshake RTT: "+n.O+"ms"));var o=t;if((r=n).oa=Ex(r,r.H?r.la:null,r.W),o.J){RA(r.i,o);var a=o,u=r.K;u&&a.setTimeout(u),a.B&&(Yk(a),Wk(a)),r.g=o}else gx(r);0<n.l.length&&hx(n)}else"stop"!=c[0]&&"close"!=c[0]||Ix(n,7);else 3==n.G&&("stop"==c[0]||"close"==c[0]?"stop"==c[0]?Ix(n,7):ax(n):"noop"!=c[0]&&n.j&&n.j.wa(c),n.A=0)}Ek(4)}catch(c){}}function tA(t,e){if(t.forEach&&"function"==typeof t.forEach)t.forEach(e,void 0);else if(jT(t)||"string"==typeof t)XT(t,e,void 0);else{if(t.T&&"function"==typeof t.T)var n=t.T();else if(t.R&&"function"==typeof t.R)n=void 0;else if(jT(t)||"string"==typeof t){n=[];for(var r=t.length,i=0;i<r;i++)n.push(i)}else for(i in n=[],r=0,t)n[r++]=i;i=(r=function(t){if(t.R&&"function"==typeof t.R)return t.R();if("string"==typeof t)return t.split("");if(jT(t)){for(var e=[],n=t.length,r=0;r<n;r++)e.push(t[r]);return e}for(r in e=[],n=0,t)e[n++]=t[r];return e}(t)).length;for(var s=0;s<i;s++)e.call(void 0,r[s],n&&n[s],t)}}function eA(t,e){this.h={},this.g=[],this.i=0;var n=arguments.length;if(1<n){if(n%2)throw Error("Uneven number of arguments");for(var r=0;r<n;r+=2)this.set(arguments[r],arguments[r+1])}else if(t)if(t instanceof eA)for(n=t.T(),r=0;r<n.length;r++)this.set(n[r],t.get(n[r]));else for(r in t)this.set(r,t[r])}function nA(t){if(t.i!=t.g.length){for(var e=0,n=0;e<t.g.length;){var r=t.g[e];rA(t.h,r)&&(t.g[n++]=r),e++}t.g.length=n}if(t.i!=t.g.length){var i={};for(n=e=0;e<t.g.length;)rA(i,r=t.g[e])||(t.g[n++]=r,i[r]=1),e++;t.g.length=n}}function rA(t,e){return Object.prototype.hasOwnProperty.call(t,e)}(PT=Fk.prototype).setTimeout=function(t){this.P=t},PT.gb=function(t){t=t.target;const e=this.L;e&&3==nx(t)?e.l():this.Ia(t)},PT.Ia=function(t){try{if(t==this.g)t:{const l=nx(this.g);var e=this.g.Da();const h=this.g.ba();if(!(3>l)&&(3!=l||vC||this.g&&(this.h.h||this.g.ga()||rx(this.g)))){this.I||4!=l||7==e||Ek(8==e||0>=h?3:2),Yk(this);var n=this.g.ba();this.N=n;e:if(zk(this)){var r=rx(this.g);t="";var i=r.length,s=4==nx(this.g);if(!this.h.i){if("undefined"==typeof TextDecoder){Xk(this),Jk(this);var o="";break e}this.h.i=new FT.TextDecoder}for(e=0;e<i;e++)this.h.h=!0,t+=this.h.i.decode(r[e],{stream:s&&e==i-1});r.splice(0,i),this.h.g+=t,this.C=0,o=this.h.g}else o=this.g.ga();if(this.i=200==n,function(t,e,n,r,i,s,o){t.info(function(){return"XMLHTTP RESP ("+r+") [ attempt "+i+"]: "+e+"\n"+n+"\n"+s+" "+o})}(this.j,this.u,this.A,this.m,this.X,l,n),this.i){if(this.$&&!this.J){e:{if(this.g){var a,u=this.g;if((a=u.g?u.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!eC(a)){var c=a;break e}}c=null}if(!(n=c)){this.i=!1,this.o=3,Ck(12),Xk(this),Jk(this);break t}wk(this.j,this.m,n,"Initial handshake response via X-HTTP-Initial-Response"),this.J=!0,Zk(this,n)}this.U?(Kk(this,l,o),vC&&this.i&&3==l&&(mk(this.V,this.W,"tick",this.fb),this.W.start())):(wk(this.j,this.m,o,null),Zk(this,o)),4==l&&Xk(this),this.i&&!this.I&&(4==l?bx(this.l,this):(this.i=!1,Wk(this)))}else 400==n&&0<o.indexOf("Unknown SID")?(this.o=3,Ck(12)):(this.o=0,Ck(13)),Xk(this),Jk(this)}}}catch(l){}},PT.fb=function(){if(this.g){var t=nx(this.g),e=this.g.ga();this.C<e.length&&(Yk(this),Kk(this,t,e),this.i&&4!=t&&Wk(this))}},PT.cancel=function(){this.I=!0,Xk(this)},PT.eb=function(){this.B=null;const t=Date.now();0<=t-this.Y?(function(t,e){t.info(function(){return"TIMEOUT: "+e})}(this.j,this.A),2!=this.K&&(Ek(3),Ck(17)),Xk(this),this.o=2,Jk(this)):Qk(this,this.Y-t)},(PT=eA.prototype).R=function(){nA(this);for(var t=[],e=0;e<this.g.length;e++)t.push(this.h[this.g[e]]);return t},PT.T=function(){return nA(this),this.g.concat()},PT.get=function(t,e){return rA(this.h,t)?this.h[t]:e},PT.set=function(t,e){rA(this.h,t)||(this.i++,this.g.push(t)),this.h[t]=e},PT.forEach=function(t,e){for(var n=this.T(),r=0;r<n.length;r++){var i=n[r],s=this.get(i);t.call(e,s,i,this)}};var iA=/^(?:([^:/?#.]+):)?(?:\/\/(?:([^\\/?#]*)@)?([^\\/?#]*?)(?::([0-9]+))?(?=[\\/?#]|$))?([^?#]+)?(?:\?([^#]*))?(?:#([\s\S]*))?$/;function sA(t,e){if(this.i=this.s=this.j="",this.m=null,this.o=this.l="",this.g=!1,t instanceof sA){this.g=void 0!==e?e:t.g,aA(this,t.j),this.s=t.s,uA(this,t.i),cA(this,t.m),this.l=t.l,e=t.h;var n=new _A;n.i=e.i,e.g&&(n.g=new eA(e.g),n.h=e.h),lA(this,n),this.o=t.o}else t&&(n=String(t).match(iA))?(this.g=!!e,aA(this,n[1]||"",!0),this.s=fA(n[2]||""),uA(this,n[3]||"",!0),cA(this,n[4]),this.l=fA(n[5]||"",!0),lA(this,n[6]||"",!0),this.o=fA(n[7]||"")):(this.g=!!e,this.h=new _A(null,this.g))}function oA(t){return new sA(t)}function aA(t,e,n){t.j=n?fA(e,!0):e,t.j&&(t.j=t.j.replace(/:$/,""))}function uA(t,e,n){t.i=n?fA(e,!0):e}function cA(t,e){if(e){if(e=Number(e),isNaN(e)||0>e)throw Error("Bad port number "+e);t.m=e}else t.m=null}function lA(t,e,n){e instanceof _A?(t.h=e,function(t,e){e&&!t.j&&(IA(t),t.i=null,t.g.forEach(function(t,e){var n=e.toLowerCase();e!=n&&(SA(this,e),TA(this,n,t))},t)),t.j=e}(t.h,t.g)):(n||(e=pA(e,wA)),t.h=new _A(e,t.g))}function hA(t,e,n){t.h.set(e,n)}function dA(t){return hA(t,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),t}function fA(t,e){return t?e?decodeURI(t.replace(/%25/g,"%2525")):decodeURIComponent(t):""}function pA(t,e,n){return"string"==typeof t?(t=encodeURI(t).replace(e,gA),n&&(t=t.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),t):null}function gA(t){return"%"+((t=t.charCodeAt(0))>>4&15).toString(16)+(15&t).toString(16)}sA.prototype.toString=function(){var t=[],e=this.j;e&&t.push(pA(e,mA,!0),":");var n=this.i;return(n||"file"==e)&&(t.push("//"),(e=this.s)&&t.push(pA(e,mA,!0),"@"),t.push(encodeURIComponent(String(n)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(n=this.m)&&t.push(":",String(n))),(n=this.l)&&(this.i&&"/"!=n.charAt(0)&&t.push("/"),t.push(pA(n,"/"==n.charAt(0)?vA:yA,!0))),(n=this.h.toString())&&t.push("?",n),(n=this.o)&&t.push("#",pA(n,bA)),t.join("")};var mA=/[#\/\?@]/g,yA=/[#\?:]/g,vA=/[#\?]/g,wA=/[#\?@]/g,bA=/#/g;function _A(t,e){this.h=this.g=null,this.i=t||null,this.j=!!e}function IA(t){t.g||(t.g=new eA,t.h=0,t.i&&function(t,e){if(t){t=t.split("&");for(var n=0;n<t.length;n++){var r=t[n].indexOf("="),i=null;if(0<=r){var s=t[n].substring(0,r);i=t[n].substring(r+1)}else s=t[n];e(s,i?decodeURIComponent(i.replace(/\+/g," ")):"")}}}(t.i,function(e,n){t.add(decodeURIComponent(e.replace(/\+/g," ")),n)}))}function SA(t,e){IA(t),e=CA(t,e),rA(t.g.h,e)&&(t.i=null,t.h-=t.g.get(e).length,rA((t=t.g).h,e)&&(delete t.h[e],t.i--,t.g.length>2*t.i&&nA(t)))}function EA(t,e){return IA(t),e=CA(t,e),rA(t.g.h,e)}function TA(t,e,n){SA(t,e),0<n.length&&(t.i=null,t.g.set(CA(t,e),tC(n)),t.h+=n.length)}function CA(t,e){return e=String(e),t.j&&(e=e.toLowerCase()),e}function kA(t){this.l=t||AA,t=FT.PerformanceNavigationTiming?0<(t=FT.performance.getEntriesByType("navigation")).length&&("hq"==t[0].nextHopProtocol||"h2"==t[0].nextHopProtocol):!!(FT.g&&FT.g.Ea&&FT.g.Ea()&&FT.g.Ea().Zb),this.j=t?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}(PT=_A.prototype).add=function(t,e){IA(this),this.i=null,t=CA(this,t);var n=this.g.get(t);return n||this.g.set(t,n=[]),n.push(e),this.h+=1,this},PT.forEach=function(t,e){IA(this),this.g.forEach(function(n,r){XT(n,function(n){t.call(e,n,r,this)},this)},this)},PT.T=function(){IA(this);for(var t=this.g.R(),e=this.g.T(),n=[],r=0;r<e.length;r++)for(var i=t[r],s=0;s<i.length;s++)n.push(e[r]);return n},PT.R=function(t){IA(this);var e=[];if("string"==typeof t)EA(this,t)&&(e=ZT(e,this.g.get(CA(this,t))));else{t=this.g.R();for(var n=0;n<t.length;n++)e=ZT(e,t[n])}return e},PT.set=function(t,e){return IA(this),this.i=null,EA(this,t=CA(this,t))&&(this.h-=this.g.get(t).length),this.g.set(t,[e]),this.h+=1,this},PT.get=function(t,e){return t&&0<(t=this.R(t)).length?String(t[0]):e},PT.toString=function(){if(this.i)return this.i;if(!this.g)return"";for(var t=[],e=this.g.T(),n=0;n<e.length;n++){var r=e[n],i=encodeURIComponent(String(r));r=this.R(r);for(var s=0;s<r.length;s++){var o=i;""!==r[s]&&(o+="="+encodeURIComponent(String(r[s]))),t.push(o)}}return this.i=t.join("&")};var AA=10;function xA(t){return!!t.h||!!t.g&&t.g.size>=t.j}function OA(t){return t.h?1:t.g?t.g.size:0}function DA(t,e){return t.h?t.h==e:!!t.g&&t.g.has(e)}function NA(t,e){t.g?t.g.add(e):t.h=e}function RA(t,e){t.h&&t.h==e?t.h=null:t.g&&t.g.has(e)&&t.g.delete(e)}function PA(t){if(null!=t.h)return t.i.concat(t.h.D);if(null!=t.g&&0!==t.g.size){let e=t.i;for(const n of t.g.values())e=e.concat(n.D);return e}return tC(t.i)}function MA(){}function LA(){this.g=new MA}function VA(t,e,n){const r=n||"";try{tA(t,function(t,n){let i=t;BT(t)&&(i=ZC(t)),e.push(r+n+"="+encodeURIComponent(i))})}catch(i){throw e.push(r+"type="+encodeURIComponent("_badmap")),i}}function FA(t,e,n,r,i){try{e.onload=null,e.onerror=null,e.onabort=null,e.ontimeout=null,i(r)}catch(s){}}function UA(t){this.l=t.$b||null,this.j=t.ib||!1}function jA(t,e){YC.call(this),this.D=t,this.u=e,this.m=void 0,this.readyState=BA,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.v=new Headers,this.h=null,this.C="GET",this.B="",this.g=!1,this.A=this.j=this.l=null}kA.prototype.cancel=function(){if(this.i=PA(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&0!==this.g.size){for(const t of this.g.values())t.cancel();this.g.clear()}},MA.prototype.stringify=function(t){return FT.JSON.stringify(t,void 0)},MA.prototype.parse=function(t){return FT.JSON.parse(t,void 0)},WT(UA,Dk),UA.prototype.g=function(){return new jA(this.l,this.j)},UA.prototype.i=function(t){return function(){return t}}({}),WT(jA,YC);var BA=0;function $A(t){t.j.read().then(t.Sa.bind(t)).catch(t.ha.bind(t))}function qA(t){t.readyState=4,t.l=null,t.j=null,t.A=null,HA(t)}function HA(t){t.onreadystatechange&&t.onreadystatechange.call(t)}(PT=jA.prototype).open=function(t,e){if(this.readyState!=BA)throw this.abort(),Error("Error reopening a connection");this.C=t,this.B=e,this.readyState=1,HA(this)},PT.send=function(t){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.g=!0;const e={headers:this.v,method:this.C,credentials:this.m,cache:void 0};t&&(e.body=t),(this.D||FT).fetch(new Request(this.B,e)).then(this.Va.bind(this),this.ha.bind(this))},PT.abort=function(){this.response=this.responseText="",this.v=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted."),1<=this.readyState&&this.g&&4!=this.readyState&&(this.g=!1,qA(this)),this.readyState=BA},PT.Va=function(t){if(this.g&&(this.l=t,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=t.headers,this.readyState=2,HA(this)),this.g&&(this.readyState=3,HA(this),this.g)))if("arraybuffer"===this.responseType)t.arrayBuffer().then(this.Ta.bind(this),this.ha.bind(this));else if(void 0!==FT.ReadableStream&&"body"in t){if(this.j=t.body.getReader(),this.u){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.A=new TextDecoder;$A(this)}else t.text().then(this.Ua.bind(this),this.ha.bind(this))},PT.Sa=function(t){if(this.g){if(this.u&&t.value)this.response.push(t.value);else if(!this.u){var e=t.value?t.value:new Uint8Array(0);(e=this.A.decode(e,{stream:!t.done}))&&(this.response=this.responseText+=e)}t.done?qA(this):HA(this),3==this.readyState&&$A(this)}},PT.Ua=function(t){this.g&&(this.response=this.responseText=t,qA(this))},PT.Ta=function(t){this.g&&(this.response=t,qA(this))},PT.ha=function(){this.g&&qA(this)},PT.setRequestHeader=function(t,e){this.v.append(t,e)},PT.getResponseHeader=function(t){return this.h&&this.h.get(t.toLowerCase())||""},PT.getAllResponseHeaders=function(){if(!this.h)return"";const t=[],e=this.h.entries();for(var n=e.next();!n.done;)t.push((n=n.value)[0]+": "+n[1]),n=e.next();return t.join("\r\n")},Object.defineProperty(jA.prototype,"withCredentials",{get:function(){return"include"===this.m},set:function(t){this.m=t?"include":"same-origin"}});var zA=FT.JSON.parse;function KA(t){YC.call(this),this.headers=new eA,this.u=t||null,this.h=!1,this.C=this.g=null,this.H="",this.m=0,this.j="",this.l=this.F=this.v=this.D=!1,this.B=0,this.A=null,this.J=GA,this.K=this.L=!1}WT(KA,YC);var GA="",WA=/^https?$/i,QA=["POST","PUT"];function YA(t){return"content-type"==t.toLowerCase()}function JA(t,e){t.h=!1,t.g&&(t.l=!0,t.g.abort(),t.l=!1),t.j=e,t.m=5,XA(t),tx(t)}function XA(t){t.D||(t.D=!0,JC(t,"complete"),JC(t,"error"))}function ZA(t){if(t.h&&void 0!==VT&&(!t.C[1]||4!=nx(t)||2!=t.ba()))if(t.v&&4==nx(t))hk(t.Fa,0,t);else if(JC(t,"readystatechange"),4==nx(t)){t.h=!1;try{const a=t.ba();t:switch(a){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var e=!0;break t;default:e=!1}var n;if(!(n=e)){var r;if(r=0===a){var i=String(t.H).match(iA)[1]||null;if(!i&&FT.self&&FT.self.location){var s=FT.self.location.protocol;i=s.substr(0,s.length-1)}r=!WA.test(i?i.toLowerCase():"")}n=r}if(n)JC(t,"complete"),JC(t,"success");else{t.m=6;try{var o=2<nx(t)?t.g.statusText:""}catch(qs){o=""}t.j=o+" ["+t.ba()+"]",XA(t)}}finally{tx(t)}}}function tx(t,e){if(t.g){ex(t);const r=t.g,i=t.C[0]?UT:null;t.g=null,t.C=null,e||JC(t,"ready");try{r.onreadystatechange=i}catch(n){}}}function ex(t){t.g&&t.K&&(t.g.ontimeout=null),t.A&&(FT.clearTimeout(t.A),t.A=null)}function nx(t){return t.g?t.g.readyState:0}function rx(t){try{if(!t.g)return null;if("response"in t.g)return t.g.response;switch(t.J){case GA:case"text":return t.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in t.g)return t.g.mozResponseArrayBuffer}return null}catch(e){return null}}function ix(t,e,n){t:{for(r in n){var r=!1;break t}r=!0}r||(n=function(t){let e="";return uC(t,function(t,n){e+=n,e+=":",e+=t,e+="\r\n"}),e}(n),"string"==typeof t?null!=n&&encodeURIComponent(String(n)):hA(t,e,n))}function sx(t,e,n){return n&&n.internalChannelParams&&n.internalChannelParams[t]||e}function ox(t){this.za=0,this.l=[],this.h=new vk,this.la=this.oa=this.F=this.W=this.g=this.sa=this.D=this.aa=this.o=this.P=this.s=null,this.Za=this.V=0,this.Xa=sx("failFast",!1,t),this.N=this.v=this.u=this.m=this.j=null,this.X=!0,this.I=this.ta=this.U=-1,this.Y=this.A=this.C=0,this.Pa=sx("baseRetryDelayMs",5e3,t),this.$a=sx("retryDelaySeedMs",1e4,t),this.Ya=sx("forwardChannelMaxRetries",2,t),this.ra=sx("forwardChannelRequestTimeoutMs",2e4,t),this.qa=t&&t.xmlHttpFactory||void 0,this.Ba=t&&t.Yb||!1,this.K=void 0,this.H=t&&t.supportsCrossDomainXhr||!1,this.J="",this.i=new kA(t&&t.concurrentRequestLimit),this.Ca=new LA,this.ja=t&&t.fastHandshake||!1,this.Ra=t&&t.Wb||!1,t&&t.Aa&&this.h.Aa(),t&&t.forceLongPolling&&(this.X=!1),this.$=!this.ja&&this.X&&t&&t.detectBufferingProxy||!1,this.ka=void 0,this.O=0,this.L=!1,this.B=null,this.Wa=!t||!1!==t.Xb}function ax(t){if(cx(t),3==t.G){var e=t.V++,n=oA(t.F);hA(n,"SID",t.J),hA(n,"RID",e),hA(n,"TYPE","terminate"),fx(t,n),(e=new Fk(t,t.h,e,void 0)).K=2,e.v=dA(oA(n)),n=!1,FT.navigator&&FT.navigator.sendBeacon&&(n=FT.navigator.sendBeacon(e.v.toString(),"")),!n&&FT.Image&&((new Image).src=e.v,n=!0),n||(e.g=Tx(e.l,null),e.g.ea(e.v)),e.F=Date.now(),Wk(e)}Sx(t)}function ux(t){t.g&&(yx(t),t.g.cancel(),t.g=null)}function cx(t){ux(t),t.u&&(FT.clearTimeout(t.u),t.u=null),wx(t),t.i.cancel(),t.m&&("number"==typeof t.m&&FT.clearTimeout(t.m),t.m=null)}function lx(t,e){t.l.push(new class{constructor(t,e){this.h=t,this.g=e}}(t.Za++,e)),3==t.G&&hx(t)}function hx(t){xA(t.i)||t.m||(t.m=!0,sk(t.Ha,t),t.C=0)}function dx(t,e){var n;n=e?e.m:t.V++;const r=oA(t.F);hA(r,"SID",t.J),hA(r,"RID",n),hA(r,"AID",t.U),fx(t,r),t.o&&t.s&&ix(r,t.o,t.s),n=new Fk(t,t.h,n,t.C+1),null===t.o&&(n.H=t.s),e&&(t.l=e.D.concat(t.l)),e=px(t,n,1e3),n.setTimeout(Math.round(.5*t.ra)+Math.round(.5*t.ra*Math.random())),NA(t.i,n),qk(n,r,e)}function fx(t,e){t.j&&tA({},function(t,n){hA(e,n,t)})}function px(t,e,n){n=Math.min(t.l.length,n);var r=t.j?KT(t.j.Oa,t.j,t):null;t:{var i=t.l;let e=-1;for(;;){const t=["count="+n];-1==e?0<n?(e=i[0].h,t.push("ofs="+e)):e=0:t.push("ofs="+e);let s=!0;for(let o=0;o<n;o++){let n=i[o].h;const a=i[o].g;if(n-=e,0>n)e=Math.max(0,i[o].h-100),s=!1;else try{VA(a,t,"req"+n+"_")}catch(Zx){r&&r(a)}}if(s){r=t.join("&");break t}}}return t=t.l.splice(0,n),e.D=t,r}function gx(t){t.g||t.u||(t.Y=1,sk(t.Ga,t),t.A=0)}function mx(t){return!(t.g||t.u||3<=t.A||(t.Y++,t.u=Ak(KT(t.Ga,t),_x(t,t.A)),t.A++,0))}function yx(t){null!=t.B&&(FT.clearTimeout(t.B),t.B=null)}function vx(t){t.g=new Fk(t,t.h,"rpc",t.Y),null===t.o&&(t.g.H=t.s),t.g.O=0;var e=oA(t.oa);hA(e,"RID","rpc"),hA(e,"SID",t.J),hA(e,"CI",t.N?"0":"1"),hA(e,"AID",t.U),fx(t,e),hA(e,"TYPE","xmlhttp"),t.o&&t.s&&ix(e,t.o,t.s),t.K&&t.g.setTimeout(t.K);var n=t.g;t=t.la,n.K=1,n.v=dA(oA(e)),n.s=null,n.U=!0,Hk(n,t)}function wx(t){null!=t.v&&(FT.clearTimeout(t.v),t.v=null)}function bx(t,e){var n=null;if(t.g==e){wx(t),yx(t),t.g=null;var r=2}else{if(!DA(t.i,e))return;n=e.D,RA(t.i,e),r=1}if(t.I=e.N,0!=t.G)if(e.i)if(1==r){n=e.s?e.s.length:0,e=Date.now()-e.F;var i=t.C;JC(r=Ik(),new kk(r,n,e,i)),hx(t)}else gx(t);else if(3==(i=e.o)||0==i&&0<t.I||!(1==r&&function(t,e){return!(OA(t.i)>=t.i.j-(t.m?1:0)||(t.m?(t.l=e.D.concat(t.l),0):1==t.G||2==t.G||t.C>=(t.Xa?0:t.Ya)||(t.m=Ak(KT(t.Ha,t,e),_x(t,t.C)),t.C++,0)))}(t,e)||2==r&&mx(t)))switch(n&&0<n.length&&(e=t.i,e.i=e.i.concat(n)),i){case 1:Ix(t,5);break;case 4:Ix(t,10);break;case 3:Ix(t,6);break;default:Ix(t,2)}}function _x(t,e){let n=t.Pa+Math.floor(Math.random()*t.$a);return t.j||(n*=2),n*e}function Ix(t,e){if(t.h.info("Error code "+e),2==e){var n=null;t.j&&(n=null);var r=KT(t.jb,t);n||(n=new sA("//www.google.com/images/cleardot.gif"),FT.location&&"http"==FT.location.protocol||aA(n,"https"),dA(n)),function(t,e){const n=new vk;if(FT.Image){const r=new Image;r.onload=GT(FA,n,r,"TestLoadImage: loaded",!0,e),r.onerror=GT(FA,n,r,"TestLoadImage: error",!1,e),r.onabort=GT(FA,n,r,"TestLoadImage: abort",!1,e),r.ontimeout=GT(FA,n,r,"TestLoadImage: timeout",!1,e),FT.setTimeout(function(){r.ontimeout&&r.ontimeout()},1e4),r.src=t}else e(!1)}(n.toString(),r)}else Ck(2);t.G=0,t.j&&t.j.va(e),Sx(t),cx(t)}function Sx(t){t.G=0,t.I=-1,t.j&&(0==PA(t.i).length&&0==t.l.length||(t.i.i.length=0,tC(t.l),t.l.length=0),t.j.ua())}function Ex(t,e,n){let r=function(t){return t instanceof sA?oA(t):new sA(t,void 0)}(n);if(""!=r.i)e&&uA(r,e+"."+r.i),cA(r,r.m);else{const t=FT.location;r=function(t,e,n,r){var i=new sA(null,void 0);return t&&aA(i,t),e&&uA(i,e),n&&cA(i,n),r&&(i.l=r),i}(t.protocol,e?e+"."+t.hostname:t.hostname,+t.port,n)}return t.aa&&uC(t.aa,function(t,e){hA(r,e,t)}),n=t.sa,(e=t.D)&&n&&hA(r,e,n),hA(r,"VER",t.ma),fx(t,r),r}function Tx(t,e,n){if(e&&!t.H)throw Error("Can't create secondary domain capable XhrIo object.");return(e=new KA(n&&t.Ba&&!t.qa?new UA({ib:!0}):t.qa)).L=t.H,e}function Cx(){}function kx(){if(mC&&!(10<=Number(CC)))throw Error("Environmental error: no available transport.")}function Ax(t,e){YC.call(this),this.g=new ox(e),this.l=t,this.h=e&&e.messageUrlParams||null,t=e&&e.messageHeaders||null,e&&e.clientProtocolHeaderRequired&&(t?t["X-Client-Protocol"]="webchannel":t={"X-Client-Protocol":"webchannel"}),this.g.s=t,t=e&&e.initMessageHeaders||null,e&&e.messageContentType&&(t?t["X-WebChannel-Content-Type"]=e.messageContentType:t={"X-WebChannel-Content-Type":e.messageContentType}),e&&e.ya&&(t?t["X-WebChannel-Client-Profile"]=e.ya:t={"X-WebChannel-Client-Profile":e.ya}),this.g.P=t,(t=e&&e.httpHeadersOverwriteParam)&&!eC(t)&&(this.g.o=t),this.A=e&&e.supportsCrossDomainXhr||!1,this.v=e&&e.sendRawJson||!1,(e=e&&e.httpSessionIdParam)&&!eC(e)&&(this.g.D=e,null!==(t=this.h)&&e in t&&e in(t=this.h)&&delete t[e]),this.j=new Dx(this)}function xx(t){Mk.call(this);var e=t.__sm__;if(e){t:{for(const n in e){t=n;break t}t=void 0}(this.i=t)&&(t=this.i,e=null!==e&&t in e?e[t]:void 0),this.data=e}else this.data=t}function Ox(){Lk.call(this),this.status=1}function Dx(t){this.g=t}(PT=KA.prototype).ea=function(t,e,n,r){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.H+"; newUri="+t);e=e?e.toUpperCase():"GET",this.H=t,this.j="",this.m=0,this.D=!1,this.h=!0,this.g=this.u?this.u.g():Rk.g(),this.C=function(t){return t.h||(t.h=t.i())}(this.u?this.u:Rk),this.g.onreadystatechange=KT(this.Fa,this);try{this.F=!0,this.g.open(e,String(t),!0),this.F=!1}catch(s){return void JA(this,s)}t=n||"";const i=new eA(this.headers);r&&tA(r,function(t,e){i.set(e,t)}),r=function(t){t:{var e=YA;const n=t.length,r="string"==typeof t?t.split(""):t;for(let i=0;i<n;i++)if(i in r&&e.call(void 0,r[i],i,t)){e=i;break t}e=-1}return 0>e?null:"string"==typeof t?t.charAt(e):t[e]}(i.T()),n=FT.FormData&&t instanceof FT.FormData,!(0<=JT(QA,e))||r||n||i.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8"),i.forEach(function(t,e){this.g.setRequestHeader(e,t)},this),this.J&&(this.g.responseType=this.J),"withCredentials"in this.g&&this.g.withCredentials!==this.L&&(this.g.withCredentials=this.L);try{ex(this),0<this.B&&((this.K=function(t){return mC&&function(){return t=TC,Object.prototype.hasOwnProperty.call(t,9)?t[9]:t[9]=function(){let t=0;const e=rC(String(fC)).split("."),n=rC("9").split("."),r=Math.max(e.length,n.length);for(let o=0;0==t&&o<r;o++){var i=e[o]||"",s=n[o]||"";do{if(i=/(\d*)(\D*)(.*)/.exec(i)||["","","",""],s=/(\d*)(\D*)(.*)/.exec(s)||["","","",""],0==i[0].length&&0==s[0].length)break;t=sC(0==i[1].length?0:parseInt(i[1],10),0==s[1].length?0:parseInt(s[1],10))||sC(0==i[2].length,0==s[2].length)||sC(i[2],s[2]),i=i[3],s=s[3]}while(0==t)}return 0<=t}();var t}()&&"number"==typeof t.timeout&&void 0!==t.ontimeout}(this.g))?(this.g.timeout=this.B,this.g.ontimeout=KT(this.pa,this)):this.A=hk(this.pa,this.B,this)),this.v=!0,this.g.send(t),this.v=!1}catch(s){JA(this,s)}},PT.pa=function(){void 0!==VT&&this.g&&(this.j="Timed out after "+this.B+"ms, aborting",this.m=8,JC(this,"timeout"),this.abort(8))},PT.abort=function(t){this.g&&this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1,this.m=t||7,JC(this,"complete"),JC(this,"abort"),tx(this))},PT.M=function(){this.g&&(this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1),tx(this,!0)),KA.Z.M.call(this)},PT.Fa=function(){this.s||(this.F||this.v||this.l?ZA(this):this.cb())},PT.cb=function(){ZA(this)},PT.ba=function(){try{return 2<nx(this)?this.g.status:-1}catch(pC){return-1}},PT.ga=function(){try{return this.g?this.g.responseText:""}catch(pC){return""}},PT.Qa=function(t){if(this.g){var e=this.g.responseText;return t&&0==e.indexOf(t)&&(e=e.substring(t.length)),zA(e)}},PT.Da=function(){return this.m},PT.La=function(){return"string"==typeof this.j?this.j:String(this.j)},(PT=ox.prototype).ma=8,PT.G=1,PT.hb=function(t){try{this.h.info("Origin Trials invoked: "+t)}catch(e){}},PT.Ha=function(t){if(this.m)if(this.m=null,1==this.G){if(!t){this.V=Math.floor(1e5*Math.random()),t=this.V++;const i=new Fk(this,this.h,t,void 0);let s=this.s;if(this.P&&(s?(s=cC(s),hC(s,this.P)):s=this.P),null===this.o&&(i.H=s),this.ja)t:{for(var e=0,n=0;n<this.l.length;n++){var r=this.l[n];if(void 0===(r="__data__"in r.g&&"string"==typeof(r=r.g.__data__)?r.length:void 0))break;if(4096<(e+=r)){e=n;break t}if(4096===e||n===this.l.length-1){e=n+1;break t}}e=1e3}else e=1e3;e=px(this,i,e),hA(n=oA(this.F),"RID",t),hA(n,"CVER",22),this.D&&hA(n,"X-HTTP-Session-Id",this.D),fx(this,n),this.o&&s&&ix(n,this.o,s),NA(this.i,i),this.Ra&&hA(n,"TYPE","init"),this.ja?(hA(n,"$req",e),hA(n,"SID","null"),i.$=!0,qk(i,n,null)):qk(i,n,e),this.G=2}}else 3==this.G&&(t?dx(this,t):0==this.l.length||xA(this.i)||dx(this))},PT.Ga=function(){if(this.u=null,vx(this),this.$&&!(this.L||null==this.g||0>=this.O)){var t=2*this.O;this.h.info("BP detection timer enabled: "+t),this.B=Ak(KT(this.bb,this),t)}},PT.bb=function(){this.B&&(this.B=null,this.h.info("BP detection timeout reached."),this.h.info("Buffering proxy detected and switch to long-polling!"),this.N=!1,this.L=!0,Ck(10),ux(this),vx(this))},PT.ab=function(){null!=this.v&&(this.v=null,ux(this),mx(this),Ck(19))},PT.jb=function(t){t?(this.h.info("Successfully pinged google.com"),Ck(2)):(this.h.info("Failed to ping google.com"),Ck(1))},(PT=Cx.prototype).xa=function(){},PT.wa=function(){},PT.va=function(){},PT.ua=function(){},PT.Oa=function(){},kx.prototype.g=function(t,e){return new Ax(t,e)},WT(Ax,YC),Ax.prototype.m=function(){this.g.j=this.j,this.A&&(this.g.H=!0);var t=this.g,e=this.l,n=this.h||void 0;t.Wa&&(t.h.info("Origin Trials enabled."),sk(KT(t.hb,t,e))),Ck(0),t.W=e,t.aa=n||{},t.N=t.X,t.F=Ex(t,null,t.W),hx(t)},Ax.prototype.close=function(){ax(this.g)},Ax.prototype.u=function(t){if("string"==typeof t){var e={};e.__data__=t,lx(this.g,e)}else this.v?((e={}).__data__=ZC(t),lx(this.g,e)):lx(this.g,t)},Ax.prototype.M=function(){this.g.j=null,delete this.j,ax(this.g),delete this.g,Ax.Z.M.call(this)},WT(xx,Mk),WT(Ox,Lk),WT(Dx,Cx),Dx.prototype.xa=function(){JC(this.g,"a")},Dx.prototype.wa=function(t){JC(this.g,new xx(t))},Dx.prototype.va=function(t){JC(this.g,new Ox(t))},Dx.prototype.ua=function(){JC(this.g,"b")},kx.prototype.createWebChannel=kx.prototype.g,Ax.prototype.send=Ax.prototype.u,Ax.prototype.open=Ax.prototype.m,Ax.prototype.close=Ax.prototype.close,xk.NO_ERROR=0,xk.TIMEOUT=8,xk.HTTP_ERROR=6,Ok.COMPLETE="complete",Nk.EventType=Pk,Pk.OPEN="a",Pk.CLOSE="b",Pk.ERROR="c",Pk.MESSAGE="d",YC.prototype.listen=YC.prototype.N,KA.prototype.listenOnce=KA.prototype.O,KA.prototype.getLastError=KA.prototype.La,KA.prototype.getLastErrorCode=KA.prototype.Da,KA.prototype.getStatus=KA.prototype.ba,KA.prototype.getResponseJson=KA.prototype.Qa,KA.prototype.getResponseText=KA.prototype.ga,KA.prototype.send=KA.prototype.ea;var Nx=LT.createWebChannelTransport=function(){return new kx},Rx=LT.getStatEventTarget=function(){return Ik()},Px=LT.ErrorCode=xk,Mx=LT.EventType=Ok,Lx=LT.Event=bk,Vx=LT.Stat={rb:0,ub:1,vb:2,Ob:3,Tb:4,Qb:5,Rb:6,Pb:7,Nb:8,Sb:9,PROXY:10,NOPROXY:11,Lb:12,Hb:13,Ib:14,Gb:15,Jb:16,Kb:17,nb:18,mb:19,ob:20},Fx=LT.FetchXmlHttpFactory=UA,Ux=LT.WebChannel=Nk,jx=LT.XhrIo=KA;const Bx="@firebase/firestore";class $x{constructor(t){this.uid=t}isAuthenticated(){return null!=this.uid}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(t){return t.uid===this.uid}}$x.UNAUTHENTICATED=new $x(null),$x.GOOGLE_CREDENTIALS=new $x("google-credentials-uid"),$x.FIRST_PARTY=new $x("first-party-uid"),$x.MOCK_USER=new $x("mock-user");let qx="9.6.11";const Hx=new Xf("@firebase/firestore");function zx(){return Hx.logLevel}function Kx(t,...e){if(Hx.logLevel<=Kf.DEBUG){const n=e.map(Qx);Hx.debug(`Firestore (${qx}): ${t}`,...n)}}function Gx(t,...e){if(Hx.logLevel<=Kf.ERROR){const n=e.map(Qx);Hx.error(`Firestore (${qx}): ${t}`,...n)}}function Wx(t,...e){if(Hx.logLevel<=Kf.WARN){const n=e.map(Qx);Hx.warn(`Firestore (${qx}): ${t}`,...n)}}function Qx(t){if("string"==typeof t)return t;try{return JSON.stringify(t)}catch(e){return t}}function Yx(t="Unexpected state"){const e=`FIRESTORE (${qx}) INTERNAL ASSERTION FAILED: `+t;throw Gx(e),new Error(e)}function Jx(t,e){t||Yx()}function Xx(t,e){return t}const Zx={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class tO extends _f{constructor(t,e){super(t,e),this.code=t,this.message=e,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}class eO{constructor(){this.promise=new Promise((t,e)=>{this.resolve=t,this.reject=e})}}class nO{constructor(t,e){this.user=e,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${t}`)}}class rO{getToken(){return Promise.resolve(null)}invalidateToken(){}start(t,e){t.enqueueRetryable(()=>e($x.UNAUTHENTICATED))}shutdown(){}}class iO{constructor(t){this.token=t,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(t,e){this.changeListener=e,t.enqueueRetryable(()=>e(this.token.user))}shutdown(){this.changeListener=null}}class sO{constructor(t){this.t=t,this.currentUser=$x.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(t,e){var n=this;let r=this.i;const i=t=>this.i!==r?(r=this.i,e(t)):Promise.resolve();let s=new eO;this.o=()=>{this.i++,this.currentUser=this.u(),s.resolve(),s=new eO,t.enqueueRetryable(()=>i(this.currentUser))};const o=()=>{const e=s;t.enqueueRetryable(uf(function*(){yield e.promise,yield i(n.currentUser)}))},a=t=>{Kx("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=t,this.auth.addAuthTokenListener(this.o),o()};this.t.onInit(t=>a(t)),setTimeout(()=>{if(!this.auth){const t=this.t.getImmediate({optional:!0});t?a(t):(Kx("FirebaseAuthCredentialsProvider","Auth not yet detected"),s.resolve(),s=new eO)}},0),o()}getToken(){const t=this.i,e=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(e).then(e=>this.i!==t?(Kx("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):e?(Jx("string"==typeof e.accessToken),new nO(e.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.auth.removeAuthTokenListener(this.o)}u(){const t=this.auth&&this.auth.getUid();return Jx(null===t||"string"==typeof t),new $x(t)}}class oO{constructor(t,e,n){this.type="FirstParty",this.user=$x.FIRST_PARTY,this.headers=new Map,this.headers.set("X-Goog-AuthUser",e);const r=t.auth.getAuthHeaderValueForFirstParty([]);r&&this.headers.set("Authorization",r),n&&this.headers.set("X-Goog-Iam-Authorization-Token",n)}}class aO{constructor(t,e,n){this.h=t,this.l=e,this.m=n}getToken(){return Promise.resolve(new oO(this.h,this.l,this.m))}start(t,e){t.enqueueRetryable(()=>e($x.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class uO{constructor(t){this.value=t,this.type="AppCheck",this.headers=new Map,t&&t.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class cO{constructor(t){this.g=t,this.forceRefresh=!1,this.appCheck=null,this.p=null}start(t,e){const n=t=>{null!=t.error&&Kx("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${t.error.message}`);const n=t.token!==this.p;return this.p=t.token,Kx("FirebaseAppCheckTokenProvider",`Received ${n?"new":"existing"} token.`),n?e(t.token):Promise.resolve()};this.o=e=>{t.enqueueRetryable(()=>n(e))};const r=t=>{Kx("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=t,this.appCheck.addTokenListener(this.o)};this.g.onInit(t=>r(t)),setTimeout(()=>{if(!this.appCheck){const t=this.g.getImmediate({optional:!0});t?r(t):Kx("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const t=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(t).then(t=>t?(Jx("string"==typeof t.token),this.p=t.token,new uO(t.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}}class lO{constructor(t,e){this.previousValue=t,e&&(e.sequenceNumberHandler=t=>this.I(t),this.T=t=>e.writeSequenceNumber(t))}I(t){return this.previousValue=Math.max(t,this.previousValue),this.previousValue}next(){const t=++this.previousValue;return this.T&&this.T(t),t}}function hO(t){const e="undefined"!=typeof self&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&"function"==typeof e.getRandomValues)e.getRandomValues(n);else for(let r=0;r<t;r++)n[r]=Math.floor(256*Math.random());return n}lO.A=-1;class dO{static R(){const t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",e=Math.floor(256/t.length)*t.length;let n="";for(;n.length<20;){const r=hO(40);for(let i=0;i<r.length;++i)n.length<20&&r[i]<e&&(n+=t.charAt(r[i]%t.length))}return n}}function fO(t,e){return t<e?-1:t>e?1:0}function pO(t,e,n){return t.length===e.length&&t.every((t,r)=>n(t,e[r]))}function gO(t){return t+"\0"}class mO{constructor(t,e){if(this.seconds=t,this.nanoseconds=e,e<0)throw new tO(Zx.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+e);if(e>=1e9)throw new tO(Zx.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+e);if(t<-62135596800)throw new tO(Zx.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t);if(t>=253402300800)throw new tO(Zx.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t)}static now(){return mO.fromMillis(Date.now())}static fromDate(t){return mO.fromMillis(t.getTime())}static fromMillis(t){const e=Math.floor(t/1e3),n=Math.floor(1e6*(t-1e3*e));return new mO(e,n)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(t){return this.seconds===t.seconds?fO(this.nanoseconds,t.nanoseconds):fO(this.seconds,t.seconds)}isEqual(t){return t.seconds===this.seconds&&t.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){return String(this.seconds- -62135596800).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}class yO{constructor(t){this.timestamp=t}static fromTimestamp(t){return new yO(t)}static min(){return new yO(new mO(0,0))}static max(){return new yO(new mO(253402300799,999999999))}compareTo(t){return this.timestamp._compareTo(t.timestamp)}isEqual(t){return this.timestamp.isEqual(t.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}function vO(t){let e=0;for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function wO(t,e){for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function bO(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}class _O{constructor(t,e,n){void 0===e?e=0:e>t.length&&Yx(),void 0===n?n=t.length-e:n>t.length-e&&Yx(),this.segments=t,this.offset=e,this.len=n}get length(){return this.len}isEqual(t){return 0===_O.comparator(this,t)}child(t){const e=this.segments.slice(this.offset,this.limit());return t instanceof _O?t.forEach(t=>{e.push(t)}):e.push(t),this.construct(e)}limit(){return this.offset+this.length}popFirst(t){return this.construct(this.segments,this.offset+(t=void 0===t?1:t),this.length-t)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(t){return this.segments[this.offset+t]}isEmpty(){return 0===this.length}isPrefixOf(t){if(t.length<this.length)return!1;for(let e=0;e<this.length;e++)if(this.get(e)!==t.get(e))return!1;return!0}isImmediateParentOf(t){if(this.length+1!==t.length)return!1;for(let e=0;e<this.length;e++)if(this.get(e)!==t.get(e))return!1;return!0}forEach(t){for(let e=this.offset,n=this.limit();e<n;e++)t(this.segments[e])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(t,e){const n=Math.min(t.length,e.length);for(let r=0;r<n;r++){const n=t.get(r),i=e.get(r);if(n<i)return-1;if(n>i)return 1}return t.length<e.length?-1:t.length>e.length?1:0}}class IO extends _O{construct(t,e,n){return new IO(t,e,n)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}static fromString(...t){const e=[];for(const n of t){if(n.indexOf("//")>=0)throw new tO(Zx.INVALID_ARGUMENT,`Invalid segment (${n}). Paths must not contain // in them.`);e.push(...n.split("/").filter(t=>t.length>0))}return new IO(e)}static emptyPath(){return new IO([])}}const SO=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class EO extends _O{construct(t,e,n){return new EO(t,e,n)}static isValidIdentifier(t){return SO.test(t)}canonicalString(){return this.toArray().map(t=>(t=t.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),EO.isValidIdentifier(t)||(t="`"+t+"`"),t)).join(".")}toString(){return this.canonicalString()}isKeyField(){return 1===this.length&&"__name__"===this.get(0)}static keyField(){return new EO(["__name__"])}static fromServerFormat(t){const e=[];let n="",r=0;const i=()=>{if(0===n.length)throw new tO(Zx.INVALID_ARGUMENT,`Invalid field path (${t}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);e.push(n),n=""};let s=!1;for(;r<t.length;){const e=t[r];if("\\"===e){if(r+1===t.length)throw new tO(Zx.INVALID_ARGUMENT,"Path has trailing escape character: "+t);const e=t[r+1];if("\\"!==e&&"."!==e&&"`"!==e)throw new tO(Zx.INVALID_ARGUMENT,"Path has invalid escape sequence: "+t);n+=e,r+=2}else"`"===e?(s=!s,r++):"."!==e||s?(n+=e,r++):(i(),r++)}if(i(),s)throw new tO(Zx.INVALID_ARGUMENT,"Unterminated ` in path: "+t);return new EO(e)}static emptyPath(){return new EO([])}}class TO{constructor(t){this.fields=t,t.sort(EO.comparator)}covers(t){for(const e of this.fields)if(e.isPrefixOf(t))return!0;return!1}isEqual(t){return pO(this.fields,t.fields,(t,e)=>t.isEqual(e))}}let CO=(()=>{class t{constructor(t){this.binaryString=t}static fromBase64String(e){const n=atob(e);return new t(n)}static fromUint8Array(e){const n=function(t){let e="";for(let n=0;n<t.length;++n)e+=String.fromCharCode(t[n]);return e}(e);return new t(n)}[Symbol.iterator](){let t=0;return{next:()=>t<this.binaryString.length?{value:this.binaryString.charCodeAt(t++),done:!1}:{value:void 0,done:!0}}}toBase64(){return btoa(this.binaryString)}toUint8Array(){return function(t){const e=new Uint8Array(t.length);for(let n=0;n<t.length;n++)e[n]=t.charCodeAt(n);return e}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(t){return fO(this.binaryString,t.binaryString)}isEqual(t){return this.binaryString===t.binaryString}}return t.EMPTY_BYTE_STRING=new t(""),t})();const kO=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function AO(t){if(Jx(!!t),"string"==typeof t){let e=0;const n=kO.exec(t);if(Jx(!!n),n[1]){let t=n[1];t=(t+"000000000").substr(0,9),e=Number(t)}const r=new Date(t);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:xO(t.seconds),nanos:xO(t.nanos)}}function xO(t){return"number"==typeof t?t:"string"==typeof t?Number(t):0}function OO(t){return"string"==typeof t?CO.fromBase64String(t):CO.fromUint8Array(t)}function DO(t){var e,n;return"server_timestamp"===(null===(n=((null===(e=null==t?void 0:t.mapValue)||void 0===e?void 0:e.fields)||{}).__type__)||void 0===n?void 0:n.stringValue)}function NO(t){const e=t.mapValue.fields.__previous_value__;return DO(e)?NO(e):e}function RO(t){const e=AO(t.mapValue.fields.__local_write_time__.timestampValue);return new mO(e.seconds,e.nanos)}class PO{constructor(t,e,n,r,i,s,o,a){this.databaseId=t,this.appId=e,this.persistenceKey=n,this.host=r,this.ssl=i,this.forceLongPolling=s,this.autoDetectLongPolling=o,this.useFetchStreams=a}}class MO{constructor(t,e){this.projectId=t,this.database=e||"(default)"}static empty(){return new MO("","")}get isDefaultDatabase(){return"(default)"===this.database}isEqual(t){return t instanceof MO&&t.projectId===this.projectId&&t.database===this.database}}function LO(t){return null==t}function VO(t){return 0===t&&1/t==-1/0}function FO(t){return"number"==typeof t&&Number.isInteger(t)&&!VO(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}class UO{constructor(t){this.path=t}static fromPath(t){return new UO(IO.fromString(t))}static fromName(t){return new UO(IO.fromString(t).popFirst(5))}static empty(){return new UO(IO.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(t){return this.path.length>=2&&this.path.get(this.path.length-2)===t}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(t){return null!==t&&0===IO.comparator(this.path,t.path)}toString(){return this.path.toString()}static comparator(t,e){return IO.comparator(t.path,e.path)}static isDocumentKey(t){return t.length%2==0}static fromSegments(t){return new UO(new IO(t.slice()))}}const jO={mapValue:{fields:{__type__:{stringValue:"__max__"}}}},BO={nullValue:"NULL_VALUE"};function $O(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?DO(t)?4:nD(t)?9:10:Yx()}function qO(t,e){if(t===e)return!0;const n=$O(t);if(n!==$O(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return RO(t).isEqual(RO(e));case 3:return function(t,e){if("string"==typeof t.timestampValue&&"string"==typeof e.timestampValue&&t.timestampValue.length===e.timestampValue.length)return t.timestampValue===e.timestampValue;const n=AO(t.timestampValue),r=AO(e.timestampValue);return n.seconds===r.seconds&&n.nanos===r.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return function(t,e){return OO(t.bytesValue).isEqual(OO(e.bytesValue))}(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return function(t,e){return xO(t.geoPointValue.latitude)===xO(e.geoPointValue.latitude)&&xO(t.geoPointValue.longitude)===xO(e.geoPointValue.longitude)}(t,e);case 2:return function(t,e){if("integerValue"in t&&"integerValue"in e)return xO(t.integerValue)===xO(e.integerValue);if("doubleValue"in t&&"doubleValue"in e){const n=xO(t.doubleValue),r=xO(e.doubleValue);return n===r?VO(n)===VO(r):isNaN(n)&&isNaN(r)}return!1}(t,e);case 9:return pO(t.arrayValue.values||[],e.arrayValue.values||[],qO);case 10:return function(t,e){const n=t.mapValue.fields||{},r=e.mapValue.fields||{};if(vO(n)!==vO(r))return!1;for(const i in n)if(n.hasOwnProperty(i)&&(void 0===r[i]||!qO(n[i],r[i])))return!1;return!0}(t,e);default:return Yx()}}function HO(t,e){return void 0!==(t.values||[]).find(t=>qO(t,e))}function zO(t,e){if(t===e)return 0;const n=$O(t),r=$O(e);if(n!==r)return fO(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return fO(t.booleanValue,e.booleanValue);case 2:return function(t,e){const n=xO(t.integerValue||t.doubleValue),r=xO(e.integerValue||e.doubleValue);return n<r?-1:n>r?1:n===r?0:isNaN(n)?isNaN(r)?0:-1:1}(t,e);case 3:return KO(t.timestampValue,e.timestampValue);case 4:return KO(RO(t),RO(e));case 5:return fO(t.stringValue,e.stringValue);case 6:return function(t,e){const n=OO(t),r=OO(e);return n.compareTo(r)}(t.bytesValue,e.bytesValue);case 7:return function(t,e){const n=t.split("/"),r=e.split("/");for(let i=0;i<n.length&&i<r.length;i++){const t=fO(n[i],r[i]);if(0!==t)return t}return fO(n.length,r.length)}(t.referenceValue,e.referenceValue);case 8:return function(t,e){const n=fO(xO(t.latitude),xO(e.latitude));return 0!==n?n:fO(xO(t.longitude),xO(e.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return function(t,e){const n=t.values||[],r=e.values||[];for(let i=0;i<n.length&&i<r.length;++i){const t=zO(n[i],r[i]);if(t)return t}return fO(n.length,r.length)}(t.arrayValue,e.arrayValue);case 10:return function(t,e){const n=t.fields||{},r=Object.keys(n),i=e.fields||{},s=Object.keys(i);r.sort(),s.sort();for(let o=0;o<r.length&&o<s.length;++o){const t=fO(r[o],s[o]);if(0!==t)return t;const e=zO(n[r[o]],i[s[o]]);if(0!==e)return e}return fO(r.length,s.length)}(t.mapValue,e.mapValue);default:throw Yx()}}function KO(t,e){if("string"==typeof t&&"string"==typeof e&&t.length===e.length)return fO(t,e);const n=AO(t),r=AO(e),i=fO(n.seconds,r.seconds);return 0!==i?i:fO(n.nanos,r.nanos)}function GO(t){return WO(t)}function WO(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?function(t){const e=AO(t);return`time(${e.seconds},${e.nanos})`}(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?OO(t.bytesValue).toBase64():"referenceValue"in t?UO.fromName(t.referenceValue).toString():"geoPointValue"in t?`geo(${(e=t.geoPointValue).latitude},${e.longitude})`:"arrayValue"in t?function(t){let e="[",n=!0;for(const r of t.values||[])n?n=!1:e+=",",e+=WO(r);return e+"]"}(t.arrayValue):"mapValue"in t?function(t){const e=Object.keys(t.fields||{}).sort();let n="{",r=!0;for(const i of e)r?r=!1:n+=",",n+=`${i}:${WO(t.fields[i])}`;return n+"}"}(t.mapValue):Yx();var e}function QO(t,e){return{referenceValue:`projects/${t.projectId}/databases/${t.database}/documents/${e.path.canonicalString()}`}}function YO(t){return!!t&&"integerValue"in t}function JO(t){return!!t&&"arrayValue"in t}function XO(t){return!!t&&"nullValue"in t}function ZO(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function tD(t){return!!t&&"mapValue"in t}function eD(t){if(t.geoPointValue)return{geoPointValue:Object.assign({},t.geoPointValue)};if(t.timestampValue&&"object"==typeof t.timestampValue)return{timestampValue:Object.assign({},t.timestampValue)};if(t.mapValue){const e={mapValue:{fields:{}}};return wO(t.mapValue.fields,(t,n)=>e.mapValue.fields[t]=eD(n)),e}if(t.arrayValue){const e={arrayValue:{values:[]}};for(let n=0;n<(t.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=eD(t.arrayValue.values[n]);return e}return Object.assign({},t)}function nD(t){return"__max__"===(((t.mapValue||{}).fields||{}).__type__||{}).stringValue}function rD(t){return"nullValue"in t?BO:"booleanValue"in t?{booleanValue:!1}:"integerValue"in t||"doubleValue"in t?{doubleValue:NaN}:"timestampValue"in t?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in t?{stringValue:""}:"bytesValue"in t?{bytesValue:""}:"referenceValue"in t?QO(MO.empty(),UO.empty()):"geoPointValue"in t?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in t?{arrayValue:{}}:"mapValue"in t?{mapValue:{}}:Yx()}function iD(t){return"nullValue"in t?{booleanValue:!1}:"booleanValue"in t?{doubleValue:NaN}:"integerValue"in t||"doubleValue"in t?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in t?{stringValue:""}:"stringValue"in t?{bytesValue:""}:"bytesValue"in t?QO(MO.empty(),UO.empty()):"referenceValue"in t?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in t?{arrayValue:{}}:"arrayValue"in t?{mapValue:{}}:"mapValue"in t?jO:Yx()}function sD(t,e){return void 0===t?e:void 0===e||zO(t,e)>0?t:e}function oD(t,e){return void 0===t?e:void 0===e||zO(t,e)<0?t:e}class aD{constructor(t){this.value=t}static empty(){return new aD({mapValue:{}})}field(t){if(t.isEmpty())return this.value;{let e=this.value;for(let n=0;n<t.length-1;++n)if(e=(e.mapValue.fields||{})[t.get(n)],!tD(e))return null;return e=(e.mapValue.fields||{})[t.lastSegment()],e||null}}set(t,e){this.getFieldsMap(t.popLast())[t.lastSegment()]=eD(e)}setAll(t){let e=EO.emptyPath(),n={},r=[];t.forEach((t,i)=>{if(!e.isImmediateParentOf(i)){const t=this.getFieldsMap(e);this.applyChanges(t,n,r),n={},r=[],e=i.popLast()}t?n[i.lastSegment()]=eD(t):r.push(i.lastSegment())});const i=this.getFieldsMap(e);this.applyChanges(i,n,r)}delete(t){const e=this.field(t.popLast());tD(e)&&e.mapValue.fields&&delete e.mapValue.fields[t.lastSegment()]}isEqual(t){return qO(this.value,t.value)}getFieldsMap(t){let e=this.value;e.mapValue.fields||(e.mapValue={fields:{}});for(let n=0;n<t.length;++n){let r=e.mapValue.fields[t.get(n)];tD(r)&&r.mapValue.fields||(r={mapValue:{fields:{}}},e.mapValue.fields[t.get(n)]=r),e=r}return e.mapValue.fields}applyChanges(t,e,n){wO(e,(e,n)=>t[e]=n);for(const r of n)delete t[r]}clone(){return new aD(eD(this.value))}}function uD(t){const e=[];return wO(t.fields,(t,n)=>{const r=new EO([t]);if(tD(n)){const t=uD(n.mapValue).fields;if(0===t.length)e.push(r);else for(const n of t)e.push(r.child(n))}else e.push(r)}),new TO(e)}class cD{constructor(t,e,n,r,i,s){this.key=t,this.documentType=e,this.version=n,this.readTime=r,this.data=i,this.documentState=s}static newInvalidDocument(t){return new cD(t,0,yO.min(),yO.min(),aD.empty(),0)}static newFoundDocument(t,e,n){return new cD(t,1,e,yO.min(),n,0)}static newNoDocument(t,e){return new cD(t,2,e,yO.min(),aD.empty(),0)}static newUnknownDocument(t,e){return new cD(t,3,e,yO.min(),aD.empty(),2)}convertToFoundDocument(t,e){return this.version=t,this.documentType=1,this.data=e,this.documentState=0,this}convertToNoDocument(t){return this.version=t,this.documentType=2,this.data=aD.empty(),this.documentState=0,this}convertToUnknownDocument(t){return this.version=t,this.documentType=3,this.data=aD.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this}setReadTime(t){return this.readTime=t,this}get hasLocalMutations(){return 1===this.documentState}get hasCommittedMutations(){return 2===this.documentState}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return 0!==this.documentType}isFoundDocument(){return 1===this.documentType}isNoDocument(){return 2===this.documentType}isUnknownDocument(){return 3===this.documentType}isEqual(t){return t instanceof cD&&this.key.isEqual(t.key)&&this.version.isEqual(t.version)&&this.documentType===t.documentType&&this.documentState===t.documentState&&this.data.isEqual(t.data)}mutableCopy(){return new cD(this.key,this.documentType,this.version,this.readTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}class lD{constructor(t,e,n,r){this.indexId=t,this.collectionGroup=e,this.fields=n,this.indexState=r}}function hD(t){return t.fields.find(t=>2===t.kind)}function dD(t){return t.fields.filter(t=>2!==t.kind)}lD.UNKNOWN_ID=-1;class fD{constructor(t,e){this.fieldPath=t,this.kind=e}}class pD{constructor(t,e){this.sequenceNumber=t,this.offset=e}static empty(){return new pD(0,yD.min())}}function gD(t,e){const n=t.toTimestamp().seconds,r=t.toTimestamp().nanoseconds+1,i=yO.fromTimestamp(1e9===r?new mO(n+1,0):new mO(n,r));return new yD(i,UO.empty(),e)}function mD(t){return new yD(t.readTime,t.key,-1)}class yD{constructor(t,e,n){this.readTime=t,this.documentKey=e,this.largestBatchId=n}static min(){return new yD(yO.min(),UO.empty(),-1)}static max(){return new yD(yO.max(),UO.empty(),-1)}}function vD(t,e){let n=t.readTime.compareTo(e.readTime);return 0!==n?n:(n=UO.comparator(t.documentKey,e.documentKey),0!==n?n:fO(t.largestBatchId,e.largestBatchId))}class wD{constructor(t,e=null,n=[],r=[],i=null,s=null,o=null){this.path=t,this.collectionGroup=e,this.orderBy=n,this.filters=r,this.limit=i,this.startAt=s,this.endAt=o,this.P=null}}function bD(t,e=null,n=[],r=[],i=null,s=null,o=null){return new wD(t,e,n,r,i,s,o)}function _D(t){const e=Xx(t);if(null===e.P){let t=e.path.canonicalString();null!==e.collectionGroup&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map(t=>{return(e=t).field.canonicalString()+e.op.toString()+GO(e.value);var e}).join(","),t+="|ob:",t+=e.orderBy.map(t=>function(t){return t.field.canonicalString()+t.dir}(t)).join(","),LO(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(t=>GO(t)).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(t=>GO(t)).join(",")),e.P=t}return e.P}function ID(t,e){if(t.limit!==e.limit)return!1;if(t.orderBy.length!==e.orderBy.length)return!1;for(let i=0;i<t.orderBy.length;i++)if(!FD(t.orderBy[i],e.orderBy[i]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let i=0;i<t.filters.length;i++)if((n=t.filters[i]).op!==(r=e.filters[i]).op||!n.field.isEqual(r.field)||!qO(n.value,r.value))return!1;var n,r;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!jD(t.startAt,e.startAt)&&jD(t.endAt,e.endAt)}function SD(t){return UO.isDocumentKey(t.path)&&null===t.collectionGroup&&0===t.filters.length}function ED(t,e){return t.filters.filter(t=>t instanceof kD&&t.field.isEqual(e))}function TD(t,e,n){let r,i=!0;for(const s of ED(t,e)){let t,e=!0;switch(s.op){case"<":case"<=":t=rD(s.value);break;case"==":case"in":case">=":t=s.value;break;case">":t=s.value,e=!1;break;case"!=":case"not-in":t=BO}sD(r,t)===t&&(r=t,i=e)}if(null!==n)for(let s=0;s<t.orderBy.length;++s)if(t.orderBy[s].field.isEqual(e)){const t=n.position[s];sD(r,t)===t&&(r=t,i=n.inclusive);break}return{value:r,inclusive:i}}function CD(t,e,n){let r,i=!0;for(const s of ED(t,e)){let t,e=!0;switch(s.op){case">=":case">":t=iD(s.value),e=!1;break;case"==":case"in":case"<=":t=s.value;break;case"<":t=s.value,e=!1;break;case"!=":case"not-in":t=jO}oD(r,t)===t&&(r=t,i=e)}if(null!==n)for(let s=0;s<t.orderBy.length;++s)if(t.orderBy[s].field.isEqual(e)){const t=n.position[s];oD(r,t)===t&&(r=t,i=n.inclusive);break}return{value:r,inclusive:i}}class kD extends class{}{constructor(t,e,n){super(),this.field=t,this.op=e,this.value=n}static create(t,e,n){return t.isKeyField()?"in"===e||"not-in"===e?this.V(t,e,n):new AD(t,e,n):"array-contains"===e?new ND(t,n):"in"===e?new RD(t,n):"not-in"===e?new PD(t,n):"array-contains-any"===e?new MD(t,n):new kD(t,e,n)}static V(t,e,n){return"in"===e?new xD(t,n):new OD(t,n)}matches(t){const e=t.data.field(this.field);return"!="===this.op?null!==e&&this.v(zO(e,this.value)):null!==e&&$O(this.value)===$O(e)&&this.v(zO(e,this.value))}v(t){switch(this.op){case"<":return t<0;case"<=":return t<=0;case"==":return 0===t;case"!=":return 0!==t;case">":return t>0;case">=":return t>=0;default:return Yx()}}S(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}}class AD extends kD{constructor(t,e,n){super(t,e,n),this.key=UO.fromName(n.referenceValue)}matches(t){const e=UO.comparator(t.key,this.key);return this.v(e)}}class xD extends kD{constructor(t,e){super(t,"in",e),this.keys=DD(0,e)}matches(t){return this.keys.some(e=>e.isEqual(t.key))}}class OD extends kD{constructor(t,e){super(t,"not-in",e),this.keys=DD(0,e)}matches(t){return!this.keys.some(e=>e.isEqual(t.key))}}function DD(t,e){var n;return((null===(n=e.arrayValue)||void 0===n?void 0:n.values)||[]).map(t=>UO.fromName(t.referenceValue))}class ND extends kD{constructor(t,e){super(t,"array-contains",e)}matches(t){const e=t.data.field(this.field);return JO(e)&&HO(e.arrayValue,this.value)}}class RD extends kD{constructor(t,e){super(t,"in",e)}matches(t){const e=t.data.field(this.field);return null!==e&&HO(this.value.arrayValue,e)}}class PD extends kD{constructor(t,e){super(t,"not-in",e)}matches(t){if(HO(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const e=t.data.field(this.field);return null!==e&&!HO(this.value.arrayValue,e)}}class MD extends kD{constructor(t,e){super(t,"array-contains-any",e)}matches(t){const e=t.data.field(this.field);return!(!JO(e)||!e.arrayValue.values)&&e.arrayValue.values.some(t=>HO(this.value.arrayValue,t))}}class LD{constructor(t,e){this.position=t,this.inclusive=e}}class VD{constructor(t,e="asc"){this.field=t,this.dir=e}}function FD(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}function UD(t,e,n){let r=0;for(let i=0;i<t.position.length;i++){const s=e[i],o=t.position[i];if(r=s.field.isKeyField()?UO.comparator(UO.fromName(o.referenceValue),n.key):zO(o,n.data.field(s.field)),"desc"===s.dir&&(r*=-1),0!==r)break}return r}function jD(t,e){if(null===t)return null===e;if(null===e)return!1;if(t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let n=0;n<t.position.length;n++)if(!qO(t.position[n],e.position[n]))return!1;return!0}class BD{constructor(t,e=null,n=[],r=[],i=null,s="F",o=null,a=null){this.path=t,this.collectionGroup=e,this.explicitOrderBy=n,this.filters=r,this.limit=i,this.limitType=s,this.startAt=o,this.endAt=a,this.D=null,this.C=null}}function $D(t,e,n,r,i,s,o,a){return new BD(t,e,n,r,i,s,o,a)}function qD(t){return new BD(t)}function HD(t){return!LO(t.limit)&&"F"===t.limitType}function zD(t){return!LO(t.limit)&&"L"===t.limitType}function KD(t){return t.explicitOrderBy.length>0?t.explicitOrderBy[0].field:null}function GD(t){for(const e of t.filters)if(e.S())return e.field;return null}function WD(t){return null!==t.collectionGroup}function QD(t){const e=Xx(t);if(null===e.D){e.D=[];const t=GD(e),n=KD(e);if(null!==t&&null===n)t.isKeyField()||e.D.push(new VD(t)),e.D.push(new VD(EO.keyField(),"asc"));else{let t=!1;for(const n of e.explicitOrderBy)e.D.push(n),n.field.isKeyField()&&(t=!0);if(!t){const t=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";e.D.push(new VD(EO.keyField(),t))}}}return e.D}function YD(t){const e=Xx(t);if(!e.C)if("F"===e.limitType)e.C=bD(e.path,e.collectionGroup,QD(e),e.filters,e.limit,e.startAt,e.endAt);else{const t=[];for(const i of QD(e))t.push(new VD(i.field,"desc"===i.dir?"asc":"desc"));const n=e.endAt?new LD(e.endAt.position,!e.endAt.inclusive):null,r=e.startAt?new LD(e.startAt.position,!e.startAt.inclusive):null;e.C=bD(e.path,e.collectionGroup,t,e.filters,e.limit,n,r)}return e.C}function JD(t,e,n){return new BD(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function XD(t,e){return ID(YD(t),YD(e))&&t.limitType===e.limitType}function ZD(t){return`${_D(YD(t))}|lt:${t.limitType}`}function tN(t){return`Query(target=${function(t){let e=t.path.canonicalString();return null!==t.collectionGroup&&(e+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(e+=`, filters: [${t.filters.map(t=>{return`${(e=t).field.canonicalString()} ${e.op} ${GO(e.value)}`;var e}).join(", ")}]`),LO(t.limit)||(e+=", limit: "+t.limit),t.orderBy.length>0&&(e+=`, orderBy: [${t.orderBy.map(t=>function(t){return`${t.field.canonicalString()} (${t.dir})`}(t)).join(", ")}]`),t.startAt&&(e+=", startAt: ",e+=t.startAt.inclusive?"b:":"a:",e+=t.startAt.position.map(t=>GO(t)).join(",")),t.endAt&&(e+=", endAt: ",e+=t.endAt.inclusive?"a:":"b:",e+=t.endAt.position.map(t=>GO(t)).join(",")),`Target(${e})`}(YD(t))}; limitType=${t.limitType})`}function eN(t,e){return e.isFoundDocument()&&function(t,e){const n=e.key.path;return null!==t.collectionGroup?e.key.hasCollectionId(t.collectionGroup)&&t.path.isPrefixOf(n):UO.isDocumentKey(t.path)?t.path.isEqual(n):t.path.isImmediateParentOf(n)}(t,e)&&function(t,e){for(const n of t.explicitOrderBy)if(!n.field.isKeyField()&&null===e.data.field(n.field))return!1;return!0}(t,e)&&function(t,e){for(const n of t.filters)if(!n.matches(e))return!1;return!0}(t,e)&&function(t,e){return!(t.startAt&&!function(t,e,n){const r=UD(t,e,n);return t.inclusive?r<=0:r<0}(t.startAt,QD(t),e)||t.endAt&&!function(t,e,n){const r=UD(t,e,n);return t.inclusive?r>=0:r>0}(t.endAt,QD(t),e))}(t,e)}function nN(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}function rN(t){return(e,n)=>{let r=!1;for(const i of QD(t)){const t=iN(i,e,n);if(0!==t)return t;r=r||i.field.isKeyField()}return 0}}function iN(t,e,n){const r=t.field.isKeyField()?UO.comparator(e.key,n.key):function(t,e,n){const r=e.data.field(t),i=n.data.field(t);return null!==r&&null!==i?zO(r,i):Yx()}(t.field,e,n);switch(t.dir){case"asc":return r;case"desc":return-1*r;default:return Yx()}}function sN(t,e){if(t.N){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:VO(e)?"-0":e}}function oN(t){return{integerValue:""+t}}function aN(t,e){return FO(e)?oN(e):sN(t,e)}class uN{constructor(){this._=void 0}}function cN(t,e,n){return t instanceof dN?function(t,e){const n={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:t.seconds,nanos:t.nanoseconds}}}};return e&&(n.fields.__previous_value__=e),{mapValue:n}}(n,e):t instanceof fN?pN(t,e):t instanceof gN?mN(t,e):function(t,e){const n=hN(t,e),r=vN(n)+vN(t.k);return YO(n)&&YO(t.k)?oN(r):sN(t.M,r)}(t,e)}function lN(t,e,n){return t instanceof fN?pN(t,e):t instanceof gN?mN(t,e):n}function hN(t,e){return t instanceof yN?YO(n=e)||function(t){return!!t&&"doubleValue"in t}(n)?e:{integerValue:0}:null;var n}class dN extends uN{}class fN extends uN{constructor(t){super(),this.elements=t}}function pN(t,e){const n=wN(e);for(const r of t.elements)n.some(t=>qO(t,r))||n.push(r);return{arrayValue:{values:n}}}class gN extends uN{constructor(t){super(),this.elements=t}}function mN(t,e){let n=wN(e);for(const r of t.elements)n=n.filter(t=>!qO(t,r));return{arrayValue:{values:n}}}class yN extends uN{constructor(t,e){super(),this.M=t,this.k=e}}function vN(t){return xO(t.integerValue||t.doubleValue)}function wN(t){return JO(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}class bN{constructor(t,e){this.field=t,this.transform=e}}class _N{constructor(t,e){this.version=t,this.transformResults=e}}class IN{constructor(t,e){this.updateTime=t,this.exists=e}static none(){return new IN}static exists(t){return new IN(void 0,t)}static updateTime(t){return new IN(t)}get isNone(){return void 0===this.updateTime&&void 0===this.exists}isEqual(t){return this.exists===t.exists&&(this.updateTime?!!t.updateTime&&this.updateTime.isEqual(t.updateTime):!t.updateTime)}}function SN(t,e){return void 0!==t.updateTime?e.isFoundDocument()&&e.version.isEqual(t.updateTime):void 0===t.exists||t.exists===e.isFoundDocument()}class EN{}function TN(t,e,n){t instanceof ON?function(t,e,n){const r=t.value.clone(),i=RN(t.fieldTransforms,e,n.transformResults);r.setAll(i),e.convertToFoundDocument(n.version,r).setHasCommittedMutations()}(t,e,n):t instanceof DN?function(t,e,n){if(!SN(t.precondition,e))return void e.convertToUnknownDocument(n.version);const r=RN(t.fieldTransforms,e,n.transformResults),i=e.data;i.setAll(NN(t)),i.setAll(r),e.convertToFoundDocument(n.version,i).setHasCommittedMutations()}(t,e,n):function(t,e,n){e.convertToNoDocument(n.version).setHasCommittedMutations()}(0,e,n)}function CN(t,e,n){t instanceof ON?function(t,e,n){if(!SN(t.precondition,e))return;const r=t.value.clone(),i=PN(t.fieldTransforms,n,e);r.setAll(i),e.convertToFoundDocument(xN(e),r).setHasLocalMutations()}(t,e,n):t instanceof DN?function(t,e,n){if(!SN(t.precondition,e))return;const r=PN(t.fieldTransforms,n,e),i=e.data;i.setAll(NN(t)),i.setAll(r),e.convertToFoundDocument(xN(e),i).setHasLocalMutations()}(t,e,n):function(t,e){SN(t.precondition,e)&&e.convertToNoDocument(yO.min())}(t,e)}function kN(t,e){let n=null;for(const r of t.fieldTransforms){const t=e.data.field(r.field),i=hN(r.transform,t||null);null!=i&&(null==n&&(n=aD.empty()),n.set(r.field,i))}return n||null}function AN(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!function(t,e){return void 0===t&&void 0===e||!(!t||!e)&&pO(t,e,(t,e)=>function(t,e){return t.field.isEqual(e.field)&&function(t,e){return t instanceof fN&&e instanceof fN||t instanceof gN&&e instanceof gN?pO(t.elements,e.elements,qO):t instanceof yN&&e instanceof yN?qO(t.k,e.k):t instanceof dN&&e instanceof dN}(t.transform,e.transform)}(t,e))}(t.fieldTransforms,e.fieldTransforms)&&(0===t.type?t.value.isEqual(e.value):1!==t.type||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}function xN(t){return t.isFoundDocument()?t.version:yO.min()}class ON extends EN{constructor(t,e,n,r=[]){super(),this.key=t,this.value=e,this.precondition=n,this.fieldTransforms=r,this.type=0}}class DN extends EN{constructor(t,e,n,r,i=[]){super(),this.key=t,this.data=e,this.fieldMask=n,this.precondition=r,this.fieldTransforms=i,this.type=1}}function NN(t){const e=new Map;return t.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){const r=t.data.field(n);e.set(n,r)}}),e}function RN(t,e,n){const r=new Map;Jx(t.length===n.length);for(let i=0;i<n.length;i++){const s=t[i],o=s.transform,a=e.data.field(s.field);r.set(s.field,lN(o,a,n[i]))}return r}function PN(t,e,n){const r=new Map;for(const i of t){const t=i.transform,s=n.data.field(i.field);r.set(i.field,cN(t,s,e))}return r}class MN extends EN{constructor(t,e){super(),this.key=t,this.precondition=e,this.type=2,this.fieldTransforms=[]}}class LN extends EN{constructor(t,e){super(),this.key=t,this.precondition=e,this.type=3,this.fieldTransforms=[]}}class VN{constructor(t){this.count=t}}var FN,UN;function jN(t){switch(t){default:return Yx();case Zx.CANCELLED:case Zx.UNKNOWN:case Zx.DEADLINE_EXCEEDED:case Zx.RESOURCE_EXHAUSTED:case Zx.INTERNAL:case Zx.UNAVAILABLE:case Zx.UNAUTHENTICATED:return!1;case Zx.INVALID_ARGUMENT:case Zx.NOT_FOUND:case Zx.ALREADY_EXISTS:case Zx.PERMISSION_DENIED:case Zx.FAILED_PRECONDITION:case Zx.ABORTED:case Zx.OUT_OF_RANGE:case Zx.UNIMPLEMENTED:case Zx.DATA_LOSS:return!0}}function BN(t){if(void 0===t)return Gx("GRPC error has no .code"),Zx.UNKNOWN;switch(t){case FN.OK:return Zx.OK;case FN.CANCELLED:return Zx.CANCELLED;case FN.UNKNOWN:return Zx.UNKNOWN;case FN.DEADLINE_EXCEEDED:return Zx.DEADLINE_EXCEEDED;case FN.RESOURCE_EXHAUSTED:return Zx.RESOURCE_EXHAUSTED;case FN.INTERNAL:return Zx.INTERNAL;case FN.UNAVAILABLE:return Zx.UNAVAILABLE;case FN.UNAUTHENTICATED:return Zx.UNAUTHENTICATED;case FN.INVALID_ARGUMENT:return Zx.INVALID_ARGUMENT;case FN.NOT_FOUND:return Zx.NOT_FOUND;case FN.ALREADY_EXISTS:return Zx.ALREADY_EXISTS;case FN.PERMISSION_DENIED:return Zx.PERMISSION_DENIED;case FN.FAILED_PRECONDITION:return Zx.FAILED_PRECONDITION;case FN.ABORTED:return Zx.ABORTED;case FN.OUT_OF_RANGE:return Zx.OUT_OF_RANGE;case FN.UNIMPLEMENTED:return Zx.UNIMPLEMENTED;case FN.DATA_LOSS:return Zx.DATA_LOSS;default:return Yx()}}(UN=FN||(FN={}))[UN.OK=0]="OK",UN[UN.CANCELLED=1]="CANCELLED",UN[UN.UNKNOWN=2]="UNKNOWN",UN[UN.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",UN[UN.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",UN[UN.NOT_FOUND=5]="NOT_FOUND",UN[UN.ALREADY_EXISTS=6]="ALREADY_EXISTS",UN[UN.PERMISSION_DENIED=7]="PERMISSION_DENIED",UN[UN.UNAUTHENTICATED=16]="UNAUTHENTICATED",UN[UN.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",UN[UN.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",UN[UN.ABORTED=10]="ABORTED",UN[UN.OUT_OF_RANGE=11]="OUT_OF_RANGE",UN[UN.UNIMPLEMENTED=12]="UNIMPLEMENTED",UN[UN.INTERNAL=13]="INTERNAL",UN[UN.UNAVAILABLE=14]="UNAVAILABLE",UN[UN.DATA_LOSS=15]="DATA_LOSS";class $N{constructor(t,e){this.mapKeyFn=t,this.equalsFn=e,this.inner={},this.innerSize=0}get(t){const e=this.mapKeyFn(t),n=this.inner[e];if(void 0!==n)for(const[r,i]of n)if(this.equalsFn(r,t))return i}has(t){return void 0!==this.get(t)}set(t,e){const n=this.mapKeyFn(t),r=this.inner[n];if(void 0===r)return this.inner[n]=[[t,e]],void this.innerSize++;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],t))return void(r[i]=[t,e]);r.push([t,e]),this.innerSize++}delete(t){const e=this.mapKeyFn(t),n=this.inner[e];if(void 0===n)return!1;for(let r=0;r<n.length;r++)if(this.equalsFn(n[r][0],t))return 1===n.length?delete this.inner[e]:n.splice(r,1),this.innerSize--,!0;return!1}forEach(t){wO(this.inner,(e,n)=>{for(const[r,i]of n)t(r,i)})}isEmpty(){return bO(this.inner)}size(){return this.innerSize}}class qN{constructor(t,e){this.comparator=t,this.root=e||zN.EMPTY}insert(t,e){return new qN(this.comparator,this.root.insert(t,e,this.comparator).copy(null,null,zN.BLACK,null,null))}remove(t){return new qN(this.comparator,this.root.remove(t,this.comparator).copy(null,null,zN.BLACK,null,null))}get(t){let e=this.root;for(;!e.isEmpty();){const n=this.comparator(t,e.key);if(0===n)return e.value;n<0?e=e.left:n>0&&(e=e.right)}return null}indexOf(t){let e=0,n=this.root;for(;!n.isEmpty();){const r=this.comparator(t,n.key);if(0===r)return e+n.left.size;r<0?n=n.left:(e+=n.left.size+1,n=n.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(t){return this.root.inorderTraversal(t)}forEach(t){this.inorderTraversal((e,n)=>(t(e,n),!1))}toString(){const t=[];return this.inorderTraversal((e,n)=>(t.push(`${e}:${n}`),!1)),`{${t.join(", ")}}`}reverseTraversal(t){return this.root.reverseTraversal(t)}getIterator(){return new HN(this.root,null,this.comparator,!1)}getIteratorFrom(t){return new HN(this.root,t,this.comparator,!1)}getReverseIterator(){return new HN(this.root,null,this.comparator,!0)}getReverseIteratorFrom(t){return new HN(this.root,t,this.comparator,!0)}}class HN{constructor(t,e,n,r){this.isReverse=r,this.nodeStack=[];let i=1;for(;!t.isEmpty();)if(i=e?n(t.key,e):1,e&&r&&(i*=-1),i<0)t=this.isReverse?t.left:t.right;else{if(0===i){this.nodeStack.push(t);break}this.nodeStack.push(t),t=this.isReverse?t.right:t.left}}getNext(){let t=this.nodeStack.pop();const e={key:t.key,value:t.value};if(this.isReverse)for(t=t.left;!t.isEmpty();)this.nodeStack.push(t),t=t.right;else for(t=t.right;!t.isEmpty();)this.nodeStack.push(t),t=t.left;return e}hasNext(){return this.nodeStack.length>0}peek(){if(0===this.nodeStack.length)return null;const t=this.nodeStack[this.nodeStack.length-1];return{key:t.key,value:t.value}}}class zN{constructor(t,e,n,r,i){this.key=t,this.value=e,this.color=null!=n?n:zN.RED,this.left=null!=r?r:zN.EMPTY,this.right=null!=i?i:zN.EMPTY,this.size=this.left.size+1+this.right.size}copy(t,e,n,r,i){return new zN(null!=t?t:this.key,null!=e?e:this.value,null!=n?n:this.color,null!=r?r:this.left,null!=i?i:this.right)}isEmpty(){return!1}inorderTraversal(t){return this.left.inorderTraversal(t)||t(this.key,this.value)||this.right.inorderTraversal(t)}reverseTraversal(t){return this.right.reverseTraversal(t)||t(this.key,this.value)||this.left.reverseTraversal(t)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(t,e,n){let r=this;const i=n(t,r.key);return r=i<0?r.copy(null,null,null,r.left.insert(t,e,n),null):0===i?r.copy(null,e,null,null,null):r.copy(null,null,null,null,r.right.insert(t,e,n)),r.fixUp()}removeMin(){if(this.left.isEmpty())return zN.EMPTY;let t=this;return t.left.isRed()||t.left.left.isRed()||(t=t.moveRedLeft()),t=t.copy(null,null,null,t.left.removeMin(),null),t.fixUp()}remove(t,e){let n,r=this;if(e(t,r.key)<0)r.left.isEmpty()||r.left.isRed()||r.left.left.isRed()||(r=r.moveRedLeft()),r=r.copy(null,null,null,r.left.remove(t,e),null);else{if(r.left.isRed()&&(r=r.rotateRight()),r.right.isEmpty()||r.right.isRed()||r.right.left.isRed()||(r=r.moveRedRight()),0===e(t,r.key)){if(r.right.isEmpty())return zN.EMPTY;n=r.right.min(),r=r.copy(n.key,n.value,null,null,r.right.removeMin())}r=r.copy(null,null,null,null,r.right.remove(t,e))}return r.fixUp()}isRed(){return this.color}fixUp(){let t=this;return t.right.isRed()&&!t.left.isRed()&&(t=t.rotateLeft()),t.left.isRed()&&t.left.left.isRed()&&(t=t.rotateRight()),t.left.isRed()&&t.right.isRed()&&(t=t.colorFlip()),t}moveRedLeft(){let t=this.colorFlip();return t.right.left.isRed()&&(t=t.copy(null,null,null,null,t.right.rotateRight()),t=t.rotateLeft(),t=t.colorFlip()),t}moveRedRight(){let t=this.colorFlip();return t.left.left.isRed()&&(t=t.rotateRight(),t=t.colorFlip()),t}rotateLeft(){const t=this.copy(null,null,zN.RED,null,this.right.left);return this.right.copy(null,null,this.color,t,null)}rotateRight(){const t=this.copy(null,null,zN.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,t)}colorFlip(){const t=this.left.copy(null,null,!this.left.color,null,null),e=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,t,e)}checkMaxDepth(){const t=this.check();return Math.pow(2,t)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw Yx();if(this.right.isRed())throw Yx();const t=this.left.check();if(t!==this.right.check())throw Yx();return t+(this.isRed()?0:1)}}zN.EMPTY=null,zN.RED=!0,zN.BLACK=!1,zN.EMPTY=new class{constructor(){this.size=0}get key(){throw Yx()}get value(){throw Yx()}get color(){throw Yx()}get left(){throw Yx()}get right(){throw Yx()}copy(t,e,n,r,i){return this}insert(t,e,n){return new zN(t,e)}remove(t,e){return this}isEmpty(){return!0}inorderTraversal(t){return!1}reverseTraversal(t){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};class KN{constructor(t){this.comparator=t,this.data=new qN(this.comparator)}has(t){return null!==this.data.get(t)}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(t){return this.data.indexOf(t)}forEach(t){this.data.inorderTraversal((e,n)=>(t(e),!1))}forEachInRange(t,e){const n=this.data.getIteratorFrom(t[0]);for(;n.hasNext();){const r=n.getNext();if(this.comparator(r.key,t[1])>=0)return;e(r.key)}}forEachWhile(t,e){let n;for(n=void 0!==e?this.data.getIteratorFrom(e):this.data.getIterator();n.hasNext();)if(!t(n.getNext().key))return}firstAfterOrEqual(t){const e=this.data.getIteratorFrom(t);return e.hasNext()?e.getNext().key:null}getIterator(){return new GN(this.data.getIterator())}getIteratorFrom(t){return new GN(this.data.getIteratorFrom(t))}add(t){return this.copy(this.data.remove(t).insert(t,!0))}delete(t){return this.has(t)?this.copy(this.data.remove(t)):this}isEmpty(){return this.data.isEmpty()}unionWith(t){let e=this;return e.size<t.size&&(e=t,t=this),t.forEach(t=>{e=e.add(t)}),e}isEqual(t){if(!(t instanceof KN))return!1;if(this.size!==t.size)return!1;const e=this.data.getIterator(),n=t.data.getIterator();for(;e.hasNext();){const t=e.getNext().key,r=n.getNext().key;if(0!==this.comparator(t,r))return!1}return!0}toArray(){const t=[];return this.forEach(e=>{t.push(e)}),t}toString(){const t=[];return this.forEach(e=>t.push(e)),"SortedSet("+t.toString()+")"}copy(t){const e=new KN(this.comparator);return e.data=t,e}}class GN{constructor(t){this.iter=t}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}function WN(t){return t.hasNext()?t.getNext():void 0}const QN=new qN(UO.comparator);function YN(){return QN}const JN=new qN(UO.comparator);function XN(){return JN}function ZN(){return new $N(t=>t.toString(),(t,e)=>t.isEqual(e))}const tR=new qN(UO.comparator),eR=new KN(UO.comparator);function nR(...t){let e=eR;for(const n of t)e=e.add(n);return e}const rR=new KN(fO);function iR(){return rR}class sR{constructor(t,e,n,r,i){this.snapshotVersion=t,this.targetChanges=e,this.targetMismatches=n,this.documentUpdates=r,this.resolvedLimboDocuments=i}static createSynthesizedRemoteEventForCurrentChange(t,e){const n=new Map;return n.set(t,oR.createSynthesizedTargetChangeForCurrentChange(t,e)),new sR(yO.min(),n,iR(),YN(),nR())}}class oR{constructor(t,e,n,r,i){this.resumeToken=t,this.current=e,this.addedDocuments=n,this.modifiedDocuments=r,this.removedDocuments=i}static createSynthesizedTargetChangeForCurrentChange(t,e){return new oR(CO.EMPTY_BYTE_STRING,e,nR(),nR(),nR())}}class aR{constructor(t,e,n,r){this.O=t,this.removedTargetIds=e,this.key=n,this.F=r}}class uR{constructor(t,e){this.targetId=t,this.$=e}}class cR{constructor(t,e,n=CO.EMPTY_BYTE_STRING,r=null){this.state=t,this.targetIds=e,this.resumeToken=n,this.cause=r}}class lR{constructor(){this.B=0,this.L=fR(),this.U=CO.EMPTY_BYTE_STRING,this.q=!1,this.K=!0}get current(){return this.q}get resumeToken(){return this.U}get G(){return 0!==this.B}get j(){return this.K}W(t){t.approximateByteSize()>0&&(this.K=!0,this.U=t)}H(){let t=nR(),e=nR(),n=nR();return this.L.forEach((r,i)=>{switch(i){case 0:t=t.add(r);break;case 2:e=e.add(r);break;case 1:n=n.add(r);break;default:Yx()}}),new oR(this.U,this.q,t,e,n)}J(){this.K=!1,this.L=fR()}Y(t,e){this.K=!0,this.L=this.L.insert(t,e)}X(t){this.K=!0,this.L=this.L.remove(t)}Z(){this.B+=1}tt(){this.B-=1}et(){this.K=!0,this.q=!0}}class hR{constructor(t){this.nt=t,this.st=new Map,this.it=YN(),this.rt=dR(),this.ot=new KN(fO)}ut(t){for(const e of t.O)t.F&&t.F.isFoundDocument()?this.at(e,t.F):this.ct(e,t.key,t.F);for(const e of t.removedTargetIds)this.ct(e,t.key,t.F)}ht(t){this.forEachTarget(t,e=>{const n=this.lt(e);switch(t.state){case 0:this.ft(e)&&n.W(t.resumeToken);break;case 1:n.tt(),n.G||n.J(),n.W(t.resumeToken);break;case 2:n.tt(),n.G||this.removeTarget(e);break;case 3:this.ft(e)&&(n.et(),n.W(t.resumeToken));break;case 4:this.ft(e)&&(this.dt(e),n.W(t.resumeToken));break;default:Yx()}})}forEachTarget(t,e){t.targetIds.length>0?t.targetIds.forEach(e):this.st.forEach((t,n)=>{this.ft(n)&&e(n)})}_t(t){const e=t.targetId,n=t.$.count,r=this.wt(e);if(r){const t=r.target;if(SD(t))if(0===n){const n=new UO(t.path);this.ct(e,n,cD.newNoDocument(n,yO.min()))}else Jx(1===n);else this.gt(e)!==n&&(this.dt(e),this.ot=this.ot.add(e))}}yt(t){const e=new Map;this.st.forEach((n,r)=>{const i=this.wt(r);if(i){if(n.current&&SD(i.target)){const e=new UO(i.target.path);null!==this.it.get(e)||this.It(r,e)||this.ct(r,e,cD.newNoDocument(e,t))}n.j&&(e.set(r,n.H()),n.J())}});let n=nR();this.rt.forEach((t,e)=>{let r=!0;e.forEachWhile(t=>{const e=this.wt(t);return!e||2===e.purpose||(r=!1,!1)}),r&&(n=n.add(t))}),this.it.forEach((e,n)=>n.setReadTime(t));const r=new sR(t,e,this.ot,this.it,n);return this.it=YN(),this.rt=dR(),this.ot=new KN(fO),r}at(t,e){if(!this.ft(t))return;const n=this.It(t,e.key)?2:0;this.lt(t).Y(e.key,n),this.it=this.it.insert(e.key,e),this.rt=this.rt.insert(e.key,this.Tt(e.key).add(t))}ct(t,e,n){if(!this.ft(t))return;const r=this.lt(t);this.It(t,e)?r.Y(e,1):r.X(e),this.rt=this.rt.insert(e,this.Tt(e).delete(t)),n&&(this.it=this.it.insert(e,n))}removeTarget(t){this.st.delete(t)}gt(t){const e=this.lt(t).H();return this.nt.getRemoteKeysForTarget(t).size+e.addedDocuments.size-e.removedDocuments.size}Z(t){this.lt(t).Z()}lt(t){let e=this.st.get(t);return e||(e=new lR,this.st.set(t,e)),e}Tt(t){let e=this.rt.get(t);return e||(e=new KN(fO),this.rt=this.rt.insert(t,e)),e}ft(t){const e=null!==this.wt(t);return e||Kx("WatchChangeAggregator","Detected inactive target",t),e}wt(t){const e=this.st.get(t);return e&&e.G?null:this.nt.Et(t)}dt(t){this.st.set(t,new lR),this.nt.getRemoteKeysForTarget(t).forEach(e=>{this.ct(t,e,null)})}It(t,e){return this.nt.getRemoteKeysForTarget(t).has(e)}}function dR(){return new qN(UO.comparator)}function fR(){return new qN(UO.comparator)}const pR={asc:"ASCENDING",desc:"DESCENDING"},gR={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"};class mR{constructor(t,e){this.databaseId=t,this.N=e}}function yR(t,e){return t.N?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function vR(t,e){return t.N?e.toBase64():e.toUint8Array()}function wR(t,e){return yR(t,e.toTimestamp())}function bR(t){return Jx(!!t),yO.fromTimestamp(function(t){const e=AO(t);return new mO(e.seconds,e.nanos)}(t))}function _R(t,e){return function(t){return new IO(["projects",t.projectId,"databases",t.database])}(t).child("documents").child(e).canonicalString()}function IR(t){const e=IO.fromString(t);return Jx(HR(e)),e}function SR(t,e){return _R(t.databaseId,e.path)}function ER(t,e){const n=IR(e);if(n.get(1)!==t.databaseId.projectId)throw new tO(Zx.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.databaseId.projectId);if(n.get(3)!==t.databaseId.database)throw new tO(Zx.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.databaseId.database);return new UO(AR(n))}function TR(t,e){return _R(t.databaseId,e)}function CR(t){const e=IR(t);return 4===e.length?IO.emptyPath():AR(e)}function kR(t){return new IO(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function AR(t){return Jx(t.length>4&&"documents"===t.get(4)),t.popFirst(5)}function xR(t,e,n){return{name:SR(t,e),fields:n.value.mapValue.fields}}function OR(t,e,n){const r=ER(t,e.name),i=bR(e.updateTime),s=new aD({mapValue:{fields:e.fields}}),o=cD.newFoundDocument(r,i,s);return n&&o.setHasCommittedMutations(),n?o.setHasCommittedMutations():o}function DR(t,e){let n;if(e instanceof ON)n={update:xR(t,e.key,e.value)};else if(e instanceof MN)n={delete:SR(t,e.key)};else if(e instanceof DN)n={update:xR(t,e.key,e.data),updateMask:qR(e.fieldMask)};else{if(!(e instanceof LN))return Yx();n={verify:SR(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map(t=>function(t,e){const n=e.transform;if(n instanceof dN)return{fieldPath:e.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(n instanceof fN)return{fieldPath:e.field.canonicalString(),appendMissingElements:{values:n.elements}};if(n instanceof gN)return{fieldPath:e.field.canonicalString(),removeAllFromArray:{values:n.elements}};if(n instanceof yN)return{fieldPath:e.field.canonicalString(),increment:n.k};throw Yx()}(0,t))),e.precondition.isNone||(n.currentDocument=function(t,e){return void 0!==e.updateTime?{updateTime:wR(t,e.updateTime)}:void 0!==e.exists?{exists:e.exists}:Yx()}(t,e.precondition)),n}function NR(t,e){const n=e.currentDocument?function(t){return void 0!==t.updateTime?IN.updateTime(bR(t.updateTime)):void 0!==t.exists?IN.exists(t.exists):IN.none()}(e.currentDocument):IN.none(),r=e.updateTransforms?e.updateTransforms.map(e=>function(t,e){let n=null;"setToServerValue"in e?(Jx("REQUEST_TIME"===e.setToServerValue),n=new dN):"appendMissingElements"in e?n=new fN(e.appendMissingElements.values||[]):"removeAllFromArray"in e?n=new gN(e.removeAllFromArray.values||[]):"increment"in e?n=new yN(t,e.increment):Yx();const r=EO.fromServerFormat(e.fieldPath);return new bN(r,n)}(t,e)):[];if(e.update){const i=ER(t,e.update.name),s=new aD({mapValue:{fields:e.update.fields}});if(e.updateMask){const t=function(t){return new TO((t.fieldPaths||[]).map(t=>EO.fromServerFormat(t)))}(e.updateMask);return new DN(i,s,t,n,r)}return new ON(i,s,n,r)}if(e.delete){const r=ER(t,e.delete);return new MN(r,n)}if(e.verify){const r=ER(t,e.verify);return new LN(r,n)}return Yx()}function RR(t,e){return{documents:[TR(t,e.path)]}}function PR(t,e){const n={structuredQuery:{}},r=e.path;null!==e.collectionGroup?(n.parent=TR(t,r),n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(n.parent=TR(t,r.popLast()),n.structuredQuery.from=[{collectionId:r.lastSegment()}]);const i=function(t){if(0===t.length)return;const e=t.map(t=>function(t){if("=="===t.op){if(ZO(t.value))return{unaryFilter:{field:UR(t.field),op:"IS_NAN"}};if(XO(t.value))return{unaryFilter:{field:UR(t.field),op:"IS_NULL"}}}else if("!="===t.op){if(ZO(t.value))return{unaryFilter:{field:UR(t.field),op:"IS_NOT_NAN"}};if(XO(t.value))return{unaryFilter:{field:UR(t.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:UR(t.field),op:FR(t.op),value:t.value}}}(t));return 1===e.length?e[0]:{compositeFilter:{op:"AND",filters:e}}}(e.filters);i&&(n.structuredQuery.where=i);const s=function(t){if(0!==t.length)return t.map(t=>function(t){return{field:UR(t.field),direction:VR(t.dir)}}(t))}(e.orderBy);s&&(n.structuredQuery.orderBy=s);const o=function(t,e){return t.N||LO(e)?e:{value:e}}(t,e.limit);var a;return null!==o&&(n.structuredQuery.limit=o),e.startAt&&(n.structuredQuery.startAt={before:(a=e.startAt).inclusive,values:a.position}),e.endAt&&(n.structuredQuery.endAt=function(t){return{before:!t.inclusive,values:t.position}}(e.endAt)),n}function MR(t){let e=CR(t.parent);const n=t.structuredQuery,r=n.from?n.from.length:0;let i=null;if(r>0){Jx(1===r);const t=n.from[0];t.allDescendants?i=t.collectionId:e=e.child(t.collectionId)}let s=[];n.where&&(s=LR(n.where));let o=[];n.orderBy&&(o=n.orderBy.map(t=>function(t){return new VD(jR(t.field),function(t){switch(t){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(t.direction))}(t)));let a=null;n.limit&&(a=function(t){let e;return e="object"==typeof t?t.value:t,LO(e)?null:e}(n.limit));let u=null;n.startAt&&(u=function(t){return new LD(t.values||[],!!t.before)}(n.startAt));let c=null;return n.endAt&&(c=function(t){return new LD(t.values||[],!t.before)}(n.endAt)),$D(e,i,o,s,a,"F",u,c)}function LR(t){return t?void 0!==t.unaryFilter?[$R(t)]:void 0!==t.fieldFilter?[BR(t)]:void 0!==t.compositeFilter?t.compositeFilter.filters.map(t=>LR(t)).reduce((t,e)=>t.concat(e)):Yx():[]}function VR(t){return pR[t]}function FR(t){return gR[t]}function UR(t){return{fieldPath:t.canonicalString()}}function jR(t){return EO.fromServerFormat(t.fieldPath)}function BR(t){return kD.create(jR(t.fieldFilter.field),function(t){switch(t){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return Yx()}}(t.fieldFilter.op),t.fieldFilter.value)}function $R(t){switch(t.unaryFilter.op){case"IS_NAN":const e=jR(t.unaryFilter.field);return kD.create(e,"==",{doubleValue:NaN});case"IS_NULL":const n=jR(t.unaryFilter.field);return kD.create(n,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const r=jR(t.unaryFilter.field);return kD.create(r,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const i=jR(t.unaryFilter.field);return kD.create(i,"!=",{nullValue:"NULL_VALUE"});default:return Yx()}}function qR(t){const e=[];return t.fields.forEach(t=>e.push(t.canonicalString())),{fieldPaths:e}}function HR(t){return t.length>=4&&"projects"===t.get(0)&&"databases"===t.get(2)}function zR(t){let e="";for(let n=0;n<t.length;n++)e.length>0&&(e=GR(e)),e=KR(t.get(n),e);return GR(e)}function KR(t,e){let n=e;const r=t.length;for(let i=0;i<r;i++){const e=t.charAt(i);switch(e){case"\0":n+="\x01\x10";break;case"\x01":n+="\x01\x11";break;default:n+=e}}return n}function GR(t){return t+"\x01\x01"}function WR(t){const e=t.length;if(Jx(e>=2),2===e)return Jx("\x01"===t.charAt(0)&&"\x01"===t.charAt(1)),IO.emptyPath();const n=e-2,r=[];let i="";for(let s=0;s<e;){const e=t.indexOf("\x01",s);switch((e<0||e>n)&&Yx(),t.charAt(e+1)){case"\x01":const n=t.substring(s,e);let o;0===i.length?o=n:(i+=n,o=i,i=""),r.push(o);break;case"\x10":i+=t.substring(s,e),i+="\0";break;case"\x11":i+=t.substring(s,e+1);break;default:Yx()}s=e+2}return new IO(r)}const QR=["userId","batchId"];function YR(t,e){return[t,zR(e)]}function JR(t,e,n){return[t,zR(e),n]}const XR={},ZR=["prefixPath","collectionGroup","readTime","documentId"],tP=["prefixPath","collectionGroup","documentId"],eP=["collectionGroup","readTime","prefixPath","documentId"],nP=["canonicalId","targetId"],rP=["targetId","path"],iP=["path","targetId"],sP=["collectionId","parent"],oP=["indexId","uid"],aP=["uid","sequenceNumber"],uP=["indexId","uid","arrayValue","directionalValue","orderedDocumentKey","documentKey"],cP=["indexId","uid","orderedDocumentKey"],lP=["userId","collectionPath","documentId"],hP=["userId","collectionPath","largestBatchId"],dP=["userId","collectionGroup","largestBatchId"],fP=["mutationQueues","mutations","documentMutations","remoteDocuments","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries"],pP=[...fP,"documentOverlays"],gP=["mutationQueues","mutations","documentMutations","remoteDocumentsV14","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries","documentOverlays"],mP=[...gP,"indexConfiguration","indexState","indexEntries"],yP="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class vP{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(t){this.onCommittedListeners.push(t)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(t=>t())}}class wP{constructor(t){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,t(t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)},t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)})}catch(t){return this.next(void 0,t)}next(t,e){return this.callbackAttached&&Yx(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(e,this.error):this.wrapSuccess(t,this.result):new wP((n,r)=>{this.nextCallback=e=>{this.wrapSuccess(t,e).next(n,r)},this.catchCallback=t=>{this.wrapFailure(e,t).next(n,r)}})}toPromise(){return new Promise((t,e)=>{this.next(t,e)})}wrapUserFunction(t){try{const e=t();return e instanceof wP?e:wP.resolve(e)}catch(t){return wP.reject(t)}}wrapSuccess(t,e){return t?this.wrapUserFunction(()=>t(e)):wP.resolve(e)}wrapFailure(t,e){return t?this.wrapUserFunction(()=>t(e)):wP.reject(e)}static resolve(t){return new wP((e,n)=>{e(t)})}static reject(t){return new wP((e,n)=>{n(t)})}static waitFor(t){return new wP((e,n)=>{let r=0,i=0,s=!1;t.forEach(t=>{++r,t.next(()=>{++i,s&&i===r&&e()},t=>n(t))}),s=!0,i===r&&e()})}static or(t){let e=wP.resolve(!1);for(const n of t)e=e.next(t=>t?wP.resolve(t):n());return e}static forEach(t,e){const n=[];return t.forEach((t,r)=>{n.push(e.call(this,t,r))}),this.waitFor(n)}}class bP{constructor(t,e){this.action=t,this.transaction=e,this.aborted=!1,this.At=new eO,this.transaction.oncomplete=()=>{this.At.resolve()},this.transaction.onabort=()=>{e.error?this.At.reject(new SP(t,e.error)):this.At.resolve()},this.transaction.onerror=e=>{const n=AP(e.target.error);this.At.reject(new SP(t,n))}}static open(t,e,n,r){try{return new bP(e,t.transaction(r,n))}catch(t){throw new SP(e,t)}}get Rt(){return this.At.promise}abort(t){t&&this.At.reject(t),this.aborted||(Kx("SimpleDb","Aborting transaction:",t?t.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}Pt(){const t=this.transaction;this.aborted||"function"!=typeof t.commit||t.commit()}store(t){const e=this.transaction.objectStore(t);return new TP(e)}}class _P{constructor(t,e,n){this.name=t,this.version=e,this.bt=n,12.2===_P.Vt(ff())&&Gx("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}static delete(t){return Kx("SimpleDb","Removing database:",t),CP(window.indexedDB.deleteDatabase(t)).toPromise()}static vt(){if(!vf())return!1;if(_P.St())return!0;const t=ff(),e=_P.Vt(t),n=0<e&&e<10,r=_P.Dt(t),i=0<r&&r<4.5;return!(t.indexOf("MSIE ")>0||t.indexOf("Trident/")>0||t.indexOf("Edge/")>0||n||i)}static St(){var t;return"undefined"!=typeof process&&"YES"===(null===(t=process.env)||void 0===t?void 0:t.Ct)}static xt(t,e){return t.store(e)}static Vt(t){const e=t.match(/i(?:phone|pad|pod) os ([\d_]+)/i),n=e?e[1].split("_").slice(0,2).join("."):"-1";return Number(n)}static Dt(t){const e=t.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)}Nt(t){var e=this;return uf(function*(){return e.db||(Kx("SimpleDb","Opening database:",e.name),e.db=yield new Promise((n,r)=>{const i=indexedDB.open(e.name,e.version);i.onsuccess=t=>{n(t.target.result)},i.onblocked=()=>{r(new SP(t,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},i.onerror=e=>{const n=e.target.error;r("VersionError"===n.name?new tO(Zx.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh."):"InvalidStateError"===n.name?new tO(Zx.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+n):new SP(t,n))},i.onupgradeneeded=t=>{Kx("SimpleDb",'Database "'+e.name+'" requires upgrade from version:',t.oldVersion),e.bt.kt(t.target.result,i.transaction,t.oldVersion,e.version).next(()=>{Kx("SimpleDb","Database upgrade to version "+e.version+" complete")})}})),e.Mt&&(e.db.onversionchange=t=>e.Mt(t)),e.db})()}Ot(t){this.Mt=t,this.db&&(this.db.onversionchange=e=>t(e))}runTransaction(t,e,n,r){var i=this;return uf(function*(){const s="readonly"===e;let o=0;for(;;){++o;try{i.db=yield i.Nt(t);const e=bP.open(i.db,t,s?"readonly":"readwrite",n),o=r(e).next(t=>(e.Pt(),t)).catch(t=>(e.abort(t),wP.reject(t))).toPromise();return o.catch(()=>{}),yield e.Rt,o}catch(t){const n="FirebaseError"!==t.name&&o<3;if(Kx("SimpleDb","Transaction failed with error:",t.message,"Retrying:",n),i.close(),!n)return Promise.reject(t)}}})()}close(){this.db&&this.db.close(),this.db=void 0}}class IP{constructor(t){this.Ft=t,this.$t=!1,this.Bt=null}get isDone(){return this.$t}get Lt(){return this.Bt}set cursor(t){this.Ft=t}done(){this.$t=!0}Ut(t){this.Bt=t}delete(){return CP(this.Ft.delete())}}class SP extends tO{constructor(t,e){super(Zx.UNAVAILABLE,`IndexedDB transaction '${t}' failed: ${e}`),this.name="IndexedDbTransactionError"}}function EP(t){return"IndexedDbTransactionError"===t.name}class TP{constructor(t){this.store=t}put(t,e){let n;return void 0!==e?(Kx("SimpleDb","PUT",this.store.name,t,e),n=this.store.put(e,t)):(Kx("SimpleDb","PUT",this.store.name,"<auto-key>",t),n=this.store.put(t)),CP(n)}add(t){return Kx("SimpleDb","ADD",this.store.name,t,t),CP(this.store.add(t))}get(t){return CP(this.store.get(t)).next(e=>(void 0===e&&(e=null),Kx("SimpleDb","GET",this.store.name,t,e),e))}delete(t){return Kx("SimpleDb","DELETE",this.store.name,t),CP(this.store.delete(t))}count(){return Kx("SimpleDb","COUNT",this.store.name),CP(this.store.count())}qt(t,e){const n=this.options(t,e);if(n.index||"function"!=typeof this.store.getAll){const t=this.cursor(n),e=[];return this.Kt(t,(t,n)=>{e.push(n)}).next(()=>e)}{const t=this.store.getAll(n.range);return new wP((e,n)=>{t.onerror=t=>{n(t.target.error)},t.onsuccess=t=>{e(t.target.result)}})}}Gt(t,e){const n=this.store.getAll(t,null===e?void 0:e);return new wP((t,e)=>{n.onerror=t=>{e(t.target.error)},n.onsuccess=e=>{t(e.target.result)}})}Qt(t,e){Kx("SimpleDb","DELETE ALL",this.store.name);const n=this.options(t,e);n.jt=!1;const r=this.cursor(n);return this.Kt(r,(t,e,n)=>n.delete())}Wt(t,e){let n;e?n=t:(n={},e=t);const r=this.cursor(n);return this.Kt(r,e)}zt(t){const e=this.cursor({});return new wP((n,r)=>{e.onerror=t=>{const e=AP(t.target.error);r(e)},e.onsuccess=e=>{const r=e.target.result;r?t(r.primaryKey,r.value).next(t=>{t?r.continue():n()}):n()}})}Kt(t,e){const n=[];return new wP((r,i)=>{t.onerror=t=>{i(t.target.error)},t.onsuccess=t=>{const i=t.target.result;if(!i)return void r();const s=new IP(i),o=e(i.primaryKey,i.value,s);if(o instanceof wP){const t=o.catch(t=>(s.done(),wP.reject(t)));n.push(t)}s.isDone?r():null===s.Lt?i.continue():i.continue(s.Lt)}}).next(()=>wP.waitFor(n))}options(t,e){let n;return void 0!==t&&("string"==typeof t?n=t:e=t),{index:n,range:e}}cursor(t){let e="next";if(t.reverse&&(e="prev"),t.index){const n=this.store.index(t.index);return t.jt?n.openKeyCursor(t.range,e):n.openCursor(t.range,e)}return this.store.openCursor(t.range,e)}}function CP(t){return new wP((e,n)=>{t.onsuccess=t=>{e(t.target.result)},t.onerror=t=>{const e=AP(t.target.error);n(e)}})}let kP=!1;function AP(t){const e=_P.Vt(ff());if(e>=12.2&&e<13){const e="An internal error was encountered in the Indexed Database server";if(t.message.indexOf(e)>=0){const t=new tO("internal",`IOS_INDEXEDDB_BUG1: IndexedDb has thrown '${e}'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.`);return kP||(kP=!0,setTimeout(()=>{throw t},0)),t}}return t}class xP extends vP{constructor(t,e){super(),this.Ht=t,this.currentSequenceNumber=e}}function OP(t,e){const n=Xx(t);return _P.xt(n.Ht,e)}class DP{constructor(t,e,n,r){this.batchId=t,this.localWriteTime=e,this.baseMutations=n,this.mutations=r}applyToRemoteDocument(t,e){const n=e.mutationResults;for(let r=0;r<this.mutations.length;r++){const e=this.mutations[r];e.key.isEqual(t.key)&&TN(e,t,n[r])}}applyToLocalView(t){for(const e of this.baseMutations)e.key.isEqual(t.key)&&CN(e,t,this.localWriteTime);for(const e of this.mutations)e.key.isEqual(t.key)&&CN(e,t,this.localWriteTime)}applyToLocalDocumentSet(t){this.mutations.forEach(e=>{const n=t.get(e.key),r=n;this.applyToLocalView(r),n.isValidDocument()||r.convertToNoDocument(yO.min())})}keys(){return this.mutations.reduce((t,e)=>t.add(e.key),nR())}isEqual(t){return this.batchId===t.batchId&&pO(this.mutations,t.mutations,(t,e)=>AN(t,e))&&pO(this.baseMutations,t.baseMutations,(t,e)=>AN(t,e))}}class NP{constructor(t,e,n,r){this.batch=t,this.commitVersion=e,this.mutationResults=n,this.docVersions=r}static from(t,e,n){Jx(t.mutations.length===n.length);let r=tR;const i=t.mutations;for(let s=0;s<i.length;s++)r=r.insert(i[s].key,n[s].version);return new NP(t,e,n,r)}}class RP{constructor(t,e){this.largestBatchId=t,this.mutation=e}getKey(){return this.mutation.key}isEqual(t){return null!==t&&this.mutation===t.mutation}toString(){return`Overlay{\n      largestBatchId: ${this.largestBatchId},\n      mutation: ${this.mutation.toString()}\n    }`}}class PP{constructor(t,e,n,r,i=yO.min(),s=yO.min(),o=CO.EMPTY_BYTE_STRING){this.target=t,this.targetId=e,this.purpose=n,this.sequenceNumber=r,this.snapshotVersion=i,this.lastLimboFreeSnapshotVersion=s,this.resumeToken=o}withSequenceNumber(t){return new PP(this.target,this.targetId,this.purpose,t,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken)}withResumeToken(t,e){return new PP(this.target,this.targetId,this.purpose,this.sequenceNumber,e,this.lastLimboFreeSnapshotVersion,t)}withLastLimboFreeSnapshotVersion(t){return new PP(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,t,this.resumeToken)}}class MP{constructor(t){this.Jt=t}}function LP(t,e){const n=e.key,r={prefixPath:n.getCollectionPath().popLast().toArray(),collectionGroup:n.collectionGroup,documentId:n.path.lastSegment(),readTime:VP(e.readTime),hasCommittedMutations:e.hasCommittedMutations};if(e.isFoundDocument())r.document=function(t,e){return{name:SR(t,e.key),fields:e.data.value.mapValue.fields,updateTime:yR(t,e.version.toTimestamp())}}(t.Jt,e);else if(e.isNoDocument())r.noDocument={path:n.path.toArray(),readTime:FP(e.version)};else{if(!e.isUnknownDocument())return Yx();r.unknownDocument={path:n.path.toArray(),version:FP(e.version)}}return r}function VP(t){const e=t.toTimestamp();return[e.seconds,e.nanoseconds]}function FP(t){const e=t.toTimestamp();return{seconds:e.seconds,nanoseconds:e.nanoseconds}}function UP(t){const e=new mO(t.seconds,t.nanoseconds);return yO.fromTimestamp(e)}function jP(t,e){const n=(e.baseMutations||[]).map(e=>NR(t.Jt,e));for(let s=0;s<e.mutations.length-1;++s){const t=e.mutations[s];s+1<e.mutations.length&&void 0!==e.mutations[s+1].transform&&(t.updateTransforms=e.mutations[s+1].transform.fieldTransforms,e.mutations.splice(s+1,1),++s)}const r=e.mutations.map(e=>NR(t.Jt,e)),i=mO.fromMillis(e.localWriteTimeMs);return new DP(e.batchId,i,n,r)}function BP(t){const e=UP(t.readTime),n=void 0!==t.lastLimboFreeSnapshotVersion?UP(t.lastLimboFreeSnapshotVersion):yO.min();let r;var i;return void 0!==t.query.documents?(Jx(1===(i=t.query).documents.length),r=YD(qD(CR(i.documents[0])))):r=function(t){return YD(MR(t))}(t.query),new PP(r,t.targetId,0,t.lastListenSequenceNumber,e,n,CO.fromBase64String(t.resumeToken))}function $P(t,e){const n=FP(e.snapshotVersion),r=FP(e.lastLimboFreeSnapshotVersion);let i;i=SD(e.target)?RR(t.Jt,e.target):PR(t.Jt,e.target);const s=e.resumeToken.toBase64();return{targetId:e.targetId,canonicalId:_D(e.target),readTime:n,resumeToken:s,lastListenSequenceNumber:e.sequenceNumber,lastLimboFreeSnapshotVersion:r,query:i}}function qP(t){const e=MR({parent:t.parent,structuredQuery:t.structuredQuery});return"LAST"===t.limitType?JD(e,e.limit,"L"):e}function HP(t,e){return new RP(e.largestBatchId,NR(t.Jt,e.overlayMutation))}function zP(t,e){const n=e.path.lastSegment();return[t,zR(e.path.popLast()),n]}class KP{getBundleMetadata(t,e){return GP(t).get(e).next(t=>{if(t)return{id:(e=t).bundleId,createTime:UP(e.createTime),version:e.version};var e})}saveBundleMetadata(t,e){return GP(t).put({bundleId:(n=e).id,createTime:FP(bR(n.createTime)),version:n.version});var n}getNamedQuery(t,e){return WP(t).get(e).next(t=>{if(t)return{name:(e=t).name,query:qP(e.bundledQuery),readTime:UP(e.readTime)};var e})}saveNamedQuery(t,e){return WP(t).put(function(t){return{name:t.name,readTime:FP(bR(t.readTime)),bundledQuery:t.bundledQuery}}(e))}}function GP(t){return OP(t,"bundles")}function WP(t){return OP(t,"namedQueries")}class QP{constructor(t,e){this.M=t,this.userId=e}static Yt(t,e){return new QP(t,e.uid||"")}getOverlay(t,e){return YP(t).get(zP(this.userId,e)).next(t=>t?HP(this.M,t):null)}saveOverlays(t,e,n){const r=[];return n.forEach((n,i)=>{const s=new RP(e,i);r.push(this.Xt(t,s))}),wP.waitFor(r)}removeOverlaysForBatchId(t,e,n){const r=new Set;e.forEach(t=>r.add(zR(t.getCollectionPath())));const i=[];return r.forEach(e=>{const r=IDBKeyRange.bound([this.userId,e,n],[this.userId,e,n+1],!1,!0);i.push(YP(t).Qt("collectionPathOverlayIndex",r))}),wP.waitFor(i)}getOverlaysForCollection(t,e,n){const r=ZN(),i=zR(e),s=IDBKeyRange.bound([this.userId,i,n],[this.userId,i,Number.POSITIVE_INFINITY],!0);return YP(t).qt("collectionPathOverlayIndex",s).next(t=>{for(const e of t){const t=HP(this.M,e);r.set(t.getKey(),t)}return r})}getOverlaysForCollectionGroup(t,e,n,r){const i=ZN();let s;const o=IDBKeyRange.bound([this.userId,e,n],[this.userId,e,Number.POSITIVE_INFINITY],!0);return YP(t).Wt({index:"collectionGroupOverlayIndex",range:o},(t,e,n)=>{const o=HP(this.M,e);i.size()<r||o.largestBatchId===s?(i.set(o.getKey(),o),s=o.largestBatchId):n.done()}).next(()=>i)}Xt(t,e){return YP(t).put(function(t,e,n){const[r,i,s]=zP(e,n.mutation.key);return{userId:e,collectionPath:i,documentId:s,collectionGroup:n.mutation.key.getCollectionGroup(),largestBatchId:n.largestBatchId,overlayMutation:DR(t.Jt,n.mutation)}}(this.M,this.userId,e))}}function YP(t){return OP(t,"documentOverlays")}let JP=(()=>{class t{constructor(){}Zt(t,e){this.te(t,e),e.ee()}te(t,e){if("nullValue"in t)this.ne(e,5);else if("booleanValue"in t)this.ne(e,10),e.se(t.booleanValue?1:0);else if("integerValue"in t)this.ne(e,15),e.se(xO(t.integerValue));else if("doubleValue"in t){const n=xO(t.doubleValue);isNaN(n)?this.ne(e,13):(this.ne(e,15),VO(n)?e.se(0):e.se(n))}else if("timestampValue"in t){const n=t.timestampValue;this.ne(e,20),"string"==typeof n?e.ie(n):(e.ie(`${n.seconds||""}`),e.se(n.nanos||0))}else if("stringValue"in t)this.re(t.stringValue,e),this.oe(e);else if("bytesValue"in t)this.ne(e,30),e.ue(OO(t.bytesValue)),this.oe(e);else if("referenceValue"in t)this.ae(t.referenceValue,e);else if("geoPointValue"in t){const n=t.geoPointValue;this.ne(e,45),e.se(n.latitude||0),e.se(n.longitude||0)}else"mapValue"in t?nD(t)?this.ne(e,Number.MAX_SAFE_INTEGER):(this.ce(t.mapValue,e),this.oe(e)):"arrayValue"in t?(this.he(t.arrayValue,e),this.oe(e)):Yx()}re(t,e){this.ne(e,25),this.le(t,e)}le(t,e){e.ie(t)}ce(t,e){const n=t.fields||{};this.ne(e,55);for(const r of Object.keys(n))this.re(r,e),this.te(n[r],e)}he(t,e){const n=t.values||[];this.ne(e,50);for(const r of n)this.te(r,e)}ae(t,e){this.ne(e,37),UO.fromName(t).path.forEach(t=>{this.ne(e,60),this.le(t,e)})}ne(t,e){t.se(e)}oe(t){t.se(2)}}return t.fe=new t,t})();function XP(t){if(0===t)return 8;let e=0;return t>>4==0&&(e+=4,t<<=4),t>>6==0&&(e+=2,t<<=2),t>>7==0&&(e+=1),e}function ZP(t){const e=64-function(t){let e=0;for(let n=0;n<8;++n){const r=XP(255&t[n]);if(e+=r,8!==r)break}return e}(t);return Math.ceil(e/8)}class tM{constructor(){this.buffer=new Uint8Array(1024),this.position=0}de(t){const e=t[Symbol.iterator]();let n=e.next();for(;!n.done;)this._e(n.value),n=e.next();this.we()}me(t){const e=t[Symbol.iterator]();let n=e.next();for(;!n.done;)this.ge(n.value),n=e.next();this.ye()}pe(t){for(const e of t){const t=e.charCodeAt(0);if(t<128)this._e(t);else if(t<2048)this._e(960|t>>>6),this._e(128|63&t);else if(e<"\ud800"||"\udbff"<e)this._e(480|t>>>12),this._e(128|63&t>>>6),this._e(128|63&t);else{const t=e.codePointAt(0);this._e(240|t>>>18),this._e(128|63&t>>>12),this._e(128|63&t>>>6),this._e(128|63&t)}}this.we()}Ie(t){for(const e of t){const t=e.charCodeAt(0);if(t<128)this.ge(t);else if(t<2048)this.ge(960|t>>>6),this.ge(128|63&t);else if(e<"\ud800"||"\udbff"<e)this.ge(480|t>>>12),this.ge(128|63&t>>>6),this.ge(128|63&t);else{const t=e.codePointAt(0);this.ge(240|t>>>18),this.ge(128|63&t>>>12),this.ge(128|63&t>>>6),this.ge(128|63&t)}}this.ye()}Te(t){const e=this.Ee(t),n=ZP(e);this.Ae(1+n),this.buffer[this.position++]=255&n;for(let r=e.length-n;r<e.length;++r)this.buffer[this.position++]=255&e[r]}Re(t){const e=this.Ee(t),n=ZP(e);this.Ae(1+n),this.buffer[this.position++]=~(255&n);for(let r=e.length-n;r<e.length;++r)this.buffer[this.position++]=~(255&e[r])}Pe(){this.be(255),this.be(255)}Ve(){this.ve(255),this.ve(255)}reset(){this.position=0}seed(t){this.Ae(t.length),this.buffer.set(t,this.position),this.position+=t.length}Se(){return this.buffer.slice(0,this.position)}Ee(t){const e=function(t){const e=new DataView(new ArrayBuffer(8));return e.setFloat64(0,t,!1),new Uint8Array(e.buffer)}(t),n=0!=(128&e[0]);e[0]^=n?255:128;for(let r=1;r<e.length;++r)e[r]^=n?255:0;return e}_e(t){const e=255&t;0===e?(this.be(0),this.be(255)):255===e?(this.be(255),this.be(0)):this.be(e)}ge(t){const e=255&t;0===e?(this.ve(0),this.ve(255)):255===e?(this.ve(255),this.ve(0)):this.ve(t)}we(){this.be(0),this.be(1)}ye(){this.ve(0),this.ve(1)}be(t){this.Ae(1),this.buffer[this.position++]=t}ve(t){this.Ae(1),this.buffer[this.position++]=~t}Ae(t){const e=t+this.position;if(e<=this.buffer.length)return;let n=2*this.buffer.length;n<e&&(n=e);const r=new Uint8Array(n);r.set(this.buffer),this.buffer=r}}class eM{constructor(t){this.De=t}ue(t){this.De.de(t)}ie(t){this.De.pe(t)}se(t){this.De.Te(t)}ee(){this.De.Pe()}}class nM{constructor(t){this.De=t}ue(t){this.De.me(t)}ie(t){this.De.Ie(t)}se(t){this.De.Re(t)}ee(){this.De.Ve()}}class rM{constructor(){this.De=new tM,this.Ce=new eM(this.De),this.xe=new nM(this.De)}seed(t){this.De.seed(t)}Ne(t){return 0===t?this.Ce:this.xe}Se(){return this.De.Se()}reset(){this.De.reset()}}class iM{constructor(t,e,n,r){this.indexId=t,this.documentKey=e,this.arrayValue=n,this.directionalValue=r}ke(){const t=this.directionalValue.length,e=0===t||255===this.directionalValue[t-1]?t+1:t,n=new Uint8Array(e);return n.set(this.directionalValue,0),e!==t?n.set([0],this.directionalValue.length):++n[n.length-1],new iM(this.indexId,this.documentKey,this.arrayValue,n)}}function sM(t,e){let n=t.indexId-e.indexId;return 0!==n?n:(n=oM(t.arrayValue,e.arrayValue),0!==n?n:(n=oM(t.directionalValue,e.directionalValue),0!==n?n:UO.comparator(t.documentKey,e.documentKey)))}function oM(t,e){for(let n=0;n<t.length&&n<e.length;++n){const r=t[n]-e[n];if(0!==r)return r}return t.length-e.length}class aM{constructor(t){this.collectionId=null!=t.collectionGroup?t.collectionGroup:t.path.lastSegment(),this.Me=t.orderBy,this.Oe=[];for(const e of t.filters){const t=e;t.S()?this.Fe=t:this.Oe.push(t)}}$e(t){const e=hD(t);if(void 0!==e&&!this.Be(e))return!1;const n=dD(t);let r=0,i=0;for(;r<n.length&&this.Be(n[r]);++r);if(r===n.length)return!0;if(void 0!==this.Fe){const t=n[r];if(!this.Le(this.Fe,t)||!this.Ue(this.Me[i++],t))return!1;++r}for(;r<n.length;++r){const t=n[r];if(i>=this.Me.length||!this.Ue(this.Me[i++],t))return!1}return!0}Be(t){for(const e of this.Oe)if(this.Le(e,t))return!0;return!1}Le(t,e){return!(void 0===t||!t.field.isEqual(e.fieldPath))&&2===e.kind==("array-contains"===t.op||"array-contains-any"===t.op)}Ue(t,e){return!!t.field.isEqual(e.fieldPath)&&(0===e.kind&&"asc"===t.dir||1===e.kind&&"desc"===t.dir)}}class uM{constructor(){this.qe=new cM}addToCollectionParentIndex(t,e){return this.qe.add(e),wP.resolve()}getCollectionParents(t,e){return wP.resolve(this.qe.getEntries(e))}addFieldIndex(t,e){return wP.resolve()}deleteFieldIndex(t,e){return wP.resolve()}getDocumentsMatchingTarget(t,e){return wP.resolve(null)}getFieldIndex(t,e){return wP.resolve(null)}getFieldIndexes(t,e){return wP.resolve([])}getNextCollectionGroupToUpdate(t){return wP.resolve(null)}updateCollectionGroup(t,e,n){return wP.resolve()}updateIndexEntries(t,e){return wP.resolve()}}class cM{constructor(){this.index={}}add(t){const e=t.lastSegment(),n=t.popLast(),r=this.index[e]||new KN(IO.comparator),i=!r.has(n);return this.index[e]=r.add(n),i}has(t){const e=t.lastSegment(),n=t.popLast(),r=this.index[e];return r&&r.has(n)}getEntries(t){return(this.index[t]||new KN(IO.comparator)).toArray()}}const lM=new Uint8Array(0);class hM{constructor(t,e){this.user=t,this.databaseId=e,this.Ke=new cM,this.Ge=new $N(t=>_D(t),(t,e)=>ID(t,e)),this.uid=t.uid||""}addToCollectionParentIndex(t,e){if(!this.Ke.has(e)){const n=e.lastSegment(),r=e.popLast();t.addOnCommittedListener(()=>{this.Ke.add(e)});const i={collectionId:n,parent:zR(r)};return dM(t).put(i)}return wP.resolve()}getCollectionParents(t,e){const n=[],r=IDBKeyRange.bound([e,""],[gO(e),""],!1,!0);return dM(t).qt(r).next(t=>{for(const r of t){if(r.collectionId!==e)break;n.push(WR(r.parent))}return n})}addFieldIndex(t,e){const n=pM(t),r=function(t){return{indexId:t.indexId,collectionGroup:t.collectionGroup,fields:t.fields.map(t=>[t.fieldPath.canonicalString(),t.kind])}}(e);return delete r.indexId,n.add(r).next()}deleteFieldIndex(t,e){const n=pM(t),r=gM(t),i=fM(t);return n.delete(e.indexId).next(()=>r.delete(IDBKeyRange.bound([e.indexId],[e.indexId+1],!1,!0))).next(()=>i.delete(IDBKeyRange.bound([e.indexId],[e.indexId+1],!1,!0)))}getDocumentsMatchingTarget(t,e){const n=fM(t);let r=!0;const i=new Map;return wP.forEach(this.Qe(e),e=>this.getFieldIndex(t,e).next(t=>{r&&(r=!!t),i.set(e,t)})).next(()=>{if(r){let t=nR();const r=[];return wP.forEach(i,(i,s)=>{var o;Kx("IndexedDbIndexManager",`Using index ${o=i,`id=${o.indexId}|cg=${o.collectionGroup}|f=${o.fields.map(t=>`${t.fieldPath}:${t.kind}`).join(",")}`} to execute ${_D(e)}`);const a=function(t,e){const n=hD(e);if(void 0===n)return null;for(const r of ED(t,n.fieldPath))switch(r.op){case"array-contains-any":return r.value.arrayValue.values||[];case"array-contains":return[r.value]}return null}(s,i),u=function(t,e){const n=new Map;for(const r of dD(e))for(const e of ED(t,r.fieldPath))switch(e.op){case"==":case"in":n.set(r.fieldPath.canonicalString(),e.value);break;case"not-in":case"!=":return n.set(r.fieldPath.canonicalString(),e.value),Array.from(n.values())}return null}(s,i),c=function(t,e){const n=[];let r=!0;for(const i of dD(e)){const e=0===i.kind?TD(t,i.fieldPath,t.startAt):CD(t,i.fieldPath,t.startAt);if(!e.value)return null;n.push(e.value),r&&(r=e.inclusive)}return new LD(n,r)}(s,i),l=function(t,e){const n=[];let r=!0;for(const i of dD(e)){const e=0===i.kind?CD(t,i.fieldPath,t.endAt):TD(t,i.fieldPath,t.endAt);if(!e.value)return null;n.push(e.value),r&&(r=e.inclusive)}return new LD(n,r)}(s,i),h=this.je(i,s,c),d=this.je(i,s,l),f=this.We(i,s,u),p=this.ze(i.indexId,a,h,!!c&&c.inclusive,d,!!l&&l.inclusive,f);return wP.forEach(p,i=>n.Gt(i,e.limit).next(e=>{e.forEach(e=>{const n=UO.fromSegments(e.documentKey);t.has(n)||(t=t.add(n),r.push(n))})}))}).next(()=>r)}return wP.resolve(null)})}Qe(t){let e=this.Ge.get(t);return e||(e=[t],this.Ge.set(t,e),e)}ze(t,e,n,r,i,s,o){const a=(null!=e?e.length:1)*Math.max(null!=n?n.length:1,null!=i?i.length:1),u=a/(null!=e?e.length:1),c=[];for(let l=0;l<a;++l){const a=e?this.He(e[l/u]):lM,h=n?this.Je(t,a,n[l%u],r):this.Ye(t),d=i?this.Xe(t,a,i[l%u],s):this.Ye(t+1);c.push(...this.createRange(h,d,o.map(e=>this.Je(t,a,e,!0))))}return c}Je(t,e,n,r){const i=new iM(t,UO.empty(),e,n);return r?i:i.ke()}Xe(t,e,n,r){const i=new iM(t,UO.empty(),e,n);return r?i.ke():i}Ye(t){return new iM(t,UO.empty(),lM,lM)}getFieldIndex(t,e){const n=new aM(e),r=null!=e.collectionGroup?e.collectionGroup:e.path.lastSegment();return this.getFieldIndexes(t,r).next(t=>{const e=t.filter(t=>n.$e(t));return e.sort((t,e)=>e.fields.length-t.fields.length),e.length>0?e[0]:null})}Ze(t,e){const n=new rM;for(const r of dD(t)){const t=e.data.field(r.fieldPath);if(null==t)return null;const i=n.Ne(r.kind);JP.fe.Zt(t,i)}return n.Se()}He(t){const e=new rM;return JP.fe.Zt(t,e.Ne(0)),e.Se()}tn(t,e){const n=new rM;return JP.fe.Zt(QO(this.databaseId,e),n.Ne(function(t){const e=dD(t);return 0===e.length?0:e[e.length-1].kind}(t))),n.Se()}We(t,e,n){if(null===n)return[];let r=[];r.push(new rM);let i=0;for(const s of dD(t)){const t=n[i++];for(const n of r)if(this.en(e,s.fieldPath)&&JO(t))r=this.nn(r,s,t);else{const e=n.Ne(s.kind);JP.fe.Zt(t,e)}}return this.sn(r)}je(t,e,n){return null==n?null:this.We(t,e,n.position)}sn(t){const e=[];for(let n=0;n<t.length;++n)e[n]=t[n].Se();return e}nn(t,e,n){const r=[...t],i=[];for(const s of n.arrayValue.values||[])for(const t of r){const n=new rM;n.seed(t.Se()),JP.fe.Zt(s,n.Ne(e.kind)),i.push(n)}return i}en(t,e){return!!t.filters.find(t=>t instanceof kD&&t.field.isEqual(e)&&("in"===t.op||"not-in"===t.op))}getFieldIndexes(t,e){const n=pM(t),r=gM(t);return(e?n.qt("collectionGroupIndex",IDBKeyRange.bound(e,e)):n.qt()).next(t=>{const e=[];return wP.forEach(t,t=>r.get([t.indexId,this.uid]).next(n=>{e.push(function(t,e){const n=e?new pD(e.sequenceNumber,new yD(UP(e.readTime),new UO(WR(e.documentKey)),e.largestBatchId)):pD.empty(),r=t.fields.map(([t,e])=>new fD(EO.fromServerFormat(t),e));return new lD(t.indexId,t.collectionGroup,r,n)}(t,n))})).next(()=>e)})}getNextCollectionGroupToUpdate(t){return this.getFieldIndexes(t).next(t=>0===t.length?null:(t.sort((t,e)=>{const n=t.indexState.sequenceNumber-e.indexState.sequenceNumber;return 0!==n?n:fO(t.collectionGroup,e.collectionGroup)}),t[0].collectionGroup))}updateCollectionGroup(t,e,n){const r=pM(t),i=gM(t);return this.rn(t).next(t=>r.qt("collectionGroupIndex",IDBKeyRange.bound(e,e)).next(e=>wP.forEach(e,e=>i.put(function(t,e,n,r){return{indexId:t,uid:e.uid||"",sequenceNumber:n,readTime:FP(r.readTime),documentKey:zR(r.documentKey.path),largestBatchId:r.largestBatchId}}(e.indexId,this.user,t,n)))))}updateIndexEntries(t,e){const n=new Map;return wP.forEach(e,(e,r)=>{const i=n.get(e.collectionGroup);return(i?wP.resolve(i):this.getFieldIndexes(t,e.collectionGroup)).next(i=>(n.set(e.collectionGroup,i),wP.forEach(i,n=>this.on(t,e,n).next(e=>{const i=this.un(r,n);return e.isEqual(i)?wP.resolve():this.an(t,r,n,e,i)}))))})}cn(t,e,n,r){return fM(t).put({indexId:r.indexId,uid:this.uid,arrayValue:r.arrayValue,directionalValue:r.directionalValue,orderedDocumentKey:this.tn(n,e.key),documentKey:e.key.path.toArray()})}hn(t,e,n,r){return fM(t).delete([r.indexId,this.uid,r.arrayValue,r.directionalValue,this.tn(n,e.key),e.key.path.toArray()])}on(t,e,n){const r=fM(t);let i=new KN(sM);return r.Wt({index:"documentKeyIndex",range:IDBKeyRange.only([n.indexId,this.uid,this.tn(n,e)])},(t,r)=>{i=i.add(new iM(n.indexId,e,r.arrayValue,r.directionalValue))}).next(()=>i)}un(t,e){let n=new KN(sM);const r=this.Ze(e,t);if(null==r)return n;const i=hD(e);if(null!=i){const s=t.data.field(i.fieldPath);if(JO(s))for(const i of s.arrayValue.values||[])n=n.add(new iM(e.indexId,t.key,this.He(i),r))}else n=n.add(new iM(e.indexId,t.key,lM,r));return n}an(t,e,n,r,i){Kx("IndexedDbIndexManager","Updating index entries for document '%s'",e.key);const s=[];return function(t,e,n,r,i){const s=t.getIterator(),o=e.getIterator();let a=WN(s),u=WN(o);for(;a||u;){let t=!1,e=!1;if(a&&u){const r=n(a,u);r<0?e=!0:r>0&&(t=!0)}else null!=a?e=!0:t=!0;t?(r(u),u=WN(o)):e?(i(a),a=WN(s)):(a=WN(s),u=WN(o))}}(r,i,sM,r=>{s.push(this.cn(t,e,n,r))},r=>{s.push(this.hn(t,e,n,r))}),wP.waitFor(s)}rn(t){let e=1;return gM(t).Wt({index:"sequenceNumberIndex",reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},(t,n,r)=>{r.done(),e=n.sequenceNumber+1}).next(()=>e)}createRange(t,e,n){n=n.sort((t,e)=>sM(t,e)).filter((t,e,n)=>!e||0!==sM(t,n[e-1]));const r=[];r.push(t);for(const s of n){const n=sM(s,t),i=sM(s,e);if(0===n)r[0]=t.ke();else if(n>0&&i<0)r.push(s),r.push(s.ke());else if(i>0)break}r.push(e);const i=[];for(let s=0;s<r.length;s+=2)i.push(IDBKeyRange.bound([r[s].indexId,this.uid,r[s].arrayValue,r[s].directionalValue,lM,[]],[r[s+1].indexId,this.uid,r[s+1].arrayValue,r[s+1].directionalValue,lM,[]]));return i}}function dM(t){return OP(t,"collectionParents")}function fM(t){return OP(t,"indexEntries")}function pM(t){return OP(t,"indexConfiguration")}function gM(t){return OP(t,"indexState")}const mM={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0};class yM{constructor(t,e,n){this.cacheSizeCollectionThreshold=t,this.percentileToCollect=e,this.maximumSequenceNumbersToCollect=n}static withCacheSize(t){return new yM(t,yM.DEFAULT_COLLECTION_PERCENTILE,yM.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}}function vM(t,e,n){const r=t.store("mutations"),i=t.store("documentMutations"),s=[],o=IDBKeyRange.only(n.batchId);let a=0;const u=r.Wt({range:o},(t,e,n)=>(a++,n.delete()));s.push(u.next(()=>{Jx(1===a)}));const c=[];for(const l of n.mutations){const t=JR(e,l.key.path,n.batchId);s.push(i.delete(t)),c.push(l.key)}return wP.waitFor(s).next(()=>c)}function wM(t){if(!t)return 0;let e;if(t.document)e=t.document;else if(t.unknownDocument)e=t.unknownDocument;else{if(!t.noDocument)throw Yx();e=t.noDocument}return JSON.stringify(e).length}yM.DEFAULT_COLLECTION_PERCENTILE=10,yM.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,yM.DEFAULT=new yM(41943040,yM.DEFAULT_COLLECTION_PERCENTILE,yM.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),yM.DISABLED=new yM(-1,0,0);class bM{constructor(t,e,n,r){this.userId=t,this.M=e,this.indexManager=n,this.referenceDelegate=r,this.ln={}}static Yt(t,e,n,r){Jx(""!==t.uid);const i=t.isAuthenticated()?t.uid:"";return new bM(i,e,n,r)}checkEmpty(t){let e=!0;const n=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return IM(t).Wt({index:"userMutationsIndex",range:n},(t,n,r)=>{e=!1,r.done()}).next(()=>e)}addMutationBatch(t,e,n,r){const i=SM(t),s=IM(t);return s.add({}).next(o=>{Jx("number"==typeof o);const a=new DP(o,e,n,r),u=function(t,e,n){const r=n.baseMutations.map(e=>DR(t.Jt,e)),i=n.mutations.map(e=>DR(t.Jt,e));return{userId:e,batchId:n.batchId,localWriteTimeMs:n.localWriteTime.toMillis(),baseMutations:r,mutations:i}}(this.M,this.userId,a),c=[];let l=new KN((t,e)=>fO(t.canonicalString(),e.canonicalString()));for(const t of r){const e=JR(this.userId,t.key.path,o);l=l.add(t.key.path.popLast()),c.push(s.put(u)),c.push(i.put(e,XR))}return l.forEach(e=>{c.push(this.indexManager.addToCollectionParentIndex(t,e))}),t.addOnCommittedListener(()=>{this.ln[o]=a.keys()}),wP.waitFor(c).next(()=>a)})}lookupMutationBatch(t,e){return IM(t).get(e).next(t=>t?(Jx(t.userId===this.userId),jP(this.M,t)):null)}fn(t,e){return this.ln[e]?wP.resolve(this.ln[e]):this.lookupMutationBatch(t,e).next(t=>{if(t){const n=t.keys();return this.ln[e]=n,n}return null})}getNextMutationBatchAfterBatchId(t,e){const n=e+1,r=IDBKeyRange.lowerBound([this.userId,n]);let i=null;return IM(t).Wt({index:"userMutationsIndex",range:r},(t,e,r)=>{e.userId===this.userId&&(Jx(e.batchId>=n),i=jP(this.M,e)),r.done()}).next(()=>i)}getHighestUnacknowledgedBatchId(t){const e=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]);let n=-1;return IM(t).Wt({index:"userMutationsIndex",range:e,reverse:!0},(t,e,r)=>{n=e.batchId,r.done()}).next(()=>n)}getAllMutationBatches(t){const e=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return IM(t).qt("userMutationsIndex",e).next(t=>t.map(t=>jP(this.M,t)))}getAllMutationBatchesAffectingDocumentKey(t,e){const n=YR(this.userId,e.path),r=IDBKeyRange.lowerBound(n),i=[];return SM(t).Wt({range:r},(n,r,s)=>{const[o,a,u]=n,c=WR(a);if(o===this.userId&&e.path.isEqual(c))return IM(t).get(u).next(t=>{if(!t)throw Yx();Jx(t.userId===this.userId),i.push(jP(this.M,t))});s.done()}).next(()=>i)}getAllMutationBatchesAffectingDocumentKeys(t,e){let n=new KN(fO);const r=[];return e.forEach(e=>{const i=YR(this.userId,e.path),s=IDBKeyRange.lowerBound(i),o=SM(t).Wt({range:s},(t,r,i)=>{const[s,o,a]=t,u=WR(o);s===this.userId&&e.path.isEqual(u)?n=n.add(a):i.done()});r.push(o)}),wP.waitFor(r).next(()=>this.dn(t,n))}getAllMutationBatchesAffectingQuery(t,e){const n=e.path,r=n.length+1,i=YR(this.userId,n),s=IDBKeyRange.lowerBound(i);let o=new KN(fO);return SM(t).Wt({range:s},(t,e,i)=>{const[s,a,u]=t,c=WR(a);s===this.userId&&n.isPrefixOf(c)?c.length===r&&(o=o.add(u)):i.done()}).next(()=>this.dn(t,o))}dn(t,e){const n=[],r=[];return e.forEach(e=>{r.push(IM(t).get(e).next(t=>{if(null===t)throw Yx();Jx(t.userId===this.userId),n.push(jP(this.M,t))}))}),wP.waitFor(r).next(()=>n)}removeMutationBatch(t,e){return vM(t.Ht,this.userId,e).next(n=>(t.addOnCommittedListener(()=>{this._n(e.batchId)}),wP.forEach(n,e=>this.referenceDelegate.markPotentiallyOrphaned(t,e))))}_n(t){delete this.ln[t]}performConsistencyCheck(t){return this.checkEmpty(t).next(e=>{if(!e)return wP.resolve();const n=IDBKeyRange.lowerBound([this.userId]),r=[];return SM(t).Wt({range:n},(t,e,n)=>{if(t[0]===this.userId){const e=WR(t[1]);r.push(e)}else n.done()}).next(()=>{Jx(0===r.length)})})}containsKey(t,e){return _M(t,this.userId,e)}wn(t){return EM(t).get(this.userId).next(t=>t||{userId:this.userId,lastAcknowledgedBatchId:-1,lastStreamToken:""})}}function _M(t,e,n){const r=YR(e,n.path),i=r[1],s=IDBKeyRange.lowerBound(r);let o=!1;return SM(t).Wt({range:s,jt:!0},(t,n,r)=>{const[s,a,u]=t;s===e&&a===i&&(o=!0),r.done()}).next(()=>o)}function IM(t){return OP(t,"mutations")}function SM(t){return OP(t,"documentMutations")}function EM(t){return OP(t,"mutationQueues")}class TM{constructor(t){this.mn=t}next(){return this.mn+=2,this.mn}static gn(){return new TM(0)}static yn(){return new TM(-1)}}class CM{constructor(t,e){this.referenceDelegate=t,this.M=e}allocateTargetId(t){return this.pn(t).next(e=>{const n=new TM(e.highestTargetId);return e.highestTargetId=n.next(),this.In(t,e).next(()=>e.highestTargetId)})}getLastRemoteSnapshotVersion(t){return this.pn(t).next(t=>yO.fromTimestamp(new mO(t.lastRemoteSnapshotVersion.seconds,t.lastRemoteSnapshotVersion.nanoseconds)))}getHighestSequenceNumber(t){return this.pn(t).next(t=>t.highestListenSequenceNumber)}setTargetsMetadata(t,e,n){return this.pn(t).next(r=>(r.highestListenSequenceNumber=e,n&&(r.lastRemoteSnapshotVersion=n.toTimestamp()),e>r.highestListenSequenceNumber&&(r.highestListenSequenceNumber=e),this.In(t,r)))}addTargetData(t,e){return this.Tn(t,e).next(()=>this.pn(t).next(n=>(n.targetCount+=1,this.En(e,n),this.In(t,n))))}updateTargetData(t,e){return this.Tn(t,e)}removeTargetData(t,e){return this.removeMatchingKeysForTargetId(t,e.targetId).next(()=>kM(t).delete(e.targetId)).next(()=>this.pn(t)).next(e=>(Jx(e.targetCount>0),e.targetCount-=1,this.In(t,e)))}removeTargets(t,e,n){let r=0;const i=[];return kM(t).Wt((s,o)=>{const a=BP(o);a.sequenceNumber<=e&&null===n.get(a.targetId)&&(r++,i.push(this.removeTargetData(t,a)))}).next(()=>wP.waitFor(i)).next(()=>r)}forEachTarget(t,e){return kM(t).Wt((t,n)=>{const r=BP(n);e(r)})}pn(t){return AM(t).get("targetGlobalKey").next(t=>(Jx(null!==t),t))}In(t,e){return AM(t).put("targetGlobalKey",e)}Tn(t,e){return kM(t).put($P(this.M,e))}En(t,e){let n=!1;return t.targetId>e.highestTargetId&&(e.highestTargetId=t.targetId,n=!0),t.sequenceNumber>e.highestListenSequenceNumber&&(e.highestListenSequenceNumber=t.sequenceNumber,n=!0),n}getTargetCount(t){return this.pn(t).next(t=>t.targetCount)}getTargetData(t,e){const n=_D(e),r=IDBKeyRange.bound([n,Number.NEGATIVE_INFINITY],[n,Number.POSITIVE_INFINITY]);let i=null;return kM(t).Wt({range:r,index:"queryTargetsIndex"},(t,n,r)=>{const s=BP(n);ID(e,s.target)&&(i=s,r.done())}).next(()=>i)}addMatchingKeys(t,e,n){const r=[],i=xM(t);return e.forEach(e=>{const s=zR(e.path);r.push(i.put({targetId:n,path:s})),r.push(this.referenceDelegate.addReference(t,n,e))}),wP.waitFor(r)}removeMatchingKeys(t,e,n){const r=xM(t);return wP.forEach(e,e=>{const i=zR(e.path);return wP.waitFor([r.delete([n,i]),this.referenceDelegate.removeReference(t,n,e)])})}removeMatchingKeysForTargetId(t,e){const n=xM(t),r=IDBKeyRange.bound([e],[e+1],!1,!0);return n.delete(r)}getMatchingKeysForTargetId(t,e){const n=IDBKeyRange.bound([e],[e+1],!1,!0),r=xM(t);let i=nR();return r.Wt({range:n,jt:!0},(t,e,n)=>{const r=WR(t[1]),s=new UO(r);i=i.add(s)}).next(()=>i)}containsKey(t,e){const n=zR(e.path),r=IDBKeyRange.bound([n],[gO(n)],!1,!0);let i=0;return xM(t).Wt({index:"documentTargetsIndex",jt:!0,range:r},([t,e],n,r)=>{0!==t&&(i++,r.done())}).next(()=>i>0)}Et(t,e){return kM(t).get(e).next(t=>t?BP(t):null)}}function kM(t){return OP(t,"targets")}function AM(t){return OP(t,"targetGlobal")}function xM(t){return OP(t,"targetDocuments")}function OM(t){return DM.apply(this,arguments)}function DM(){return(DM=uf(function*(t){if(t.code!==Zx.FAILED_PRECONDITION||t.message!==yP)throw t;Kx("LocalStore","Unexpectedly lost primary lease")})).apply(this,arguments)}function NM([t,e],[n,r]){const i=fO(t,n);return 0===i?fO(e,r):i}class RM{constructor(t){this.An=t,this.buffer=new KN(NM),this.Rn=0}Pn(){return++this.Rn}bn(t){const e=[t,this.Pn()];if(this.buffer.size<this.An)this.buffer=this.buffer.add(e);else{const t=this.buffer.last();NM(e,t)<0&&(this.buffer=this.buffer.delete(t).add(e))}}get maxValue(){return this.buffer.last()[0]}}class PM{constructor(t,e){this.garbageCollector=t,this.asyncQueue=e,this.Vn=!1,this.vn=null}start(t){-1!==this.garbageCollector.params.cacheSizeCollectionThreshold&&this.Sn(t)}stop(){this.vn&&(this.vn.cancel(),this.vn=null)}get started(){return null!==this.vn}Sn(t){var e=this;const n=this.Vn?3e5:6e4;Kx("LruGarbageCollector",`Garbage collection scheduled in ${n}ms`),this.vn=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",n,uf(function*(){e.vn=null,e.Vn=!0;try{yield t.collectGarbage(e.garbageCollector)}catch(t){EP(t)?Kx("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",t):yield OM(t)}yield e.Sn(t)}))}}class MM{constructor(t,e){this.Dn=t,this.params=e}calculateTargetCount(t,e){return this.Dn.Cn(t).next(t=>Math.floor(e/100*t))}nthSequenceNumber(t,e){if(0===e)return wP.resolve(lO.A);const n=new RM(e);return this.Dn.forEachTarget(t,t=>n.bn(t.sequenceNumber)).next(()=>this.Dn.xn(t,t=>n.bn(t))).next(()=>n.maxValue)}removeTargets(t,e,n){return this.Dn.removeTargets(t,e,n)}removeOrphanedDocuments(t,e){return this.Dn.removeOrphanedDocuments(t,e)}collect(t,e){return-1===this.params.cacheSizeCollectionThreshold?(Kx("LruGarbageCollector","Garbage collection skipped; disabled"),wP.resolve(mM)):this.getCacheSize(t).next(n=>n<this.params.cacheSizeCollectionThreshold?(Kx("LruGarbageCollector",`Garbage collection skipped; Cache size ${n} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),mM):this.Nn(t,e))}getCacheSize(t){return this.Dn.getCacheSize(t)}Nn(t,e){let n,r,i,s,o,a,u;const c=Date.now();return this.calculateTargetCount(t,this.params.percentileToCollect).next(e=>(e>this.params.maximumSequenceNumbersToCollect?(Kx("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${e}`),r=this.params.maximumSequenceNumbersToCollect):r=e,s=Date.now(),this.nthSequenceNumber(t,r))).next(r=>(n=r,o=Date.now(),this.removeTargets(t,n,e))).next(e=>(i=e,a=Date.now(),this.removeOrphanedDocuments(t,n))).next(t=>(u=Date.now(),zx()<=Kf.DEBUG&&Kx("LruGarbageCollector",`LRU Garbage Collection\n\tCounted targets in ${s-c}ms\n\tDetermined least recently used ${r} in `+(o-s)+"ms\n"+`\tRemoved ${i} targets in `+(a-o)+"ms\n"+`\tRemoved ${t} documents in `+(u-a)+"ms\n"+`Total Duration: ${u-c}ms`),wP.resolve({didRun:!0,sequenceNumbersCollected:r,targetsRemoved:i,documentsRemoved:t})))}}class LM{constructor(t,e){this.db=t,this.garbageCollector=function(t,e){return new MM(t,e)}(this,e)}Cn(t){const e=this.kn(t);return this.db.getTargetCache().getTargetCount(t).next(t=>e.next(e=>t+e))}kn(t){let e=0;return this.xn(t,t=>{e++}).next(()=>e)}forEachTarget(t,e){return this.db.getTargetCache().forEachTarget(t,e)}xn(t,e){return this.Mn(t,(t,n)=>e(n))}addReference(t,e,n){return VM(t,n)}removeReference(t,e,n){return VM(t,n)}removeTargets(t,e,n){return this.db.getTargetCache().removeTargets(t,e,n)}markPotentiallyOrphaned(t,e){return VM(t,e)}On(t,e){return function(t,e){let n=!1;return EM(t).zt(r=>_M(t,r,e).next(t=>(t&&(n=!0),wP.resolve(!t)))).next(()=>n)}(t,e)}removeOrphanedDocuments(t,e){const n=this.db.getRemoteDocumentCache().newChangeBuffer(),r=[];let i=0;return this.Mn(t,(s,o)=>{if(o<=e){const e=this.On(t,s).next(e=>{if(!e)return i++,n.getEntry(t,s).next(()=>(n.removeEntry(s,yO.min()),xM(t).delete([0,zR(s.path)])))});r.push(e)}}).next(()=>wP.waitFor(r)).next(()=>n.apply(t)).next(()=>i)}removeTarget(t,e){const n=e.withSequenceNumber(t.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(t,n)}updateLimboDocument(t,e){return VM(t,e)}Mn(t,e){const n=xM(t);let r,i=lO.A;return n.Wt({index:"documentTargetsIndex"},([t,n],{path:s,sequenceNumber:o})=>{0===t?(i!==lO.A&&e(new UO(WR(r)),i),i=o,r=s):i=lO.A}).next(()=>{i!==lO.A&&e(new UO(WR(r)),i)})}getCacheSize(t){return this.db.getRemoteDocumentCache().getSize(t)}}function VM(t,e){return xM(t).put(function(t,e){return{targetId:0,path:zR(t.path),sequenceNumber:e}}(e,t.currentSequenceNumber))}class FM{constructor(){this.changes=new $N(t=>t.toString(),(t,e)=>t.isEqual(e)),this.changesApplied=!1}addEntry(t){this.assertNotApplied(),this.changes.set(t.key,t)}removeEntry(t,e){this.assertNotApplied(),this.changes.set(t,cD.newInvalidDocument(t).setReadTime(e))}getEntry(t,e){this.assertNotApplied();const n=this.changes.get(e);return void 0!==n?wP.resolve(n):this.getFromCache(t,e)}getEntries(t,e){return this.getAllFromCache(t,e)}apply(t){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(t)}assertNotApplied(){}}class UM{constructor(t){this.M=t}setIndexManager(t){this.indexManager=t}addEntry(t,e,n){return $M(t).put(n)}removeEntry(t,e,n){return $M(t).delete(function(t,e){const n=t.path.toArray();return[n.slice(0,n.length-2),n[n.length-2],VP(e),n[n.length-1]]}(e,n))}updateMetadata(t,e){return this.getMetadata(t).next(n=>(n.byteSize+=e,this.Fn(t,n)))}getEntry(t,e){let n=cD.newInvalidDocument(e);return $M(t).Wt({index:"documentKeyIndex",range:IDBKeyRange.only(qM(e))},(t,r)=>{n=this.$n(e,r)}).next(()=>n)}Bn(t,e){let n={size:0,document:cD.newInvalidDocument(e)};return $M(t).Wt({index:"documentKeyIndex",range:IDBKeyRange.only(qM(e))},(t,r)=>{n={document:this.$n(e,r),size:wM(r)}}).next(()=>n)}getEntries(t,e){let n=YN();return this.Ln(t,e,(t,e)=>{const r=this.$n(t,e);n=n.insert(t,r)}).next(()=>n)}Un(t,e){let n=YN(),r=new qN(UO.comparator);return this.Ln(t,e,(t,e)=>{const i=this.$n(t,e);n=n.insert(t,i),r=r.insert(t,wM(e))}).next(()=>({documents:n,qn:r}))}Ln(t,e,n){if(e.isEmpty())return wP.resolve();let r=new KN(zM);e.forEach(t=>r=r.add(t));const i=IDBKeyRange.bound(qM(r.first()),qM(r.last())),s=r.getIterator();let o=s.getNext();return $M(t).Wt({index:"documentKeyIndex",range:i},(t,e,r)=>{const i=UO.fromSegments([...e.prefixPath,e.collectionGroup,e.documentId]);for(;o&&zM(o,i)<0;)n(o,null),o=s.getNext();o&&o.isEqual(i)&&(n(o,e),o=s.hasNext()?s.getNext():null),o?r.Ut(qM(o)):r.done()}).next(()=>{for(;o;)n(o,null),o=s.hasNext()?s.getNext():null})}getAllFromCollection(t,e,n){const r=[e.popLast().toArray(),e.lastSegment(),VP(n.readTime),n.documentKey.path.isEmpty()?"":n.documentKey.path.lastSegment()],i=[e.popLast().toArray(),e.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return $M(t).qt(IDBKeyRange.bound(r,i,!0)).next(t=>{let e=YN();for(const n of t){const t=this.$n(UO.fromSegments(n.prefixPath.concat(n.collectionGroup,n.documentId)),n);e=e.insert(t.key,t)}return e})}getAllFromCollectionGroup(t,e,n,r){let i=YN();const s=HM(e,n),o=HM(e,yD.max());return $M(t).Wt({index:"collectionGroupIndex",range:IDBKeyRange.bound(s,o,!0)},(t,e,n)=>{const s=this.$n(UO.fromSegments(e.prefixPath.concat(e.collectionGroup,e.documentId)),e);i=i.insert(s.key,s),i.size===r&&n.done()}).next(()=>i)}newChangeBuffer(t){return new jM(this,!!t&&t.trackRemovals)}getSize(t){return this.getMetadata(t).next(t=>t.byteSize)}getMetadata(t){return BM(t).get("remoteDocumentGlobalKey").next(t=>(Jx(!!t),t))}Fn(t,e){return BM(t).put("remoteDocumentGlobalKey",e)}$n(t,e){if(e){const t=function(t,e){let n;if(e.document)n=OR(t.Jt,e.document,!!e.hasCommittedMutations);else if(e.noDocument){const t=UO.fromSegments(e.noDocument.path),r=UP(e.noDocument.readTime);n=cD.newNoDocument(t,r),e.hasCommittedMutations&&n.setHasCommittedMutations()}else{if(!e.unknownDocument)return Yx();{const t=UO.fromSegments(e.unknownDocument.path),r=UP(e.unknownDocument.version);n=cD.newUnknownDocument(t,r)}}return e.readTime&&n.setReadTime(function(t){const e=new mO(t[0],t[1]);return yO.fromTimestamp(e)}(e.readTime)),n}(this.M,e);if(!t.isNoDocument()||!t.version.isEqual(yO.min()))return t}return cD.newInvalidDocument(t)}}class jM extends FM{constructor(t,e){super(),this.Kn=t,this.trackRemovals=e,this.Gn=new $N(t=>t.toString(),(t,e)=>t.isEqual(e))}applyChanges(t){const e=[];let n=0,r=new KN((t,e)=>fO(t.canonicalString(),e.canonicalString()));return this.changes.forEach((i,s)=>{const o=this.Gn.get(i);if(e.push(this.Kn.removeEntry(t,i,o.readTime)),s.isValidDocument()){const a=LP(this.Kn.M,s);r=r.add(i.path.popLast());const u=wM(a);n+=u-o.size,e.push(this.Kn.addEntry(t,i,a))}else if(n-=o.size,this.trackRemovals){const n=LP(this.Kn.M,s.convertToNoDocument(yO.min()));e.push(this.Kn.addEntry(t,i,n))}}),r.forEach(n=>{e.push(this.Kn.indexManager.addToCollectionParentIndex(t,n))}),e.push(this.Kn.updateMetadata(t,n)),wP.waitFor(e)}getFromCache(t,e){return this.Kn.Bn(t,e).next(t=>(this.Gn.set(e,{size:t.size,readTime:t.document.readTime}),t.document))}getAllFromCache(t,e){return this.Kn.Un(t,e).next(({documents:t,qn:e})=>(e.forEach((e,n)=>{this.Gn.set(e,{size:n,readTime:t.get(e).readTime})}),t))}}function BM(t){return OP(t,"remoteDocumentGlobal")}function $M(t){return OP(t,"remoteDocumentsV14")}function qM(t){const e=t.path.toArray();return[e.slice(0,e.length-2),e[e.length-2],e[e.length-1]]}function HM(t,e){const n=e.documentKey.path.toArray();return[t,VP(e.readTime),n.slice(0,n.length-2),n.length>0?n[n.length-1]:""]}function zM(t,e){const n=t.path.toArray(),r=e.path.toArray();let i=0;for(let s=0;s<n.length-2&&s<r.length-2;++s)if(i=fO(n[s],r[s]),i)return i;return i=fO(n.length,r.length),i||(i=fO(n[n.length-2],r[r.length-2]),i||fO(n[n.length-1],r[r.length-1]))}class KM{constructor(t){this.M=t}kt(t,e,n,r){const i=new bP("createOrUpgrade",e);n<1&&r>=1&&(function(t){t.createObjectStore("owner")}(t),function(t){t.createObjectStore("mutationQueues",{keyPath:"userId"}),t.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",QR,{unique:!0}),t.createObjectStore("documentMutations")}(t),GM(t),function(t){t.createObjectStore("remoteDocuments")}(t));let s=wP.resolve();return n<3&&r>=3&&(0!==n&&(function(t){t.deleteObjectStore("targetDocuments"),t.deleteObjectStore("targets"),t.deleteObjectStore("targetGlobal")}(t),GM(t)),s=s.next(()=>function(t){const e=t.store("targetGlobal"),n={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:yO.min().toTimestamp(),targetCount:0};return e.put("targetGlobalKey",n)}(i))),n<4&&r>=4&&(0!==n&&(s=s.next(()=>function(t,e){return e.store("mutations").qt().next(n=>{t.deleteObjectStore("mutations"),t.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",QR,{unique:!0});const r=e.store("mutations"),i=n.map(t=>r.put(t));return wP.waitFor(i)})}(t,i))),s=s.next(()=>{!function(t){t.createObjectStore("clientMetadata",{keyPath:"clientId"})}(t)})),n<5&&r>=5&&(s=s.next(()=>this.Qn(i))),n<6&&r>=6&&(s=s.next(()=>(function(t){t.createObjectStore("remoteDocumentGlobal")}(t),this.jn(i)))),n<7&&r>=7&&(s=s.next(()=>this.Wn(i))),n<8&&r>=8&&(s=s.next(()=>this.zn(t,i))),n<9&&r>=9&&(s=s.next(()=>{!function(t){t.objectStoreNames.contains("remoteDocumentChanges")&&t.deleteObjectStore("remoteDocumentChanges")}(t)})),n<10&&r>=10&&(s=s.next(()=>this.Hn(i))),n<11&&r>=11&&(s=s.next(()=>{!function(t){t.createObjectStore("bundles",{keyPath:"bundleId"})}(t),function(t){t.createObjectStore("namedQueries",{keyPath:"name"})}(t)})),n<12&&r>=12&&(s=s.next(()=>{!function(t){const e=t.createObjectStore("documentOverlays",{keyPath:lP});e.createIndex("collectionPathOverlayIndex",hP,{unique:!1}),e.createIndex("collectionGroupOverlayIndex",dP,{unique:!1})}(t)})),n<13&&r>=13&&(s=s.next(()=>function(t){const e=t.createObjectStore("remoteDocumentsV14",{keyPath:ZR});e.createIndex("documentKeyIndex",tP),e.createIndex("collectionGroupIndex",eP)}(t)).next(()=>this.Jn(t,i)).next(()=>t.deleteObjectStore("remoteDocuments"))),n<14&&r>=14&&(s=s.next(()=>{!function(t){t.createObjectStore("indexConfiguration",{keyPath:"indexId",autoIncrement:!0}).createIndex("collectionGroupIndex","collectionGroup",{unique:!1}),t.createObjectStore("indexState",{keyPath:oP}).createIndex("sequenceNumberIndex",aP,{unique:!1}),t.createObjectStore("indexEntries",{keyPath:uP}).createIndex("documentKeyIndex",cP,{unique:!1})}(t)})),s}jn(t){let e=0;return t.store("remoteDocuments").Wt((t,n)=>{e+=wM(n)}).next(()=>{const n={byteSize:e};return t.store("remoteDocumentGlobal").put("remoteDocumentGlobalKey",n)})}Qn(t){const e=t.store("mutationQueues"),n=t.store("mutations");return e.qt().next(e=>wP.forEach(e,e=>{const r=IDBKeyRange.bound([e.userId,-1],[e.userId,e.lastAcknowledgedBatchId]);return n.qt("userMutationsIndex",r).next(n=>wP.forEach(n,n=>{Jx(n.userId===e.userId);const r=jP(this.M,n);return vM(t,e.userId,r).next(()=>{})}))}))}Wn(t){const e=t.store("targetDocuments"),n=t.store("remoteDocuments");return t.store("targetGlobal").get("targetGlobalKey").next(t=>{const r=[];return n.Wt((n,i)=>{const s=new IO(n),o=function(t){return[0,zR(t)]}(s);r.push(e.get(o).next(n=>n?wP.resolve():(n=>e.put({targetId:0,path:zR(n),sequenceNumber:t.highestListenSequenceNumber}))(s)))}).next(()=>wP.waitFor(r))})}zn(t,e){t.createObjectStore("collectionParents",{keyPath:sP});const n=e.store("collectionParents"),r=new cM,i=t=>{if(r.add(t)){const e=t.lastSegment(),r=t.popLast();return n.put({collectionId:e,parent:zR(r)})}};return e.store("remoteDocuments").Wt({jt:!0},(t,e)=>{const n=new IO(t);return i(n.popLast())}).next(()=>e.store("documentMutations").Wt({jt:!0},([t,e,n],r)=>{const s=WR(e);return i(s.popLast())}))}Hn(t){const e=t.store("targets");return e.Wt((t,n)=>{const r=BP(n),i=$P(this.M,r);return e.put(i)})}Jn(t,e){const n=e.store("remoteDocuments"),r=[];return n.Wt((t,n)=>{const i=e.store("remoteDocumentsV14"),s=(o=n,o.document?new UO(IO.fromString(o.document.name).popFirst(5)):o.noDocument?UO.fromSegments(o.noDocument.path):o.unknownDocument?UO.fromSegments(o.unknownDocument.path):Yx()).path.toArray();var o;const a={prefixPath:s.slice(0,s.length-2),collectionGroup:s[s.length-2],documentId:s[s.length-1],readTime:n.readTime||[0,0],unknownDocument:n.unknownDocument,noDocument:n.noDocument,document:n.document,hasCommittedMutations:!!n.hasCommittedMutations};r.push(i.put(a))}).next(()=>wP.waitFor(r))}}function GM(t){t.createObjectStore("targetDocuments",{keyPath:rP}).createIndex("documentTargetsIndex",iP,{unique:!0}),t.createObjectStore("targets",{keyPath:"targetId"}).createIndex("queryTargetsIndex",nP,{unique:!0}),t.createObjectStore("targetGlobal")}const WM="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.";class QM{constructor(t,e,n,r,i,s,o,a,u,c,l=13){if(this.allowTabSynchronization=t,this.persistenceKey=e,this.clientId=n,this.Yn=i,this.window=s,this.document=o,this.Xn=u,this.Zn=c,this.ts=l,this.es=null,this.ns=!1,this.isPrimary=!1,this.networkEnabled=!0,this.ss=null,this.inForeground=!1,this.rs=null,this.os=null,this.us=Number.NEGATIVE_INFINITY,this.cs=t=>Promise.resolve(),!QM.vt())throw new tO(Zx.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new LM(this,r),this.hs=e+"main",this.M=new MP(a),this.ls=new _P(this.hs,this.ts,new KM(this.M)),this.fs=new CM(this.referenceDelegate,this.M),this.ds=function(t){return new UM(t)}(this.M),this._s=new KP,this.window&&this.window.localStorage?this.ws=this.window.localStorage:(this.ws=null,!1===c&&Gx("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}start(){return this.gs().then(()=>{if(!this.isPrimary&&!this.allowTabSynchronization)throw new tO(Zx.FAILED_PRECONDITION,WM);return this.ys(),this.ps(),this.Is(),this.runTransaction("getHighestListenSequenceNumber","readonly",t=>this.fs.getHighestSequenceNumber(t))}).then(t=>{this.es=new lO(t,this.Xn)}).then(()=>{this.ns=!0}).catch(t=>(this.ls&&this.ls.close(),Promise.reject(t)))}Ts(t){var e=this;return this.cs=function(){var n=uf(function*(n){if(e.started)return t(n)});return function(t){return n.apply(this,arguments)}}(),t(this.isPrimary)}setDatabaseDeletedListener(t){this.ls.Ot(function(){var e=uf(function*(e){null===e.newVersion&&(yield t())});return function(t){return e.apply(this,arguments)}}())}setNetworkEnabled(t){var e=this;this.networkEnabled!==t&&(this.networkEnabled=t,this.Yn.enqueueAndForget(uf(function*(){e.started&&(yield e.gs())})))}gs(){return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",t=>JM(t).put({clientId:this.clientId,updateTimeMs:Date.now(),networkEnabled:this.networkEnabled,inForeground:this.inForeground}).next(()=>{if(this.isPrimary)return this.Es(t).next(t=>{t||(this.isPrimary=!1,this.Yn.enqueueRetryable(()=>this.cs(!1)))})}).next(()=>this.As(t)).next(e=>this.isPrimary&&!e?this.Rs(t).next(()=>!1):!!e&&this.Ps(t).next(()=>!0))).catch(t=>{if(EP(t))return Kx("IndexedDbPersistence","Failed to extend owner lease: ",t),this.isPrimary;if(!this.allowTabSynchronization)throw t;return Kx("IndexedDbPersistence","Releasing owner lease after error during lease refresh",t),!1}).then(t=>{this.isPrimary!==t&&this.Yn.enqueueRetryable(()=>this.cs(t)),this.isPrimary=t})}Es(t){return YM(t).get("owner").next(t=>wP.resolve(this.bs(t)))}Vs(t){return JM(t).delete(this.clientId)}vs(){var t=this;return uf(function*(){if(t.isPrimary&&!t.Ss(t.us,18e5)){t.us=Date.now();const e=yield t.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",e=>{const n=OP(e,"clientMetadata");return n.qt().next(e=>{const r=t.Ds(e,18e5),i=e.filter(t=>-1===r.indexOf(t));return wP.forEach(i,t=>n.delete(t.clientId)).next(()=>i)})}).catch(()=>[]);if(t.ws)for(const n of e)t.ws.removeItem(t.Cs(n.clientId))}})()}Is(){this.os=this.Yn.enqueueAfterDelay("client_metadata_refresh",4e3,()=>this.gs().then(()=>this.vs()).then(()=>this.Is()))}bs(t){return!!t&&t.ownerId===this.clientId}As(t){return this.Zn?wP.resolve(!0):YM(t).get("owner").next(e=>{if(null!==e&&this.Ss(e.leaseTimestampMs,5e3)&&!this.xs(e.ownerId)){if(this.bs(e)&&this.networkEnabled)return!0;if(!this.bs(e)){if(!e.allowTabSynchronization)throw new tO(Zx.FAILED_PRECONDITION,WM);return!1}}return!(!this.networkEnabled||!this.inForeground)||JM(t).qt().next(t=>void 0===this.Ds(t,5e3).find(t=>{if(this.clientId!==t.clientId){const e=!this.inForeground&&t.inForeground,n=this.networkEnabled===t.networkEnabled;if(!this.networkEnabled&&t.networkEnabled||e&&n)return!0}return!1}))}).next(t=>(this.isPrimary!==t&&Kx("IndexedDbPersistence",`Client ${t?"is":"is not"} eligible for a primary lease.`),t))}shutdown(){var t=this;return uf(function*(){t.ns=!1,t.Ns(),t.os&&(t.os.cancel(),t.os=null),t.ks(),t.Ms(),yield t.ls.runTransaction("shutdown","readwrite",["owner","clientMetadata"],e=>{const n=new xP(e,lO.A);return t.Rs(n).next(()=>t.Vs(n))}),t.ls.close(),t.Os()})()}Ds(t,e){return t.filter(t=>this.Ss(t.updateTimeMs,e)&&!this.xs(t.clientId))}Fs(){return this.runTransaction("getActiveClients","readonly",t=>JM(t).qt().next(t=>this.Ds(t,18e5).map(t=>t.clientId)))}get started(){return this.ns}getMutationQueue(t,e){return bM.Yt(t,this.M,e,this.referenceDelegate)}getTargetCache(){return this.fs}getRemoteDocumentCache(){return this.ds}getIndexManager(t){return new hM(t,this.M.Jt.databaseId)}getDocumentOverlayCache(t){return QP.Yt(this.M,t)}getBundleCache(){return this._s}runTransaction(t,e,n){Kx("IndexedDbPersistence","Starting transaction:",t);const r="readonly"===e?"readonly":"readwrite",i=14===(s=this.ts)?mP:13===s?gP:12===s?pP:11===s?fP:void Yx();var s;let o;return this.ls.runTransaction(t,r,i,r=>(o=new xP(r,this.es?this.es.next():lO.A),"readwrite-primary"===e?this.Es(o).next(t=>!!t||this.As(o)).next(e=>{if(!e)throw Gx(`Failed to obtain primary lease for action '${t}'.`),this.isPrimary=!1,this.Yn.enqueueRetryable(()=>this.cs(!1)),new tO(Zx.FAILED_PRECONDITION,yP);return n(o)}).next(t=>this.Ps(o).next(()=>t)):this.$s(o).next(()=>n(o)))).then(t=>(o.raiseOnCommittedEvent(),t))}$s(t){return YM(t).get("owner").next(t=>{if(null!==t&&this.Ss(t.leaseTimestampMs,5e3)&&!this.xs(t.ownerId)&&!this.bs(t)&&!(this.Zn||this.allowTabSynchronization&&t.allowTabSynchronization))throw new tO(Zx.FAILED_PRECONDITION,WM)})}Ps(t){const e={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return YM(t).put("owner",e)}static vt(){return _P.vt()}Rs(t){const e=YM(t);return e.get("owner").next(t=>this.bs(t)?(Kx("IndexedDbPersistence","Releasing primary lease."),e.delete("owner")):wP.resolve())}Ss(t,e){const n=Date.now();return!(t<n-e||t>n&&(Gx(`Detected an update time that is in the future: ${t} > ${n}`),1))}ys(){null!==this.document&&"function"==typeof this.document.addEventListener&&(this.rs=()=>{this.Yn.enqueueAndForget(()=>(this.inForeground="visible"===this.document.visibilityState,this.gs()))},this.document.addEventListener("visibilitychange",this.rs),this.inForeground="visible"===this.document.visibilityState)}ks(){this.rs&&(this.document.removeEventListener("visibilitychange",this.rs),this.rs=null)}ps(){var t;"function"==typeof(null===(t=this.window)||void 0===t?void 0:t.addEventListener)&&(this.ss=()=>{this.Ns(),!function(){try{return"[object process]"===Object.prototype.toString.call(global.process)}catch(t){return!1}}()&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")&&navigator.appVersion.match(/Version\/1[45]/)&&this.Yn.enterRestrictedMode(!0),this.Yn.enqueueAndForget(()=>this.shutdown())},this.window.addEventListener("pagehide",this.ss))}Ms(){this.ss&&(this.window.removeEventListener("pagehide",this.ss),this.ss=null)}xs(t){var e;try{const n=null!==(null===(e=this.ws)||void 0===e?void 0:e.getItem(this.Cs(t)));return Kx("IndexedDbPersistence",`Client '${t}' ${n?"is":"is not"} zombied in LocalStorage`),n}catch(t){return Gx("IndexedDbPersistence","Failed to get zombied client id.",t),!1}}Ns(){if(this.ws)try{this.ws.setItem(this.Cs(this.clientId),String(Date.now()))}catch(WT){Gx("Failed to set zombie client id.",WT)}}Os(){if(this.ws)try{this.ws.removeItem(this.Cs(this.clientId))}catch(WT){}}Cs(t){return`firestore_zombie_${this.persistenceKey}_${t}`}}function YM(t){return OP(t,"owner")}function JM(t){return OP(t,"clientMetadata")}function XM(t,e){let n=t.projectId;return t.isDefaultDatabase||(n+="."+t.database),"firestore/"+e+"/"+n+"/"}class ZM{constructor(t,e,n){this.ds=t,this.Bs=e,this.indexManager=n}Ls(t,e){return this.Bs.getAllMutationBatchesAffectingDocumentKey(t,e).next(n=>this.Us(t,e,n))}Us(t,e,n){return this.ds.getEntry(t,e).next(t=>{for(const e of n)e.applyToLocalView(t);return t})}qs(t,e){t.forEach((t,n)=>{for(const r of e)r.applyToLocalView(n)})}Ks(t,e){return this.ds.getEntries(t,e).next(e=>this.Gs(t,e).next(()=>e))}Gs(t,e){return this.Bs.getAllMutationBatchesAffectingDocumentKeys(t,e).next(t=>this.qs(e,t))}Qs(t,e,n){return function(t){return UO.isDocumentKey(t.path)&&null===t.collectionGroup&&0===t.filters.length}(e)?this.js(t,e.path):WD(e)?this.Ws(t,e,n):this.zs(t,e,n)}js(t,e){return this.Ls(t,new UO(e)).next(t=>{let e=XN();return t.isFoundDocument()&&(e=e.insert(t.key,t)),e})}Ws(t,e,n){const r=e.collectionGroup;let i=XN();return this.indexManager.getCollectionParents(t,r).next(s=>wP.forEach(s,s=>{const o=function(t,e){return new BD(e,null,t.explicitOrderBy.slice(),t.filters.slice(),t.limit,t.limitType,t.startAt,t.endAt)}(e,s.child(r));return this.zs(t,o,n).next(t=>{t.forEach((t,e)=>{i=i.insert(t,e)})})}).next(()=>i))}zs(t,e,n){let r;return this.ds.getAllFromCollection(t,e.path,n).next(n=>(r=n,this.Bs.getAllMutationBatchesAffectingQuery(t,e))).next(t=>{for(const e of t)for(const t of e.mutations){const n=t.key;let i=r.get(n);null==i&&(i=cD.newInvalidDocument(n),r=r.insert(n,i)),CN(t,i,e.localWriteTime),i.isFoundDocument()||(r=r.remove(n))}}).next(()=>(r.forEach((t,n)=>{eN(e,n)||(r=r.remove(t))}),r))}}class tL{constructor(t,e,n,r){this.targetId=t,this.fromCache=e,this.Hs=n,this.Js=r}static Ys(t,e){let n=nR(),r=nR();for(const i of e.docChanges)switch(i.type){case 0:n=n.add(i.doc.key);break;case 1:r=r.add(i.doc.key)}return new tL(t,e.fromCache,n,r)}}class eL{Xs(t){this.Zs=t}Qs(t,e,n,r){return function(t){return 0===t.filters.length&&null===t.limit&&null==t.startAt&&null==t.endAt&&(0===t.explicitOrderBy.length||1===t.explicitOrderBy.length&&t.explicitOrderBy[0].field.isKeyField())}(e)||n.isEqual(yO.min())?this.ti(t,e):this.Zs.Ks(t,r).next(i=>{const s=this.ei(e,i);return(HD(e)||zD(e))&&this.ni(e.limitType,s,r,n)?this.ti(t,e):(zx()<=Kf.DEBUG&&Kx("QueryEngine","Re-using previous result from %s to execute query: %s",n.toString(),tN(e)),this.Zs.Qs(t,e,gD(n,-1)).next(t=>(s.forEach(e=>{t=t.insert(e.key,e)}),t)))})}ei(t,e){let n=new KN(rN(t));return e.forEach((e,r)=>{eN(t,r)&&(n=n.add(r))}),n}ni(t,e,n,r){if(n.size!==e.size)return!0;const i="F"===t?e.last():e.first();return!!i&&(i.hasPendingWrites||i.version.compareTo(r)>0)}ti(t,e){return zx()<=Kf.DEBUG&&Kx("QueryEngine","Using full collection scan to execute query:",tN(e)),this.Zs.Qs(t,e,yD.min())}}class nL{constructor(t,e,n,r){this.persistence=t,this.si=e,this.M=r,this.ii=new qN(fO),this.ri=new $N(t=>_D(t),ID),this.oi=new Map,this.ui=t.getRemoteDocumentCache(),this.fs=t.getTargetCache(),this._s=t.getBundleCache(),this.ai(n)}ai(t){this.indexManager=this.persistence.getIndexManager(t),this.Bs=this.persistence.getMutationQueue(t,this.indexManager),this.ci=new ZM(this.ui,this.Bs,this.indexManager),this.ui.setIndexManager(this.indexManager),this.si.Xs(this.ci)}collectGarbage(t){return this.persistence.runTransaction("Collect garbage","readwrite-primary",e=>t.collect(e,this.ii))}}function rL(t,e,n,r){return new nL(t,e,n,r)}function iL(t,e){return sL.apply(this,arguments)}function sL(){return(sL=uf(function*(t,e){const n=Xx(t);return yield n.persistence.runTransaction("Handle user change","readonly",t=>{let r;return n.Bs.getAllMutationBatches(t).next(i=>(r=i,n.ai(e),n.Bs.getAllMutationBatches(t))).next(e=>{const i=[],s=[];let o=nR();for(const t of r){i.push(t.batchId);for(const e of t.mutations)o=o.add(e.key)}for(const t of e){s.push(t.batchId);for(const e of t.mutations)o=o.add(e.key)}return n.ci.Ks(t,o).next(t=>({hi:t,removedBatchIds:i,addedBatchIds:s}))})})})).apply(this,arguments)}function oL(t,e){const n=Xx(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",t=>{const r=e.batch.keys(),i=n.ui.newChangeBuffer({trackRemovals:!0});return function(t,e,n,r){const i=n.batch,s=i.keys();let o=wP.resolve();return s.forEach(t=>{o=o.next(()=>r.getEntry(e,t)).next(e=>{const s=n.docVersions.get(t);Jx(null!==s),e.version.compareTo(s)<0&&(i.applyToRemoteDocument(e,n),e.isValidDocument()&&(e.setReadTime(n.commitVersion),r.addEntry(e)))})}),o.next(()=>t.Bs.removeMutationBatch(e,i))}(n,t,e,i).next(()=>i.apply(t)).next(()=>n.Bs.performConsistencyCheck(t)).next(()=>n.ci.Ks(t,r))})}function aL(t){const e=Xx(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",t=>e.fs.getLastRemoteSnapshotVersion(t))}function uL(t,e){const n=Xx(t),r=e.snapshotVersion;let i=n.ii;return n.persistence.runTransaction("Apply remote event","readwrite-primary",t=>{const s=n.ui.newChangeBuffer({trackRemovals:!0});i=n.ii;const o=[];e.targetChanges.forEach((s,a)=>{const u=i.get(a);if(!u)return;o.push(n.fs.removeMatchingKeys(t,s.removedDocuments,a).next(()=>n.fs.addMatchingKeys(t,s.addedDocuments,a)));let c=u.withSequenceNumber(t.currentSequenceNumber);e.targetMismatches.has(a)?c=c.withResumeToken(CO.EMPTY_BYTE_STRING,yO.min()).withLastLimboFreeSnapshotVersion(yO.min()):s.resumeToken.approximateByteSize()>0&&(c=c.withResumeToken(s.resumeToken,r)),i=i.insert(a,c),function(t,e,n){return 0===t.resumeToken.approximateByteSize()||e.snapshotVersion.toMicroseconds()-t.snapshotVersion.toMicroseconds()>=3e8||n.addedDocuments.size+n.modifiedDocuments.size+n.removedDocuments.size>0}(u,c,s)&&o.push(n.fs.updateTargetData(t,c))});let a=YN();if(e.documentUpdates.forEach(r=>{e.resolvedLimboDocuments.has(r)&&o.push(n.persistence.referenceDelegate.updateLimboDocument(t,r))}),o.push(cL(t,s,e.documentUpdates).next(t=>{a=t})),!r.isEqual(yO.min())){const e=n.fs.getLastRemoteSnapshotVersion(t).next(e=>n.fs.setTargetsMetadata(t,t.currentSequenceNumber,r));o.push(e)}return wP.waitFor(o).next(()=>s.apply(t)).next(()=>n.ci.Gs(t,a)).next(()=>a)}).then(t=>(n.ii=i,t))}function cL(t,e,n){let r=nR();return n.forEach(t=>r=r.add(t)),e.getEntries(t,r).next(t=>{let r=YN();return n.forEach((n,i)=>{const s=t.get(n);i.isNoDocument()&&i.version.isEqual(yO.min())?(e.removeEntry(n,i.readTime),r=r.insert(n,i)):!s.isValidDocument()||i.version.compareTo(s.version)>0||0===i.version.compareTo(s.version)&&s.hasPendingWrites?(e.addEntry(i),r=r.insert(n,i)):Kx("LocalStore","Ignoring outdated watch update for ",n,". Current version:",s.version," Watch version:",i.version)}),r})}function lL(t,e){const n=Xx(t);return n.persistence.runTransaction("Get next mutation batch","readonly",t=>(void 0===e&&(e=-1),n.Bs.getNextMutationBatchAfterBatchId(t,e)))}function hL(t,e){const n=Xx(t);return n.persistence.runTransaction("Allocate target","readwrite",t=>{let r;return n.fs.getTargetData(t,e).next(i=>i?(r=i,wP.resolve(r)):n.fs.allocateTargetId(t).next(i=>(r=new PP(e,i,0,t.currentSequenceNumber),n.fs.addTargetData(t,r).next(()=>r))))}).then(t=>{const r=n.ii.get(t.targetId);return(null===r||t.snapshotVersion.compareTo(r.snapshotVersion)>0)&&(n.ii=n.ii.insert(t.targetId,t),n.ri.set(e,t.targetId)),t})}function dL(t,e,n){return fL.apply(this,arguments)}function fL(){return(fL=uf(function*(t,e,n){const r=Xx(t),i=r.ii.get(e),s=n?"readwrite":"readwrite-primary";try{n||(yield r.persistence.runTransaction("Release target",s,t=>r.persistence.referenceDelegate.removeTarget(t,i)))}catch(t){if(!EP(t))throw t;Kx("LocalStore",`Failed to update sequence numbers for target ${e}: ${t}`)}r.ii=r.ii.remove(e),r.ri.delete(i.target)})).apply(this,arguments)}function pL(t,e,n){const r=Xx(t);let i=yO.min(),s=nR();return r.persistence.runTransaction("Execute query","readonly",t=>function(t,e,n){const r=Xx(t),i=r.ri.get(n);return void 0!==i?wP.resolve(r.ii.get(i)):r.fs.getTargetData(e,n)}(r,t,YD(e)).next(e=>{if(e)return i=e.lastLimboFreeSnapshotVersion,r.fs.getMatchingKeysForTargetId(t,e.targetId).next(t=>{s=t})}).next(()=>r.si.Qs(t,e,n?i:yO.min(),n?s:nR())).next(t=>(yL(r,nN(e),t),{documents:t,li:s})))}function gL(t,e){const n=Xx(t),r=Xx(n.fs),i=n.ii.get(e);return i?Promise.resolve(i.target):n.persistence.runTransaction("Get target data","readonly",t=>r.Et(t,e).next(t=>t?t.target:null))}function mL(t,e){const n=Xx(t),r=n.oi.get(e)||yO.min();return n.persistence.runTransaction("Get new document changes","readonly",t=>n.ui.getAllFromCollectionGroup(t,e,gD(r,-1),Number.MAX_SAFE_INTEGER)).then(t=>(yL(n,e,t),t))}function yL(t,e,n){let r=yO.min();n.forEach((t,e)=>{e.readTime.compareTo(r)>0&&(r=e.readTime)}),t.oi.set(e,r)}function vL(){return(vL=uf(function*(t,e,n,r){const i=Xx(t);let s=nR(),o=YN();for(const c of n){const t=e.fi(c.metadata.name);c.document&&(s=s.add(t));const n=e.di(c);n.setReadTime(e._i(c.metadata.readTime)),o=o.insert(t,n)}const a=i.ui.newChangeBuffer({trackRemovals:!0}),u=yield hL(i,function(t){return YD(qD(IO.fromString(`__bundle__/docs/${t}`)))}(r));return i.persistence.runTransaction("Apply bundle documents","readwrite",t=>cL(t,a,o).next(e=>(a.apply(t),e)).next(e=>i.fs.removeMatchingKeysForTargetId(t,u.targetId).next(()=>i.fs.addMatchingKeys(t,s,u.targetId)).next(()=>i.ci.Gs(t,e)).next(()=>e)))})).apply(this,arguments)}function wL(t,e){return bL.apply(this,arguments)}function bL(){return(bL=uf(function*(t,e,n=nR()){const r=yield hL(t,YD(qP(e.bundledQuery))),i=Xx(t);return i.persistence.runTransaction("Save named query","readwrite",t=>{const s=bR(e.readTime);if(r.snapshotVersion.compareTo(s)>=0)return i._s.saveNamedQuery(t,e);const o=r.withResumeToken(CO.EMPTY_BYTE_STRING,s);return i.ii=i.ii.insert(o.targetId,o),i.fs.updateTargetData(t,o).next(()=>i.fs.removeMatchingKeysForTargetId(t,r.targetId)).next(()=>i.fs.addMatchingKeys(t,n,r.targetId)).next(()=>i._s.saveNamedQuery(t,e))})})).apply(this,arguments)}class _L{constructor(t){this.M=t,this.wi=new Map,this.mi=new Map}getBundleMetadata(t,e){return wP.resolve(this.wi.get(e))}saveBundleMetadata(t,e){var n;return this.wi.set(e.id,{id:(n=e).id,version:n.version,createTime:bR(n.createTime)}),wP.resolve()}getNamedQuery(t,e){return wP.resolve(this.mi.get(e))}saveNamedQuery(t,e){return this.mi.set(e.name,function(t){return{name:t.name,query:qP(t.bundledQuery),readTime:bR(t.readTime)}}(e)),wP.resolve()}}class IL{constructor(){this.overlays=new qN(UO.comparator),this.gi=new Map}getOverlay(t,e){return wP.resolve(this.overlays.get(e))}saveOverlays(t,e,n){return n.forEach((n,r)=>{this.Xt(t,e,r)}),wP.resolve()}removeOverlaysForBatchId(t,e,n){const r=this.gi.get(n);return void 0!==r&&(r.forEach(t=>this.overlays=this.overlays.remove(t)),this.gi.delete(n)),wP.resolve()}getOverlaysForCollection(t,e,n){const r=ZN(),i=e.length+1,s=new UO(e.child("")),o=this.overlays.getIteratorFrom(s);for(;o.hasNext();){const t=o.getNext().value,s=t.getKey();if(!e.isPrefixOf(s.path))break;s.path.length===i&&t.largestBatchId>n&&r.set(t.getKey(),t)}return wP.resolve(r)}getOverlaysForCollectionGroup(t,e,n,r){let i=new qN((t,e)=>t-e);const s=this.overlays.getIterator();for(;s.hasNext();){const t=s.getNext().value;if(t.getKey().getCollectionGroup()===e&&t.largestBatchId>n){let e=i.get(t.largestBatchId);null===e&&(e=ZN(),i=i.insert(t.largestBatchId,e)),e.set(t.getKey(),t)}}const o=ZN(),a=i.getIterator();for(;a.hasNext()&&(a.getNext().value.forEach((t,e)=>o.set(t,e)),!(o.size()>=r)););return wP.resolve(o)}Xt(t,e,n){if(null===n)return;const r=this.overlays.get(n.key);if(null!==r){const t=this.gi.get(r.largestBatchId).delete(n.key);this.gi.set(r.largestBatchId,t)}this.overlays=this.overlays.insert(n.key,new RP(e,n));let i=this.gi.get(e);void 0===i&&(i=nR(),this.gi.set(e,i)),this.gi.set(e,i.add(n.key))}}class SL{constructor(){this.yi=new KN(EL.pi),this.Ii=new KN(EL.Ti)}isEmpty(){return this.yi.isEmpty()}addReference(t,e){const n=new EL(t,e);this.yi=this.yi.add(n),this.Ii=this.Ii.add(n)}Ei(t,e){t.forEach(t=>this.addReference(t,e))}removeReference(t,e){this.Ai(new EL(t,e))}Ri(t,e){t.forEach(t=>this.removeReference(t,e))}Pi(t){const e=new UO(new IO([])),n=new EL(e,t),r=new EL(e,t+1),i=[];return this.Ii.forEachInRange([n,r],t=>{this.Ai(t),i.push(t.key)}),i}bi(){this.yi.forEach(t=>this.Ai(t))}Ai(t){this.yi=this.yi.delete(t),this.Ii=this.Ii.delete(t)}Vi(t){const e=new UO(new IO([])),n=new EL(e,t),r=new EL(e,t+1);let i=nR();return this.Ii.forEachInRange([n,r],t=>{i=i.add(t.key)}),i}containsKey(t){const e=new EL(t,0),n=this.yi.firstAfterOrEqual(e);return null!==n&&t.isEqual(n.key)}}class EL{constructor(t,e){this.key=t,this.vi=e}static pi(t,e){return UO.comparator(t.key,e.key)||fO(t.vi,e.vi)}static Ti(t,e){return fO(t.vi,e.vi)||UO.comparator(t.key,e.key)}}class TL{constructor(t,e){this.indexManager=t,this.referenceDelegate=e,this.Bs=[],this.Si=1,this.Di=new KN(EL.pi)}checkEmpty(t){return wP.resolve(0===this.Bs.length)}addMutationBatch(t,e,n,r){const i=this.Si;this.Si++;const s=new DP(i,e,n,r);this.Bs.push(s);for(const o of r)this.Di=this.Di.add(new EL(o.key,i)),this.indexManager.addToCollectionParentIndex(t,o.key.path.popLast());return wP.resolve(s)}lookupMutationBatch(t,e){return wP.resolve(this.Ci(e))}getNextMutationBatchAfterBatchId(t,e){const n=this.xi(e+1),r=n<0?0:n;return wP.resolve(this.Bs.length>r?this.Bs[r]:null)}getHighestUnacknowledgedBatchId(){return wP.resolve(0===this.Bs.length?-1:this.Si-1)}getAllMutationBatches(t){return wP.resolve(this.Bs.slice())}getAllMutationBatchesAffectingDocumentKey(t,e){const n=new EL(e,0),r=new EL(e,Number.POSITIVE_INFINITY),i=[];return this.Di.forEachInRange([n,r],t=>{const e=this.Ci(t.vi);i.push(e)}),wP.resolve(i)}getAllMutationBatchesAffectingDocumentKeys(t,e){let n=new KN(fO);return e.forEach(t=>{const e=new EL(t,0),r=new EL(t,Number.POSITIVE_INFINITY);this.Di.forEachInRange([e,r],t=>{n=n.add(t.vi)})}),wP.resolve(this.Ni(n))}getAllMutationBatchesAffectingQuery(t,e){const n=e.path,r=n.length+1;let i=n;UO.isDocumentKey(i)||(i=i.child(""));const s=new EL(new UO(i),0);let o=new KN(fO);return this.Di.forEachWhile(t=>{const e=t.key.path;return!!n.isPrefixOf(e)&&(e.length===r&&(o=o.add(t.vi)),!0)},s),wP.resolve(this.Ni(o))}Ni(t){const e=[];return t.forEach(t=>{const n=this.Ci(t);null!==n&&e.push(n)}),e}removeMutationBatch(t,e){Jx(0===this.ki(e.batchId,"removed")),this.Bs.shift();let n=this.Di;return wP.forEach(e.mutations,r=>{const i=new EL(r.key,e.batchId);return n=n.delete(i),this.referenceDelegate.markPotentiallyOrphaned(t,r.key)}).next(()=>{this.Di=n})}_n(t){}containsKey(t,e){const n=new EL(e,0),r=this.Di.firstAfterOrEqual(n);return wP.resolve(e.isEqual(r&&r.key))}performConsistencyCheck(t){return wP.resolve()}ki(t,e){return this.xi(t)}xi(t){return 0===this.Bs.length?0:t-this.Bs[0].batchId}Ci(t){const e=this.xi(t);return e<0||e>=this.Bs.length?null:this.Bs[e]}}class CL{constructor(t){this.Mi=t,this.docs=new qN(UO.comparator),this.size=0}setIndexManager(t){this.indexManager=t}addEntry(t,e){const n=e.key,r=this.docs.get(n),i=r?r.size:0,s=this.Mi(e);return this.docs=this.docs.insert(n,{document:e.mutableCopy(),size:s}),this.size+=s-i,this.indexManager.addToCollectionParentIndex(t,n.path.popLast())}removeEntry(t){const e=this.docs.get(t);e&&(this.docs=this.docs.remove(t),this.size-=e.size)}getEntry(t,e){const n=this.docs.get(e);return wP.resolve(n?n.document.mutableCopy():cD.newInvalidDocument(e))}getEntries(t,e){let n=YN();return e.forEach(t=>{const e=this.docs.get(t);n=n.insert(t,e?e.document.mutableCopy():cD.newInvalidDocument(t))}),wP.resolve(n)}getAllFromCollection(t,e,n){let r=YN();const i=new UO(e.child("")),s=this.docs.getIteratorFrom(i);for(;s.hasNext();){const{key:t,value:{document:i}}=s.getNext();if(!e.isPrefixOf(t.path))break;t.path.length>e.length+1||vD(mD(i),n)<=0||(r=r.insert(i.key,i.mutableCopy()))}return wP.resolve(r)}getAllFromCollectionGroup(t,e,n,r){Yx()}Oi(t,e){return wP.forEach(this.docs,t=>e(t))}newChangeBuffer(t){return new kL(this)}getSize(t){return wP.resolve(this.size)}}class kL extends FM{constructor(t){super(),this.Kn=t}applyChanges(t){const e=[];return this.changes.forEach((n,r)=>{r.isValidDocument()?e.push(this.Kn.addEntry(t,r)):this.Kn.removeEntry(n)}),wP.waitFor(e)}getFromCache(t,e){return this.Kn.getEntry(t,e)}getAllFromCache(t,e){return this.Kn.getEntries(t,e)}}class AL{constructor(t){this.persistence=t,this.Fi=new $N(t=>_D(t),ID),this.lastRemoteSnapshotVersion=yO.min(),this.highestTargetId=0,this.$i=0,this.Bi=new SL,this.targetCount=0,this.Li=TM.gn()}forEachTarget(t,e){return this.Fi.forEach((t,n)=>e(n)),wP.resolve()}getLastRemoteSnapshotVersion(t){return wP.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(t){return wP.resolve(this.$i)}allocateTargetId(t){return this.highestTargetId=this.Li.next(),wP.resolve(this.highestTargetId)}setTargetsMetadata(t,e,n){return n&&(this.lastRemoteSnapshotVersion=n),e>this.$i&&(this.$i=e),wP.resolve()}Tn(t){this.Fi.set(t.target,t);const e=t.targetId;e>this.highestTargetId&&(this.Li=new TM(e),this.highestTargetId=e),t.sequenceNumber>this.$i&&(this.$i=t.sequenceNumber)}addTargetData(t,e){return this.Tn(e),this.targetCount+=1,wP.resolve()}updateTargetData(t,e){return this.Tn(e),wP.resolve()}removeTargetData(t,e){return this.Fi.delete(e.target),this.Bi.Pi(e.targetId),this.targetCount-=1,wP.resolve()}removeTargets(t,e,n){let r=0;const i=[];return this.Fi.forEach((s,o)=>{o.sequenceNumber<=e&&null===n.get(o.targetId)&&(this.Fi.delete(s),i.push(this.removeMatchingKeysForTargetId(t,o.targetId)),r++)}),wP.waitFor(i).next(()=>r)}getTargetCount(t){return wP.resolve(this.targetCount)}getTargetData(t,e){const n=this.Fi.get(e)||null;return wP.resolve(n)}addMatchingKeys(t,e,n){return this.Bi.Ei(e,n),wP.resolve()}removeMatchingKeys(t,e,n){this.Bi.Ri(e,n);const r=this.persistence.referenceDelegate,i=[];return r&&e.forEach(e=>{i.push(r.markPotentiallyOrphaned(t,e))}),wP.waitFor(i)}removeMatchingKeysForTargetId(t,e){return this.Bi.Pi(e),wP.resolve()}getMatchingKeysForTargetId(t,e){const n=this.Bi.Vi(e);return wP.resolve(n)}containsKey(t,e){return wP.resolve(this.Bi.containsKey(e))}}class xL{constructor(t,e){this.Ui={},this.overlays={},this.es=new lO(0),this.ns=!1,this.ns=!0,this.referenceDelegate=t(this),this.fs=new AL(this),this.indexManager=new uM,this.ds=function(t){return new CL(t)}(t=>this.referenceDelegate.qi(t)),this.M=new MP(e),this._s=new _L(this.M)}start(){return Promise.resolve()}shutdown(){return this.ns=!1,Promise.resolve()}get started(){return this.ns}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(t){return this.indexManager}getDocumentOverlayCache(t){let e=this.overlays[t.toKey()];return e||(e=new IL,this.overlays[t.toKey()]=e),e}getMutationQueue(t,e){let n=this.Ui[t.toKey()];return n||(n=new TL(e,this.referenceDelegate),this.Ui[t.toKey()]=n),n}getTargetCache(){return this.fs}getRemoteDocumentCache(){return this.ds}getBundleCache(){return this._s}runTransaction(t,e,n){Kx("MemoryPersistence","Starting transaction:",t);const r=new OL(this.es.next());return this.referenceDelegate.Ki(),n(r).next(t=>this.referenceDelegate.Gi(r).next(()=>t)).toPromise().then(t=>(r.raiseOnCommittedEvent(),t))}Qi(t,e){return wP.or(Object.values(this.Ui).map(n=>()=>n.containsKey(t,e)))}}class OL extends vP{constructor(t){super(),this.currentSequenceNumber=t}}class DL{constructor(t){this.persistence=t,this.ji=new SL,this.Wi=null}static zi(t){return new DL(t)}get Hi(){if(this.Wi)return this.Wi;throw Yx()}addReference(t,e,n){return this.ji.addReference(n,e),this.Hi.delete(n.toString()),wP.resolve()}removeReference(t,e,n){return this.ji.removeReference(n,e),this.Hi.add(n.toString()),wP.resolve()}markPotentiallyOrphaned(t,e){return this.Hi.add(e.toString()),wP.resolve()}removeTarget(t,e){this.ji.Pi(e.targetId).forEach(t=>this.Hi.add(t.toString()));const n=this.persistence.getTargetCache();return n.getMatchingKeysForTargetId(t,e.targetId).next(t=>{t.forEach(t=>this.Hi.add(t.toString()))}).next(()=>n.removeTargetData(t,e))}Ki(){this.Wi=new Set}Gi(t){const e=this.persistence.getRemoteDocumentCache().newChangeBuffer();return wP.forEach(this.Hi,n=>{const r=UO.fromPath(n);return this.Ji(t,r).next(t=>{t||e.removeEntry(r,yO.min())})}).next(()=>(this.Wi=null,e.apply(t)))}updateLimboDocument(t,e){return this.Ji(t,e).next(t=>{t?this.Hi.delete(e.toString()):this.Hi.add(e.toString())})}qi(t){return 0}Ji(t,e){return wP.or([()=>wP.resolve(this.ji.containsKey(e)),()=>this.persistence.getTargetCache().containsKey(t,e),()=>this.persistence.Qi(t,e)])}}function NL(t,e){return`firestore_clients_${t}_${e}`}function RL(t,e,n){let r=`firestore_mutations_${t}_${n}`;return e.isAuthenticated()&&(r+=`_${e.uid}`),r}function PL(t,e){return`firestore_targets_${t}_${e}`}class ML{constructor(t,e,n,r){this.user=t,this.batchId=e,this.state=n,this.error=r}static Yi(t,e,n){const r=JSON.parse(n);let i,s="object"==typeof r&&-1!==["pending","acknowledged","rejected"].indexOf(r.state)&&(void 0===r.error||"object"==typeof r.error);return s&&r.error&&(s="string"==typeof r.error.message&&"string"==typeof r.error.code,s&&(i=new tO(r.error.code,r.error.message))),s?new ML(t,e,r.state,i):(Gx("SharedClientState",`Failed to parse mutation state for ID '${e}': ${n}`),null)}Xi(){const t={state:this.state,updateTimeMs:Date.now()};return this.error&&(t.error={code:this.error.code,message:this.error.message}),JSON.stringify(t)}}class LL{constructor(t,e,n){this.targetId=t,this.state=e,this.error=n}static Yi(t,e){const n=JSON.parse(e);let r,i="object"==typeof n&&-1!==["not-current","current","rejected"].indexOf(n.state)&&(void 0===n.error||"object"==typeof n.error);return i&&n.error&&(i="string"==typeof n.error.message&&"string"==typeof n.error.code,i&&(r=new tO(n.error.code,n.error.message))),i?new LL(t,n.state,r):(Gx("SharedClientState",`Failed to parse target state for ID '${t}': ${e}`),null)}Xi(){const t={state:this.state,updateTimeMs:Date.now()};return this.error&&(t.error={code:this.error.code,message:this.error.message}),JSON.stringify(t)}}class VL{constructor(t,e){this.clientId=t,this.activeTargetIds=e}static Yi(t,e){const n=JSON.parse(e);let r="object"==typeof n&&n.activeTargetIds instanceof Array,i=iR();for(let s=0;r&&s<n.activeTargetIds.length;++s)r=FO(n.activeTargetIds[s]),i=i.add(n.activeTargetIds[s]);return r?new VL(t,i):(Gx("SharedClientState",`Failed to parse client data for instance '${t}': ${e}`),null)}}class FL{constructor(t,e){this.clientId=t,this.onlineState=e}static Yi(t){const e=JSON.parse(t);return"object"==typeof e&&-1!==["Unknown","Online","Offline"].indexOf(e.onlineState)&&"string"==typeof e.clientId?new FL(e.clientId,e.onlineState):(Gx("SharedClientState",`Failed to parse online state: ${t}`),null)}}class UL{constructor(){this.activeTargetIds=iR()}Zi(t){this.activeTargetIds=this.activeTargetIds.add(t)}tr(t){this.activeTargetIds=this.activeTargetIds.delete(t)}Xi(){const t={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(t)}}class jL{constructor(t,e,n,r,i){this.window=t,this.Yn=e,this.persistenceKey=n,this.er=r,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.nr=this.sr.bind(this),this.ir=new qN(fO),this.started=!1,this.rr=[];const s=n.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=i,this.ur=NL(this.persistenceKey,this.er),this.ar=function(t){return`firestore_sequence_number_${t}`}(this.persistenceKey),this.ir=this.ir.insert(this.er,new UL),this.cr=new RegExp(`^firestore_clients_${s}_([^_]*)$`),this.hr=new RegExp(`^firestore_mutations_${s}_(\\d+)(?:_(.*))?$`),this.lr=new RegExp(`^firestore_targets_${s}_(\\d+)$`),this.dr=function(t){return`firestore_online_state_${t}`}(this.persistenceKey),this._r=function(t){return`firestore_bundle_loaded_v2_${t}`}(this.persistenceKey),this.window.addEventListener("storage",this.nr)}static vt(t){return!(!t||!t.localStorage)}start(){var t=this;return uf(function*(){const e=yield t.syncEngine.Fs();for(const r of e){if(r===t.er)continue;const e=t.getItem(NL(t.persistenceKey,r));if(e){const n=VL.Yi(r,e);n&&(t.ir=t.ir.insert(n.clientId,n))}}t.wr();const n=t.storage.getItem(t.dr);if(n){const e=t.mr(n);e&&t.gr(e)}for(const r of t.rr)t.sr(r);t.rr=[],t.window.addEventListener("pagehide",()=>t.shutdown()),t.started=!0})()}writeSequenceNumber(t){this.setItem(this.ar,JSON.stringify(t))}getAllActiveQueryTargets(){return this.yr(this.ir)}isActiveQueryTarget(t){let e=!1;return this.ir.forEach((n,r)=>{r.activeTargetIds.has(t)&&(e=!0)}),e}addPendingMutation(t){this.pr(t,"pending")}updateMutationState(t,e,n){this.pr(t,e,n),this.Ir(t)}addLocalQueryTarget(t){let e="not-current";if(this.isActiveQueryTarget(t)){const n=this.storage.getItem(PL(this.persistenceKey,t));if(n){const r=LL.Yi(t,n);r&&(e=r.state)}}return this.Tr.Zi(t),this.wr(),e}removeLocalQueryTarget(t){this.Tr.tr(t),this.wr()}isLocalQueryTarget(t){return this.Tr.activeTargetIds.has(t)}clearQueryState(t){this.removeItem(PL(this.persistenceKey,t))}updateQueryState(t,e,n){this.Er(t,e,n)}handleUserChange(t,e,n){e.forEach(t=>{this.Ir(t)}),this.currentUser=t,n.forEach(t=>{this.addPendingMutation(t)})}setOnlineState(t){this.Ar(t)}notifyBundleLoaded(t){this.Rr(t)}shutdown(){this.started&&(this.window.removeEventListener("storage",this.nr),this.removeItem(this.ur),this.started=!1)}getItem(t){const e=this.storage.getItem(t);return Kx("SharedClientState","READ",t,e),e}setItem(t,e){Kx("SharedClientState","SET",t,e),this.storage.setItem(t,e)}removeItem(t){Kx("SharedClientState","REMOVE",t),this.storage.removeItem(t)}sr(t){var e=this;const n=t;if(n.storageArea===this.storage){if(Kx("SharedClientState","EVENT",n.key,n.newValue),n.key===this.ur)return void Gx("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.Yn.enqueueRetryable(uf(function*(){if(e.started){if(null!==n.key)if(e.cr.test(n.key)){if(null==n.newValue){const t=e.Pr(n.key);return e.br(t,null)}{const t=e.Vr(n.key,n.newValue);if(t)return e.br(t.clientId,t)}}else if(e.hr.test(n.key)){if(null!==n.newValue){const t=e.vr(n.key,n.newValue);if(t)return e.Sr(t)}}else if(e.lr.test(n.key)){if(null!==n.newValue){const t=e.Dr(n.key,n.newValue);if(t)return e.Cr(t)}}else if(n.key===e.dr){if(null!==n.newValue){const t=e.mr(n.newValue);if(t)return e.gr(t)}}else if(n.key===e.ar){const t=function(t){let e=lO.A;if(null!=t)try{const n=JSON.parse(t);Jx("number"==typeof n),e=n}catch(t){Gx("SharedClientState","Failed to read sequence number from WebStorage",t)}return e}(n.newValue);t!==lO.A&&e.sequenceNumberHandler(t)}else if(n.key===e._r){const t=e.Nr(n.newValue);yield Promise.all(t.map(t=>e.syncEngine.kr(t)))}}else e.rr.push(n)}))}}get Tr(){return this.ir.get(this.er)}wr(){this.setItem(this.ur,this.Tr.Xi())}pr(t,e,n){const r=new ML(this.currentUser,t,e,n),i=RL(this.persistenceKey,this.currentUser,t);this.setItem(i,r.Xi())}Ir(t){const e=RL(this.persistenceKey,this.currentUser,t);this.removeItem(e)}Ar(t){this.storage.setItem(this.dr,JSON.stringify({clientId:this.er,onlineState:t}))}Er(t,e,n){const r=PL(this.persistenceKey,t),i=new LL(t,e,n);this.setItem(r,i.Xi())}Rr(t){const e=JSON.stringify(Array.from(t));this.setItem(this._r,e)}Pr(t){const e=this.cr.exec(t);return e?e[1]:null}Vr(t,e){const n=this.Pr(t);return VL.Yi(n,e)}vr(t,e){const n=this.hr.exec(t),r=Number(n[1]);return ML.Yi(new $x(void 0!==n[2]?n[2]:null),r,e)}Dr(t,e){const n=this.lr.exec(t),r=Number(n[1]);return LL.Yi(r,e)}mr(t){return FL.Yi(t)}Nr(t){return JSON.parse(t)}Sr(t){var e=this;return uf(function*(){if(t.user.uid===e.currentUser.uid)return e.syncEngine.Mr(t.batchId,t.state,t.error);Kx("SharedClientState",`Ignoring mutation for non-active user ${t.user.uid}`)})()}Cr(t){return this.syncEngine.Or(t.targetId,t.state,t.error)}br(t,e){const n=e?this.ir.insert(t,e):this.ir.remove(t),r=this.yr(this.ir),i=this.yr(n),s=[],o=[];return i.forEach(t=>{r.has(t)||s.push(t)}),r.forEach(t=>{i.has(t)||o.push(t)}),this.syncEngine.Fr(s,o).then(()=>{this.ir=n})}gr(t){this.ir.get(t.clientId)&&this.onlineStateHandler(t.onlineState)}yr(t){let e=iR();return t.forEach((t,n)=>{e=e.unionWith(n.activeTargetIds)}),e}}class BL{constructor(){this.$r=new UL,this.Br={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(t){}updateMutationState(t,e,n){}addLocalQueryTarget(t){return this.$r.Zi(t),this.Br[t]||"not-current"}updateQueryState(t,e,n){this.Br[t]=e}removeLocalQueryTarget(t){this.$r.tr(t)}isLocalQueryTarget(t){return this.$r.activeTargetIds.has(t)}clearQueryState(t){delete this.Br[t]}getAllActiveQueryTargets(){return this.$r.activeTargetIds}isActiveQueryTarget(t){return this.$r.activeTargetIds.has(t)}start(){return this.$r=new UL,Promise.resolve()}handleUserChange(t,e,n){}setOnlineState(t){}shutdown(){}writeSequenceNumber(t){}notifyBundleLoaded(t){}}class $L{Lr(t){}shutdown(){}}class qL{constructor(){this.Ur=()=>this.qr(),this.Kr=()=>this.Gr(),this.Qr=[],this.jr()}Lr(t){this.Qr.push(t)}shutdown(){window.removeEventListener("online",this.Ur),window.removeEventListener("offline",this.Kr)}jr(){window.addEventListener("online",this.Ur),window.addEventListener("offline",this.Kr)}qr(){Kx("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const t of this.Qr)t(0)}Gr(){Kx("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const t of this.Qr)t(1)}static vt(){return"undefined"!=typeof window&&void 0!==window.addEventListener&&void 0!==window.removeEventListener}}const HL={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery"};class zL{constructor(t){this.Wr=t.Wr,this.zr=t.zr}Hr(t){this.Jr=t}Yr(t){this.Xr=t}onMessage(t){this.Zr=t}close(){this.zr()}send(t){this.Wr(t)}eo(){this.Jr()}no(t){this.Xr(t)}so(t){this.Zr(t)}}class KL extends class{constructor(t){this.databaseInfo=t,this.databaseId=t.databaseId,this.io=(t.ssl?"https":"http")+"://"+t.host,this.ro="projects/"+this.databaseId.projectId+"/databases/"+this.databaseId.database+"/documents"}oo(t,e,n,r,i){const s=this.uo(t,e);Kx("RestConnection","Sending: ",s,n);const o={};return this.ao(o,r,i),this.co(t,s,o,n).then(t=>(Kx("RestConnection","Received: ",t),t),e=>{throw Wx("RestConnection",`${t} failed with error: `,e,"url: ",s,"request:",n),e})}ho(t,e,n,r,i){return this.oo(t,e,n,r,i)}ao(t,e,n){t["X-Goog-Api-Client"]="gl-js/ fire/"+qx,t["Content-Type"]="text/plain",this.databaseInfo.appId&&(t["X-Firebase-GMPID"]=this.databaseInfo.appId),e&&e.headers.forEach((e,n)=>t[n]=e),n&&n.headers.forEach((e,n)=>t[n]=e)}uo(t,e){return`${this.io}/v1/${e}:${HL[t]}`}}{constructor(t){super(t),this.forceLongPolling=t.forceLongPolling,this.autoDetectLongPolling=t.autoDetectLongPolling,this.useFetchStreams=t.useFetchStreams}co(t,e,n,r){return new Promise((i,s)=>{const o=new jx;o.listenOnce(Mx.COMPLETE,()=>{try{switch(o.getLastErrorCode()){case Px.NO_ERROR:const e=o.getResponseJson();Kx("Connection","XHR received:",JSON.stringify(e)),i(e);break;case Px.TIMEOUT:Kx("Connection",'RPC "'+t+'" timed out'),s(new tO(Zx.DEADLINE_EXCEEDED,"Request time out"));break;case Px.HTTP_ERROR:const n=o.getStatus();if(Kx("Connection",'RPC "'+t+'" failed with status:',n,"response text:",o.getResponseText()),n>0){const t=o.getResponseJson().error;if(t&&t.status&&t.message){const e=function(t){const e=t.toLowerCase().replace(/_/g,"-");return Object.values(Zx).indexOf(e)>=0?e:Zx.UNKNOWN}(t.status);s(new tO(e,t.message))}else s(new tO(Zx.UNKNOWN,"Server responded with status "+o.getStatus()))}else s(new tO(Zx.UNAVAILABLE,"Connection failed."));break;default:Yx()}}finally{Kx("Connection",'RPC "'+t+'" completed.')}});const a=JSON.stringify(r);o.send(e,"POST",a,n,15)})}lo(t,e,n){const r=[this.io,"/","google.firestore.v1.Firestore","/",t,"/channel"],i=Nx(),s=Rx(),o={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling};this.useFetchStreams&&(o.xmlHttpFactory=new Fx({})),this.ao(o.initMessageHeaders,e,n),pf()||mf()||ff().indexOf("Electron/")>=0||yf()||ff().indexOf("MSAppHost/")>=0||gf()||(o.httpHeadersOverwriteParam="$httpHeaders");const a=r.join("");Kx("Connection","Creating WebChannel: "+a,o);const u=i.createWebChannel(a,o);let c=!1,l=!1;const h=new zL({Wr:t=>{l?Kx("Connection","Not sending because WebChannel is closed:",t):(c||(Kx("Connection","Opening WebChannel transport."),u.open(),c=!0),Kx("Connection","WebChannel sending:",t),u.send(t))},zr:()=>u.close()}),d=(t,e,n)=>{t.listen(e,t=>{try{n(t)}catch(t){setTimeout(()=>{throw t},0)}})};return d(u,Ux.EventType.OPEN,()=>{l||Kx("Connection","WebChannel transport opened.")}),d(u,Ux.EventType.CLOSE,()=>{l||(l=!0,Kx("Connection","WebChannel transport closed"),h.no())}),d(u,Ux.EventType.ERROR,t=>{l||(l=!0,Wx("Connection","WebChannel transport errored:",t),h.no(new tO(Zx.UNAVAILABLE,"The operation could not be completed")))}),d(u,Ux.EventType.MESSAGE,t=>{var e;if(!l){const n=t.data[0];Jx(!!n);const r=n,i=r.error||(null===(e=r[0])||void 0===e?void 0:e.error);if(i){Kx("Connection","WebChannel received error:",i);const t=i.status;let e=function(t){const e=FN[t];if(void 0!==e)return BN(e)}(t),n=i.message;void 0===e&&(e=Zx.INTERNAL,n="Unknown error status: "+t+" with message "+i.message),l=!0,h.no(new tO(e,n)),u.close()}else Kx("Connection","WebChannel received:",n),h.so(n)}}),d(s,Lx.STAT_EVENT,t=>{t.stat===Vx.PROXY?Kx("Connection","Detected buffering proxy"):t.stat===Vx.NOPROXY&&Kx("Connection","Detected no buffering proxy")}),setTimeout(()=>{h.eo()},0),h}}function GL(){return"undefined"!=typeof window?window:null}function WL(){return"undefined"!=typeof document?document:null}function QL(t){return new mR(t,!0)}class YL{constructor(t,e,n=1e3,r=1.5,i=6e4){this.Yn=t,this.timerId=e,this.fo=n,this._o=r,this.wo=i,this.mo=0,this.yo=null,this.po=Date.now(),this.reset()}reset(){this.mo=0}Io(){this.mo=this.wo}To(t){this.cancel();const e=Math.floor(this.mo+this.Eo()),n=Math.max(0,Date.now()-this.po),r=Math.max(0,e-n);r>0&&Kx("ExponentialBackoff",`Backing off for ${r} ms (base delay: ${this.mo} ms, delay with jitter: ${e} ms, last attempt: ${n} ms ago)`),this.yo=this.Yn.enqueueAfterDelay(this.timerId,r,()=>(this.po=Date.now(),t())),this.mo*=this._o,this.mo<this.fo&&(this.mo=this.fo),this.mo>this.wo&&(this.mo=this.wo)}Ao(){null!==this.yo&&(this.yo.skipDelay(),this.yo=null)}cancel(){null!==this.yo&&(this.yo.cancel(),this.yo=null)}Eo(){return(Math.random()-.5)*this.mo}}class JL{constructor(t,e,n,r,i,s,o,a){this.Yn=t,this.Ro=n,this.Po=r,this.bo=i,this.authCredentialsProvider=s,this.appCheckCredentialsProvider=o,this.listener=a,this.state=0,this.Vo=0,this.vo=null,this.So=null,this.stream=null,this.Do=new YL(t,e)}Co(){return 1===this.state||5===this.state||this.xo()}xo(){return 2===this.state||3===this.state}start(){4!==this.state?this.auth():this.No()}stop(){var t=this;return uf(function*(){t.Co()&&(yield t.close(0))})()}ko(){this.state=0,this.Do.reset()}Mo(){this.xo()&&null===this.vo&&(this.vo=this.Yn.enqueueAfterDelay(this.Ro,6e4,()=>this.Oo()))}Fo(t){this.$o(),this.stream.send(t)}Oo(){var t=this;return uf(function*(){if(t.xo())return t.close(0)})()}$o(){this.vo&&(this.vo.cancel(),this.vo=null)}Bo(){this.So&&(this.So.cancel(),this.So=null)}close(t,e){var n=this;return uf(function*(){n.$o(),n.Bo(),n.Do.cancel(),n.Vo++,4!==t?n.Do.reset():e&&e.code===Zx.RESOURCE_EXHAUSTED?(Gx(e.toString()),Gx("Using maximum backoff delay to prevent overloading the backend."),n.Do.Io()):e&&e.code===Zx.UNAUTHENTICATED&&3!==n.state&&(n.authCredentialsProvider.invalidateToken(),n.appCheckCredentialsProvider.invalidateToken()),null!==n.stream&&(n.Lo(),n.stream.close(),n.stream=null),n.state=t,yield n.listener.Yr(e)})()}Lo(){}auth(){this.state=1;const t=this.Uo(this.Vo),e=this.Vo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([t,n])=>{this.Vo===e&&this.qo(t,n)},e=>{t(()=>{const t=new tO(Zx.UNKNOWN,"Fetching auth token failed: "+e.message);return this.Ko(t)})})}qo(t,e){const n=this.Uo(this.Vo);this.stream=this.Go(t,e),this.stream.Hr(()=>{n(()=>(this.state=2,this.So=this.Yn.enqueueAfterDelay(this.Po,1e4,()=>(this.xo()&&(this.state=3),Promise.resolve())),this.listener.Hr()))}),this.stream.Yr(t=>{n(()=>this.Ko(t))}),this.stream.onMessage(t=>{n(()=>this.onMessage(t))})}No(){var t=this;this.state=5,this.Do.To(uf(function*(){t.state=0,t.start()}))}Ko(t){return Kx("PersistentStream",`close with error: ${t}`),this.stream=null,this.close(4,t)}Uo(t){return e=>{this.Yn.enqueueAndForget(()=>this.Vo===t?e():(Kx("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class XL extends JL{constructor(t,e,n,r,i,s){super(t,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",e,n,r,s),this.M=i}Go(t,e){return this.bo.lo("Listen",t,e)}onMessage(t){this.Do.reset();const e=function(t,e){let n;if("targetChange"in e){const r=function(t){return"NO_CHANGE"===t?0:"ADD"===t?1:"REMOVE"===t?2:"CURRENT"===t?3:"RESET"===t?4:Yx()}(e.targetChange.targetChangeType||"NO_CHANGE"),i=e.targetChange.targetIds||[],s=function(t,e){return t.N?(Jx(void 0===e||"string"==typeof e),CO.fromBase64String(e||"")):(Jx(void 0===e||e instanceof Uint8Array),CO.fromUint8Array(e||new Uint8Array))}(t,e.targetChange.resumeToken),o=e.targetChange.cause,a=o&&function(t){const e=void 0===t.code?Zx.UNKNOWN:BN(t.code);return new tO(e,t.message||"")}(o);n=new cR(r,i,s,a||null)}else if("documentChange"in e){const r=e.documentChange,i=ER(t,r.document.name),s=bR(r.document.updateTime),o=new aD({mapValue:{fields:r.document.fields}}),a=cD.newFoundDocument(i,s,o);n=new aR(r.targetIds||[],r.removedTargetIds||[],a.key,a)}else if("documentDelete"in e){const r=e.documentDelete,i=ER(t,r.document),s=r.readTime?bR(r.readTime):yO.min(),o=cD.newNoDocument(i,s);n=new aR([],r.removedTargetIds||[],o.key,o)}else if("documentRemove"in e){const r=e.documentRemove,i=ER(t,r.document);n=new aR([],r.removedTargetIds||[],i,null)}else{if(!("filter"in e))return Yx();{const t=e.filter,r=new VN(t.count||0);n=new uR(t.targetId,r)}}return n}(this.M,t),n=function(t){if(!("targetChange"in t))return yO.min();const e=t.targetChange;return e.targetIds&&e.targetIds.length?yO.min():e.readTime?bR(e.readTime):yO.min()}(t);return this.listener.Qo(e,n)}jo(t){const e={};e.database=kR(this.M),e.addTarget=function(t,e){let n;const r=e.target;return n=SD(r)?{documents:RR(t,r)}:{query:PR(t,r)},n.targetId=e.targetId,e.resumeToken.approximateByteSize()>0?n.resumeToken=vR(t,e.resumeToken):e.snapshotVersion.compareTo(yO.min())>0&&(n.readTime=yR(t,e.snapshotVersion.toTimestamp())),n}(this.M,t);const n=function(t,e){const n=function(t,e){switch(e){case 0:return null;case 1:return"existence-filter-mismatch";case 2:return"limbo-document";default:return Yx()}}(0,e.purpose);return null==n?null:{"goog-listen-tags":n}}(0,t);n&&(e.labels=n),this.Fo(e)}Wo(t){const e={};e.database=kR(this.M),e.removeTarget=t,this.Fo(e)}}class ZL extends JL{constructor(t,e,n,r,i,s){super(t,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",e,n,r,s),this.M=i,this.zo=!1}get Ho(){return this.zo}start(){this.zo=!1,this.lastStreamToken=void 0,super.start()}Lo(){this.zo&&this.Jo([])}Go(t,e){return this.bo.lo("Write",t,e)}onMessage(t){if(Jx(!!t.streamToken),this.lastStreamToken=t.streamToken,this.zo){this.Do.reset();const e=function(t,e){return t&&t.length>0?(Jx(void 0!==e),t.map(t=>function(t,e){let n=bR(t.updateTime?t.updateTime:e);return n.isEqual(yO.min())&&(n=bR(e)),new _N(n,t.transformResults||[])}(t,e))):[]}(t.writeResults,t.commitTime),n=bR(t.commitTime);return this.listener.Yo(n,e)}return Jx(!t.writeResults||0===t.writeResults.length),this.zo=!0,this.listener.Xo()}Zo(){const t={};t.database=kR(this.M),this.Fo(t)}Jo(t){const e={streamToken:this.lastStreamToken,writes:t.map(t=>DR(this.M,t))};this.Fo(e)}}class tV extends class{}{constructor(t,e,n,r){super(),this.authCredentials=t,this.appCheckCredentials=e,this.bo=n,this.M=r,this.tu=!1}eu(){if(this.tu)throw new tO(Zx.FAILED_PRECONDITION,"The client has already been terminated.")}oo(t,e,n){return this.eu(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([r,i])=>this.bo.oo(t,e,n,r,i)).catch(t=>{throw"FirebaseError"===t.name?(t.code===Zx.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),t):new tO(Zx.UNKNOWN,t.toString())})}ho(t,e,n){return this.eu(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([r,i])=>this.bo.ho(t,e,n,r,i)).catch(t=>{throw"FirebaseError"===t.name?(t.code===Zx.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),t):new tO(Zx.UNKNOWN,t.toString())})}terminate(){this.tu=!0}}class eV{constructor(t,e){this.asyncQueue=t,this.onlineStateHandler=e,this.state="Unknown",this.nu=0,this.su=null,this.iu=!0}ru(){0===this.nu&&(this.ou("Unknown"),this.su=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.su=null,this.uu("Backend didn't respond within 10 seconds."),this.ou("Offline"),Promise.resolve())))}au(t){"Online"===this.state?this.ou("Unknown"):(this.nu++,this.nu>=1&&(this.cu(),this.uu(`Connection failed 1 times. Most recent error: ${t.toString()}`),this.ou("Offline")))}set(t){this.cu(),this.nu=0,"Online"===t&&(this.iu=!1),this.ou(t)}ou(t){t!==this.state&&(this.state=t,this.onlineStateHandler(t))}uu(t){const e=`Could not reach Cloud Firestore backend. ${t}\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.iu?(Gx(e),this.iu=!1):Kx("OnlineStateTracker",e)}cu(){null!==this.su&&(this.su.cancel(),this.su=null)}}class nV{constructor(t,e,n,r,i){var s=this;this.localStore=t,this.datastore=e,this.asyncQueue=n,this.remoteSyncer={},this.hu=[],this.lu=new Map,this.fu=new Set,this.du=[],this._u=i,this._u.Lr(t=>{n.enqueueAndForget(uf(function*(){var t;fV(s)&&(Kx("RemoteStore","Restarting streams for network reachability change."),yield(t=uf(function*(t){const e=Xx(t);e.fu.add(4),yield sV(e),e.wu.set("Unknown"),e.fu.delete(4),yield rV(e)}),function(e){return t.apply(this,arguments)})(s))}))}),this.wu=new eV(n,r)}}function rV(t){return iV.apply(this,arguments)}function iV(){return(iV=uf(function*(t){if(fV(t))for(const e of t.du)yield e(!0)})).apply(this,arguments)}function sV(t){return oV.apply(this,arguments)}function oV(){return(oV=uf(function*(t){for(const e of t.du)yield e(!1)})).apply(this,arguments)}function aV(t,e){const n=Xx(t);n.lu.has(e.targetId)||(n.lu.set(e.targetId,e),dV(n)?hV(n):$V(n).xo()&&cV(n,e))}function uV(t,e){const n=Xx(t),r=$V(n);n.lu.delete(e),r.xo()&&lV(n,e),0===n.lu.size&&(r.xo()?r.Mo():fV(n)&&n.wu.set("Unknown"))}function cV(t,e){t.mu.Z(e.targetId),$V(t).jo(e)}function lV(t,e){t.mu.Z(e),$V(t).Wo(e)}function hV(t){t.mu=new hR({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),Et:e=>t.lu.get(e)||null}),$V(t).start(),t.wu.ru()}function dV(t){return fV(t)&&!$V(t).Co()&&t.lu.size>0}function fV(t){return 0===Xx(t).fu.size}function pV(t){t.mu=void 0}function gV(t){return mV.apply(this,arguments)}function mV(){return(mV=uf(function*(t){t.lu.forEach((e,n)=>{cV(t,e)})})).apply(this,arguments)}function yV(t,e){return vV.apply(this,arguments)}function vV(){return(vV=uf(function*(t,e){pV(t),dV(t)?(t.wu.au(e),hV(t)):t.wu.set("Unknown")})).apply(this,arguments)}function wV(t,e,n){return bV.apply(this,arguments)}function bV(){return(bV=uf(function*(t,e,n){if(t.wu.set("Online"),e instanceof cR&&2===e.state&&e.cause)try{yield(r=uf(function*(t,e){const n=e.cause;for(const r of e.targetIds)t.lu.has(r)&&(yield t.remoteSyncer.rejectListen(r,n),t.lu.delete(r),t.mu.removeTarget(r))}),function(t,e){return r.apply(this,arguments)})(t,e)}catch(n){Kx("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),n),yield _V(t,n)}else if(e instanceof aR?t.mu.ut(e):e instanceof uR?t.mu._t(e):t.mu.ht(e),!n.isEqual(yO.min()))try{const e=yield aL(t.localStore);n.compareTo(e)>=0&&(yield function(t,e){const n=t.mu.yt(e);return n.targetChanges.forEach((n,r)=>{if(n.resumeToken.approximateByteSize()>0){const i=t.lu.get(r);i&&t.lu.set(r,i.withResumeToken(n.resumeToken,e))}}),n.targetMismatches.forEach(e=>{const n=t.lu.get(e);if(!n)return;t.lu.set(e,n.withResumeToken(CO.EMPTY_BYTE_STRING,n.snapshotVersion)),lV(t,e);const r=new PP(n.target,e,1,n.sequenceNumber);cV(t,r)}),t.remoteSyncer.applyRemoteEvent(n)}(t,n))}catch(e){Kx("RemoteStore","Failed to raise snapshot:",e),yield _V(t,e)}var r})).apply(this,arguments)}function _V(t,e,n){return IV.apply(this,arguments)}function IV(){return(IV=uf(function*(t,e,n){if(!EP(e))throw e;t.fu.add(1),yield sV(t),t.wu.set("Offline"),n||(n=()=>aL(t.localStore)),t.asyncQueue.enqueueRetryable(uf(function*(){Kx("RemoteStore","Retrying IndexedDB access"),yield n(),t.fu.delete(1),yield rV(t)}))})).apply(this,arguments)}function SV(t,e){return e().catch(n=>_V(t,n,e))}function EV(t){return TV.apply(this,arguments)}function TV(){return(TV=uf(function*(t){const e=Xx(t),n=qV(e);let r=e.hu.length>0?e.hu[e.hu.length-1].batchId:-1;for(;CV(e);)try{const t=yield lL(e.localStore,r);if(null===t){0===e.hu.length&&n.Mo();break}r=t.batchId,kV(e,t)}catch(t){yield _V(e,t)}AV(e)&&xV(e)})).apply(this,arguments)}function CV(t){return fV(t)&&t.hu.length<10}function kV(t,e){t.hu.push(e);const n=qV(t);n.xo()&&n.Ho&&n.Jo(e.mutations)}function AV(t){return fV(t)&&!qV(t).Co()&&t.hu.length>0}function xV(t){qV(t).start()}function OV(t){return DV.apply(this,arguments)}function DV(){return(DV=uf(function*(t){qV(t).Zo()})).apply(this,arguments)}function NV(t){return RV.apply(this,arguments)}function RV(){return(RV=uf(function*(t){const e=qV(t);for(const n of t.hu)e.Jo(n.mutations)})).apply(this,arguments)}function PV(t,e,n){return MV.apply(this,arguments)}function MV(){return(MV=uf(function*(t,e,n){const r=t.hu.shift(),i=NP.from(r,e,n);yield SV(t,()=>t.remoteSyncer.applySuccessfulWrite(i)),yield EV(t)})).apply(this,arguments)}function LV(t,e){return VV.apply(this,arguments)}function VV(){return(VV=uf(function*(t,e){var n;e&&qV(t).Ho&&(yield(n=uf(function*(t,e){if(jN(n=e.code)&&n!==Zx.ABORTED){const n=t.hu.shift();qV(t).ko(),yield SV(t,()=>t.remoteSyncer.rejectFailedWrite(n.batchId,e)),yield EV(t)}var n}),function(t,e){return n.apply(this,arguments)})(t,e)),AV(t)&&xV(t)})).apply(this,arguments)}function FV(t,e){return UV.apply(this,arguments)}function UV(){return(UV=uf(function*(t,e){const n=Xx(t);n.asyncQueue.verifyOperationInProgress(),Kx("RemoteStore","RemoteStore received new credentials");const r=fV(n);n.fu.add(3),yield sV(n),r&&n.wu.set("Unknown"),yield n.remoteSyncer.handleCredentialChange(e),n.fu.delete(3),yield rV(n)})).apply(this,arguments)}function jV(t,e){return BV.apply(this,arguments)}function BV(){return(BV=uf(function*(t,e){const n=Xx(t);e?(n.fu.delete(2),yield rV(n)):e||(n.fu.add(2),yield sV(n),n.wu.set("Unknown"))})).apply(this,arguments)}function $V(t){return t.gu||(t.gu=function(t,e,n){const r=Xx(t);return r.eu(),new XL(e,r.bo,r.authCredentials,r.appCheckCredentials,r.M,n)}(t.datastore,t.asyncQueue,{Hr:gV.bind(null,t),Yr:yV.bind(null,t),Qo:wV.bind(null,t)}),t.du.push(function(){var e=uf(function*(e){e?(t.gu.ko(),dV(t)?hV(t):t.wu.set("Unknown")):(yield t.gu.stop(),pV(t))});return function(t){return e.apply(this,arguments)}}())),t.gu}function qV(t){return t.yu||(t.yu=function(t,e,n){const r=Xx(t);return r.eu(),new ZL(e,r.bo,r.authCredentials,r.appCheckCredentials,r.M,n)}(t.datastore,t.asyncQueue,{Hr:OV.bind(null,t),Yr:LV.bind(null,t),Xo:NV.bind(null,t),Yo:PV.bind(null,t)}),t.du.push(function(){var e=uf(function*(e){e?(t.yu.ko(),yield EV(t)):(yield t.yu.stop(),t.hu.length>0&&(Kx("RemoteStore",`Stopping write stream with ${t.hu.length} pending writes`),t.hu=[]))});return function(t){return e.apply(this,arguments)}}())),t.yu}class HV{constructor(t,e,n,r,i){this.asyncQueue=t,this.timerId=e,this.targetTimeMs=n,this.op=r,this.removalCallback=i,this.deferred=new eO,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(t=>{})}static createAndSchedule(t,e,n,r,i){const s=Date.now()+n,o=new HV(t,e,s,r,i);return o.start(n),o}start(t){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),t)}skipDelay(){return this.handleDelayElapsed()}cancel(t){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new tO(Zx.CANCELLED,"Operation cancelled"+(t?": "+t:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>null!==this.timerHandle?(this.clearTimeout(),this.op().then(t=>this.deferred.resolve(t))):Promise.resolve())}clearTimeout(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function zV(t,e){if(Gx("AsyncQueue",`${e}: ${t}`),EP(t))return new tO(Zx.UNAVAILABLE,`${e}: ${t}`);throw t}class KV{constructor(t){this.comparator=t?(e,n)=>t(e,n)||UO.comparator(e.key,n.key):(t,e)=>UO.comparator(t.key,e.key),this.keyedMap=XN(),this.sortedSet=new qN(this.comparator)}static emptySet(t){return new KV(t.comparator)}has(t){return null!=this.keyedMap.get(t)}get(t){return this.keyedMap.get(t)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(t){const e=this.keyedMap.get(t);return e?this.sortedSet.indexOf(e):-1}get size(){return this.sortedSet.size}forEach(t){this.sortedSet.inorderTraversal((e,n)=>(t(e),!1))}add(t){const e=this.delete(t.key);return e.copy(e.keyedMap.insert(t.key,t),e.sortedSet.insert(t,null))}delete(t){const e=this.get(t);return e?this.copy(this.keyedMap.remove(t),this.sortedSet.remove(e)):this}isEqual(t){if(!(t instanceof KV))return!1;if(this.size!==t.size)return!1;const e=this.sortedSet.getIterator(),n=t.sortedSet.getIterator();for(;e.hasNext();){const t=e.getNext().key,r=n.getNext().key;if(!t.isEqual(r))return!1}return!0}toString(){const t=[];return this.forEach(e=>{t.push(e.toString())}),0===t.length?"DocumentSet ()":"DocumentSet (\n  "+t.join("  \n")+"\n)"}copy(t,e){const n=new KV;return n.comparator=this.comparator,n.keyedMap=t,n.sortedSet=e,n}}class GV{constructor(){this.pu=new qN(UO.comparator)}track(t){const e=t.doc.key,n=this.pu.get(e);n?0!==t.type&&3===n.type?this.pu=this.pu.insert(e,t):3===t.type&&1!==n.type?this.pu=this.pu.insert(e,{type:n.type,doc:t.doc}):2===t.type&&2===n.type?this.pu=this.pu.insert(e,{type:2,doc:t.doc}):2===t.type&&0===n.type?this.pu=this.pu.insert(e,{type:0,doc:t.doc}):1===t.type&&0===n.type?this.pu=this.pu.remove(e):1===t.type&&2===n.type?this.pu=this.pu.insert(e,{type:1,doc:n.doc}):0===t.type&&1===n.type?this.pu=this.pu.insert(e,{type:2,doc:t.doc}):Yx():this.pu=this.pu.insert(e,t)}Iu(){const t=[];return this.pu.inorderTraversal((e,n)=>{t.push(n)}),t}}class WV{constructor(t,e,n,r,i,s,o,a){this.query=t,this.docs=e,this.oldDocs=n,this.docChanges=r,this.mutatedKeys=i,this.fromCache=s,this.syncStateChanged=o,this.excludesMetadataChanges=a}static fromInitialDocuments(t,e,n,r){const i=[];return e.forEach(t=>{i.push({type:0,doc:t})}),new WV(t,e,KV.emptySet(e),i,n,r,!0,!1)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(t){if(!(this.fromCache===t.fromCache&&this.syncStateChanged===t.syncStateChanged&&this.mutatedKeys.isEqual(t.mutatedKeys)&&XD(this.query,t.query)&&this.docs.isEqual(t.docs)&&this.oldDocs.isEqual(t.oldDocs)))return!1;const e=this.docChanges,n=t.docChanges;if(e.length!==n.length)return!1;for(let r=0;r<e.length;r++)if(e[r].type!==n[r].type||!e[r].doc.isEqual(n[r].doc))return!1;return!0}}class QV{constructor(){this.Tu=void 0,this.listeners=[]}}class YV{constructor(){this.queries=new $N(t=>ZD(t),XD),this.onlineState="Unknown",this.Eu=new Set}}function JV(t,e){return XV.apply(this,arguments)}function XV(){return(XV=uf(function*(t,e){const n=Xx(t),r=e.query;let i=!1,s=n.queries.get(r);if(s||(i=!0,s=new QV),i)try{s.Tu=yield n.onListen(r)}catch(t){const n=zV(t,`Initialization of query '${tN(e.query)}' failed`);return void e.onError(n)}n.queries.set(r,s),s.listeners.push(e),e.Au(n.onlineState),s.Tu&&e.Ru(s.Tu)&&rF(n)})).apply(this,arguments)}function ZV(t,e){return tF.apply(this,arguments)}function tF(){return(tF=uf(function*(t,e){const n=Xx(t),r=e.query;let i=!1;const s=n.queries.get(r);if(s){const t=s.listeners.indexOf(e);t>=0&&(s.listeners.splice(t,1),i=0===s.listeners.length)}if(i)return n.queries.delete(r),n.onUnlisten(r)})).apply(this,arguments)}function eF(t,e){const n=Xx(t);let r=!1;for(const i of e){const t=n.queries.get(i.query);if(t){for(const e of t.listeners)e.Ru(i)&&(r=!0);t.Tu=i}}r&&rF(n)}function nF(t,e,n){const r=Xx(t),i=r.queries.get(e);if(i)for(const s of i.listeners)s.onError(n);r.queries.delete(e)}function rF(t){t.Eu.forEach(t=>{t.next()})}class iF{constructor(t,e,n){this.query=t,this.Pu=e,this.bu=!1,this.Vu=null,this.onlineState="Unknown",this.options=n||{}}Ru(t){if(!this.options.includeMetadataChanges){const e=[];for(const n of t.docChanges)3!==n.type&&e.push(n);t=new WV(t.query,t.docs,t.oldDocs,e,t.mutatedKeys,t.fromCache,t.syncStateChanged,!0)}let e=!1;return this.bu?this.vu(t)&&(this.Pu.next(t),e=!0):this.Su(t,this.onlineState)&&(this.Du(t),e=!0),this.Vu=t,e}onError(t){this.Pu.error(t)}Au(t){this.onlineState=t;let e=!1;return this.Vu&&!this.bu&&this.Su(this.Vu,t)&&(this.Du(this.Vu),e=!0),e}Su(t,e){return!t.fromCache||!(this.options.Cu&&"Offline"!==e||t.docs.isEmpty()&&"Offline"!==e)}vu(t){return t.docChanges.length>0||!!(t.syncStateChanged||this.Vu&&this.Vu.hasPendingWrites!==t.hasPendingWrites)&&!0===this.options.includeMetadataChanges}Du(t){t=WV.fromInitialDocuments(t.query,t.docs,t.mutatedKeys,t.fromCache),this.bu=!0,this.Pu.next(t)}}class sF{constructor(t,e){this.payload=t,this.byteLength=e}xu(){return"metadata"in this.payload}}class oF{constructor(t){this.M=t}fi(t){return ER(this.M,t)}di(t){return t.metadata.exists?OR(this.M,t.document,!1):cD.newNoDocument(this.fi(t.metadata.name),this._i(t.metadata.readTime))}_i(t){return bR(t)}}class aF{constructor(t,e,n){this.Nu=t,this.localStore=e,this.M=n,this.queries=[],this.documents=[],this.collectionGroups=new Set,this.progress=uF(t)}ku(t){this.progress.bytesLoaded+=t.byteLength;let e=this.progress.documentsLoaded;if(t.payload.namedQuery)this.queries.push(t.payload.namedQuery);else if(t.payload.documentMetadata){this.documents.push({metadata:t.payload.documentMetadata}),t.payload.documentMetadata.exists||++e;const n=IO.fromString(t.payload.documentMetadata.name);this.collectionGroups.add(n.get(n.length-2))}else t.payload.document&&(this.documents[this.documents.length-1].document=t.payload.document,++e);return e!==this.progress.documentsLoaded?(this.progress.documentsLoaded=e,Object.assign({},this.progress)):null}Mu(t){const e=new Map,n=new oF(this.M);for(const r of t)if(r.metadata.queries){const t=n.fi(r.metadata.name);for(const n of r.metadata.queries){const r=(e.get(n)||nR()).add(t);e.set(n,r)}}return e}complete(){var t=this;return uf(function*(){const e=yield function(t,e,n,r){return vL.apply(this,arguments)}(t.localStore,new oF(t.M),t.documents,t.Nu.id),n=t.Mu(t.documents);for(const r of t.queries)yield wL(t.localStore,r,n.get(r.name));return t.progress.taskState="Success",{progress:t.progress,Ou:t.collectionGroups,Fu:e}})()}}function uF(t){return{taskState:"Running",documentsLoaded:0,bytesLoaded:0,totalDocuments:t.totalDocuments,totalBytes:t.totalBytes}}class cF{constructor(t){this.key=t}}class lF{constructor(t){this.key=t}}class hF{constructor(t,e){this.query=t,this.$u=e,this.Bu=null,this.current=!1,this.Lu=nR(),this.mutatedKeys=nR(),this.Uu=rN(t),this.qu=new KV(this.Uu)}get Ku(){return this.$u}Gu(t,e){const n=e?e.Qu:new GV,r=e?e.qu:this.qu;let i=e?e.mutatedKeys:this.mutatedKeys,s=r,o=!1;const a=HD(this.query)&&r.size===this.query.limit?r.last():null,u=zD(this.query)&&r.size===this.query.limit?r.first():null;if(t.inorderTraversal((t,e)=>{const c=r.get(t),l=eN(this.query,e)?e:null,h=!!c&&this.mutatedKeys.has(c.key),d=!!l&&(l.hasLocalMutations||this.mutatedKeys.has(l.key)&&l.hasCommittedMutations);let f=!1;c&&l?c.data.isEqual(l.data)?h!==d&&(n.track({type:3,doc:l}),f=!0):this.ju(c,l)||(n.track({type:2,doc:l}),f=!0,(a&&this.Uu(l,a)>0||u&&this.Uu(l,u)<0)&&(o=!0)):!c&&l?(n.track({type:0,doc:l}),f=!0):c&&!l&&(n.track({type:1,doc:c}),f=!0,(a||u)&&(o=!0)),f&&(l?(s=s.add(l),i=d?i.add(t):i.delete(t)):(s=s.delete(t),i=i.delete(t)))}),HD(this.query)||zD(this.query))for(;s.size>this.query.limit;){const t=HD(this.query)?s.last():s.first();s=s.delete(t.key),i=i.delete(t.key),n.track({type:1,doc:t})}return{qu:s,Qu:n,ni:o,mutatedKeys:i}}ju(t,e){return t.hasLocalMutations&&e.hasCommittedMutations&&!e.hasLocalMutations}applyChanges(t,e,n){const r=this.qu;this.qu=t.qu,this.mutatedKeys=t.mutatedKeys;const i=t.Qu.Iu();i.sort((t,e)=>function(t,e){const n=t=>{switch(t){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Yx()}};return n(t)-n(e)}(t.type,e.type)||this.Uu(t.doc,e.doc)),this.Wu(n);const s=e?this.zu():[],o=0===this.Lu.size&&this.current?1:0,a=o!==this.Bu;return this.Bu=o,0!==i.length||a?{snapshot:new WV(this.query,t.qu,r,i,t.mutatedKeys,0===o,a,!1),Hu:s}:{Hu:s}}Au(t){return this.current&&"Offline"===t?(this.current=!1,this.applyChanges({qu:this.qu,Qu:new GV,mutatedKeys:this.mutatedKeys,ni:!1},!1)):{Hu:[]}}Ju(t){return!this.$u.has(t)&&!!this.qu.has(t)&&!this.qu.get(t).hasLocalMutations}Wu(t){t&&(t.addedDocuments.forEach(t=>this.$u=this.$u.add(t)),t.modifiedDocuments.forEach(t=>{}),t.removedDocuments.forEach(t=>this.$u=this.$u.delete(t)),this.current=t.current)}zu(){if(!this.current)return[];const t=this.Lu;this.Lu=nR(),this.qu.forEach(t=>{this.Ju(t.key)&&(this.Lu=this.Lu.add(t.key))});const e=[];return t.forEach(t=>{this.Lu.has(t)||e.push(new lF(t))}),this.Lu.forEach(n=>{t.has(n)||e.push(new cF(n))}),e}Yu(t){this.$u=t.li,this.Lu=nR();const e=this.Gu(t.documents);return this.applyChanges(e,!0)}Xu(){return WV.fromInitialDocuments(this.query,this.qu,this.mutatedKeys,0===this.Bu)}}class dF{constructor(t,e,n){this.query=t,this.targetId=e,this.view=n}}class fF{constructor(t){this.key=t,this.Zu=!1}}class pF{constructor(t,e,n,r,i,s){this.localStore=t,this.remoteStore=e,this.eventManager=n,this.sharedClientState=r,this.currentUser=i,this.maxConcurrentLimboResolutions=s,this.ta={},this.ea=new $N(t=>ZD(t),XD),this.na=new Map,this.sa=new Set,this.ia=new qN(UO.comparator),this.ra=new Map,this.oa=new SL,this.ua={},this.aa=new Map,this.ca=TM.yn(),this.onlineState="Unknown",this.ha=void 0}get isPrimaryClient(){return!0===this.ha}}function gF(t,e){return mF.apply(this,arguments)}function mF(){return(mF=uf(function*(t,e){const n=sU(t);let r,i;const s=n.ea.get(e);if(s)r=s.targetId,n.sharedClientState.addLocalQueryTarget(r),i=s.view.Xu();else{const t=yield hL(n.localStore,YD(e));n.isPrimaryClient&&aV(n.remoteStore,t);const s=n.sharedClientState.addLocalQueryTarget(t.targetId);r=t.targetId,i=yield yF(n,e,r,"current"===s)}return i})).apply(this,arguments)}function yF(t,e,n,r){return vF.apply(this,arguments)}function vF(){return(vF=uf(function*(t,e,n,r){t.la=(e,n,r)=>{return(i=uf(function*(t,e,n,r){let i=e.view.Gu(n);i.ni&&(i=yield pL(t.localStore,e.query,!1).then(({documents:t})=>e.view.Gu(t,i)));const s=r&&r.targetChanges.get(e.targetId),o=e.view.applyChanges(i,t.isPrimaryClient,s);return LF(t,e.targetId,o.Hu),o.snapshot}),function(t,e,n,r){return i.apply(this,arguments)})(t,e,n,r);var i};const i=yield pL(t.localStore,e,!0),s=new hF(e,i.li),o=s.Gu(i.documents),a=oR.createSynthesizedTargetChangeForCurrentChange(n,r&&"Offline"!==t.onlineState),u=s.applyChanges(o,t.isPrimaryClient,a);LF(t,n,u.Hu);const c=new dF(e,n,s);return t.ea.set(e,c),t.na.has(n)?t.na.get(n).push(e):t.na.set(n,[e]),u.snapshot})).apply(this,arguments)}function wF(t,e){return bF.apply(this,arguments)}function bF(){return(bF=uf(function*(t,e){const n=Xx(t),r=n.ea.get(e),i=n.na.get(r.targetId);if(i.length>1)return n.na.set(r.targetId,i.filter(t=>!XD(t,e))),void n.ea.delete(e);n.isPrimaryClient?(n.sharedClientState.removeLocalQueryTarget(r.targetId),n.sharedClientState.isActiveQueryTarget(r.targetId)||(yield dL(n.localStore,r.targetId,!1).then(()=>{n.sharedClientState.clearQueryState(r.targetId),uV(n.remoteStore,r.targetId),PF(n,r.targetId)}).catch(OM))):(PF(n,r.targetId),yield dL(n.localStore,r.targetId,!0))})).apply(this,arguments)}function _F(){return(_F=uf(function*(t,e,n){const r=oU(t);try{const t=yield function(t,e){const n=Xx(t),r=mO.now(),i=e.reduce((t,e)=>t.add(e.key),nR());let s;return n.persistence.runTransaction("Locally write mutations","readwrite",t=>n.ci.Ks(t,i).next(i=>{s=i;const o=[];for(const t of e){const e=kN(t,s.get(t.key));null!=e&&o.push(new DN(t.key,e,uD(e.value.mapValue),IN.exists(!0)))}return n.Bs.addMutationBatch(t,r,o,e)})).then(t=>(t.applyToLocalDocumentSet(s),{batchId:t.batchId,changes:s}))}(r.localStore,e);r.sharedClientState.addPendingMutation(t.batchId),function(t,e,n){let r=t.ua[t.currentUser.toKey()];r||(r=new qN(fO)),r=r.insert(e,n),t.ua[t.currentUser.toKey()]=r}(r,t.batchId,n),yield UF(r,t.changes),yield EV(r.remoteStore)}catch(t){const e=zV(t,"Failed to persist write");n.reject(e)}})).apply(this,arguments)}function IF(t,e){return SF.apply(this,arguments)}function SF(){return(SF=uf(function*(t,e){const n=Xx(t);try{const t=yield uL(n.localStore,e);e.targetChanges.forEach((t,e)=>{const r=n.ra.get(e);r&&(Jx(t.addedDocuments.size+t.modifiedDocuments.size+t.removedDocuments.size<=1),t.addedDocuments.size>0?r.Zu=!0:t.modifiedDocuments.size>0?Jx(r.Zu):t.removedDocuments.size>0&&(Jx(r.Zu),r.Zu=!1))}),yield UF(n,t,e)}catch(t){yield OM(t)}})).apply(this,arguments)}function EF(t,e,n){const r=Xx(t);if(r.isPrimaryClient&&0===n||!r.isPrimaryClient&&1===n){const t=[];r.ea.forEach((n,r)=>{const i=r.view.Au(e);i.snapshot&&t.push(i.snapshot)}),function(t,e){const n=Xx(t);n.onlineState=e;let r=!1;n.queries.forEach((t,n)=>{for(const i of n.listeners)i.Au(e)&&(r=!0)}),r&&rF(n)}(r.eventManager,e),t.length&&r.ta.Qo(t),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}function TF(t,e,n){return CF.apply(this,arguments)}function CF(){return(CF=uf(function*(t,e,n){const r=Xx(t);r.sharedClientState.updateQueryState(e,"rejected",n);const i=r.ra.get(e),s=i&&i.key;if(s){let t=new qN(UO.comparator);t=t.insert(s,cD.newNoDocument(s,yO.min()));const n=nR().add(s),i=new sR(yO.min(),new Map,new KN(fO),t,n);yield IF(r,i),r.ia=r.ia.remove(s),r.ra.delete(e),FF(r)}else yield dL(r.localStore,e,!1).then(()=>PF(r,e,n)).catch(OM)})).apply(this,arguments)}function kF(t,e){return AF.apply(this,arguments)}function AF(){return(AF=uf(function*(t,e){const n=Xx(t),r=e.batch.batchId;try{const t=yield oL(n.localStore,e);RF(n,r,null),NF(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),yield UF(n,t)}catch(t){yield OM(t)}})).apply(this,arguments)}function xF(t,e,n){return OF.apply(this,arguments)}function OF(){return(OF=uf(function*(t,e,n){const r=Xx(t);try{const t=yield function(t,e){const n=Xx(t);return n.persistence.runTransaction("Reject batch","readwrite-primary",t=>{let r;return n.Bs.lookupMutationBatch(t,e).next(e=>(Jx(null!==e),r=e.keys(),n.Bs.removeMutationBatch(t,e))).next(()=>n.Bs.performConsistencyCheck(t)).next(()=>n.ci.Ks(t,r))})}(r.localStore,e);RF(r,e,n),NF(r,e),r.sharedClientState.updateMutationState(e,"rejected",n),yield UF(r,t)}catch(n){yield OM(n)}})).apply(this,arguments)}function DF(){return(DF=uf(function*(t,e){const n=Xx(t);fV(n.remoteStore)||Kx("SyncEngine","The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled.");try{const t=yield function(t){const e=Xx(t);return e.persistence.runTransaction("Get highest unacknowledged batch id","readonly",t=>e.Bs.getHighestUnacknowledgedBatchId(t))}(n.localStore);if(-1===t)return void e.resolve();const r=n.aa.get(t)||[];r.push(e),n.aa.set(t,r)}catch(t){const n=zV(t,"Initialization of waitForPendingWrites() operation failed");e.reject(n)}})).apply(this,arguments)}function NF(t,e){(t.aa.get(e)||[]).forEach(t=>{t.resolve()}),t.aa.delete(e)}function RF(t,e,n){const r=Xx(t);let i=r.ua[r.currentUser.toKey()];if(i){const t=i.get(e);t&&(n?t.reject(n):t.resolve(),i=i.remove(e)),r.ua[r.currentUser.toKey()]=i}}function PF(t,e,n=null){t.sharedClientState.removeLocalQueryTarget(e);for(const r of t.na.get(e))t.ea.delete(r),n&&t.ta.fa(r,n);t.na.delete(e),t.isPrimaryClient&&t.oa.Pi(e).forEach(e=>{t.oa.containsKey(e)||MF(t,e)})}function MF(t,e){t.sa.delete(e.path.canonicalString());const n=t.ia.get(e);null!==n&&(uV(t.remoteStore,n),t.ia=t.ia.remove(e),t.ra.delete(n),FF(t))}function LF(t,e,n){for(const r of n)r instanceof cF?(t.oa.addReference(r.key,e),VF(t,r)):r instanceof lF?(Kx("SyncEngine","Document no longer in limbo: "+r.key),t.oa.removeReference(r.key,e),t.oa.containsKey(r.key)||MF(t,r.key)):Yx()}function VF(t,e){const n=e.key,r=n.path.canonicalString();t.ia.get(n)||t.sa.has(r)||(Kx("SyncEngine","New document in limbo: "+n),t.sa.add(r),FF(t))}function FF(t){for(;t.sa.size>0&&t.ia.size<t.maxConcurrentLimboResolutions;){const e=t.sa.values().next().value;t.sa.delete(e);const n=new UO(IO.fromString(e)),r=t.ca.next();t.ra.set(r,new fF(n)),t.ia=t.ia.insert(n,r),aV(t.remoteStore,new PP(YD(qD(n.path)),r,2,lO.A))}}function UF(t,e,n){return jF.apply(this,arguments)}function jF(){return(jF=uf(function*(t,e,n){const r=Xx(t),i=[],s=[],o=[];var a;r.ea.isEmpty()||(r.ea.forEach((t,a)=>{o.push(r.la(a,e,n).then(t=>{if(t){r.isPrimaryClient&&r.sharedClientState.updateQueryState(a.targetId,t.fromCache?"not-current":"current"),i.push(t);const e=tL.Ys(a.targetId,t);s.push(e)}}))}),yield Promise.all(o),r.ta.Qo(i),yield(a=uf(function*(t,e){const n=Xx(t);try{yield n.persistence.runTransaction("notifyLocalViewChanges","readwrite",t=>wP.forEach(e,e=>wP.forEach(e.Hs,r=>n.persistence.referenceDelegate.addReference(t,e.targetId,r)).next(()=>wP.forEach(e.Js,r=>n.persistence.referenceDelegate.removeReference(t,e.targetId,r)))))}catch(t){if(!EP(t))throw t;Kx("LocalStore","Failed to update sequence numbers: "+t)}for(const r of e){const t=r.targetId;if(!r.fromCache){const e=n.ii.get(t),r=e.withLastLimboFreeSnapshotVersion(e.snapshotVersion);n.ii=n.ii.insert(t,r)}}}),function(t,e){return a.apply(this,arguments)})(r.localStore,s))})).apply(this,arguments)}function BF(t,e){return $F.apply(this,arguments)}function $F(){return($F=uf(function*(t,e){const n=Xx(t);if(!n.currentUser.isEqual(e)){Kx("SyncEngine","User change. New user:",e.toKey());const t=yield iL(n.localStore,e);n.currentUser=e,function(t,e){t.aa.forEach(t=>{t.forEach(t=>{t.reject(new tO(Zx.CANCELLED,"'waitForPendingWrites' promise is rejected due to a user change."))})}),t.aa.clear()}(n),n.sharedClientState.handleUserChange(e,t.removedBatchIds,t.addedBatchIds),yield UF(n,t.hi)}})).apply(this,arguments)}function qF(t,e){const n=Xx(t),r=n.ra.get(e);if(r&&r.Zu)return nR().add(r.key);{let t=nR();const r=n.na.get(e);if(!r)return t;for(const e of r){const r=n.ea.get(e);t=t.unionWith(r.view.Ku)}return t}}function HF(t,e){return zF.apply(this,arguments)}function zF(){return(zF=uf(function*(t,e){const n=Xx(t),r=yield pL(n.localStore,e.query,!0),i=e.view.Yu(r);return n.isPrimaryClient&&LF(n,e.targetId,i.Hu),i})).apply(this,arguments)}function KF(t,e){return GF.apply(this,arguments)}function GF(){return(GF=uf(function*(t,e){const n=Xx(t);return mL(n.localStore,e).then(t=>UF(n,t))})).apply(this,arguments)}function WF(t,e,n,r){return QF.apply(this,arguments)}function QF(){return(QF=uf(function*(t,e,n,r){const i=Xx(t),s=yield function(t,e){const n=Xx(t),r=Xx(n.Bs);return n.persistence.runTransaction("Lookup mutation documents","readonly",t=>r.fn(t,e).next(e=>e?n.ci.Ks(t,e):wP.resolve(null)))}(i.localStore,e);null!==s?("pending"===n?yield EV(i.remoteStore):"acknowledged"===n||"rejected"===n?(RF(i,e,r||null),NF(i,e),function(t,e){Xx(Xx(t).Bs)._n(e)}(i.localStore,e)):Yx(),yield UF(i,s)):Kx("SyncEngine","Cannot apply mutation batch with id: "+e)})).apply(this,arguments)}function YF(){return(YF=uf(function*(t,e){const n=Xx(t);if(sU(n),oU(n),!0===e&&!0!==n.ha){const t=n.sharedClientState.getAllActiveQueryTargets(),e=yield JF(n,t.toArray());n.ha=!0,yield jV(n.remoteStore,!0);for(const r of e)aV(n.remoteStore,r)}else if(!1===e&&!1!==n.ha){const t=[];let e=Promise.resolve();n.na.forEach((r,i)=>{n.sharedClientState.isLocalQueryTarget(i)?t.push(i):e=e.then(()=>(PF(n,i),dL(n.localStore,i,!0))),uV(n.remoteStore,i)}),yield e,yield JF(n,t),function(t){const e=Xx(t);e.ra.forEach((t,n)=>{uV(e.remoteStore,n)}),e.oa.bi(),e.ra=new Map,e.ia=new qN(UO.comparator)}(n),n.ha=!1,yield jV(n.remoteStore,!1)}})).apply(this,arguments)}function JF(t,e,n){return XF.apply(this,arguments)}function XF(){return(XF=uf(function*(t,e,n){const r=Xx(t),i=[],s=[];for(const o of e){let t;const e=r.na.get(o);if(e&&0!==e.length){t=yield hL(r.localStore,YD(e[0]));for(const t of e){const e=r.ea.get(t),n=yield HF(r,e);n.snapshot&&s.push(n.snapshot)}}else{const e=yield gL(r.localStore,o);t=yield hL(r.localStore,e),yield yF(r,ZF(e),o,!1)}i.push(t)}return r.ta.Qo(s),i})).apply(this,arguments)}function ZF(t){return $D(t.path,t.collectionGroup,t.orderBy,t.filters,t.limit,"F",t.startAt,t.endAt)}function tU(t){const e=Xx(t);return Xx(Xx(e.localStore).persistence).Fs()}function eU(t,e,n,r){return nU.apply(this,arguments)}function nU(){return(nU=uf(function*(t,e,n,r){const i=Xx(t);if(i.ha)return void Kx("SyncEngine","Ignoring unexpected query state notification.");const s=i.na.get(e);if(s&&s.length>0)switch(n){case"current":case"not-current":{const t=yield mL(i.localStore,nN(s[0])),r=sR.createSynthesizedRemoteEventForCurrentChange(e,"current"===n);yield UF(i,t,r);break}case"rejected":yield dL(i.localStore,e,!0),PF(i,e,r);break;default:Yx()}})).apply(this,arguments)}function rU(t,e,n){return iU.apply(this,arguments)}function iU(){return(iU=uf(function*(t,e,n){const r=sU(t);if(r.ha){for(const t of e){if(r.na.has(t)){Kx("SyncEngine","Adding an already active target "+t);continue}const e=yield gL(r.localStore,t),n=yield hL(r.localStore,e);yield yF(r,ZF(e),n.targetId,!1),aV(r.remoteStore,n)}for(const t of n)r.na.has(t)&&(yield dL(r.localStore,t,!1).then(()=>{uV(r.remoteStore,t),PF(r,t)}).catch(OM))}})).apply(this,arguments)}function sU(t){const e=Xx(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=IF.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=qF.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=TF.bind(null,e),e.ta.Qo=eF.bind(null,e.eventManager),e.ta.fa=nF.bind(null,e.eventManager),e}function oU(t){const e=Xx(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=kF.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=xF.bind(null,e),e}class aU{constructor(){this.synchronizeTabs=!1}initialize(t){var e=this;return uf(function*(){e.M=QL(t.databaseInfo.databaseId),e.sharedClientState=e._a(t),e.persistence=e.wa(t),yield e.persistence.start(),e.gcScheduler=e.ma(t),e.localStore=e.ga(t)})()}ma(t){return null}ga(t){return rL(this.persistence,new eL,t.initialUser,this.M)}wa(t){return new xL(DL.zi,this.M)}_a(t){return new BL}terminate(){var t=this;return uf(function*(){t.gcScheduler&&t.gcScheduler.stop(),yield t.sharedClientState.shutdown(),yield t.persistence.shutdown()})()}}class uU extends aU{constructor(t,e,n){super(),this.ya=t,this.cacheSizeBytes=e,this.forceOwnership=n,this.synchronizeTabs=!1}initialize(t){var e=()=>super.initialize,n=this;return uf(function*(){yield e().call(n,t),yield n.ya.initialize(n,t),yield oU(n.ya.syncEngine),yield EV(n.ya.remoteStore),yield n.persistence.Ts(()=>(n.gcScheduler&&!n.gcScheduler.started&&n.gcScheduler.start(n.localStore),Promise.resolve()))})()}ga(t){return rL(this.persistence,new eL,t.initialUser,this.M)}ma(t){return new PM(this.persistence.referenceDelegate.garbageCollector,t.asyncQueue)}wa(t){const e=XM(t.databaseInfo.databaseId,t.databaseInfo.persistenceKey),n=void 0!==this.cacheSizeBytes?yM.withCacheSize(this.cacheSizeBytes):yM.DEFAULT;return new QM(this.synchronizeTabs,e,t.clientId,n,t.asyncQueue,GL(),WL(),this.M,this.sharedClientState,!!this.forceOwnership)}_a(t){return new BL}}class cU extends uU{constructor(t,e){super(t,e,!1),this.ya=t,this.cacheSizeBytes=e,this.synchronizeTabs=!0}initialize(t){var e=()=>super.initialize,n=this;return uf(function*(){yield e().call(n,t);const r=n.ya.syncEngine;n.sharedClientState instanceof jL&&(n.sharedClientState.syncEngine={Mr:WF.bind(null,r),Or:eU.bind(null,r),Fr:rU.bind(null,r),Fs:tU.bind(null,r),kr:KF.bind(null,r)},yield n.sharedClientState.start()),yield n.persistence.Ts(function(){var t=uf(function*(t){yield function(t,e){return YF.apply(this,arguments)}(n.ya.syncEngine,t),n.gcScheduler&&(t&&!n.gcScheduler.started?n.gcScheduler.start(n.localStore):t||n.gcScheduler.stop())});return function(e){return t.apply(this,arguments)}}())})()}_a(t){const e=GL();if(!jL.vt(e))throw new tO(Zx.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");const n=XM(t.databaseInfo.databaseId,t.databaseInfo.persistenceKey);return new jL(e,t.asyncQueue,n,t.clientId,t.initialUser)}}class lU{initialize(t,e){var n=this;return uf(function*(){n.localStore||(n.localStore=t.localStore,n.sharedClientState=t.sharedClientState,n.datastore=n.createDatastore(e),n.remoteStore=n.createRemoteStore(e),n.eventManager=n.createEventManager(e),n.syncEngine=n.createSyncEngine(e,!t.synchronizeTabs),n.sharedClientState.onlineStateHandler=t=>EF(n.syncEngine,t,1),n.remoteStore.remoteSyncer.handleCredentialChange=BF.bind(null,n.syncEngine),yield jV(n.remoteStore,n.syncEngine.isPrimaryClient))})()}createEventManager(t){return new YV}createDatastore(t){const e=QL(t.databaseInfo.databaseId),n=new KL(t.databaseInfo);return function(t,e,n,r){return new tV(t,e,n,r)}(t.authCredentials,t.appCheckCredentials,n,e)}createRemoteStore(t){return e=this.localStore,n=this.datastore,r=t.asyncQueue,i=t=>EF(this.syncEngine,t,0),s=qL.vt()?new qL:new $L,new nV(e,n,r,i,s);var e,n,r,i,s}createSyncEngine(t,e){return function(t,e,n,r,i,s,o){const a=new pF(t,e,n,r,i,s);return o&&(a.ha=!0),a}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,t.initialUser,t.maxConcurrentLimboResolutions,e)}terminate(){return(t=uf(function*(t){const e=Xx(t);Kx("RemoteStore","RemoteStore shutting down."),e.fu.add(5),yield sV(e),e._u.shutdown(),e.wu.set("Unknown")}),function(e){return t.apply(this,arguments)})(this.remoteStore);var t}}function hU(t,e=10240){let n=0;return{read:()=>uf(function*(){if(n<t.byteLength){const r={value:t.slice(n,n+e),done:!1};return n+=e,r}return{done:!0}})(),cancel:()=>uf(function*(){})(),releaseLock(){},closed:Promise.reject("unimplemented")}}class dU{constructor(t){this.observer=t,this.muted=!1}next(t){this.observer.next&&this.pa(this.observer.next,t)}error(t){this.observer.error?this.pa(this.observer.error,t):console.error("Uncaught Error in snapshot listener:",t)}Ia(){this.muted=!0}pa(t,e){this.muted||setTimeout(()=>{this.muted||t(e)},0)}}class fU{constructor(t,e){this.Ta=t,this.M=e,this.metadata=new eO,this.buffer=new Uint8Array,this.Ea=new TextDecoder("utf-8"),this.Aa().then(t=>{t&&t.xu()?this.metadata.resolve(t.payload.metadata):this.metadata.reject(new Error(`The first element of the bundle is not a metadata, it is\n             ${JSON.stringify(null==t?void 0:t.payload)}`))},t=>this.metadata.reject(t))}close(){return this.Ta.cancel()}getMetadata(){var t=this;return uf(function*(){return t.metadata.promise})()}da(){var t=this;return uf(function*(){return yield t.getMetadata(),t.Aa()})()}Aa(){var t=this;return uf(function*(){const e=yield t.Ra();if(null===e)return null;const n=t.Ea.decode(e),r=Number(n);isNaN(r)&&t.Pa(`length string (${n}) is not valid number`);const i=yield t.ba(r);return new sF(JSON.parse(i),e.length+r)})()}Va(){return this.buffer.findIndex(t=>t==="{".charCodeAt(0))}Ra(){var t=this;return uf(function*(){for(;t.Va()<0&&!(yield t.va()););if(0===t.buffer.length)return null;const e=t.Va();e<0&&t.Pa("Reached the end of bundle when a length string is expected.");const n=t.buffer.slice(0,e);return t.buffer=t.buffer.slice(e),n})()}ba(t){var e=this;return uf(function*(){for(;e.buffer.length<t;)(yield e.va())&&e.Pa("Reached the end of bundle when more is expected.");const n=e.Ea.decode(e.buffer.slice(0,t));return e.buffer=e.buffer.slice(t),n})()}Pa(t){throw this.Ta.cancel(),new Error(`Invalid bundle format: ${t}`)}va(){var t=this;return uf(function*(){const e=yield t.Ta.read();if(!e.done){const n=new Uint8Array(t.buffer.length+e.value.length);n.set(t.buffer),n.set(e.value,t.buffer.length),t.buffer=n}return e.done})()}}class pU{constructor(t){this.datastore=t,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastWriteError=null,this.writtenDocs=new Set}lookup(t){var e=this;return uf(function*(){if(e.ensureCommitNotCalled(),e.mutations.length>0)throw new tO(Zx.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes.");const n=yield(r=uf(function*(t,e){const n=Xx(t),r=kR(n.M)+"/documents",i={documents:e.map(t=>SR(n.M,t))},s=yield n.ho("BatchGetDocuments",r,i),o=new Map;s.forEach(t=>{const e=function(t,e){return"found"in e?function(t,e){Jx(!!e.found);const n=ER(t,e.found.name),r=bR(e.found.updateTime),i=new aD({mapValue:{fields:e.found.fields}});return cD.newFoundDocument(n,r,i)}(t,e):"missing"in e?function(t,e){Jx(!!e.missing),Jx(!!e.readTime);const n=ER(t,e.missing),r=bR(e.readTime);return cD.newNoDocument(n,r)}(t,e):Yx()}(n.M,t);o.set(e.key.toString(),e)});const a=[];return e.forEach(t=>{const e=o.get(t.toString());Jx(!!e),a.push(e)}),a}),function(t,e){return r.apply(this,arguments)})(e.datastore,t);var r;return n.forEach(t=>e.recordVersion(t)),n})()}set(t,e){this.write(e.toMutation(t,this.precondition(t))),this.writtenDocs.add(t.toString())}update(t,e){try{this.write(e.toMutation(t,this.preconditionForUpdate(t)))}catch(t){this.lastWriteError=t}this.writtenDocs.add(t.toString())}delete(t){this.write(new MN(t,this.precondition(t))),this.writtenDocs.add(t.toString())}commit(){var t=this;return uf(function*(){if(t.ensureCommitNotCalled(),t.lastWriteError)throw t.lastWriteError;const e=t.readVersions;var n;t.mutations.forEach(t=>{e.delete(t.key.toString())}),e.forEach((e,n)=>{const r=UO.fromPath(n);t.mutations.push(new LN(r,t.precondition(r)))}),yield(n=uf(function*(t,e){const n=Xx(t),r=kR(n.M)+"/documents",i={writes:e.map(t=>DR(n.M,t))};yield n.oo("Commit",r,i)}),function(t,e){return n.apply(this,arguments)})(t.datastore,t.mutations),t.committed=!0})()}recordVersion(t){let e;if(t.isFoundDocument())e=t.version;else{if(!t.isNoDocument())throw Yx();e=yO.min()}const n=this.readVersions.get(t.key.toString());if(n){if(!e.isEqual(n))throw new tO(Zx.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(t.key.toString(),e)}precondition(t){const e=this.readVersions.get(t.toString());return!this.writtenDocs.has(t.toString())&&e?IN.updateTime(e):IN.none()}preconditionForUpdate(t){const e=this.readVersions.get(t.toString());if(!this.writtenDocs.has(t.toString())&&e){if(e.isEqual(yO.min()))throw new tO(Zx.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return IN.updateTime(e)}return IN.exists(!0)}write(t){this.ensureCommitNotCalled(),this.mutations.push(t)}ensureCommitNotCalled(){}}class gU{constructor(t,e,n,r){this.asyncQueue=t,this.datastore=e,this.updateFunction=n,this.deferred=r,this.Sa=5,this.Do=new YL(this.asyncQueue,"transaction_retry")}run(){this.Sa-=1,this.Da()}Da(){var t=this;this.Do.To(uf(function*(){const e=new pU(t.datastore),n=t.Ca(e);n&&n.then(n=>{t.asyncQueue.enqueueAndForget(()=>e.commit().then(()=>{t.deferred.resolve(n)}).catch(e=>{t.xa(e)}))}).catch(e=>{t.xa(e)})}))}Ca(t){try{const e=this.updateFunction(t);return!LO(e)&&e.catch&&e.then?e:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(t){return this.deferred.reject(t),null}}xa(t){this.Sa>0&&this.Na(t)?(this.Sa-=1,this.asyncQueue.enqueueAndForget(()=>(this.Da(),Promise.resolve()))):this.deferred.reject(t)}Na(t){if("FirebaseError"===t.name){const e=t.code;return"aborted"===e||"failed-precondition"===e||!jN(e)}return!1}}class mU{constructor(t,e,n,r){var i=this;this.authCredentials=t,this.appCheckCredentials=e,this.asyncQueue=n,this.databaseInfo=r,this.user=$x.UNAUTHENTICATED,this.clientId=dO.R(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this.authCredentials.start(n,function(){var t=uf(function*(t){Kx("FirestoreClient","Received user=",t.uid),yield i.authCredentialListener(t),i.user=t});return function(e){return t.apply(this,arguments)}}()),this.appCheckCredentials.start(n,t=>(Kx("FirestoreClient","Received new app check token=",t),this.appCheckCredentialListener(t,this.user)))}getConfiguration(){var t=this;return uf(function*(){return{asyncQueue:t.asyncQueue,databaseInfo:t.databaseInfo,clientId:t.clientId,authCredentials:t.authCredentials,appCheckCredentials:t.appCheckCredentials,initialUser:t.user,maxConcurrentLimboResolutions:100}})()}setCredentialChangeListener(t){this.authCredentialListener=t}setAppCheckTokenChangeListener(t){this.appCheckCredentialListener=t}verifyNotTerminated(){if(this.asyncQueue.isShuttingDown)throw new tO(Zx.FAILED_PRECONDITION,"The client has already been terminated.")}terminate(){var t=this;this.asyncQueue.enterRestrictedMode();const e=new eO;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(uf(function*(){try{t.onlineComponents&&(yield t.onlineComponents.terminate()),t.offlineComponents&&(yield t.offlineComponents.terminate()),t.authCredentials.shutdown(),t.appCheckCredentials.shutdown(),e.resolve()}catch(n){const t=zV(n,"Failed to shutdown persistence");e.reject(t)}})),e.promise}}function yU(t,e){return vU.apply(this,arguments)}function vU(){return(vU=uf(function*(t,e){t.asyncQueue.verifyOperationInProgress(),Kx("FirestoreClient","Initializing OfflineComponentProvider");const n=yield t.getConfiguration();yield e.initialize(n);let r=n.initialUser;t.setCredentialChangeListener(function(){var t=uf(function*(t){r.isEqual(t)||(yield iL(e.localStore,t),r=t)});return function(e){return t.apply(this,arguments)}}()),e.persistence.setDatabaseDeletedListener(()=>t.terminate()),t.offlineComponents=e})).apply(this,arguments)}function wU(t,e){return bU.apply(this,arguments)}function bU(){return(bU=uf(function*(t,e){t.asyncQueue.verifyOperationInProgress();const n=yield _U(t);Kx("FirestoreClient","Initializing OnlineComponentProvider");const r=yield t.getConfiguration();yield e.initialize(n,r),t.setCredentialChangeListener(t=>FV(e.remoteStore,t)),t.setAppCheckTokenChangeListener((t,n)=>FV(e.remoteStore,n)),t.onlineComponents=e})).apply(this,arguments)}function _U(t){return IU.apply(this,arguments)}function IU(){return(IU=uf(function*(t){return t.offlineComponents||(Kx("FirestoreClient","Using default OfflineComponentProvider"),yield yU(t,new aU)),t.offlineComponents})).apply(this,arguments)}function SU(t){return EU.apply(this,arguments)}function EU(){return(EU=uf(function*(t){return t.onlineComponents||(Kx("FirestoreClient","Using default OnlineComponentProvider"),yield wU(t,new lU)),t.onlineComponents})).apply(this,arguments)}function TU(t){return _U(t).then(t=>t.persistence)}function CU(t){return _U(t).then(t=>t.localStore)}function kU(t){return SU(t).then(t=>t.remoteStore)}function AU(t){return SU(t).then(t=>t.syncEngine)}function xU(t){return OU.apply(this,arguments)}function OU(){return(OU=uf(function*(t){const e=yield SU(t),n=e.eventManager;return n.onListen=gF.bind(null,e.syncEngine),n.onUnlisten=wF.bind(null,e.syncEngine),n})).apply(this,arguments)}function DU(t,e,n={}){const r=new eO;return t.asyncQueue.enqueueAndForget(uf(function*(){return function(t,e,n,r,i){const s=new dU({next:s=>{e.enqueueAndForget(()=>ZV(t,o));const a=s.docs.has(n);!a&&s.fromCache?i.reject(new tO(Zx.UNAVAILABLE,"Failed to get document because the client is offline.")):a&&s.fromCache&&r&&"server"===r.source?i.reject(new tO(Zx.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):i.resolve(s)},error:t=>i.reject(t)}),o=new iF(qD(n.path),s,{includeMetadataChanges:!0,Cu:!0});return JV(t,o)}(yield xU(t),t.asyncQueue,e,n,r)})),r.promise}function NU(t,e,n={}){const r=new eO;return t.asyncQueue.enqueueAndForget(uf(function*(){return function(t,e,n,r,i){const s=new dU({next:n=>{e.enqueueAndForget(()=>ZV(t,o)),n.fromCache&&"server"===r.source?i.reject(new tO(Zx.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):i.resolve(n)},error:t=>i.reject(t)}),o=new iF(n,s,{includeMetadataChanges:!0,Cu:!0});return JV(t,o)}(yield xU(t),t.asyncQueue,e,n,r)})),r.promise}const RU=new Map;function PU(t,e,n){if(!n)throw new tO(Zx.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function MU(t){if(!UO.isDocumentKey(t))throw new tO(Zx.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function LU(t){if(UO.isDocumentKey(t))throw new tO(Zx.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${t} has ${t.length}.`)}function VU(t){if(void 0===t)return"undefined";if(null===t)return"null";if("string"==typeof t)return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if("number"==typeof t||"boolean"==typeof t)return""+t;if("object"==typeof t){if(t instanceof Array)return"an array";{const e=function(t){return t.constructor?t.constructor.name:null}(t);return e?`a custom ${e} object`:"an object"}}return"function"==typeof t?"a function":Yx()}function FU(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new tO(Zx.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=VU(t);throw new tO(Zx.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return t}function UU(t,e){if(e<=0)throw new tO(Zx.INVALID_ARGUMENT,`Function ${t}() requires a positive number, but it was: ${e}.`)}class jU{constructor(t){var e;if(void 0===t.host){if(void 0!==t.ssl)throw new tO(Zx.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=t.host,this.ssl=null===(e=t.ssl)||void 0===e||e;if(this.credentials=t.credentials,this.ignoreUndefinedProperties=!!t.ignoreUndefinedProperties,void 0===t.cacheSizeBytes)this.cacheSizeBytes=41943040;else{if(-1!==t.cacheSizeBytes&&t.cacheSizeBytes<1048576)throw new tO(Zx.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=t.cacheSizeBytes}this.experimentalForceLongPolling=!!t.experimentalForceLongPolling,this.experimentalAutoDetectLongPolling=!!t.experimentalAutoDetectLongPolling,this.useFetchStreams=!!t.useFetchStreams,function(t,e,n,r){if(!0===e&&!0===r)throw new tO(Zx.INVALID_ARGUMENT,"experimentalForceLongPolling and experimentalAutoDetectLongPolling cannot be used together.")}(0,t.experimentalForceLongPolling,0,t.experimentalAutoDetectLongPolling)}isEqual(t){return this.host===t.host&&this.ssl===t.ssl&&this.credentials===t.credentials&&this.cacheSizeBytes===t.cacheSizeBytes&&this.experimentalForceLongPolling===t.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===t.experimentalAutoDetectLongPolling&&this.ignoreUndefinedProperties===t.ignoreUndefinedProperties&&this.useFetchStreams===t.useFetchStreams}}class BU{constructor(t,e,n){this._authCredentials=e,this._appCheckCredentials=n,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new jU({}),this._settingsFrozen=!1,t instanceof MO?this._databaseId=t:(this._app=t,this._databaseId=function(t){if(!Object.prototype.hasOwnProperty.apply(t.options,["projectId"]))throw new tO(Zx.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new MO(t.options.projectId)}(t))}get app(){if(!this._app)throw new tO(Zx.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return void 0!==this._terminateTask}_setSettings(t){if(this._settingsFrozen)throw new tO(Zx.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new jU(t),void 0!==t.credentials&&(this._authCredentials=function(t){if(!t)return new rO;switch(t.type){case"gapi":const e=t.client;return Jx(!("object"!=typeof e||null===e||!e.auth||!e.auth.getAuthHeaderValueForFirstParty)),new aO(e,t.sessionIndex||"0",t.iamToken||null);case"provider":return t.client;default:throw new tO(Zx.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(t.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(t){const e=RU.get(t);e&&(Kx("ComponentProvider","Removing Datastore"),RU.delete(t),e.terminate())}(this),Promise.resolve()}}class $U{constructor(t,e,n){this.converter=e,this._key=n,this.type="document",this.firestore=t}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new HU(this.firestore,this.converter,this._key.path.popLast())}withConverter(t){return new $U(this.firestore,t,this._key)}}class qU{constructor(t,e,n){this.converter=e,this._query=n,this.type="query",this.firestore=t}withConverter(t){return new qU(this.firestore,t,this._query)}}class HU extends qU{constructor(t,e,n){super(t,e,qD(n)),this._path=n,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const t=this._path.popLast();return t.isEmpty()?null:new $U(this.firestore,null,new UO(t))}withConverter(t){return new HU(this.firestore,t,this._path)}}function zU(t,e,...n){if(t=Nf(t),1===arguments.length&&(e=dO.R()),PU("doc","path",e),t instanceof BU){const r=IO.fromString(e,...n);return MU(r),new $U(t,null,new UO(r))}{if(!(t instanceof $U||t instanceof HU))throw new tO(Zx.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(IO.fromString(e,...n));return MU(r),new $U(t.firestore,t instanceof HU?t.converter:null,new UO(r))}}function KU(t,e){return t=Nf(t),e=Nf(e),(t instanceof $U||t instanceof HU)&&(e instanceof $U||e instanceof HU)&&t.firestore===e.firestore&&t.path===e.path&&t.converter===e.converter}function GU(t,e){return t=Nf(t),e=Nf(e),t instanceof qU&&e instanceof qU&&t.firestore===e.firestore&&XD(t._query,e._query)&&t.converter===e.converter}class WU{constructor(){this.ka=Promise.resolve(),this.Ma=[],this.Oa=!1,this.Fa=[],this.$a=null,this.Ba=!1,this.La=!1,this.Ua=[],this.Do=new YL(this,"async_queue_retry"),this.qa=()=>{const t=WL();t&&Kx("AsyncQueue","Visibility state changed to "+t.visibilityState),this.Do.Ao()};const t=WL();t&&"function"==typeof t.addEventListener&&t.addEventListener("visibilitychange",this.qa)}get isShuttingDown(){return this.Oa}enqueueAndForget(t){this.enqueue(t)}enqueueAndForgetEvenWhileRestricted(t){this.Ka(),this.Ga(t)}enterRestrictedMode(t){if(!this.Oa){this.Oa=!0,this.La=t||!1;const e=WL();e&&"function"==typeof e.removeEventListener&&e.removeEventListener("visibilitychange",this.qa)}}enqueue(t){if(this.Ka(),this.Oa)return new Promise(()=>{});const e=new eO;return this.Ga(()=>this.Oa&&this.La?Promise.resolve():(t().then(e.resolve,e.reject),e.promise)).then(()=>e.promise)}enqueueRetryable(t){this.enqueueAndForget(()=>(this.Ma.push(t),this.Qa()))}Qa(){var t=this;return uf(function*(){if(0!==t.Ma.length){try{yield t.Ma[0](),t.Ma.shift(),t.Do.reset()}catch(WT){if(!EP(WT))throw WT;Kx("AsyncQueue","Operation failed with retryable error: "+WT)}t.Ma.length>0&&t.Do.To(()=>t.Qa())}})()}Ga(t){const e=this.ka.then(()=>(this.Ba=!0,t().catch(t=>{throw this.$a=t,this.Ba=!1,Gx("INTERNAL UNHANDLED ERROR: ",function(t){let e=t.message||"";return t.stack&&(e=t.stack.includes(t.message)?t.stack:t.message+"\n"+t.stack),e}(t)),t}).then(t=>(this.Ba=!1,t))));return this.ka=e,e}enqueueAfterDelay(t,e,n){this.Ka(),this.Ua.indexOf(t)>-1&&(e=0);const r=HV.createAndSchedule(this,t,e,n,t=>this.ja(t));return this.Fa.push(r),r}Ka(){this.$a&&Yx()}verifyOperationInProgress(){}Wa(){var t=this;return uf(function*(){let e;do{e=t.ka,yield e}while(e!==t.ka)})()}za(t){for(const e of this.Fa)if(e.timerId===t)return!0;return!1}Ha(t){return this.Wa().then(()=>{this.Fa.sort((t,e)=>t.targetTimeMs-e.targetTimeMs);for(const e of this.Fa)if(e.skipDelay(),"all"!==t&&e.timerId===t)break;return this.Wa()})}Ja(t){this.Ua.push(t)}ja(t){const e=this.Fa.indexOf(t);this.Fa.splice(e,1)}}function QU(t){return function(t,e){if("object"!=typeof t||null===t)return!1;const n=t;for(const r of["next","error","complete"])if(r in n&&"function"==typeof n[r])return!0;return!1}(t)}class YU{constructor(){this._progressObserver={},this._taskCompletionResolver=new eO,this._lastProgress={taskState:"Running",totalBytes:0,totalDocuments:0,bytesLoaded:0,documentsLoaded:0}}onProgress(t,e,n){this._progressObserver={next:t,error:e,complete:n}}catch(t){return this._taskCompletionResolver.promise.catch(t)}then(t,e){return this._taskCompletionResolver.promise.then(t,e)}_completeWith(t){this._updateProgress(t),this._progressObserver.complete&&this._progressObserver.complete(),this._taskCompletionResolver.resolve(t)}_failWith(t){this._lastProgress.taskState="Error",this._progressObserver.next&&this._progressObserver.next(this._lastProgress),this._progressObserver.error&&this._progressObserver.error(t),this._taskCompletionResolver.reject(t)}_updateProgress(t){this._lastProgress=t,this._progressObserver.next&&this._progressObserver.next(t)}}class JU extends BU{constructor(t,e,n){super(t,e,n),this.type="firestore",this._queue=new WU,this._persistenceKey="name"in t?t.name:"[DEFAULT]"}_terminate(){return this._firestoreClient||ZU(this),this._firestoreClient.terminate()}}function XU(t){return t._firestoreClient||ZU(t),t._firestoreClient.verifyNotTerminated(),t._firestoreClient}function ZU(t){var e;const n=t._freezeSettings(),r=function(t,e,n,r){return new PO(t,e,n,r.host,r.ssl,r.experimentalForceLongPolling,r.experimentalAutoDetectLongPolling,r.useFetchStreams)}(t._databaseId,(null===(e=t._app)||void 0===e?void 0:e.options.appId)||"",t._persistenceKey,n);t._firestoreClient=new mU(t._authCredentials,t._appCheckCredentials,t._queue,r)}function tj(t,e,n){const r=new eO;return t.asyncQueue.enqueue(uf(function*(){try{yield yU(t,n),yield wU(t,e),r.resolve()}catch(t){if(!function(t){return"FirebaseError"===t.name?t.code===Zx.FAILED_PRECONDITION||t.code===Zx.UNIMPLEMENTED:!("undefined"!=typeof DOMException&&t instanceof DOMException)||22===t.code||20===t.code||11===t.code}(t))throw t;console.warn("Error enabling offline persistence. Falling back to persistence disabled: "+t),r.reject(t)}})).then(()=>r.promise)}function ej(t){if(t._initialized||t._terminated)throw new tO(Zx.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.")}class nj{constructor(...t){for(let e=0;e<t.length;++e)if(0===t[e].length)throw new tO(Zx.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new EO(t)}isEqual(t){return this._internalPath.isEqual(t._internalPath)}}class rj{constructor(t){this._byteString=t}static fromBase64String(t){try{return new rj(CO.fromBase64String(t))}catch(t){throw new tO(Zx.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(t){return new rj(CO.fromUint8Array(t))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(t){return this._byteString.isEqual(t._byteString)}}class ij{constructor(t){this._methodName=t}}class sj{constructor(t,e){if(!isFinite(t)||t<-90||t>90)throw new tO(Zx.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+t);if(!isFinite(e)||e<-180||e>180)throw new tO(Zx.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+e);this._lat=t,this._long=e}get latitude(){return this._lat}get longitude(){return this._long}isEqual(t){return this._lat===t._lat&&this._long===t._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(t){return fO(this._lat,t._lat)||fO(this._long,t._long)}}const oj=/^__.*__$/;class aj{constructor(t,e,n){this.data=t,this.fieldMask=e,this.fieldTransforms=n}toMutation(t,e){return null!==this.fieldMask?new DN(t,this.data,this.fieldMask,e,this.fieldTransforms):new ON(t,this.data,e,this.fieldTransforms)}}class uj{constructor(t,e,n){this.data=t,this.fieldMask=e,this.fieldTransforms=n}toMutation(t,e){return new DN(t,this.data,this.fieldMask,e,this.fieldTransforms)}}function cj(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Yx()}}class lj{constructor(t,e,n,r,i,s){this.settings=t,this.databaseId=e,this.M=n,this.ignoreUndefinedProperties=r,void 0===i&&this.Ya(),this.fieldTransforms=i||[],this.fieldMask=s||[]}get path(){return this.settings.path}get Xa(){return this.settings.Xa}Za(t){return new lj(Object.assign(Object.assign({},this.settings),t),this.databaseId,this.M,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}tc(t){var e;const n=null===(e=this.path)||void 0===e?void 0:e.child(t),r=this.Za({path:n,ec:!1});return r.nc(t),r}sc(t){var e;const n=null===(e=this.path)||void 0===e?void 0:e.child(t),r=this.Za({path:n,ec:!1});return r.Ya(),r}ic(t){return this.Za({path:void 0,ec:!0})}rc(t){return Oj(t,this.settings.methodName,this.settings.oc||!1,this.path,this.settings.uc)}contains(t){return void 0!==this.fieldMask.find(e=>t.isPrefixOf(e))||void 0!==this.fieldTransforms.find(e=>t.isPrefixOf(e.field))}Ya(){if(this.path)for(let t=0;t<this.path.length;t++)this.nc(this.path.get(t))}nc(t){if(0===t.length)throw this.rc("Document fields must not be empty");if(cj(this.Xa)&&oj.test(t))throw this.rc('Document fields cannot begin and end with "__"')}}class hj{constructor(t,e,n){this.databaseId=t,this.ignoreUndefinedProperties=e,this.M=n||QL(t)}ac(t,e,n,r=!1){return new lj({Xa:t,methodName:e,uc:n,path:EO.emptyPath(),ec:!1,oc:r},this.databaseId,this.M,this.ignoreUndefinedProperties)}}function dj(t){const e=t._freezeSettings(),n=QL(t._databaseId);return new hj(t._databaseId,!!e.ignoreUndefinedProperties,n)}function fj(t,e,n,r,i,s={}){const o=t.ac(s.merge||s.mergeFields?2:0,e,n,i);Cj("Data must be an object, but it was:",o,r);const a=Ej(r,o);let u,c;if(s.merge)u=new TO(o.fieldMask),c=o.fieldTransforms;else if(s.mergeFields){const t=[];for(const r of s.mergeFields){const i=kj(e,r,n);if(!o.contains(i))throw new tO(Zx.INVALID_ARGUMENT,`Field '${i}' is specified in your field mask but missing from your input data.`);Dj(t,i)||t.push(i)}u=new TO(t),c=o.fieldTransforms.filter(t=>u.covers(t.field))}else u=null,c=o.fieldTransforms;return new aj(new aD(a),u,c)}class pj extends ij{_toFieldTransform(t){if(2!==t.Xa)throw t.rc(1===t.Xa?`${this._methodName}() can only appear at the top level of your update data`:`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return t.fieldMask.push(t.path),null}isEqual(t){return t instanceof pj}}function gj(t,e,n){return new lj({Xa:3,uc:e.settings.uc,methodName:t._methodName,ec:n},e.databaseId,e.M,e.ignoreUndefinedProperties)}class mj extends ij{_toFieldTransform(t){return new bN(t.path,new dN)}isEqual(t){return t instanceof mj}}class yj extends ij{constructor(t,e){super(t),this.cc=e}_toFieldTransform(t){const e=gj(this,t,!0),n=this.cc.map(t=>Sj(t,e)),r=new fN(n);return new bN(t.path,r)}isEqual(t){return this===t}}class vj extends ij{constructor(t,e){super(t),this.cc=e}_toFieldTransform(t){const e=gj(this,t,!0),n=this.cc.map(t=>Sj(t,e)),r=new gN(n);return new bN(t.path,r)}isEqual(t){return this===t}}class wj extends ij{constructor(t,e){super(t),this.hc=e}_toFieldTransform(t){const e=new yN(t.M,aN(t.M,this.hc));return new bN(t.path,e)}isEqual(t){return this===t}}function bj(t,e,n,r){const i=t.ac(1,e,n);Cj("Data must be an object, but it was:",i,r);const s=[],o=aD.empty();wO(r,(t,r)=>{const a=xj(e,t,n);r=Nf(r);const u=i.sc(a);if(r instanceof pj)s.push(a);else{const t=Sj(r,u);null!=t&&(s.push(a),o.set(a,t))}});const a=new TO(s);return new uj(o,a,i.fieldTransforms)}function _j(t,e,n,r,i,s){const o=t.ac(1,e,n),a=[kj(e,r,n)],u=[i];if(s.length%2!=0)throw new tO(Zx.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let d=0;d<s.length;d+=2)a.push(kj(e,s[d])),u.push(s[d+1]);const c=[],l=aD.empty();for(let d=a.length-1;d>=0;--d)if(!Dj(c,a[d])){const t=a[d];let e=u[d];e=Nf(e);const n=o.sc(t);if(e instanceof pj)c.push(t);else{const r=Sj(e,n);null!=r&&(c.push(t),l.set(t,r))}}const h=new TO(c);return new uj(l,h,o.fieldTransforms)}function Ij(t,e,n,r=!1){return Sj(n,t.ac(r?4:3,e))}function Sj(t,e){if(Tj(t=Nf(t)))return Cj("Unsupported field value:",e,t),Ej(t,e);if(t instanceof ij)return function(t,e){if(!cj(e.Xa))throw e.rc(`${t._methodName}() can only be used with update() and set()`);if(!e.path)throw e.rc(`${t._methodName}() is not currently supported inside arrays`);const n=t._toFieldTransform(e);n&&e.fieldTransforms.push(n)}(t,e),null;if(void 0===t&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.ec&&4!==e.Xa)throw e.rc("Nested arrays are not supported");return function(t,e){const n=[];let r=0;for(const i of t){let t=Sj(i,e.ic(r));null==t&&(t={nullValue:"NULL_VALUE"}),n.push(t),r++}return{arrayValue:{values:n}}}(t,e)}return function(t,e){if(null===(t=Nf(t)))return{nullValue:"NULL_VALUE"};if("number"==typeof t)return aN(e.M,t);if("boolean"==typeof t)return{booleanValue:t};if("string"==typeof t)return{stringValue:t};if(t instanceof Date){const n=mO.fromDate(t);return{timestampValue:yR(e.M,n)}}if(t instanceof mO){const n=new mO(t.seconds,1e3*Math.floor(t.nanoseconds/1e3));return{timestampValue:yR(e.M,n)}}if(t instanceof sj)return{geoPointValue:{latitude:t.latitude,longitude:t.longitude}};if(t instanceof rj)return{bytesValue:vR(e.M,t._byteString)};if(t instanceof $U){const n=e.databaseId,r=t.firestore._databaseId;if(!r.isEqual(n))throw e.rc(`Document reference is for database ${r.projectId}/${r.database} but should be for database ${n.projectId}/${n.database}`);return{referenceValue:_R(t.firestore._databaseId||e.databaseId,t._key.path)}}throw e.rc(`Unsupported field value: ${VU(t)}`)}(t,e)}function Ej(t,e){const n={};return bO(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):wO(t,(t,r)=>{const i=Sj(r,e.tc(t));null!=i&&(n[t]=i)}),{mapValue:{fields:n}}}function Tj(t){return!("object"!=typeof t||null===t||t instanceof Array||t instanceof Date||t instanceof mO||t instanceof sj||t instanceof rj||t instanceof $U||t instanceof ij)}function Cj(t,e,n){if(!Tj(n)||!function(t){return"object"==typeof t&&null!==t&&(Object.getPrototypeOf(t)===Object.prototype||null===Object.getPrototypeOf(t))}(n)){const r=VU(n);throw e.rc("an object"===r?t+" a custom object":t+" "+r)}}function kj(t,e,n){if((e=Nf(e))instanceof nj)return e._internalPath;if("string"==typeof e)return xj(t,e);throw Oj("Field path arguments must be of type string or ",t,!1,void 0,n)}const Aj=new RegExp("[~\\*/\\[\\]]");function xj(t,e,n){if(e.search(Aj)>=0)throw Oj(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,n);try{return new nj(...e.split("."))._internalPath}catch(r){throw Oj(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,n)}}function Oj(t,e,n,r,i){const s=r&&!r.isEmpty(),o=void 0!==i;let a=`Function ${e}() called with invalid data`;n&&(a+=" (via `toFirestore()`)"),a+=". ";let u="";return(s||o)&&(u+=" (found",s&&(u+=` in field ${r}`),o&&(u+=` in document ${i}`),u+=")"),new tO(Zx.INVALID_ARGUMENT,a+t+u)}function Dj(t,e){return t.some(t=>t.isEqual(e))}class Nj{constructor(t,e,n,r,i){this._firestore=t,this._userDataWriter=e,this._key=n,this._document=r,this._converter=i}get id(){return this._key.path.lastSegment()}get ref(){return new $U(this._firestore,this._converter,this._key)}exists(){return null!==this._document}data(){if(this._document){if(this._converter){const t=new Rj(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(t)}return this._userDataWriter.convertValue(this._document.data.value)}}get(t){if(this._document){const e=this._document.data.field(Pj("DocumentSnapshot.get",t));if(null!==e)return this._userDataWriter.convertValue(e)}}}class Rj extends Nj{data(){return super.data()}}function Pj(t,e){return"string"==typeof e?xj(t,e):e instanceof nj?e._internalPath:e._delegate._internalPath}class Mj{constructor(t,e){this.hasPendingWrites=t,this.fromCache=e}isEqual(t){return this.hasPendingWrites===t.hasPendingWrites&&this.fromCache===t.fromCache}}class Lj extends Nj{constructor(t,e,n,r,i,s){super(t,e,n,r,s),this._firestore=t,this._firestoreImpl=t,this.metadata=i}exists(){return super.exists()}data(t={}){if(this._document){if(this._converter){const e=new Vj(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(e,t)}return this._userDataWriter.convertValue(this._document.data.value,t.serverTimestamps)}}get(t,e={}){if(this._document){const n=this._document.data.field(Pj("DocumentSnapshot.get",t));if(null!==n)return this._userDataWriter.convertValue(n,e.serverTimestamps)}}}class Vj extends Lj{data(t={}){return super.data(t)}}class Fj{constructor(t,e,n,r){this._firestore=t,this._userDataWriter=e,this._snapshot=r,this.metadata=new Mj(r.hasPendingWrites,r.fromCache),this.query=n}get docs(){const t=[];return this.forEach(e=>t.push(e)),t}get size(){return this._snapshot.docs.size}get empty(){return 0===this.size}forEach(t,e){this._snapshot.docs.forEach(n=>{t.call(e,new Vj(this._firestore,this._userDataWriter,n.key,n,new Mj(this._snapshot.mutatedKeys.has(n.key),this._snapshot.fromCache),this.query.converter))})}docChanges(t={}){const e=!!t.includeMetadataChanges;if(e&&this._snapshot.excludesMetadataChanges)throw new tO(Zx.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===e||(this._cachedChanges=function(t,e){if(t._snapshot.oldDocs.isEmpty()){let e=0;return t._snapshot.docChanges.map(n=>({type:"added",doc:new Vj(t._firestore,t._userDataWriter,n.doc.key,n.doc,new Mj(t._snapshot.mutatedKeys.has(n.doc.key),t._snapshot.fromCache),t.query.converter),oldIndex:-1,newIndex:e++}))}{let n=t._snapshot.oldDocs;return t._snapshot.docChanges.filter(t=>e||3!==t.type).map(e=>{const r=new Vj(t._firestore,t._userDataWriter,e.doc.key,e.doc,new Mj(t._snapshot.mutatedKeys.has(e.doc.key),t._snapshot.fromCache),t.query.converter);let i=-1,s=-1;return 0!==e.type&&(i=n.indexOf(e.doc.key),n=n.delete(e.doc.key)),1!==e.type&&(n=n.add(e.doc),s=n.indexOf(e.doc.key)),{type:Uj(e.type),doc:r,oldIndex:i,newIndex:s}})}}(this,e),this._cachedChangesIncludeMetadataChanges=e),this._cachedChanges}}function Uj(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Yx()}}function jj(t){if(zD(t)&&0===t.explicitOrderBy.length)throw new tO(Zx.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class Bj{}class $j extends Bj{constructor(t,e,n){super(),this.lc=t,this.fc=e,this.dc=n,this.type="where"}_apply(t){const e=dj(t.firestore),n=function(t,e,n,r,i,s,o){let a;if(i.isKeyField()){if("array-contains"===s||"array-contains-any"===s)throw new tO(Zx.INVALID_ARGUMENT,`Invalid Query. You can't perform '${s}' queries on documentId().`);if("in"===s||"not-in"===s){Qj(o,s);const e=[];for(const n of o)e.push(Wj(r,t,n));a={arrayValue:{values:e}}}else a=Wj(r,t,o)}else"in"!==s&&"not-in"!==s&&"array-contains-any"!==s||Qj(o,s),a=Ij(n,"where",o,"in"===s||"not-in"===s);const u=kD.create(i,s,a);return function(t,e){if(e.S()){const n=GD(t);if(null!==n&&!n.isEqual(e.field))throw new tO(Zx.INVALID_ARGUMENT,`Invalid query. All where filters with an inequality (<, <=, !=, not-in, >, or >=) must be on the same field. But you have inequality filters on '${n.toString()}' and '${e.field.toString()}'`);const r=KD(t);null!==r&&Yj(0,e.field,r)}const n=function(t,e){for(const n of t.filters)if(e.indexOf(n.op)>=0)return n.op;return null}(t,function(t){switch(t){case"!=":return["!=","not-in"];case"array-contains":return["array-contains","array-contains-any","not-in"];case"in":return["array-contains-any","in","not-in"];case"array-contains-any":return["array-contains","array-contains-any","in","not-in"];case"not-in":return["array-contains","array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(null!==n)throw new tO(Zx.INVALID_ARGUMENT,n===e.op?`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`:`Invalid query. You cannot use '${e.op.toString()}' filters with '${n.toString()}' filters.`)}(t,u),u}(t._query,0,e,t.firestore._databaseId,this.lc,this.fc,this.dc);return new qU(t.firestore,t.converter,function(t,e){const n=t.filters.concat([e]);return new BD(t.path,t.collectionGroup,t.explicitOrderBy.slice(),n,t.limit,t.limitType,t.startAt,t.endAt)}(t._query,n))}}class qj extends Bj{constructor(t,e){super(),this.lc=t,this._c=e,this.type="orderBy"}_apply(t){const e=function(t,e,n){if(null!==t.startAt)throw new tO(Zx.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(null!==t.endAt)throw new tO(Zx.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");const r=new VD(e,n);return function(t,e){if(null===KD(t)){const n=GD(t);null!==n&&Yj(0,n,e.field)}}(t,r),r}(t._query,this.lc,this._c);return new qU(t.firestore,t.converter,function(t,e){const n=t.explicitOrderBy.concat([e]);return new BD(t.path,t.collectionGroup,n,t.filters.slice(),t.limit,t.limitType,t.startAt,t.endAt)}(t._query,e))}}class Hj extends Bj{constructor(t,e,n){super(),this.type=t,this.wc=e,this.mc=n}_apply(t){return new qU(t.firestore,t.converter,JD(t._query,this.wc,this.mc))}}class zj extends Bj{constructor(t,e,n){super(),this.type=t,this.gc=e,this.yc=n}_apply(t){const e=Gj(t,this.type,this.gc,this.yc);return new qU(t.firestore,t.converter,function(t,e){return new BD(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),t.limit,t.limitType,e,t.endAt)}(t._query,e))}}class Kj extends Bj{constructor(t,e,n){super(),this.type=t,this.gc=e,this.yc=n}_apply(t){const e=Gj(t,this.type,this.gc,this.yc);return new qU(t.firestore,t.converter,function(t,e){return new BD(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),t.limit,t.limitType,t.startAt,e)}(t._query,e))}}function Gj(t,e,n,r){if(n[0]=Nf(n[0]),n[0]instanceof Nj)return function(t,e,n,r,i){if(!r)throw new tO(Zx.NOT_FOUND,`Can't use a DocumentSnapshot that doesn't exist for ${n}().`);const s=[];for(const o of QD(t))if(o.field.isKeyField())s.push(QO(e,r.key));else{const t=r.data.field(o.field);if(DO(t))throw new tO(Zx.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+o.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(null===t){const t=o.field.canonicalString();throw new tO(Zx.INVALID_ARGUMENT,`Invalid query. You are trying to start or end a query using a document for which the field '${t}' (used as the orderBy) does not exist.`)}s.push(t)}return new LD(s,i)}(t._query,t.firestore._databaseId,e,n[0]._document,r);{const i=dj(t.firestore);return function(t,e,n,r,i,s){const o=t.explicitOrderBy;if(i.length>o.length)throw new tO(Zx.INVALID_ARGUMENT,`Too many arguments provided to ${r}(). The number of arguments must be less than or equal to the number of orderBy() clauses`);const a=[];for(let u=0;u<i.length;u++){const s=i[u];if(o[u].field.isKeyField()){if("string"!=typeof s)throw new tO(Zx.INVALID_ARGUMENT,`Invalid query. Expected a string for document ID in ${r}(), but got a ${typeof s}`);if(!WD(t)&&-1!==s.indexOf("/"))throw new tO(Zx.INVALID_ARGUMENT,`Invalid query. When querying a collection and ordering by documentId(), the value passed to ${r}() must be a plain document ID, but '${s}' contains a slash.`);const n=t.path.child(IO.fromString(s));if(!UO.isDocumentKey(n))throw new tO(Zx.INVALID_ARGUMENT,`Invalid query. When querying a collection group and ordering by documentId(), the value passed to ${r}() must result in a valid document path, but '${n}' is not because it contains an odd number of segments.`);const i=new UO(n);a.push(QO(e,i))}else{const t=Ij(n,r,s);a.push(t)}}return new LD(a,s)}(t._query,t.firestore._databaseId,i,e,n,r)}}function Wj(t,e,n){if("string"==typeof(n=Nf(n))){if(""===n)throw new tO(Zx.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!WD(e)&&-1!==n.indexOf("/"))throw new tO(Zx.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);const r=e.path.child(IO.fromString(n));if(!UO.isDocumentKey(r))throw new tO(Zx.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return QO(t,new UO(r))}if(n instanceof $U)return QO(t,n._key);throw new tO(Zx.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${VU(n)}.`)}function Qj(t,e){if(!Array.isArray(t)||0===t.length)throw new tO(Zx.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`);if(t.length>10)throw new tO(Zx.INVALID_ARGUMENT,`Invalid Query. '${e.toString()}' filters support a maximum of 10 elements in the value array.`)}function Yj(t,e,n){if(!n.isEqual(e))throw new tO(Zx.INVALID_ARGUMENT,`Invalid query. You have a where filter with an inequality (<, <=, !=, not-in, >, or >=) on field '${e.toString()}' and so you must also use '${e.toString()}' as your first argument to orderBy(), but your first orderBy() is on field '${n.toString()}' instead.`)}class Jj{convertValue(t,e="none"){switch($O(t)){case 0:return null;case 1:return t.booleanValue;case 2:return xO(t.integerValue||t.doubleValue);case 3:return this.convertTimestamp(t.timestampValue);case 4:return this.convertServerTimestamp(t,e);case 5:return t.stringValue;case 6:return this.convertBytes(OO(t.bytesValue));case 7:return this.convertReference(t.referenceValue);case 8:return this.convertGeoPoint(t.geoPointValue);case 9:return this.convertArray(t.arrayValue,e);case 10:return this.convertObject(t.mapValue,e);default:throw Yx()}}convertObject(t,e){const n={};return wO(t.fields,(t,r)=>{n[t]=this.convertValue(r,e)}),n}convertGeoPoint(t){return new sj(xO(t.latitude),xO(t.longitude))}convertArray(t,e){return(t.values||[]).map(t=>this.convertValue(t,e))}convertServerTimestamp(t,e){switch(e){case"previous":const n=NO(t);return null==n?null:this.convertValue(n,e);case"estimate":return this.convertTimestamp(RO(t));default:return null}}convertTimestamp(t){const e=AO(t);return new mO(e.seconds,e.nanos)}convertDocumentKey(t,e){const n=IO.fromString(t);Jx(HR(n));const r=new MO(n.get(1),n.get(3)),i=new UO(n.popFirst(5));return r.isEqual(e)||Gx(`Document ${i} contains a document reference within a different database (${r.projectId}/${r.database}) which is not supported. It will be treated as a reference in the current database (${e.projectId}/${e.database}) instead.`),i}}function Xj(t,e,n){let r;return r=t?n&&(n.merge||n.mergeFields)?t.toFirestore(e,n):t.toFirestore(e):e,r}class Zj extends Jj{constructor(t){super(),this.firestore=t}convertBytes(t){return new rj(t)}convertReference(t){const e=this.convertDocumentKey(t,this.firestore._databaseId);return new $U(this.firestore,null,e)}}class tB{constructor(t,e){this._firestore=t,this._commitHandler=e,this._mutations=[],this._committed=!1,this._dataReader=dj(t)}set(t,e,n){this._verifyNotCommitted();const r=eB(t,this._firestore),i=Xj(r.converter,e,n),s=fj(this._dataReader,"WriteBatch.set",r._key,i,null!==r.converter,n);return this._mutations.push(s.toMutation(r._key,IN.none())),this}update(t,e,n,...r){this._verifyNotCommitted();const i=eB(t,this._firestore);let s;return s="string"==typeof(e=Nf(e))||e instanceof nj?_j(this._dataReader,"WriteBatch.update",i._key,e,n,r):bj(this._dataReader,"WriteBatch.update",i._key,e),this._mutations.push(s.toMutation(i._key,IN.exists(!0))),this}delete(t){this._verifyNotCommitted();const e=eB(t,this._firestore);return this._mutations=this._mutations.concat(new MN(e._key,IN.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new tO(Zx.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function eB(t,e){if((t=Nf(t)).firestore!==e)throw new tO(Zx.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return t}class nB extends Jj{constructor(t){super(),this.firestore=t}convertBytes(t){return new rj(t)}convertReference(t){const e=this.convertDocumentKey(t,this.firestore._databaseId);return new $U(this.firestore,null,e)}}function rB(t,...e){var n,r,i;t=Nf(t);let s={includeMetadataChanges:!1},o=0;"object"!=typeof e[o]||QU(e[o])||(s=e[o],o++);const a={includeMetadataChanges:s.includeMetadataChanges};if(QU(e[o])){const t=e[o];e[o]=null===(n=t.next)||void 0===n?void 0:n.bind(t),e[o+1]=null===(r=t.error)||void 0===r?void 0:r.bind(t),e[o+2]=null===(i=t.complete)||void 0===i?void 0:i.bind(t)}let u,c,l;if(t instanceof $U)c=FU(t.firestore,JU),l=qD(t._key.path),u={next:n=>{e[o]&&e[o](sB(c,t,n))},error:e[o+1],complete:e[o+2]};else{const n=FU(t,qU);c=FU(n.firestore,JU),l=n._query;const r=new nB(c);u={next:t=>{e[o]&&e[o](new Fj(c,r,n,t))},error:e[o+1],complete:e[o+2]},jj(t._query)}return function(t,e,n,r){const i=new dU(r),s=new iF(e,i,n);return t.asyncQueue.enqueueAndForget(uf(function*(){return JV(yield xU(t),s)})),()=>{i.Ia(),t.asyncQueue.enqueueAndForget(uf(function*(){return ZV(yield xU(t),s)}))}}(XU(c),l,a,u)}function iB(t,e){return function(t,e){const n=new eO;return t.asyncQueue.enqueueAndForget(uf(function*(){return function(t,e,n){return _F.apply(this,arguments)}(yield AU(t),e,n)})),n.promise}(XU(t),e)}function sB(t,e,n){const r=n.docs.get(e._key),i=new nB(t);return new Lj(t,i,e._key,r,new Mj(n.hasPendingWrites,n.fromCache),e.converter)}class oB extends class{constructor(t,e){this._firestore=t,this._transaction=e,this._dataReader=dj(t)}get(t){const e=eB(t,this._firestore),n=new Zj(this._firestore);return this._transaction.lookup([e._key]).then(t=>{if(!t||1!==t.length)return Yx();const r=t[0];if(r.isFoundDocument())return new Nj(this._firestore,n,r.key,r,e.converter);if(r.isNoDocument())return new Nj(this._firestore,n,e._key,null,e.converter);throw Yx()})}set(t,e,n){const r=eB(t,this._firestore),i=Xj(r.converter,e,n),s=fj(this._dataReader,"Transaction.set",r._key,i,null!==r.converter,n);return this._transaction.set(r._key,s),this}update(t,e,n,...r){const i=eB(t,this._firestore);let s;return s="string"==typeof(e=Nf(e))||e instanceof nj?_j(this._dataReader,"Transaction.update",i._key,e,n,r):bj(this._dataReader,"Transaction.update",i._key,e),this._transaction.update(i._key,s),this}delete(t){const e=eB(t,this._firestore);return this._transaction.delete(e._key),this}}{constructor(t,e){super(t,e),this._firestore=t}get(t){const e=eB(t,this._firestore),n=new nB(this._firestore);return super.get(t).then(t=>new Lj(this._firestore,n,e._key,t._document,new Mj(!1,!1),e.converter))}}!function(t,e=!0){qx="9.6.11",ap(new Bf("firestore",(t,{options:n})=>{const r=t.getProvider("app").getImmediate(),i=new JU(r,new sO(t.getProvider("auth-internal")),new cO(t.getProvider("app-check-internal")));return n=Object.assign({useFetchStreams:e},n),i._setSettings(n),i},"PUBLIC")),gp(Bx,"3.4.8",t),gp(Bx,"3.4.8","esm2017")}();class aB{call(t,e){return e.subscribe(new uB(t))}}class uB extends p{constructor(t){super(t),this.hasPrev=!1}_next(t){let e;this.hasPrev?e=[this.prev,t]:this.hasPrev=!0,this.prev=t,e&&this.destination.next(e)}}class cB{constructor(t,e){this.compare=t,this.keySelector=e}call(t,e){return e.subscribe(new lB(t,this.compare,this.keySelector))}}class lB extends p{constructor(t,e,n){super(t),this.keySelector=n,this.hasKey=!1,"function"==typeof e&&(this.compare=e)}compare(t,e){return t===e}_next(t){let e;try{const{keySelector:n}=this;e=n?n(t):t}catch(r){return this.destination.error(r)}let n=!1;if(this.hasKey)try{const{compare:t}=this;n=t(this.key,e)}catch(r){return this.destination.error(r)}else this.hasKey=!0;n||(this.key=e,this.destination.next(t))}}var hB={includeMetadataChanges:!1};function dB(t,e){return void 0===e&&(e=hB),new b(function(n){return{unsubscribe:rB(t,e,{next:n.next.bind(n),error:n.error.bind(n),complete:n.complete.bind(n)})}})}function fB(t){return dB(t,{includeMetadataChanges:!0})}function pB(t,e){void 0===e&&(e={});var n=t.data();return t.exists()&&"object"==typeof n&&null!==n?(e.idField&&(n[e.idField]=t.id),n):n}var gB=["added","modified","removed"];function mB(t,e,n){for(var r=[],i=3;i<arguments.length;i++)r[i-3]=arguments[i];var s=t.slice();return s.splice.apply(s,RT([e,n],r)),s}var yB=function(){return v(Mc(void 0),t=>t.lift(new aB))},vB=function(t,e){return JSON.stringify(t.metadata)===JSON.stringify(e.metadata)};function wB(t,e){return void 0===e&&(e={}),dB(t,{includeMetadataChanges:!0}).pipe(yB(),A(function(t){var e=t[0],n=t[1],r=n.docChanges();return e&&!vB(e,n)&&n.docs.forEach(function(t,n){var i=r.find(function(e){return KU(e.doc.ref,t.ref)});if(i){if(vB(i.doc,t))return}else{var s=null==e?void 0:e.docs.find(function(e){return KU(e.ref,t.ref)});if(s&&vB(s,t))return}r.push({oldIndex:n,newIndex:n,type:"modified",doc:t})}),r}),(n=e.events||gB,Uc(function(t){for(var e=!1,r=0;r<t.length;r++)if(n&&n.indexOf(t[r].type)>=0){e=!0;break}return e})),v(yB(),Uc(function(t){return t[1].length>0||void 0===t[0]}),A(function(t){return t[1]})));var n}function bB(t){return dB(t,{includeMetadataChanges:!0}).pipe(A(function(t){return t.docs}))}class _B{constructor(t){return t}}const IB="firestore";dw(0,300).pipe(Aw(()=>Tw(tw(IB))),xw());const SB=new Mn("angularfire2.firestore-instances");function EB(t){return(e,n)=>{const r=e.runOutsideAngular(()=>t(n));return new _B(r)}}const TB={provide:class{constructor(){return tw(IB)}},deps:[[new er,SB]]},CB={provide:_B,useFactory:function(t,e){const n=Zv(IB,t,e);return n&&new _B(n)},deps:[[new er,SB],Ow]};let kB=(()=>{class t{constructor(){gp("angularfire",zv.full,"fst")}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=Gt({type:t}),t.\u0275inj=ft({providers:[CB,TB]}),t})();function AB(t,...e){return{ngModule:kB,providers:[{provide:SB,useFactory:EB(t),multi:!0,deps:[Da,us,iw,Dw,[new er,ST],[new er,Ob],...e]}]}}lw(wB,!0),lw(bB,!0),lw(function(t,e){return void 0===e&&(e={}),wB(t,e).pipe(Lc(function(t,n){return function(t,e,n){return void 0===n&&(n=gB),e.forEach(function(e){n.indexOf(e.type)>-1&&(t=function(t,e){switch(e.type){case"added":if(!t[e.newIndex]||!KU(t[e.newIndex].doc.ref,e.doc.ref))return mB(t,e.newIndex,0,e);break;case"modified":if(null==t[e.oldIndex]||KU(t[e.oldIndex].doc.ref,e.doc.ref)){if(e.oldIndex!==e.newIndex){var n=t.slice();return n.splice(e.oldIndex,1),n.splice(e.newIndex,0,e),n}return mB(t,e.newIndex,1,e)}break;case"removed":if(t[e.oldIndex]&&KU(t[e.oldIndex].doc.ref,e.doc.ref))return mB(t,e.oldIndex,1)}return t}(t,e))}),t}(t,n,e.events)},[]),t=>t.lift(new cB(void 0,void 0)))},!0),lw(function(t,e){return void 0===e&&(e={}),wB(t,e).pipe(Lc(function(t,e){return RT(RT([],t),e)},[]))},!0),lw(function(t,e){return void 0===e&&(e={}),bB(t).pipe(A(function(t){return t.map(function(t){return pB(t,e)})}))},!0),lw(fB,!0),lw(function(t,e){return void 0===e&&(e={}),fB(t).pipe(A(function(t){return pB(t,e)}))},!0),lw(pB,!0),lw(dB,!0),lw(function(t,e){const n=FU(t.firestore,JU),r=zU(t),i=Xj(t.converter,e);return iB(n,[fj(dj(t.firestore),"addDoc",r._key,i,null!==t.converter,{}).toMutation(r._key,IN.exists(!1))]).then(()=>r)},!0),lw(function(...t){return new vj("arrayRemove",t)},!0),lw(function(...t){return new yj("arrayUnion",t)},!0),lw(function(t){if(t._initialized&&!t._terminated)throw new tO(Zx.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");const e=new eO;return t._queue.enqueueAndForgetEvenWhileRestricted(uf(function*(){try{yield(n=uf(function*(t){if(!_P.vt())return Promise.resolve();const e=t+"main";yield _P.delete(e)}),function(t){return n.apply(this,arguments)})(XM(t._databaseId,t._persistenceKey)),e.resolve()}catch(t){e.reject(t)}var n})),e.promise},!0);const xB=lw(function(t,e,...n){if(t=Nf(t),PU("collection","path",e),t instanceof BU){const r=IO.fromString(e,...n);return LU(r),new HU(t,null,r)}{if(!(t instanceof $U||t instanceof HU))throw new tO(Zx.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(IO.fromString(e,...n));return LU(r),new HU(t.firestore,null,r)}},!0),OB=(lw(function(t,e){if(t=FU(t,BU),PU("collectionGroup","collection id",e),e.indexOf("/")>=0)throw new tO(Zx.INVALID_ARGUMENT,`Invalid collection ID '${e}' passed to function collectionGroup(). Collection IDs must not contain '/'.`);return new qU(t,null,function(t){return new BD(IO.emptyPath(),t)}(e))},!0),lw(function(t,e,n,r={}){var i;const s=(t=FU(t,BU))._getSettings();if("firestore.googleapis.com"!==s.host&&s.host!==e&&Wx("Host has been set in both settings() and useEmulator(), emulator host will be used"),t._setSettings(Object.assign(Object.assign({},s),{host:`${e}:${n}`,ssl:!1})),r.mockUserToken){let e,n;if("string"==typeof r.mockUserToken)e=r.mockUserToken,n=$x.MOCK_USER;else{e=function(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n=e||"demo-project",r=t.iat||0,i=t.sub||t.user_id;if(!i)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const s=Object.assign({iss:`https://securetoken.google.com/${n}`,aud:n,iat:r,exp:r+3600,auth_time:r,sub:i,user_id:i,firebase:{sign_in_provider:"custom",identities:{}}},t);return[hf(JSON.stringify({alg:"none",type:"JWT"})),hf(JSON.stringify(s)),""].join(".")}(r.mockUserToken,null===(i=t._app)||void 0===i?void 0:i.options.projectId);const s=r.mockUserToken.sub||r.mockUserToken.user_id;if(!s)throw new tO(Zx.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");n=new $x(s)}t._authCredentials=new iO(new nO(e,n))}},!0),lw(function(t){return iB(FU(t.firestore,JU),[new MN(t._key,IN.none())])},!0),lw(function(){return new pj("deleteField")},!0),lw(function(t){return function(t){return t.asyncQueue.enqueue(uf(function*(){const e=yield TU(t),n=yield kU(t);return e.setNetworkEnabled(!1),(r=uf(function*(t){const e=Xx(t);e.fu.add(0),yield sV(e),e.wu.set("Offline")}),function(t){return r.apply(this,arguments)})(n);var r}))}(XU(t=FU(t,JU)))},!0),lw(zU,!0)),DB=(lw(function(){return new nj("__name__")},!0),lw(function(t,e){ej(t=FU(t,JU));const n=XU(t),r=t._freezeSettings(),i=new lU;return tj(n,i,new uU(i,r.cacheSizeBytes,null==e?void 0:e.forceOwnership))},!0),lw(function(t){ej(t=FU(t,JU));const e=XU(t),n=t._freezeSettings(),r=new lU;return tj(e,r,new cU(r,n.cacheSizeBytes))},!0),lw(function(t){return function(t){return t.asyncQueue.enqueue(uf(function*(){const e=yield TU(t),n=yield kU(t);return e.setNetworkEnabled(!0),function(t){const e=Xx(t);return e.fu.delete(0),rV(e)}(n)}))}(XU(t=FU(t,JU)))},!0),lw(function(...t){return new Kj("endAt",t,!0)},!0),lw(function(...t){return new Kj("endBefore",t,!1)},!0),lw(function(t){t=FU(t,$U);const e=FU(t.firestore,JU);return DU(XU(e),t._key).then(n=>sB(e,t,n))},!0),lw(function(t){t=FU(t,$U);const e=FU(t.firestore,JU),n=XU(e),r=new nB(e);return function(t,e){const n=new eO;return t.asyncQueue.enqueueAndForget(uf(function*(){return(r=uf(function*(t,e,n){try{const r=yield function(t,e){const n=Xx(t);return n.persistence.runTransaction("read document","readonly",t=>n.ci.Ls(t,e))}(t,e);r.isFoundDocument()?n.resolve(r):r.isNoDocument()?n.resolve(null):n.reject(new tO(Zx.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)"))}catch(t){const r=zV(t,`Failed to get document '${e} from cache`);n.reject(r)}}),function(t,e,n){return r.apply(this,arguments)})(yield CU(t),e,n);var r})),n.promise}(n,t._key).then(n=>new Lj(e,r,t._key,n,new Mj(null!==n&&n.hasLocalMutations,!0),t.converter))},!0),lw(function(t){t=FU(t,$U);const e=FU(t.firestore,JU);return DU(XU(e),t._key,{source:"server"}).then(n=>sB(e,t,n))},!0),lw(function(t){t=FU(t,qU);const e=FU(t.firestore,JU),n=XU(e),r=new nB(e);return jj(t._query),NU(n,t._query).then(n=>new Fj(e,r,t,n))},!0)),NB=(lw(function(t){t=FU(t,qU);const e=FU(t.firestore,JU),n=XU(e),r=new nB(e);return function(t,e){const n=new eO;return t.asyncQueue.enqueueAndForget(uf(function*(){return(r=uf(function*(t,e,n){try{const r=yield pL(t,e,!0),i=new hF(e,r.li),s=i.Gu(r.documents),o=i.applyChanges(s,!1);n.resolve(o.snapshot)}catch(t){const r=zV(t,`Failed to execute query '${e} against cache`);n.reject(r)}}),function(t,e,n){return r.apply(this,arguments)})(yield CU(t),e,n);var r})),n.promise}(n,t._query).then(n=>new Fj(e,r,t,n))},!0),lw(function(t){t=FU(t,qU);const e=FU(t.firestore,JU),n=XU(e),r=new nB(e);return NU(n,t._query,{source:"server"}).then(n=>new Fj(e,r,t,n))},!0),lw(function(t=dp()){return up(t,"firestore").getImmediate()},!0)),RB=(lw(function(t){return new wj("increment",t)},!0),lw(function(t,e){const n=up(t,"firestore");if(n.isInitialized()){const t=n.getImmediate();if(Ef(n.getOptions(),e))return t;throw new tO(Zx.FAILED_PRECONDITION,"initializeFirestore() has already been called with different options. To avoid this error, call initializeFirestore() with the same options as when it was originally called, or call getFirestore() to return the already initialized instance.")}if(void 0!==e.cacheSizeBytes&&-1!==e.cacheSizeBytes&&e.cacheSizeBytes<1048576)throw new tO(Zx.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");return n.initialize({options:e})},!0),lw(function(t){return UU("limit",t),new Hj("limit",t,"F")},!0),lw(function(t){return UU("limitToLast",t),new Hj("limitToLast",t,"L")},!0),lw(function(t,e){const n=XU(t=FU(t,JU)),r=new YU;return function(t,e,n,r){const i=function(t,e){let n;return n="string"==typeof t?(new TextEncoder).encode(t):t,function(t,e){return new fU(t,e)}(function(t,e){if(t instanceof Uint8Array)return hU(t,e);if(t instanceof ArrayBuffer)return hU(new Uint8Array(t),e);if(t instanceof ReadableStream)return t.getReader();throw new Error("Source of `toByteStreamReader` has to be a ArrayBuffer or ReadableStream")}(n),e)}(n,QL(e));t.asyncQueue.enqueueAndForget(uf(function*(){!function(t,e,n){const r=Xx(t);var i;(i=uf(function*(t,e,n){try{const r=yield e.getMetadata();if(yield function(t,e){const n=Xx(t),r=bR(e.createTime);return n.persistence.runTransaction("hasNewerBundle","readonly",t=>n._s.getBundleMetadata(t,e.id)).then(t=>!!t&&t.createTime.compareTo(r)>=0)}(t.localStore,r))return yield e.close(),n._completeWith(function(t){return{taskState:"Success",documentsLoaded:t.totalDocuments,bytesLoaded:t.totalBytes,totalDocuments:t.totalDocuments,totalBytes:t.totalBytes}}(r)),Promise.resolve(new Set);n._updateProgress(uF(r));const i=new aF(r,t.localStore,e.M);let s=yield e.da();for(;s;){const t=yield i.ku(s);t&&n._updateProgress(t),s=yield e.da()}const o=yield i.complete();return yield UF(t,o.Fu,void 0),yield function(t,e){const n=Xx(t);return n.persistence.runTransaction("Save bundle","readwrite",t=>n._s.saveBundleMetadata(t,e))}(t.localStore,r),n._completeWith(o.progress),Promise.resolve(o.Ou)}catch(t){return Wx("SyncEngine",`Loading bundle failed with ${t}`),n._failWith(t),Promise.resolve(new Set)}}),function(t,e,n){return i.apply(this,arguments)})(r,e,n).then(t=>{r.sharedClientState.notifyBundleLoaded(t)})}(yield AU(t),i,r)}))}(n,t._databaseId,e,r),r},!0),lw(function(t,e){return function(t,e){return t.asyncQueue.enqueue(uf(function*(){return function(t,e){const n=Xx(t);return n.persistence.runTransaction("Get named query","readonly",t=>n._s.getNamedQuery(t,e))}(yield CU(t),e)}))}(XU(t=FU(t,JU)),e).then(e=>e?new qU(t,null,e.query):null)},!0),lw(rB,!0),lw(function(t,e){return function(t,e){const n=new dU(e);return t.asyncQueue.enqueueAndForget(uf(function*(){return function(t,e){Xx(t).Eu.add(e),e.next()}(yield xU(t),n)})),()=>{n.Ia(),t.asyncQueue.enqueueAndForget(uf(function*(){return function(t,e){Xx(t).Eu.delete(e)}(yield xU(t),n)}))}}(XU(t=FU(t,JU)),QU(e)?e:{next:e})},!0),lw(function(t,e="asc"){const n=e,r=Pj("orderBy",t);return new qj(r,n)},!0),lw(function(t,...e){for(const n of e)t=n._apply(t);return t},!0),lw(GU,!0),lw(KU,!0),lw(function(t,e){return function(t,e){const n=new eO;return t.asyncQueue.enqueueAndForget(uf(function*(){const r=yield function(t){return SU(t).then(t=>t.datastore)}(t);new gU(t.asyncQueue,r,e,n).run()})),n.promise}(XU(t=FU(t,JU)),n=>e(new oB(t,n)))},!0),lw(function(){return new mj("serverTimestamp")},!0),lw(function(t,e,n){t=FU(t,$U);const r=FU(t.firestore,JU),i=Xj(t.converter,e,n);return iB(r,[fj(dj(r),"setDoc",t._key,i,null!==t.converter,n).toMutation(t._key,IN.none())])},!0));function PB(t,e){if(1&t){const t=ke();Es(0,"tr"),Es(1,"td"),Us(2),Ts(),Es(3,"td"),Us(4),Ts(),Es(5,"td"),Us(6),Ts(),Es(7,"td"),Us(8),Ts(),Es(9,"td"),Es(10,"input",9),xs("click",function(){const e=(n=t,Te.lFrame.contextLView=n,n[8]).$implicit;var n;return function(t=1){return function(t){return(Te.lFrame.contextLView=function(t,e){for(;t>0;)e=e[15],t--;return e}(t,Te.lFrame.contextLView))[8]}(t)}().review(e)}),Ts(),Ts(),Ts()}if(2&t){const t=e.$implicit;ti(2),js(t.id),ti(2),js(t.title),ti(2),js(t.url),ti(2),js(t.marked)}}lw(function(t){Hx.setLogLevel(t)},!0),lw(function(t,e){return t instanceof Lj&&e instanceof Lj?t._firestore===e._firestore&&t._key.isEqual(e._key)&&(null===t._document?null===e._document:t._document.isEqual(e._document))&&t._converter===e._converter:t instanceof Fj&&e instanceof Fj&&t._firestore===e._firestore&&GU(t.query,e.query)&&t.metadata.isEqual(e.metadata)&&t._snapshot.isEqual(e._snapshot)},!0),lw(function(...t){return new zj("startAfter",t,!1)},!0),lw(function(...t){return new zj("startAt",t,!0)},!0),lw(function(t){return function(t,e,n="[DEFAULT]"){up(t,"firestore").clearInstance(n)}(t.app),t._delete()},!0),lw(function(t,e,n,...r){t=FU(t,$U);const i=FU(t.firestore,JU),s=dj(i);let o;return o="string"==typeof(e=Nf(e))||e instanceof nj?_j(s,"updateDoc",t._key,e,n,r):bj(s,"updateDoc",t._key,e),iB(i,[o.toMutation(t._key,IN.exists(!0))])},!0),lw(function(t){return function(t){const e=new eO;return t.asyncQueue.enqueueAndForget(uf(function*(){return function(t,e){return DF.apply(this,arguments)}(yield AU(t),e)})),e.promise}(XU(t=FU(t,JU)))},!0),lw(function(t,e,n){const r=e,i=Pj("where",t);return new $j(i,r,n)},!0),lw(function(t){return XU(t=FU(t,JU)),new tB(t,e=>iB(t,e))},!0);let MB=(()=>{class t{constructor(t,e){this.firestore=t,this.router=e,this.results=[]}ngOnInit(){this.readData()}readData(){var t=this;return uf(function*(){var e=xB(t.firestore,"urls");yield DB(e).then(e=>{t.results=[...e.docs.map(t=>Object.assign(Object.assign({},t.data()),{id:t.id}))]}),console.log(t.results)})()}review(t){console.log(t),this.router.navigate(["/review"],{state:{item:t}})}}return t.\u0275fac=function(e){return new(e||t)(_s(_B),_s(Fd))},t.\u0275cmp=qt({type:t,selectors:[["app-home"]],decls:53,vars:1,consts:[[1,"container"],[1,"row"],[1,"col-md-3"],[1,"card"],[1,"card-body"],[1,"d-flex","justify-content-center"],[1,"table","table=hover"],[1,"table-secondary"],[4,"ngFor","ngForOf"],["type","button","value","Review",1,"btn","btn-sm","btn-primary",3,"click"]],template:function(t,e){1&t&&(Cs(0,"br"),Cs(1,"br"),Es(2,"div",0),Es(3,"div",1),Es(4,"div",2),Es(5,"div",3),Es(6,"div",4),Es(7,"div",5),Es(8,"h4"),Us(9,"75"),Ts(),Ts(),Es(10,"div",5),Us(11," New links reported "),Ts(),Ts(),Ts(),Ts(),Es(12,"div",2),Es(13,"div",3),Es(14,"div",4),Es(15,"div",5),Es(16,"h4"),Us(17,"200"),Ts(),Ts(),Es(18,"div",5),Us(19," Links flagged inappropriate "),Ts(),Ts(),Ts(),Ts(),Es(20,"div",2),Es(21,"div",3),Es(22,"div",4),Es(23,"div",5),Es(24,"h4"),Us(25,"10"),Ts(),Ts(),Es(26,"div",5),Us(27," Active reviewers "),Ts(),Ts(),Ts(),Ts(),Es(28,"div",2),Es(29,"div",3),Es(30,"div",4),Es(31,"div",5),Es(32,"h4"),Us(33,"82 %"),Ts(),Ts(),Es(34,"div",5),Us(35," Average Reviewer TrustScore "),Ts(),Ts(),Ts(),Ts(),Ts(),Ts(),Cs(36,"br"),Es(37,"div",0),Es(38,"table",6),Es(39,"thead",7),Es(40,"tr"),Es(41,"th"),Us(42,"ID"),Ts(),Es(43,"th"),Us(44,"Title"),Ts(),Es(45,"th"),Us(46,"Url"),Ts(),Es(47,"th"),Us(48,"Report Count"),Ts(),Es(49,"th"),Us(50,"Action"),Ts(),Ts(),Ts(),Es(51,"tbody"),function(t,e,n,r,i,s,o,a){const u=ke(),c=Ae(),l=c.firstCreatePass?function(t,e,n,r,i,s,o,a,u){const c=e.consts,l=li(e,72,4,"tr",Ie(c,8));Ii(e,n,l,Ie(c,undefined)),Ye(e,l);const h=l.tViews=wi(2,l,r,11,4,e.directiveRegistry,e.pipeRegistry,null,e.schemas,c);return null!==e.queries&&(e.queries.template(e,l),h.queries=e.queries.embeddedTView(l)),l}(0,c,u,e):c.data[72];De(l,!1);const h=u[11].createComment("");Rr(c,u,h,l),cr(h,u),Li(u,u[72]=Ni(h,u,h,l)),ie(l)&&mi(c,u,l)}(0,PB),Ts(),Ts(),Ts()),2&t&&(ti(52),Is("ngForOf",e.results))},directives:[Du],styles:[""]}),t})();function LB(t,e){return new b(n=>{const r=t.length;if(0===r)return void n.complete();const i=new Array(r);let s=0,o=0;for(let a=0;a<r;a++){const u=F(t[a]);let c=!1;n.add(u.subscribe({next:t=>{c||(c=!0,o++),i[a]=t},error:t=>n.error(t),complete:()=>{s++,s!==r&&c||(o===r&&n.next(e?e.reduce((t,e,n)=>(t[e]=i[n],t),{}):i),n.complete())}}))}})}let VB=(()=>{class t{constructor(t,e){this._renderer=t,this._elementRef=e,this.onChange=t=>{},this.onTouched=()=>{}}setProperty(t,e){this._renderer.setProperty(this._elementRef.nativeElement,t,e)}registerOnTouched(t){this.onTouched=t}registerOnChange(t){this.onChange=t}setDisabledState(t){this.setProperty("disabled",t)}}return t.\u0275fac=function(e){return new(e||t)(_s(po),_s(ho))},t.\u0275dir=Qt({type:t}),t})(),FB=(()=>{class t extends VB{}return t.\u0275fac=function(){let e;return function(n){return(e||(e=Dn(t)))(n||t)}}(),t.\u0275dir=Qt({type:t,features:[ls]}),t})();const UB=new Mn("NgValueAccessor"),jB={provide:UB,useExisting:st(()=>$B),multi:!0},BB=new Mn("CompositionEventMode");let $B=(()=>{class t extends VB{constructor(t,e,n){super(t,e),this._compositionMode=n,this._composing=!1,null==this._compositionMode&&(this._compositionMode=!function(){const t=uu()?uu().getUserAgent():"";return/android (\d+)/.test(t.toLowerCase())}())}writeValue(t){this.setProperty("value",null==t?"":t)}_handleInput(t){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(t)}_compositionStart(){this._composing=!0}_compositionEnd(t){this._composing=!1,this._compositionMode&&this.onChange(t)}}return t.\u0275fac=function(e){return new(e||t)(_s(po),_s(ho),_s(BB,8))},t.\u0275dir=Qt({type:t,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(t,e){1&t&&xs("input",function(t){return e._handleInput(t.target.value)})("blur",function(){return e.onTouched()})("compositionstart",function(){return e._compositionStart()})("compositionend",function(t){return e._compositionEnd(t.target.value)})},features:[io([jB]),ls]}),t})();const qB=new Mn("NgValidators"),HB=new Mn("NgAsyncValidators");function zB(t){return null!=t}function KB(t){const e=ks(t)?F(t):t;return As(e),e}function GB(t){let e={};return t.forEach(t=>{e=null!=t?Object.assign(Object.assign({},e),t):e}),0===Object.keys(e).length?null:e}function WB(t,e){return e.map(e=>e(t))}function QB(t){return t.map(t=>function(t){return!t.validate}(t)?t:e=>t.validate(e))}function YB(t){return null!=t?function(t){if(!t)return null;const e=t.filter(zB);return 0==e.length?null:function(t){return GB(WB(t,e))}}(QB(t)):null}function JB(t){return null!=t?function(t){if(!t)return null;const e=t.filter(zB);return 0==e.length?null:function(t){return function(...t){if(1===t.length){const e=t[0];if(u(e))return LB(e,null);if(c(e)&&Object.getPrototypeOf(e)===Object.prototype){const t=Object.keys(e);return LB(t.map(t=>e[t]),t)}}if("function"==typeof t[t.length-1]){const e=t.pop();return LB(t=1===t.length&&u(t[0])?t[0]:t,null).pipe(A(t=>e(...t)))}return LB(t,null)}(WB(t,e).map(KB)).pipe(A(GB))}}(QB(t)):null}function XB(t,e){return null===t?[e]:Array.isArray(t)?[...t,e]:[t,e]}let ZB=(()=>{class t{constructor(){this._rawValidators=[],this._rawAsyncValidators=[],this._onDestroyCallbacks=[]}get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_setValidators(t){this._rawValidators=t||[],this._composedValidatorFn=YB(this._rawValidators)}_setAsyncValidators(t){this._rawAsyncValidators=t||[],this._composedAsyncValidatorFn=JB(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_registerOnDestroy(t){this._onDestroyCallbacks.push(t)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(t=>t()),this._onDestroyCallbacks=[]}reset(t){this.control&&this.control.reset(t)}hasError(t,e){return!!this.control&&this.control.hasError(t,e)}getError(t,e){return this.control?this.control.getError(t,e):null}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275dir=Qt({type:t}),t})(),t$=(()=>{class t extends ZB{get formDirective(){return null}get path(){return null}}return t.\u0275fac=function(){let e;return function(n){return(e||(e=Dn(t)))(n||t)}}(),t.\u0275dir=Qt({type:t,features:[ls]}),t})();class e$ extends ZB{constructor(){super(...arguments),this._parent=null,this.name=null,this.valueAccessor=null}}class n${constructor(t){this._cd=t}is(t){var e,n;return!!(null===(n=null===(e=this._cd)||void 0===e?void 0:e.control)||void 0===n?void 0:n[t])}}let r$=(()=>{class t extends n${constructor(t){super(t)}}return t.\u0275fac=function(e){return new(e||t)(_s(e$,2))},t.\u0275dir=Qt({type:t,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(t,e){2&t&&Ps("ng-untouched",e.is("untouched"))("ng-touched",e.is("touched"))("ng-pristine",e.is("pristine"))("ng-dirty",e.is("dirty"))("ng-valid",e.is("valid"))("ng-invalid",e.is("invalid"))("ng-pending",e.is("pending"))},features:[ls]}),t})(),i$=(()=>{class t extends n${constructor(t){super(t)}}return t.\u0275fac=function(e){return new(e||t)(_s(t$,10))},t.\u0275dir=Qt({type:t,selectors:[["","formGroupName",""],["","formArrayName",""],["","ngModelGroup",""],["","formGroup",""],["form",3,"ngNoForm",""],["","ngForm",""]],hostVars:14,hostBindings:function(t,e){2&t&&Ps("ng-untouched",e.is("untouched"))("ng-touched",e.is("touched"))("ng-pristine",e.is("pristine"))("ng-dirty",e.is("dirty"))("ng-valid",e.is("valid"))("ng-invalid",e.is("invalid"))("ng-pending",e.is("pending"))},features:[ls]}),t})();function s$(t,e){a$(t,e),e.valueAccessor.writeValue(t.value),function(t,e){e.valueAccessor.registerOnChange(n=>{t._pendingValue=n,t._pendingChange=!0,t._pendingDirty=!0,"change"===t.updateOn&&u$(t,e)})}(t,e),function(t,e){const n=(t,n)=>{e.valueAccessor.writeValue(t),n&&e.viewToModelUpdate(t)};t.registerOnChange(n),e._registerOnDestroy(()=>{t._unregisterOnChange(n)})}(t,e),function(t,e){e.valueAccessor.registerOnTouched(()=>{t._pendingTouched=!0,"blur"===t.updateOn&&t._pendingChange&&u$(t,e),"submit"!==t.updateOn&&t.markAsTouched()})}(t,e),function(t,e){if(e.valueAccessor.setDisabledState){const n=t=>{e.valueAccessor.setDisabledState(t)};t.registerOnDisabledChange(n),e._registerOnDestroy(()=>{t._unregisterOnDisabledChange(n)})}}(t,e)}function o$(t,e){t.forEach(t=>{t.registerOnValidatorChange&&t.registerOnValidatorChange(e)})}function a$(t,e){const n=function(t){return t._rawValidators}(t);null!==e.validator?t.setValidators(XB(n,e.validator)):"function"==typeof n&&t.setValidators([n]);const r=function(t){return t._rawAsyncValidators}(t);null!==e.asyncValidator?t.setAsyncValidators(XB(r,e.asyncValidator)):"function"==typeof r&&t.setAsyncValidators([r]);const i=()=>t.updateValueAndValidity();o$(e._rawValidators,i),o$(e._rawAsyncValidators,i)}function u$(t,e){t._pendingDirty&&t.markAsDirty(),t.setValue(t._pendingValue,{emitModelToViewChange:!1}),e.viewToModelUpdate(t._pendingValue),t._pendingChange=!1}function c$(t,e){const n=t.indexOf(e);n>-1&&t.splice(n,1)}const l$="VALID",h$="INVALID",d$="PENDING",f$="DISABLED";function p$(t){return(v$(t)?t.validators:t)||null}function g$(t){return Array.isArray(t)?YB(t):t||null}function m$(t,e){return(v$(e)?e.asyncValidators:t)||null}function y$(t){return Array.isArray(t)?JB(t):t||null}function v$(t){return null!=t&&!Array.isArray(t)&&"object"==typeof t}class w${constructor(t,e){this._hasOwnPendingAsyncValidator=!1,this._onCollectionChange=()=>{},this._parent=null,this.pristine=!0,this.touched=!1,this._onDisabledChange=[],this._rawValidators=t,this._rawAsyncValidators=e,this._composedValidatorFn=g$(this._rawValidators),this._composedAsyncValidatorFn=y$(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn}set validator(t){this._rawValidators=this._composedValidatorFn=t}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(t){this._rawAsyncValidators=this._composedAsyncValidatorFn=t}get parent(){return this._parent}get valid(){return this.status===l$}get invalid(){return this.status===h$}get pending(){return this.status==d$}get disabled(){return this.status===f$}get enabled(){return this.status!==f$}get dirty(){return!this.pristine}get untouched(){return!this.touched}get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(t){this._rawValidators=t,this._composedValidatorFn=g$(t)}setAsyncValidators(t){this._rawAsyncValidators=t,this._composedAsyncValidatorFn=y$(t)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(t={}){this.touched=!0,this._parent&&!t.onlySelf&&this._parent.markAsTouched(t)}markAllAsTouched(){this.markAsTouched({onlySelf:!0}),this._forEachChild(t=>t.markAllAsTouched())}markAsUntouched(t={}){this.touched=!1,this._pendingTouched=!1,this._forEachChild(t=>{t.markAsUntouched({onlySelf:!0})}),this._parent&&!t.onlySelf&&this._parent._updateTouched(t)}markAsDirty(t={}){this.pristine=!1,this._parent&&!t.onlySelf&&this._parent.markAsDirty(t)}markAsPristine(t={}){this.pristine=!0,this._pendingDirty=!1,this._forEachChild(t=>{t.markAsPristine({onlySelf:!0})}),this._parent&&!t.onlySelf&&this._parent._updatePristine(t)}markAsPending(t={}){this.status=d$,!1!==t.emitEvent&&this.statusChanges.emit(this.status),this._parent&&!t.onlySelf&&this._parent.markAsPending(t)}disable(t={}){const e=this._parentMarkedDirty(t.onlySelf);this.status=f$,this.errors=null,this._forEachChild(e=>{e.disable(Object.assign(Object.assign({},t),{onlySelf:!0}))}),this._updateValue(),!1!==t.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors(Object.assign(Object.assign({},t),{skipPristineCheck:e})),this._onDisabledChange.forEach(t=>t(!0))}enable(t={}){const e=this._parentMarkedDirty(t.onlySelf);this.status=l$,this._forEachChild(e=>{e.enable(Object.assign(Object.assign({},t),{onlySelf:!0}))}),this.updateValueAndValidity({onlySelf:!0,emitEvent:t.emitEvent}),this._updateAncestors(Object.assign(Object.assign({},t),{skipPristineCheck:e})),this._onDisabledChange.forEach(t=>t(!1))}_updateAncestors(t){this._parent&&!t.onlySelf&&(this._parent.updateValueAndValidity(t),t.skipPristineCheck||this._parent._updatePristine(),this._parent._updateTouched())}setParent(t){this._parent=t}updateValueAndValidity(t={}){this._setInitialStatus(),this._updateValue(),this.enabled&&(this._cancelExistingSubscription(),this.errors=this._runValidator(),this.status=this._calculateStatus(),this.status!==l$&&this.status!==d$||this._runAsyncValidator(t.emitEvent)),!1!==t.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!t.onlySelf&&this._parent.updateValueAndValidity(t)}_updateTreeValidity(t={emitEvent:!0}){this._forEachChild(e=>e._updateTreeValidity(t)),this.updateValueAndValidity({onlySelf:!0,emitEvent:t.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?f$:l$}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(t){if(this.asyncValidator){this.status=d$,this._hasOwnPendingAsyncValidator=!0;const e=KB(this.asyncValidator(this));this._asyncValidationSubscription=e.subscribe(e=>{this._hasOwnPendingAsyncValidator=!1,this.setErrors(e,{emitEvent:t})})}}_cancelExistingSubscription(){this._asyncValidationSubscription&&(this._asyncValidationSubscription.unsubscribe(),this._hasOwnPendingAsyncValidator=!1)}setErrors(t,e={}){this.errors=t,this._updateControlsErrors(!1!==e.emitEvent)}get(t){return function(t,e,n){if(null==e)return null;if(Array.isArray(e)||(e=e.split(".")),Array.isArray(e)&&0===e.length)return null;let r=t;return e.forEach(t=>{r=r instanceof _$?r.controls.hasOwnProperty(t)?r.controls[t]:null:r instanceof I$&&r.at(t)||null}),r}(this,t)}getError(t,e){const n=e?this.get(e):this;return n&&n.errors?n.errors[t]:null}hasError(t,e){return!!this.getError(t,e)}get root(){let t=this;for(;t._parent;)t=t._parent;return t}_updateControlsErrors(t){this.status=this._calculateStatus(),t&&this.statusChanges.emit(this.status),this._parent&&this._parent._updateControlsErrors(t)}_initObservables(){this.valueChanges=new ca,this.statusChanges=new ca}_calculateStatus(){return this._allControlsDisabled()?f$:this.errors?h$:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus(d$)?d$:this._anyControlsHaveStatus(h$)?h$:l$}_anyControlsHaveStatus(t){return this._anyControls(e=>e.status===t)}_anyControlsDirty(){return this._anyControls(t=>t.dirty)}_anyControlsTouched(){return this._anyControls(t=>t.touched)}_updatePristine(t={}){this.pristine=!this._anyControlsDirty(),this._parent&&!t.onlySelf&&this._parent._updatePristine(t)}_updateTouched(t={}){this.touched=this._anyControlsTouched(),this._parent&&!t.onlySelf&&this._parent._updateTouched(t)}_isBoxedValue(t){return"object"==typeof t&&null!==t&&2===Object.keys(t).length&&"value"in t&&"disabled"in t}_registerOnCollectionChange(t){this._onCollectionChange=t}_setUpdateStrategy(t){v$(t)&&null!=t.updateOn&&(this._updateOn=t.updateOn)}_parentMarkedDirty(t){return!t&&!(!this._parent||!this._parent.dirty)&&!this._parent._anyControlsDirty()}}class b$ extends w${constructor(t=null,e,n){super(p$(e),m$(n,e)),this._onChange=[],this._applyFormState(t),this._setUpdateStrategy(e),this._initObservables(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}setValue(t,e={}){this.value=this._pendingValue=t,this._onChange.length&&!1!==e.emitModelToViewChange&&this._onChange.forEach(t=>t(this.value,!1!==e.emitViewToModelChange)),this.updateValueAndValidity(e)}patchValue(t,e={}){this.setValue(t,e)}reset(t=null,e={}){this._applyFormState(t),this.markAsPristine(e),this.markAsUntouched(e),this.setValue(this.value,e),this._pendingChange=!1}_updateValue(){}_anyControls(t){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(t){this._onChange.push(t)}_unregisterOnChange(t){c$(this._onChange,t)}registerOnDisabledChange(t){this._onDisabledChange.push(t)}_unregisterOnDisabledChange(t){c$(this._onDisabledChange,t)}_forEachChild(t){}_syncPendingControls(){return!("submit"!==this.updateOn||(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),!this._pendingChange)||(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),0))}_applyFormState(t){this._isBoxedValue(t)?(this.value=this._pendingValue=t.value,t.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=t}}class _$ extends w${constructor(t,e,n){super(p$(e),m$(n,e)),this.controls=t,this._initObservables(),this._setUpdateStrategy(e),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}registerControl(t,e){return this.controls[t]?this.controls[t]:(this.controls[t]=e,e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange),e)}addControl(t,e,n={}){this.registerControl(t,e),this.updateValueAndValidity({emitEvent:n.emitEvent}),this._onCollectionChange()}removeControl(t,e={}){this.controls[t]&&this.controls[t]._registerOnCollectionChange(()=>{}),delete this.controls[t],this.updateValueAndValidity({emitEvent:e.emitEvent}),this._onCollectionChange()}setControl(t,e,n={}){this.controls[t]&&this.controls[t]._registerOnCollectionChange(()=>{}),delete this.controls[t],e&&this.registerControl(t,e),this.updateValueAndValidity({emitEvent:n.emitEvent}),this._onCollectionChange()}contains(t){return this.controls.hasOwnProperty(t)&&this.controls[t].enabled}setValue(t,e={}){this._checkAllValuesPresent(t),Object.keys(t).forEach(n=>{this._throwIfControlMissing(n),this.controls[n].setValue(t[n],{onlySelf:!0,emitEvent:e.emitEvent})}),this.updateValueAndValidity(e)}patchValue(t,e={}){null!=t&&(Object.keys(t).forEach(n=>{this.controls[n]&&this.controls[n].patchValue(t[n],{onlySelf:!0,emitEvent:e.emitEvent})}),this.updateValueAndValidity(e))}reset(t={},e={}){this._forEachChild((n,r)=>{n.reset(t[r],{onlySelf:!0,emitEvent:e.emitEvent})}),this._updatePristine(e),this._updateTouched(e),this.updateValueAndValidity(e)}getRawValue(){return this._reduceChildren({},(t,e,n)=>(t[n]=e instanceof b$?e.value:e.getRawValue(),t))}_syncPendingControls(){let t=this._reduceChildren(!1,(t,e)=>!!e._syncPendingControls()||t);return t&&this.updateValueAndValidity({onlySelf:!0}),t}_throwIfControlMissing(t){if(!Object.keys(this.controls).length)throw new Error("\n        There are no form controls registered with this group yet. If you're using ngModel,\n        you may want to check next tick (e.g. use setTimeout).\n      ");if(!this.controls[t])throw new Error(`Cannot find form control with name: ${t}.`)}_forEachChild(t){Object.keys(this.controls).forEach(e=>{const n=this.controls[e];n&&t(n,e)})}_setUpControls(){this._forEachChild(t=>{t.setParent(this),t._registerOnCollectionChange(this._onCollectionChange)})}_updateValue(){this.value=this._reduceValue()}_anyControls(t){for(const e of Object.keys(this.controls)){const n=this.controls[e];if(this.contains(e)&&t(n))return!0}return!1}_reduceValue(){return this._reduceChildren({},(t,e,n)=>((e.enabled||this.disabled)&&(t[n]=e.value),t))}_reduceChildren(t,e){let n=t;return this._forEachChild((t,r)=>{n=e(n,t,r)}),n}_allControlsDisabled(){for(const t of Object.keys(this.controls))if(this.controls[t].enabled)return!1;return Object.keys(this.controls).length>0||this.disabled}_checkAllValuesPresent(t){this._forEachChild((e,n)=>{if(void 0===t[n])throw new Error(`Must supply a value for form control with name: '${n}'.`)})}}class I$ extends w${constructor(t,e,n){super(p$(e),m$(n,e)),this.controls=t,this._initObservables(),this._setUpdateStrategy(e),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}at(t){return this.controls[t]}push(t,e={}){this.controls.push(t),this._registerControl(t),this.updateValueAndValidity({emitEvent:e.emitEvent}),this._onCollectionChange()}insert(t,e,n={}){this.controls.splice(t,0,e),this._registerControl(e),this.updateValueAndValidity({emitEvent:n.emitEvent})}removeAt(t,e={}){this.controls[t]&&this.controls[t]._registerOnCollectionChange(()=>{}),this.controls.splice(t,1),this.updateValueAndValidity({emitEvent:e.emitEvent})}setControl(t,e,n={}){this.controls[t]&&this.controls[t]._registerOnCollectionChange(()=>{}),this.controls.splice(t,1),e&&(this.controls.splice(t,0,e),this._registerControl(e)),this.updateValueAndValidity({emitEvent:n.emitEvent}),this._onCollectionChange()}get length(){return this.controls.length}setValue(t,e={}){this._checkAllValuesPresent(t),t.forEach((t,n)=>{this._throwIfControlMissing(n),this.at(n).setValue(t,{onlySelf:!0,emitEvent:e.emitEvent})}),this.updateValueAndValidity(e)}patchValue(t,e={}){null!=t&&(t.forEach((t,n)=>{this.at(n)&&this.at(n).patchValue(t,{onlySelf:!0,emitEvent:e.emitEvent})}),this.updateValueAndValidity(e))}reset(t=[],e={}){this._forEachChild((n,r)=>{n.reset(t[r],{onlySelf:!0,emitEvent:e.emitEvent})}),this._updatePristine(e),this._updateTouched(e),this.updateValueAndValidity(e)}getRawValue(){return this.controls.map(t=>t instanceof b$?t.value:t.getRawValue())}clear(t={}){this.controls.length<1||(this._forEachChild(t=>t._registerOnCollectionChange(()=>{})),this.controls.splice(0),this.updateValueAndValidity({emitEvent:t.emitEvent}))}_syncPendingControls(){let t=this.controls.reduce((t,e)=>!!e._syncPendingControls()||t,!1);return t&&this.updateValueAndValidity({onlySelf:!0}),t}_throwIfControlMissing(t){if(!this.controls.length)throw new Error("\n        There are no form controls registered with this array yet. If you're using ngModel,\n        you may want to check next tick (e.g. use setTimeout).\n      ");if(!this.at(t))throw new Error(`Cannot find form control at index ${t}`)}_forEachChild(t){this.controls.forEach((e,n)=>{t(e,n)})}_updateValue(){this.value=this.controls.filter(t=>t.enabled||this.disabled).map(t=>t.value)}_anyControls(t){return this.controls.some(e=>e.enabled&&t(e))}_setUpControls(){this._forEachChild(t=>this._registerControl(t))}_checkAllValuesPresent(t){this._forEachChild((e,n)=>{if(void 0===t[n])throw new Error(`Must supply a value for form control at index: ${n}.`)})}_allControlsDisabled(){for(const t of this.controls)if(t.enabled)return!1;return this.controls.length>0||this.disabled}_registerControl(t){t.setParent(this),t._registerOnCollectionChange(this._onCollectionChange)}}const S$={provide:t$,useExisting:st(()=>T$)},E$=(()=>Promise.resolve(null))();let T$=(()=>{class t extends t${constructor(t,e){super(),this.submitted=!1,this._directives=[],this.ngSubmit=new ca,this.form=new _$({},YB(t),JB(e))}ngAfterViewInit(){this._setUpdateStrategy()}get formDirective(){return this}get control(){return this.form}get path(){return[]}get controls(){return this.form.controls}addControl(t){E$.then(()=>{const e=this._findContainer(t.path);t.control=e.registerControl(t.name,t.control),s$(t.control,t),t.control.updateValueAndValidity({emitEvent:!1}),this._directives.push(t)})}getControl(t){return this.form.get(t.path)}removeControl(t){E$.then(()=>{const e=this._findContainer(t.path);e&&e.removeControl(t.name),c$(this._directives,t)})}addFormGroup(t){E$.then(()=>{const e=this._findContainer(t.path),n=new _$({});(function(t,e){a$(t,e)})(n,t),e.registerControl(t.name,n),n.updateValueAndValidity({emitEvent:!1})})}removeFormGroup(t){E$.then(()=>{const e=this._findContainer(t.path);e&&e.removeControl(t.name)})}getFormGroup(t){return this.form.get(t.path)}updateModel(t,e){E$.then(()=>{this.form.get(t.path).setValue(e)})}setValue(t){this.control.setValue(t)}onSubmit(t){return this.submitted=!0,e=this._directives,this.form._syncPendingControls(),e.forEach(t=>{const e=t.control;"submit"===e.updateOn&&e._pendingChange&&(t.viewToModelUpdate(e._pendingValue),e._pendingChange=!1)}),this.ngSubmit.emit(t),!1;var e}onReset(){this.resetForm()}resetForm(t){this.form.reset(t),this.submitted=!1}_setUpdateStrategy(){this.options&&null!=this.options.updateOn&&(this.form._updateOn=this.options.updateOn)}_findContainer(t){return t.pop(),t.length?this.form.get(t):this.form}}return t.\u0275fac=function(e){return new(e||t)(_s(qB,10),_s(HB,10))},t.\u0275dir=Qt({type:t,selectors:[["form",3,"ngNoForm","",3,"formGroup",""],["ng-form"],["","ngForm",""]],hostBindings:function(t,e){1&t&&xs("submit",function(t){return e.onSubmit(t)})("reset",function(){return e.onReset()})},inputs:{options:["ngFormOptions","options"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],features:[io([S$]),ls]}),t})();const C$={provide:e$,useExisting:st(()=>A$)},k$=(()=>Promise.resolve(null))();let A$=(()=>{class t extends e${constructor(t,e,n,r){super(),this.control=new b$,this._registered=!1,this.update=new ca,this._parent=t,this._setValidators(e),this._setAsyncValidators(n),this.valueAccessor=function(t,e){if(!e)return null;let n,r,i;return Array.isArray(e),e.forEach(t=>{t.constructor===$B?n=t:Object.getPrototypeOf(t.constructor)===FB?r=t:i=t}),i||r||n||null}(0,r)}ngOnChanges(t){this._checkForErrors(),this._registered||this._setUpControl(),"isDisabled"in t&&this._updateDisabled(t),function(t,e){if(!t.hasOwnProperty("model"))return!1;const n=t.model;return!!n.isFirstChange()||!Object.is(e,n.currentValue)}(t,this.viewModel)&&(this._updateValue(this.model),this.viewModel=this.model)}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}get path(){return this._parent?[...this._parent.path,this.name]:[this.name]}get formDirective(){return this._parent?this._parent.formDirective:null}viewToModelUpdate(t){this.viewModel=t,this.update.emit(t)}_setUpControl(){this._setUpdateStrategy(),this._isStandalone()?this._setUpStandalone():this.formDirective.addControl(this),this._registered=!0}_setUpdateStrategy(){this.options&&null!=this.options.updateOn&&(this.control._updateOn=this.options.updateOn)}_isStandalone(){return!this._parent||!(!this.options||!this.options.standalone)}_setUpStandalone(){s$(this.control,this),this.control.updateValueAndValidity({emitEvent:!1})}_checkForErrors(){this._isStandalone()||this._checkParentType(),this._checkName()}_checkParentType(){}_checkName(){this.options&&this.options.name&&(this.name=this.options.name),this._isStandalone()}_updateValue(t){k$.then(()=>{this.control.setValue(t,{emitViewToModelChange:!1})})}_updateDisabled(t){const e=t.isDisabled.currentValue,n=""===e||e&&"false"!==e;k$.then(()=>{n&&!this.control.disabled?this.control.disable():!n&&this.control.disabled&&this.control.enable()})}}return t.\u0275fac=function(e){return new(e||t)(_s(t$,9),_s(qB,10),_s(HB,10),_s(UB,10))},t.\u0275dir=Qt({type:t,selectors:[["","ngModel","",3,"formControlName","",3,"formControl",""]],inputs:{name:"name",isDisabled:["disabled","isDisabled"],model:["ngModel","model"],options:["ngModelOptions","options"]},outputs:{update:"ngModelChange"},exportAs:["ngModel"],features:[io([C$]),ls,ue]}),t})(),x$=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275dir=Qt({type:t,selectors:[["form",3,"ngNoForm","",3,"ngNativeValidate",""]],hostAttrs:["novalidate",""]}),t})(),O$=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=Gt({type:t}),t.\u0275inj=ft({}),t})();const D$={provide:UB,useExisting:st(()=>R$),multi:!0};function N$(t,e){return null==t?`${e}`:(e&&"object"==typeof e&&(e="Object"),`${t}: ${e}`.slice(0,50))}let R$=(()=>{class t extends FB{constructor(){super(...arguments),this._optionMap=new Map,this._idCounter=0,this._compareWith=Object.is}set compareWith(t){this._compareWith=t}writeValue(t){this.value=t;const e=this._getOptionId(t);null==e&&this.setProperty("selectedIndex",-1);const n=N$(e,t);this.setProperty("value",n)}registerOnChange(t){this.onChange=e=>{this.value=this._getOptionValue(e),t(this.value)}}_registerOption(){return(this._idCounter++).toString()}_getOptionId(t){for(const e of Array.from(this._optionMap.keys()))if(this._compareWith(this._optionMap.get(e),t))return e;return null}_getOptionValue(t){const e=function(t){return t.split(":")[0]}(t);return this._optionMap.has(e)?this._optionMap.get(e):t}}return t.\u0275fac=function(){let e;return function(n){return(e||(e=Dn(t)))(n||t)}}(),t.\u0275dir=Qt({type:t,selectors:[["select","formControlName","",3,"multiple",""],["select","formControl","",3,"multiple",""],["select","ngModel","",3,"multiple",""]],hostBindings:function(t,e){1&t&&xs("change",function(t){return e.onChange(t.target.value)})("blur",function(){return e.onTouched()})},inputs:{compareWith:"compareWith"},features:[io([D$]),ls]}),t})(),P$=(()=>{class t{constructor(t,e,n){this._element=t,this._renderer=e,this._select=n,this._select&&(this.id=this._select._registerOption())}set ngValue(t){null!=this._select&&(this._select._optionMap.set(this.id,t),this._setElementValue(N$(this.id,t)),this._select.writeValue(this._select.value))}set value(t){this._setElementValue(t),this._select&&this._select.writeValue(this._select.value)}_setElementValue(t){this._renderer.setProperty(this._element.nativeElement,"value",t)}ngOnDestroy(){this._select&&(this._select._optionMap.delete(this.id),this._select.writeValue(this._select.value))}}return t.\u0275fac=function(e){return new(e||t)(_s(ho),_s(po),_s(R$,9))},t.\u0275dir=Qt({type:t,selectors:[["option"]],inputs:{ngValue:"ngValue",value:"value"}}),t})();const M$={provide:UB,useExisting:st(()=>V$),multi:!0};function L$(t,e){return null==t?`${e}`:("string"==typeof e&&(e=`'${e}'`),e&&"object"==typeof e&&(e="Object"),`${t}: ${e}`.slice(0,50))}let V$=(()=>{class t extends FB{constructor(){super(...arguments),this._optionMap=new Map,this._idCounter=0,this._compareWith=Object.is}set compareWith(t){this._compareWith=t}writeValue(t){let e;if(this.value=t,Array.isArray(t)){const n=t.map(t=>this._getOptionId(t));e=(t,e)=>{t._setSelected(n.indexOf(e.toString())>-1)}}else e=(t,e)=>{t._setSelected(!1)};this._optionMap.forEach(e)}registerOnChange(t){this.onChange=e=>{const n=[];if(void 0!==e.selectedOptions){const t=e.selectedOptions;for(let e=0;e<t.length;e++){const r=t.item(e),i=this._getOptionValue(r.value);n.push(i)}}else{const t=e.options;for(let e=0;e<t.length;e++){const r=t.item(e);if(r.selected){const t=this._getOptionValue(r.value);n.push(t)}}}this.value=n,t(n)}}_registerOption(t){const e=(this._idCounter++).toString();return this._optionMap.set(e,t),e}_getOptionId(t){for(const e of Array.from(this._optionMap.keys()))if(this._compareWith(this._optionMap.get(e)._value,t))return e;return null}_getOptionValue(t){const e=function(t){return t.split(":")[0]}(t);return this._optionMap.has(e)?this._optionMap.get(e)._value:t}}return t.\u0275fac=function(){let e;return function(n){return(e||(e=Dn(t)))(n||t)}}(),t.\u0275dir=Qt({type:t,selectors:[["select","multiple","","formControlName",""],["select","multiple","","formControl",""],["select","multiple","","ngModel",""]],hostBindings:function(t,e){1&t&&xs("change",function(t){return e.onChange(t.target)})("blur",function(){return e.onTouched()})},inputs:{compareWith:"compareWith"},features:[io([M$]),ls]}),t})(),F$=(()=>{class t{constructor(t,e,n){this._element=t,this._renderer=e,this._select=n,this._select&&(this.id=this._select._registerOption(this))}set ngValue(t){null!=this._select&&(this._value=t,this._setElementValue(L$(this.id,t)),this._select.writeValue(this._select.value))}set value(t){this._select?(this._value=t,this._setElementValue(L$(this.id,t)),this._select.writeValue(this._select.value)):this._setElementValue(t)}_setElementValue(t){this._renderer.setProperty(this._element.nativeElement,"value",t)}_setSelected(t){this._renderer.setProperty(this._element.nativeElement,"selected",t)}ngOnDestroy(){this._select&&(this._select._optionMap.delete(this.id),this._select.writeValue(this._select.value))}}return t.\u0275fac=function(e){return new(e||t)(_s(ho),_s(po),_s(V$,9))},t.\u0275dir=Qt({type:t,selectors:[["option"]],inputs:{ngValue:"ngValue",value:"value"}}),t})(),U$=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=Gt({type:t}),t.\u0275inj=ft({imports:[[O$]]}),t})(),j$=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=Gt({type:t}),t.\u0275inj=ft({imports:[U$]}),t})(),B$=(()=>{class t{constructor(t,e){this.auth=t,this.router=e}ngOnInit(){}login(){console.log(this.email),console.log(this.password),mS(this.auth,this.email,this.password).then(t=>{this.router.navigate(["home"])}).catch(t=>{alert(t.message)})}}return t.\u0275fac=function(e){return new(e||t)(_s(IT),_s(Fd))},t.\u0275cmp=qt({type:t,selectors:[["app-login"]],decls:30,vars:2,consts:[[1,"container","center"],[1,"row"],[1,"col-md-4"],[1,"card"],[1,"card-head"],[1,"d-flex","justify-content-center"],[1,"display-6"],[1,"card-body"],["action","","method","get"],["type","email","placeholder","Email ID","name","email",1,"form-control",3,"ngModel","ngModelChange"],["type","password","placeholder","Password","name","password",1,"form-control",3,"ngModel","ngModelChange"],[1,"d-grid","gap-2"],["type","button","value","Login",1,"btn","btn-lg","btn-primary","btn-block",3,"click"],[1,"card-footer"],["routerLink","/signup"]],template:function(t,e){1&t&&(Cs(0,"br"),Cs(1,"br"),Cs(2,"br"),Cs(3,"br"),Es(4,"div",0),Es(5,"div",1),Cs(6,"div",2),Es(7,"div",2),Es(8,"div",3),Es(9,"div",4),Es(10,"div",5),Es(11,"p",6),Us(12," Trustmedicos"),Ts(),Ts(),Es(13,"div",5),Es(14,"h5"),Us(15,"Login"),Ts(),Ts(),Ts(),Es(16,"div",7),Es(17,"form",8),Es(18,"input",9),xs("ngModelChange",function(t){return e.email=t}),Ts(),Cs(19,"br"),Es(20,"input",10),xs("ngModelChange",function(t){return e.password=t}),Ts(),Cs(21,"br"),Es(22,"div",11),Es(23,"input",12),xs("click",function(){return e.login()}),Ts(),Ts(),Ts(),Ts(),Es(24,"div",13),Us(25," New user ? "),Es(26,"a",14),Us(27,"Register"),Ts(),Us(28," here "),Ts(),Ts(),Ts(),Cs(29,"div",2),Ts(),Ts()),2&t&&(ti(18),Is("ngModel",e.email),ti(2),Is("ngModel",e.password))},directives:[x$,i$,T$,$B,r$,A$,Ud],styles:[""]}),t})(),$$=(()=>{class t{constructor(t){this.router=t}ngOnInit(){var t;this.data=null===(t=this.router.getCurrentNavigation())||void 0===t?void 0:t.extras.state,console.log(this.data)}}return t.\u0275fac=function(e){return new(e||t)(_s(Fd))},t.\u0275cmp=qt({type:t,selectors:[["app-review"]],decls:39,vars:0,consts:[[1,"container"],[1,"row"],[1,"col-md-3"],[1,"col-md-6"],[1,"card"],[1,"card-head"],[1,"display-6"],[1,"card-body"],[1,"btn","btn-sm","btn-secondary"],["for","reportLabel"],["id","reportLabel",1,"form-select"],["for","reason"],["id","reason","cols","30","rows","5",1,"form-control"],[1,"d-grid","gap-2"],["type","submit","value","Submit review",1,"btn","btn-lg","btn-primary"]],template:function(t,e){1&t&&(Cs(0,"br"),Cs(1,"br"),Es(2,"div",0),Es(3,"div",1),Cs(4,"div",2),Es(5,"div",3),Es(6,"div",4),Es(7,"div",5),Es(8,"p",6),Us(9,"\xa0 Review #5656"),Ts(),Ts(),Es(10,"div",7),Es(11,"strong"),Us(12,"Website Title : "),Ts(),Us(13," \xa0 Google Home Page "),Cs(14,"br"),Es(15,"strong"),Us(16,"Website Link : "),Ts(),Us(17," \xa0 https://www.google.com/ "),Es(18,"button",8),Us(19,"Visit Website"),Ts(),Cs(20,"br"),Cs(21,"br"),Es(22,"label",9),Us(23,"Select your review"),Ts(),Es(24,"select",10),Es(25,"option"),Us(26,"Inappropriate"),Ts(),Es(27,"option"),Us(28,"Appropriate"),Ts(),Es(29,"option"),Us(30,"Unable to determine"),Ts(),Ts(),Cs(31,"br"),Es(32,"label",11),Us(33,"Reason"),Ts(),Cs(34,"textarea",12),Cs(35,"br"),Es(36,"div",13),Cs(37,"input",14),Ts(),Ts(),Ts(),Ts(),Cs(38,"div",2),Ts(),Ts())},directives:[P$,F$],styles:[""]}),t})();const q$=[{path:"",component:B$},{path:"login",component:B$},{path:"signup",component:(()=>{class t{constructor(t,e,n){this.auth=t,this.router=e,this.firestore=n}ngOnInit(){}register(){var t=this;return uf(function*(){t.password!=t.cpassword?alert("Password did not math"):DT(t.auth,t.email,t.password).then(e=>{t.user_id=e.user.uid,console.log(t.user_id);var n=OB(t.firestore,"users",t.user_id);RB(n,{name:t.uname,mail:t.email,trust_score:0}).then(t=>{console.log(t)}).catch(t=>{console.log(t)}),alert("Successfully Registered\n Please Login"),t.router.navigate(["/login"])}).catch(t=>{alert(t)})})()}}return t.\u0275fac=function(e){return new(e||t)(_s(IT),_s(Fd),_s(_B))},t.\u0275cmp=qt({type:t,selectors:[["app-signup"]],decls:34,vars:4,consts:[[1,"container"],[1,"row"],[1,"col-md-4"],[1,"card"],[1,"card-head"],[1,"d-flex","justify-content-center"],[1,"display-6"],[1,"card-body"],["action","","method","get"],["type","text","placeholder","Name","name","uname","ngModel","",1,"form-control",3,"ngModel","ngModelChange"],["type","email","placeholder","Email ID","name","email",1,"form-control",3,"ngModel","ngModelChange"],["type","password","placeholder","Password","name","password",1,"form-control",3,"ngModel","ngModelChange"],["type","password","placeholder","Confirm Password","name","cpassword",1,"form-control",3,"ngModel","ngModelChange"],[1,"d-grid","gap-2"],["type","button","value","Register",1,"btn","btn-lg","btn-primary","btn-block",3,"click"],[1,"card-footer"],["routerLink","/login"]],template:function(t,e){1&t&&(Cs(0,"br"),Cs(1,"br"),Cs(2,"br"),Cs(3,"br"),Es(4,"div",0),Es(5,"div",1),Cs(6,"div",2),Es(7,"div",2),Es(8,"div",3),Es(9,"div",4),Es(10,"div",5),Es(11,"p",6),Us(12," Trustmedicos"),Ts(),Ts(),Es(13,"div",5),Es(14,"h5"),Us(15,"Register"),Ts(),Ts(),Ts(),Es(16,"div",7),Es(17,"form",8),Es(18,"input",9),xs("ngModelChange",function(t){return e.uname=t}),Ts(),Cs(19,"br"),Es(20,"input",10),xs("ngModelChange",function(t){return e.email=t}),Ts(),Cs(21,"br"),Es(22,"input",11),xs("ngModelChange",function(t){return e.password=t}),Ts(),Cs(23,"br"),Es(24,"input",12),xs("ngModelChange",function(t){return e.cpassword=t}),Ts(),Cs(25,"br"),Es(26,"div",13),Es(27,"input",14),xs("click",function(){return e.register()}),Ts(),Ts(),Ts(),Ts(),Es(28,"div",15),Us(29," Existing user ? "),Es(30,"a",16),Us(31,"Login"),Ts(),Us(32," here "),Ts(),Ts(),Ts(),Cs(33,"div",2),Ts(),Ts()),2&t&&(ti(18),Is("ngModel",e.uname),ti(2),Is("ngModel",e.email),ti(2),Is("ngModel",e.password),ti(2),Is("ngModel",e.cpassword))},directives:[x$,i$,T$,$B,r$,A$,Ud],styles:[""]}),t})()},{path:"home",component:MB},{path:"review",component:$$}];let H$=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=Gt({type:t}),t.\u0275inj=ft({imports:[[Jd.forRoot(q$,{useHash:!0})],Jd]}),t})(),z$=(()=>{class t{constructor(){this.title="TrustmedicosDashboard"}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=qt({type:t,selectors:[["app-root"]],decls:1,vars:0,template:function(t,e){1&t&&Cs(0,"router-outlet")},directives:[Bd],styles:[""]}),t})();const K$={projectId:"trustmedicos-c3f2a",appId:"1:413045498012:web:2618f942d2ec53cb968d59",storageBucket:"trustmedicos-c3f2a.appspot.com",locationId:"europe-west",apiKey:"AIzaSyBNps55n8XN4rAO1z7KWtSOmyv0nFXJDTA",authDomain:"trustmedicos-c3f2a.firebaseapp.com",messagingSenderId:"413045498012",measurementId:"G-98BGDR20BN"};function G$(t){return hw((e=t)[e.length-1])?t.pop():void 0;var e}function W$(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var n=G$(t);return Tw(t,n)}function Q$(t,e){return Uv(function(n,r){var i=0;n.subscribe(jv(r,function(n){return t.call(e,n,i++)&&r.next(n)}))})}function Y$(t,e){return Uv(function(n,r){var i=null,s=0,o=!1,a=function(){return o&&!i&&r.complete()};n.subscribe(jv(r,function(n){null==i||i.unsubscribe();var o=0,u=s++;Iw(t(n,u)).subscribe(i=jv(r,function(t){return r.next(e?e(n,t,u,o++):t)},function(){i=null,a()}))},function(){o=!0,a()}))})}var J$=sv(function(t){return function(){t(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"}}),X$=function(t){function e(){var e=t.call(this)||this;return e.closed=!1,e.currentObservers=null,e.observers=[],e.isStopped=!1,e.hasError=!1,e.thrownError=null,e}return Qy(e,t),e.prototype.lift=function(t){var e=new Z$(this,this);return e.operator=t,e},e.prototype._throwIfClosed=function(){if(this.closed)throw new J$},e.prototype.next=function(t){var e=this;kv(function(){var n,r;if(e._throwIfClosed(),!e.isStopped){e.currentObservers||(e.currentObservers=Array.from(e.observers));try{for(var i=Zy(e.currentObservers),s=i.next();!s.done;s=i.next())s.value.next(t)}catch(o){n={error:o}}finally{try{s&&!s.done&&(r=i.return)&&r.call(i)}finally{if(n)throw n.error}}}})},e.prototype.error=function(t){var e=this;kv(function(){if(e._throwIfClosed(),!e.isStopped){e.hasError=e.isStopped=!0,e.thrownError=t;for(var n=e.observers;n.length;)n.shift().error(t)}})},e.prototype.complete=function(){var t=this;kv(function(){if(t._throwIfClosed(),!t.isStopped){t.isStopped=!0;for(var e=t.observers;e.length;)e.shift().complete()}})},e.prototype.unsubscribe=function(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null},Object.defineProperty(e.prototype,"observed",{get:function(){var t;return(null===(t=this.observers)||void 0===t?void 0:t.length)>0},enumerable:!1,configurable:!0}),e.prototype._trySubscribe=function(e){return this._throwIfClosed(),t.prototype._trySubscribe.call(this,e)},e.prototype._subscribe=function(t){return this._throwIfClosed(),this._checkFinalizedStatuses(t),this._innerSubscribe(t)},e.prototype._innerSubscribe=function(t){var e=this,n=this,r=n.observers;return n.hasError||n.isStopped?cv:(this.currentObservers=null,r.push(t),new uv(function(){e.currentObservers=null,av(r,t)}))},e.prototype._checkFinalizedStatuses=function(t){var e=this,n=e.isStopped;e.hasError?t.error(e.thrownError):n&&t.complete()},e.prototype.asObservable=function(){var t=new Vv;return t.source=this,t},e.create=function(t,e){return new Z$(t,e)},e}(Vv),Z$=function(t){function e(e,n){var r=t.call(this)||this;return r.destination=e,r.source=n,r}return Qy(e,t),e.prototype.next=function(t){var e,n;null===(n=null===(e=this.destination)||void 0===e?void 0:e.next)||void 0===n||n.call(e,t)},e.prototype.error=function(t){var e,n;null===(n=null===(e=this.destination)||void 0===e?void 0:e.error)||void 0===n||n.call(e,t)},e.prototype.complete=function(){var t,e;null===(e=null===(t=this.destination)||void 0===t?void 0:t.complete)||void 0===e||e.call(t)},e.prototype._subscribe=function(t){var e,n;return null!==(n=null===(e=this.source)||void 0===e?void 0:e.subscribe(t))&&void 0!==n?n:cv},e}(X$);function tq(t,e){return t===e}function eq(){return void 0===(t=1)&&(t=1/0),kw(Mv,t);var t}function nq(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return eq()(Tw(t,G$(t)))}class rq{constructor(t){return t}}const iq="analytics";dw(0,300).pipe(Aw(()=>Tw(tw(iq))),xw());const sq=Xv.async,oq=lw(function(t=dp()){const e=up(t=Nf(t),ry);return e.isInitialized()?e.getImmediate():qy(t)},!0),aq=(lw(qy,!0),lw(zy,!0)),uq=(lw(function(t,e){t=Nf(t),function(t,e){return $y.apply(this,arguments)}(Oy[t.app.options.appId],e).catch(t=>oy.error(t))},!0),lw(function(t,e,n){t=Nf(t),function(t,e,n,r){return Uy.apply(this,arguments)}(Py,Oy[t.app.options.appId],e,n).catch(t=>oy.error(t))},!0),lw(function(t){if(Vy)throw py.create("already-initialized");t.dataLayerName&&(My=t.dataLayerName),t.gtagName&&(Ly=t.gtagName)},!0),lw(function(t,e,n){t=Nf(t),function(t,e,n,r){return jy.apply(this,arguments)}(Py,Oy[t.app.options.appId],e,n).catch(t=>oy.error(t))},!0));lw(function(t,e,n){t=Nf(t),function(t,e,n,r){return By.apply(this,arguments)}(Py,Oy[t.app.options.appId],e,n).catch(t=>oy.error(t))},!0);let cq=(()=>{class t{constructor(t,e,n){let r;this.disposables=[],gp("angularfire",zv.full,"user-tracking"),this.initialized=e.runOutsideAngular(()=>new Promise(t=>{r=t})),sq().then(()=>{const e=n.get(rq);e?this.disposables=[OT(t).subscribe(t=>{uq(e,null==t?void 0:t.uid),r()})]:r()})}ngOnDestroy(){this.disposables.forEach(t=>t.unsubscribe())}}return t.\u0275fac=function(e){return new(e||t)(Jn(IT),Jn(Da),Jn(us))},t.\u0275prov=dt({token:t,factory:t.\u0275fac}),t})();const lq="screen_class";let hq=Math.floor(Math.random()*(Math.pow(2,32)-1))-Math.pow(2,31);const dq={},fq=t=>{const e=[t.screen_class,t.outlet].join("#");if(dq.hasOwnProperty(e))return dq[e];{const t=hq++;return dq[e]=t,t}};let pq=(()=>{class t{constructor(t,e,n,r,i,s){gp("angularfire",zv.full,"screen-tracking"),sq().then(()=>{const o=s.get(rq);t&&o&&r.runOutsideAngular(()=>{this.disposable=((t,e,n)=>{return t.events.pipe(Q$(t=>t instanceof El)).pipe(Y$(r=>{var i;const s=(null===(i=t.parseUrl(t.url.replace(/(?:\().+(?:\))/g,t=>t.replace("://",":///"))).root.children[r.snapshot.outlet])||void 0===i?void 0:i.toString())||"",o=t.routerState.root.children.map(t=>t).find(t=>t.outlet===r.snapshot.outlet);if(!o)return W$(null);let a=o;for(;a.firstChild;)a=a.firstChild;const u=a.pathFromRoot.map(t=>{var e;return null===(e=t.routeConfig)||void 0===e?void 0:e.path}).filter(t=>t).join("/")||"/",c={screen_name:u,page_path:`/${s}`,firebase_event_origin:"auto",firebase_screen:u,outlet:r.snapshot.outlet};e&&(c.page_title=e.getTitle());let l=o.component;if(l){if(l===zh){let t=r.snapshot;for(;t.firstChild;)t=t.firstChild;l=t.component}}else l=r.snapshot.component;if("string"==typeof l)return W$(Object.assign(Object.assign({},c),{[lq]:l}));if(l){const t=n.resolveComponentFactory(l);return W$(Object.assign(Object.assign({},c),{[lq]:t.selector}))}return W$(null)}),Q$(t=>!!t),Cw(t=>Object.assign({firebase_screen_class:t.screen_class,firebase_screen_id:fq(t)},t)),(r=t=>t.outlet,Uv(function(t,e){var n;n=i;var a=new Map,u=function(t){a.forEach(t),t(e)},c=function(t){return u(function(e){return e.error(t)})},l=0,h=!1,d=new Bv(e,function(t){try{var i=r(t),u=a.get(i);if(!u){a.set(i,u=o?o():new X$);var f=(g=i,m=u,(y=new Vv(function(t){l++;var e=m.subscribe(t);return function(){e.unsubscribe(),0==--l&&h&&d.unsubscribe()}})).key=g,y);if(e.next(f),s){var p=jv(u,function(){u.complete(),null==p||p.unsubscribe()},void 0,void 0,function(){return a.delete(i)});d.add(Iw(s(f)).subscribe(p))}}u.next(n?n(t):t)}catch(v){c(v)}var g,m,y},function(){return u(function(t){return t.complete()})},c,function(){return a.clear()},function(){return h=!0,0===l});t.subscribe(d)})),kw(t=>{return t.pipe((void 0===n&&(n=Mv),e=null!=(e=(t,e)=>JSON.stringify(t)===JSON.stringify(e))?e:tq,Uv(function(t,r){var i,s=!0;t.subscribe(jv(r,function(t){var o=n(t);!s&&e(i,o)||(s=!1,i=o,r.next(t))}))})),function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var n=G$(t);return Uv(function(e,r){(n?nq(t,e,n):nq(t,e)).subscribe(r)})}(void 0),Uv(function(t,e){var n,r=!1;t.subscribe(jv(e,function(t){var i=n;n=t,r&&e.next([i,t]),r=!0}))}),Cw(([t,e])=>t?Object.assign({firebase_previous_class:t.screen_class,firebase_previous_screen:t.screen_name,firebase_previous_id:t.firebase_screen_id},e):e));var e,n}));var r,i,s,o})(t,e,n).pipe(Y$(t=>Jy(this,void 0,void 0,function*(){return i&&(yield i.initialized),aq(o,"screen_view",t)}))).subscribe()})})}ngOnDestroy(){this.disposable&&this.disposable.unsubscribe()}}return t.\u0275fac=function(e){return new(e||t)(Jn(Fd,8),Jn(pc,8),Jn(ao),Jn(Da),Jn(cq,8),Jn(us))},t.\u0275prov=dt({token:t,factory:t.\u0275fac}),t})();const gq=new Mn("angularfire2.analytics-instances");function mq(t){return(e,n)=>{if(!Xv.sync())return null;const r=e.runOutsideAngular(()=>t(n));return new rq(r)}}const yq={provide:class{constructor(){return tw(iq)}},deps:[[new er,gq]]},vq={provide:rq,useFactory:function(t,e){if(!Xv.sync())return null;const n=Zv(iq,t,e);return n&&new rq(n)},deps:[[new er,gq],Ow]};let wq=(()=>{class t{constructor(t,e){gp("angularfire",zv.full,"analytics")}}return t.\u0275fac=function(e){return new(e||t)(Jn(pq,8),Jn(cq,8))},t.\u0275mod=Gt({type:t}),t.\u0275inj=ft({providers:[vq,yq,{provide:la,useValue:Xv.async,multi:!0}]}),t})();function bq(t,...e){return{ngModule:wq,providers:[{provide:gq,useFactory:mq(t),multi:!0,deps:[Da,us,iw,Dw,...e]}]}}let _q=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=Gt({type:t,bootstrap:[z$]}),t.\u0275inj=ft({providers:[pq,cq],imports:[[dc,H$,j$,Vw(()=>Fw(K$)),bq(()=>oq()),xT(()=>NT()),AB(()=>NB())]]}),t})();(function(){if(Ha)throw new Error("Cannot enable prod mode after platform setup.");qa=!1})(),lc().bootstrapModule(_q).catch(t=>console.error(t))}},t=>{"use strict";t(t.s=66)}]);